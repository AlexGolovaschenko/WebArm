{"version":3,"sources":["backendAPI/axiosClient.js","backendAPI/localSettings.js","backendAPI/auth.js","utils/protectedRoute.js","utils/useLocalStorage.js","device/utils/sortWidgetsByOrder.js","device/components/DeviceSidebar.js","device/components/DeviceHeader.js","utils/useTargetClick.js","Widgets/components/TagsGraph/Graph.js","Widgets/components/TagsGraph/GraphWithCrosshair.js","Widgets/components/TagsGraph/Legend.js","Widgets/components/TagsGraph/Toolbar.js","base/components/Loader.js","Widgets/components/TagsGraph/TagsHistoricalGraph.js","Widgets/components/TagsGraph/GraphColors.js","Widgets/WidgetGraph.js","Widgets/components/TagsList/TagsCurrentValueRow.js","Widgets/components/TagsList/TagsCurrentValueList.js","Widgets/WidgetTable.js","Widgets/components/TagsIndicator/TagIndicator.js","Widgets/WidgetIndicator.js","Widgets/components/EventsLog/RecordsRow.js","Widgets/components/EventsLog/RecordsList.js","Widgets/WidgetEventsLog.js","Widgets/renderWidgets.js","device/pages/overview.js","device/pages/settings.js","device/pages/eventsLog.js","device/pages/graphs.js","backendAPI/backendAPI.js","base/forms/forms.js","device/pages/tagDetail.js","device/pages/deviceDetail.js","base/pages/pageNotFound.js","device/components/AdminPageDeviceStatusBar.js","device/pages/deviceAdmin.js","device/pages/widgetsAdmin.js","device/pages/eventsAdmin.js","device/pages/eventDetail.js","device/deviceApp.js","company/components/CompanySidebar.js","company/components/DeviceCard.js","company/components/FacilityCard.js","company/pages/overview.js","company/pages/employers.js","company/pages/facilitiesOnMap.js","company/pages/profile.js","company/pages/companyDetail.js","company/companyApp.js","users/pages/login.js","users/pages/registration.js","users/pages/profile.js","users/components/LogoutBtn.js","base/components/Navbar.js","base/pages/welcome.js","App.js","reportWebVitals.js","index.js"],"names":["axiosInstance","axios","create","baseURL","timeout","headers","Authorization","localStorage","getItem","Content-Type","accept","interceptors","response","use","error","originalRequest","config","status","url","Promise","reject","data","code","statusText","refreshToken","tokenParts","JSON","parse","atob","split","now","Math","ceil","Date","exp","post","refresh","then","setItem","access","defaults","catch","err","console","log","auth","Auth","Object","classCallCheck","this","authenticated","onLogin","onLogout","onUserInfoReaded","cb","get","_onLogin","_onLogout","username","password","refresh_token","removeItem","_context3","t0","request","objectSpread","userInfo","readUserInfo","clearUserInfo","ProtectedRoute","_ref","Component","component","rest","objectWithoutProperties","react_default","a","createElement","react_router","assign","render","props","isAuthenticated","to","pathname","state","from","location","useLocalStorage","key","defaultValue","_useState","useState","window","saved","getStorageValue","_useState2","slicedToArray","value","setValue","useEffect","stringify","sortWidgetsByOrder","template","widgets","sort","b","KeyA","parseInt","order","KeyB","Sidebar","_React$useState","React","_React$useState2","displaySubMenu","setDisplaySubMenu","deviceId","className","style","overflow","id","role","aria-orientation","react_router_dom","activeClassName","concat","fontSize","onClick","Fragment","BASE_URL","DeviceHeader","deviceData","setDeviceData","device_id","readDeviceParameters","params","responce","deviceParametersUpdateInterval","setInterval","clearInterval","name","is_online","verbose_last_update","useTargetClick","ref","callback","handleClick","e","current","contains","target","document","addEventListener","removeEventListener","Graph","_this","displayedTags","tags","filter","tag","disabled","resetZoomButton","lastDrawLocation","setLastDrawLocation","replace","has_displayed_tags","forEach","values","length","es","margin","left","right","top","bottom","xType","animation","xDomain","yDomain","yPadding","stroke","line","tickTotal","map","color","curve_color","tag_id","onBrushEnd","area","onDrag","setState","dontCheckIfEmpty","x","y","_React$useState3","_React$useState4","crosshairValues","setCrosshairValues","crosshairData","title","tag_name","_onNearestX","index","d","onMouseLeave","onNearestX","point","size","backgroundColor","background","colSpan","time","s","Intl","DateTimeFormat","dateStyle","timeStyle","format","format_time","paddingTop","Legend","searchText","setSearchText","items","searchable_discrete_color_legend_default","height","onSearchChange","searchPlaceholder","onItemClick","item","Toolbar","showRangeForm","setShowRangeForm","_useState3","_useState4","activeButton","setActiveButton","changeGraphInterval","toggleActiveButton","btn","getActiveCalss","type","RangeForm","Loader","TagsHistoricalGraph","setModal","crosshair","setCrosshair","graphCard","useRef","graphContainer","modalButton","crosshairButton","legendContainer","tagsHistory","GRAPH_HEIGH","toggleModal","cl","includes","legend","toggleCroshair","width","textDecoration","outline","boxShadow","loading","Loader_Loader","GraphWithCrosshair","TagsGraph_Graph","toggleCurveDisplay","toolbar","colors","getColor","clorsNumber","WidgetGraph","setLoading","interval","resolution","widget","graphInterval","setGraphInterval","_React$useState5","_React$useState6","setTagsHistory","readTagsHistory","prepared_tags","tag_code","add_date","prev","fltr","entry","updateTagsHistory","loadingTimeout","setTimeout","graphUpdateInterval","clearTimeout","TagsGraph_TagsHistoricalGraph","n","TagsCurrentValueRow","columns","indexOf","TagsCurrentValueList","TagsList_TagsCurrentValueRow","WidgetTable","setTags","readDeviceTags","tagsUpdateInterval","TagsList_TagsCurrentValueList","TagIndicator","addTextRight","addTextLeft","toFixed","precision","WidgetIndicator","record","format_date","date","arguments","undefined","message","toggleCategorySelection","categories","category_selection_panel","CategorySelectionPanel","records","RecordsTable","NoRecords","PaginationBar","readNextPage","readPreviousPage","changePage","pagination","RecordsRow_TagsCurrentValueRow","category","CategorySecetionButton","selected","children","list","Array","apply","num_pages","active","page_number","minWidth","WidgetEventsLog","setRecords","setCategories","_React$useState7","next","previous","_React$useState8","setPagination","_React$useState9","_React$useState10","page","setPage","readLogPage","selected_category_codes","results","readLogRecords","updateFirstPage","RecordsList_TagsCurrentValueList","toggle_index","RenderWidgets","widgetsTemplate","WidgetRender","min","DeviceOverviewPage","useParams","DeviceSettingsPage","WidgetsTemplate","DeviceEventsLogPage","getCompanyParameters","cb_success","cb_error","cb_finally","backendApiRequest","GET","postCompanyParameters","parameters","body","POST","getDeviceParameters","getDeviceTagsParameters","tags_list","postDeviceTagsParameters","tags_parameters","getEventsConfig","events_list","events_id","postEventsConfig","events_parameters","deleteEvents","DELETE","_callee","method","endpoint","_args","backendAPI_regeneratorRuntime","wrap","_context","sent","t1","abrupt","t2","delete","Error","stop","lableDefaultClassName","inputDefaultClassName","TextField","htmlFor","titel","placeholder","onChange","ErrorMessage","errors","CommentMessage","comment","NumberField","max","SelectField","hidden","options","option","MultipleSelectField","multiple","CheckboxField","checked","FormContainer","maxWidth","getSelectedOptions","i","l","push","TagDetailPage","_useParams","tagParameters","setTagParameters","formErrors","setFormErrors","history","useHistory","TagDetailForm","submitTagParameters","tag_parameters","responce_data","errors_data","cancelChanges","deleteTag","deleteDeviceTags","TagCreatePage","_useState5","_useState6","data_type","modbus_parameters","register_address","read_function","write_function","_useState7","_useState8","setTag","onSubmit","onCancel","onDelete","buttonsStyle","preventDefault","non_field_errors","DeviceConfigPage","deviceParameters","setDeviceParameters","deviceParametersFormErrors","setDeviceParametersFormErrors","deviceModbusParameters","setDeviceModbusParameters","deviceModbusParametersFormErrors","setDeviceModbusParametersFormErrors","_useState9","_useState10","deviceTagsParameters","setDeviceTagsParameters","loading1","setLoading1","loading2","setLoading2","loading3","setLoading3","getDeviceModbusParameters","DeviceConfigsForm","submitDeviceConfig","device_parameters","postDeviceParameters","DeviceModbusParametersForm","submitModbusParameters","postDeviceModbusParameters","TagsList","_useState11","_useState12","setParameters","polling_period","_useState13","_useState14","protocol_type","device_address","baudrate","address_size","parity","stopbit","packet_timout","bit_timout","lower_byte_forward","lower_register_forward","allow_group_reading","TagsListEntry","Page404","DeviceStatusBar","DeviceAdminPage","minHeight","exact","path","WidgetsAdminPage","updateWidgetsTemplate","setWidgetsTemplate","selectedWidget","setSelectedWidget","displayWidget","setDisplayWidget","rerenderWidgetForm","addWidgetToTemplate","WidgetsGrid","changeSelectedWidget","widgetNumber","WidgetsControlPanel","addWidget","DefaultTable","DefaultGraph","DefaultIndicator","saveWidgetsTemplate","WidgetForm","updateWidget","WidgetData","wt","w","deleteWidget","splice","content","btnAddClass","widgetsAdmin_WidgetPreview","WidgetPreview","show","setShow","handleClose","ModalSelectWidgetType","handleAddWidget","WTableForm","WGraphForm","WIndicatorForm","widgetsAdmin_FormContainer","WidgetTypeButton","tagsOptions","EventsAdminPage","events","setEvents","EventsList","handlEventDelete","event_id","event","toggleEventEnable","enable","ev","NoEvents","EventsListEntry","raise_message","is_active","EventDetailPage","setEvent","eventFormErrors","setEventFromErrors","EventForm","EventCreatePage","defaultEventSettings","device","expression","data-toggle","data-target","fall_message","raise_time","date_style","time_style","DeviceApp","newTemplate","postWidgetsTemplate","getWidgetsTemplate","graphs_DeviceOverviewPage","deviceApp_regeneratorRuntime","_callee2","template_data","_context2","DeviceCard","last_update","yesterday","setDate","getDate","formatter","hour","minute","month","day","FacilityCard","facilityInfo","devices","components_DeviceCard","CompanyOverviewPage","companyInfo","setCompanyInfo","isExist","company","CompanyOverviewBlock","CompanyDoesntExistBlock","facilities","FacilityOverviewBlock","FacilityDoesntExistBlock","facility","components_FacilityCard","alert","EmployersPage","FacilitiesOnMapPage","CompanyProfilePage","CompanyDetailPage","companyParams","setCompanyParams","CompanyDetailForm","companyParameters","submitCompanyParameters","CompanyCreatePage","setCompany","CompanyApp","CompanySidebar_Sidebar","Login","possibleConstructorReturn","getPrototypeOf","call","handleChange","bind","assertThisInitialized","handleSubmit","defineProperty","_this2","login","inputFieldClassName","Signup","email","stack","ProfilePage","first_name","last_name","LogoutBtn","handleLogout","logout","withRouter","Navbar","authed","zIndex","switchThemaHandler","darkThema","components_LogoutBtn","WelcomePage","border","CardContainer","UpdateDescriptionContainer","UpdateDescriptionTitle","UpdateDescriptionHeader","UpdateDescriptionMessage","App","_useLocalStorage","_useLocalStorage2","setDarkThema","setAuthed","setUserInfo","handle","useFullScreenHandle","setCssThema","checkAuthentication","ui","root","getElementById","enter","index_modern","autoPlay","muted","loop","src","thema","Registration","protectedRoute_ProtectedRoute","reportWebVitals","onPerfEntry","Function","__webpack_require__","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","App_App"],"mappings":"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","file":"static/js/main.9b878e75.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\nimport getBaseUrl from './localSettings'\r\nconst baseURL = getBaseUrl();\r\n\r\nconst axiosInstance = axios.create({\r\n    baseURL: baseURL,\r\n    timeout: 60000,\r\n    headers: {\r\n        'Authorization': \"JWT \" + localStorage.getItem('access_token'),\r\n        'Content-Type': 'application/json',\r\n        'accept': 'application/json'\r\n    }\r\n});\r\n\r\n\r\naxiosInstance.interceptors.response.use(\r\n    response => response,\r\n    error => {\r\n        const originalRequest = error.config;\r\n\r\n        // Prevent infinite loops\r\n        if (error.response.status === 401 && originalRequest.url === '/user/token/refresh/') {\r\n            // window.location.href = '/user/login/';                  \r\n            return Promise.reject(error);\r\n        }\r\n\r\n        if (error.response.data.code === \"token_not_valid\" &&\r\n            error.response.status === 401 && \r\n            error.response.statusText === \"Unauthorized\") \r\n            {\r\n                const refreshToken = localStorage.getItem('refresh_token');\r\n\r\n                if (refreshToken){\r\n                    const tokenParts = JSON.parse(atob(refreshToken.split('.')[1]));\r\n\r\n                    // exp date in token is expressed in seconds, while now() returns milliseconds:\r\n                    const now = Math.ceil(Date.now() / 1000);\r\n\r\n                    if (tokenParts.exp > now) {\r\n                        return axiosInstance\r\n                        .post('/user/token/refresh/', {refresh: refreshToken})\r\n                        .then((response) => {\r\n            \r\n                            localStorage.setItem('access_token', response.data.access);\r\n                            localStorage.setItem('refresh_token', response.data.refresh);\r\n            \r\n                            axiosInstance.defaults.headers['Authorization'] = \"JWT \" + response.data.access;\r\n                            originalRequest.headers['Authorization'] = \"JWT \" + response.data.access;\r\n            \r\n                            return axiosInstance(originalRequest);\r\n                        })\r\n                        .catch(err => {\r\n                            console.log(err)\r\n                        });\r\n                    }else{\r\n                        console.log(\"Refresh token is expired\", tokenParts.exp, now);\r\n                        // window.location.href = 'user/login/';\r\n                    }\r\n                }else{\r\n                    console.log(\"Refresh token not available.\")\r\n                    // window.location.href = 'user/login/';\r\n                }\r\n        }\r\n      \r\n     \r\n      // specific error handling done elsewhere\r\n      return Promise.reject(error);\r\n  }\r\n);\r\n\r\n\r\nexport default axiosInstance","\r\n\r\nexport default function getBaseUrl(){\r\n    return \"http://engine.ci-cloud.online\"\r\n    // return \"http://localhost:8000\"\r\n}","import axiosInstance from \"./axiosClient\";\r\n\r\nclass Auth{\r\n    constructor() {\r\n        this.authenticated = false;\r\n        this.onLogin = ()=>{};\r\n        this.onLogout = ()=>{};\r\n        this.onUserInfoReaded = ()=>{};\r\n    }\r\n\r\n    async checkAuthentication (cb) {\r\n        try {\r\n            const response = await axiosInstance.get('/user/token/check/')\r\n            if (response) {\r\n                this._onLogin();\r\n            } else {\r\n                this._onLogout();\r\n            }\r\n        } catch (error) {\r\n            this._onLogout();\r\n        }    \r\n        cb();         \r\n    }\r\n\r\n    async login(username, password, cb) {\r\n        try {\r\n            const response = await axiosInstance.post('/user/token/obtain/', {\r\n              username: username,\r\n              password: password\r\n            });\r\n            axiosInstance.defaults.headers['Authorization'] = \"JWT \" + response.data.access;\r\n            localStorage.setItem('access_token', response.data.access);\r\n            localStorage.setItem('refresh_token', response.data.refresh);\r\n            this._onLogin();\r\n            cb();\r\n        } catch (error) {\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    async logout(cb) {\r\n        try {\r\n            await axiosInstance.post('user/token/blacklist/', {\r\n                \"refresh_token\": localStorage.getItem(\"refresh_token\")\r\n            });\r\n            localStorage.removeItem('access_token');\r\n            localStorage.removeItem('refresh_token');\r\n            axiosInstance.defaults.headers['Authorization'] = null;\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n        this._onLogout();\r\n        cb();        \r\n    }\r\n\r\n    isAuthenticated() {\r\n        return this.authenticated;\r\n    }\r\n\r\n    async readUserInfo(){\r\n        const request = await axiosInstance.get('/user/info/')\r\n        this.onUserInfoReaded( { ...request.data } )\r\n    }\r\n\r\n    clearUserInfo(){\r\n        this.userInfo = {}\r\n        this.onUserInfoReaded( {} )\r\n    }\r\n\r\n    _onLogin () {\r\n        this.authenticated = true;\r\n        this.onLogin();\r\n        this.readUserInfo();\r\n    }\r\n    _onLogout () {\r\n        this.authenticated = false;\r\n        this.onLogout();\r\n        this.clearUserInfo();        \r\n    }\r\n}\r\n\r\nexport default new Auth()","import React from 'react' \r\nimport {Route, Redirect} from 'react-router-dom'\r\n\r\nimport auth from '../backendAPI/auth' \r\n\r\n\r\n\r\nexport const ProtectedRoute = ({component: Component, ...rest}) => {\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) => {\r\n        if (auth.isAuthenticated()) {\r\n          return <Component {...props} />\r\n        } else {\r\n          return <Redirect to={{pathname: '/user/login', state: {from: props.location}}} />\r\n        }\r\n      }}\r\n    />\r\n  )\r\n}","import { useState, useEffect } from \"react\";\r\n\r\nfunction getStorageValue(key, defaultValue) {\r\n  // getting stored value\r\n  if (typeof window !== \"undefined\") {\r\n    const saved = localStorage.getItem(key);\r\n    const initial = saved !== null ? JSON.parse(saved) : defaultValue;\r\n    return initial;\r\n  }\r\n}\r\n\r\nexport const useLocalStorage = (key, defaultValue) => {\r\n  const [value, setValue] = useState(() => {\r\n    return getStorageValue(key, defaultValue);\r\n  });\r\n\r\n  useEffect(() => {\r\n    // storing input name\r\n    localStorage.setItem(key, JSON.stringify(value));\r\n  }, [key, value]);\r\n\r\n  return [value, setValue];\r\n};\r\n\r\n\r\n// TODO:\r\n// if (global.localStorage) {\r\n// }","\r\n\r\nexport default function sortWidgetsByOrder(template) {\r\n    if (template === null || template.widgets === null) {\r\n      return {'widgets':[]}\r\n    }\r\n\r\n    let widgets = template.widgets;\r\n    if (widgets) {\r\n      widgets.sort( (a, b) => {\r\n          var KeyA = parseInt(a.order)\r\n          var KeyB = parseInt(b.order)\r\n          if (KeyA < KeyB) return -1;\r\n          if (KeyA > KeyB) return 1;\r\n          return 0;\r\n        });\r\n    }\r\n    return {'widgets':widgets};\r\n}","import React from 'react'\r\nimport {NavLink} from 'react-router-dom'\r\n\r\nexport default function Sidebar(props) {\r\n  const [displaySubMenu, setDisplaySubMenu] = React.useState(false)\r\n  const {deviceId} = props\r\n\r\n  return (\r\n    <div className=\"col-2 m-0 p-0\">\r\n      <div className=\"sidebar-bg-color-primary p-2 h-100\">\r\n        <div className=\"p-1\">\r\n\r\n          <div className=\"nav flex-column nav-pills\" style={{overflow: 'hidden'}} id=\"v-pills-tab\" role=\"tablist\" aria-orientation=\"vertical\">\r\n              <NavLink className=\"nav-link sidebar-text-color-primary btn remove-outline\" activeClassName=\"sidebar-bg-color-secondary\" to={`/device/${deviceId}/overview/`}>\r\n                <div className=\"d-inline-flex w-100 justify-content-center justify-content-lg-start\">\r\n                  <i className='fas fa-home' style={{fontSize:'1.3em'}}></i>\r\n                  <span className='pl-3 d-none d-lg-inline text-left'>Обзор</span>\r\n                </div>\r\n              </NavLink>\r\n              <NavLink className=\"nav-link sidebar-text-color-primary btn remove-outline\" activeClassName=\"sidebar-bg-color-secondary\" to={`/device/${deviceId}/settings/`}>\r\n                <div className=\"d-inline-flex w-100 justify-content-center justify-content-lg-start \">\r\n                  <i className='far fa-edit' style={{fontSize:'1.3em'}}></i>\r\n                  <span className='pl-3 d-none d-lg-inline text-left'>Настройки</span>\r\n                </div> \r\n              </NavLink>\r\n              <NavLink className=\"nav-link sidebar-text-color-primary btn remove-outline\" activeClassName=\"sidebar-bg-color-secondary\" to={`/device/${deviceId}/graphs/`}>\r\n                <div className=\"d-inline-flex w-100 justify-content-center justify-content-lg-start\">\r\n                  <i className='far fa-chart-bar' style={{fontSize:'1.3em'}}></i>\r\n                  <span className='pl-3 d-none d-lg-inline text-left'>Графики</span>\r\n                </div>\r\n              </NavLink>\r\n              <NavLink className=\"nav-link sidebar-text-color-primary btn remove-outline\" activeClassName=\"sidebar-bg-color-secondary\" to={`/device/${deviceId}/events/`}> \r\n                <div className=\"d-inline-flex w-100 justify-content-center justify-content-lg-start\">\r\n                  <i className='far fa-bell' style={{fontSize:'1.3em'}}></i>\r\n                  <span className='pl-3 d-none d-lg-inline text-left'>Журнал</span>\r\n                </div>\r\n              </NavLink>\r\n            </div>\r\n\r\n\r\n            <div className=\"nav flex-column nav-pills\" style={{overflow: 'hidden'}} >              \r\n              <div className='border-top mt-3 pt-3 border-secondary'></div>\r\n              <button className=\"nav-link sidebar-text-color-primary btn remove-outline\" onClick={()=>{setDisplaySubMenu(!displaySubMenu)}}>\r\n                <div className=\"d-inline-flex w-100 justify-content-center justify-content-lg-start\">\r\n                  <i className='\tfas fa-list py-1' style={{fontSize:'1.3em'}}></i>\r\n                  <span className='pl-3 d-none d-lg-inline text-left'>Администрирование</span>\r\n                  <i className='fas fa-caret-down py-1 pl-1 ml-auto d-none d-lg-inline' ></i>\r\n                </div>\r\n              </button>\r\n\r\n              {displaySubMenu && <React.Fragment>\r\n                <NavLink className=\"nav-link sidebar-text-color-primary btn remove-outline\" activeClassName=\"sidebar-bg-color-secondary\" to={`/device/${deviceId}/admin/config/`}> \r\n                  <div className=\"d-inline-flex w-100 justify-content-center justify-content-lg-start\">\r\n                    <i className='fas fa-circle px-1 pt-2' style={{fontSize:'0.6em'}}></i>\r\n                    <span className='pl-3 d-none d-lg-inline text-left'>Прибор</span>\r\n                  </div>\r\n                </NavLink>\r\n\r\n                <NavLink className=\"nav-link sidebar-text-color-primary btn remove-outline\" activeClassName=\"sidebar-bg-color-secondary\" to={`/device/${deviceId}/admin/widgets/`}> \r\n                  <div className=\"d-inline-flex w-100 justify-content-center justify-content-lg-start\">\r\n                    <i className='fas fa-circle px-1 pt-2' style={{fontSize:'0.6em'}}></i>\r\n                    <span className='pl-3 d-none d-lg-inline text-left'>Виджеты</span>\r\n                  </div>\r\n                </NavLink>\r\n\r\n                <NavLink className=\"nav-link sidebar-text-color-primary btn remove-outline\" activeClassName=\"sidebar-bg-color-secondary\" to={`/device/${deviceId}/admin/events/`}> \r\n                  <div className=\"d-inline-flex w-100 justify-content-center justify-content-lg-start\">\r\n                    <i className='fas fa-circle px-1 pt-2' style={{fontSize:'0.6em'}}></i>\r\n                    <span className='pl-3 d-none d-lg-inline text-left'>События</span>\r\n                  </div>\r\n                </NavLink>\r\n              </React.Fragment> }\r\n          </div>\r\n          \r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}","import React, { useEffect } from 'react' \r\n\r\nimport axiosInstance from \"../../backendAPI/axiosClient\";\r\nimport getBaseUrl from '../../backendAPI/localSettings'\r\nconst BASE_URL = getBaseUrl()\r\n\r\n\r\n\r\nexport default function DeviceHeader(props) {\r\n  const [deviceData, setDeviceData] = React.useState({})\r\n  const device_id = props.device_id;\r\n\r\n  function readDeviceParameters() {\r\n    axiosInstance.get(BASE_URL + \"/device/parameters/\", { params: { id: device_id }} )\r\n      .then(responce => { \r\n        responce && setDeviceData({...responce.data}) \r\n      }) \r\n  }\r\n  \r\n  useEffect(() => {\r\n    readDeviceParameters();\r\n    const deviceParametersUpdateInterval = setInterval(readDeviceParameters, 5000);\r\n    return () => {\r\n      clearInterval(deviceParametersUpdateInterval);\r\n    };\r\n  }, [])\r\n\r\n  \r\n  // render the page\r\n  return (\r\n    <React.Fragment>\r\n      <div className='d-flex border rounded desk-border-secondary px-3 mb-1 mx-1'>\r\n        <h3 className='pt-1'>Устройство: <b>{deviceData.name}</b></h3>\r\n        <div className='ml-auto mx-3 px-3 border-x desk-border-secondary'>\r\n          { deviceData.is_online ? \r\n            <div className='text-success'>\r\n              <span>Онлайн</span> <br/>\r\n              <i className='fas fa-check text-center w-100'></i>\r\n            </div>\r\n          : <div className='text-danger'>\r\n              <span>Нет связи</span> <br/>\r\n              <i className='fas fa-times text-center w-100'></i>\r\n            </div>\r\n          }\r\n        </div>\r\n        <div>\r\n          <p className='m-0 mr-1 text-right'>Данные обновлены: <br/> {deviceData.verbose_last_update}</p>\r\n        </div>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n","import { useEffect } from \"react\";\r\n\r\nconst useTargetClick = (ref, callback) => {\r\n  const handleClick = e => {\r\n    if (ref.current && ref.current.contains(e.target)) {\r\n      callback();\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    document.addEventListener(\"click\", handleClick);\r\n\r\n    return () => {\r\n      document.removeEventListener(\"click\", handleClick);\r\n    };\r\n  });\r\n};\r\n\r\nexport default useTargetClick;","import React, {useEffect} from 'react';\r\nimport PropTypes from 'prop-types'\r\nimport {\r\n    FlexibleXYPlot, \r\n    XAxis, \r\n    YAxis, \r\n    LineSeries,\r\n    // VerticalGridLines, \r\n    HorizontalGridLines, \r\n    Highlight} from 'react-vis';\r\n\r\nimport useTargetClick from '../../../utils/useTargetClick'\r\n\r\n\r\nfunction Graph(props) {\r\n  const tags = props.tags \r\n  const displayedTags = tags.filter( tag => tag.disabled === false )\r\n  const resetZoomButton = props.resetZoomButton\r\n  const [lastDrawLocation, setLastDrawLocation] = React.useState(null)\r\n\r\n  useTargetClick(resetZoomButton, ()=>{\r\n    console.log('seted onclick')\r\n    setLastDrawLocation(null)\r\n  })\r\n\r\n  useEffect(() => {\r\n    if (lastDrawLocation) {\r\n      resetZoomButton.current.className = resetZoomButton.current.className.replace('d-none', 'd-block')\r\n    } else {\r\n      resetZoomButton.current.className = resetZoomButton.current.className.replace('d-block', 'd-none')\r\n    }\r\n  }, [lastDrawLocation])\r\n\r\n  \r\n  let has_displayed_tags = false\r\n  displayedTags.forEach(tag => {\r\n    if (tag.values.length > 0) {has_displayed_tags = true}\r\n  })\r\n\r\n  if (has_displayed_tags) {\r\n    return (\r\n      <React.Fragment>\r\n        <div className='graph-container h-100' style={{overflow: 'hidden'}}>\r\n          <FlexibleXYPlot \r\n            margin={{left: 40, right: 0, top: 0, bottom: 30}} \r\n            xType=\"time\"\r\n            animation\r\n            xDomain={\r\n              lastDrawLocation && [\r\n                lastDrawLocation.left,\r\n                lastDrawLocation.right\r\n              ]\r\n            }\r\n            yDomain={\r\n              lastDrawLocation && [\r\n                lastDrawLocation.bottom,\r\n                lastDrawLocation.top\r\n              ]\r\n            }\r\n            yPadding={10} \r\n          >\r\n            <HorizontalGridLines style={{stroke: '#444A50'}} />\r\n            <XAxis style={{line:{stroke: '#6c757d'}}} tickTotal={15} />\r\n            <YAxis style={{line:{stroke: '#6c757d'}}} />\r\n            { displayedTags.map((tag)=>{ \r\n              return <LineSeries data={tag.values} color={tag.curve_color} key={tag.tag_id} />\r\n            }) }\r\n\r\n            <Highlight\r\n              onBrushEnd={area => setLastDrawLocation(area)}\r\n              onDrag={area => {\r\n                this.setState({\r\n                  lastDrawLocation: {\r\n                    bottom: lastDrawLocation.bottom + (area.top - area.bottom),\r\n                    left: lastDrawLocation.left - (area.right - area.left),\r\n                    right: lastDrawLocation.right - (area.right - area.left),\r\n                    top: lastDrawLocation.top + (area.top - area.bottom)\r\n                  }\r\n                });\r\n                }}\r\n              />\r\n          </FlexibleXYPlot>\r\n        </div>\r\n      </ React.Fragment>\r\n    );\r\n  } else {\r\n    return (\r\n      <React.Fragment>\r\n      <div className='graph-container h-100'>\r\n        <FlexibleXYPlot \r\n          dontCheckIfEmpty\r\n          margin={{left: 30, right: 0, top: 0, bottom: 30}}      \r\n        >\r\n          <HorizontalGridLines style={{stroke: '#444A50'}} />\r\n          <XAxis />\r\n          <YAxis />\r\n          <LineSeries data={[{x:0, y:0}]} /> \r\n        </FlexibleXYPlot>\r\n      </div>\r\n      </ React.Fragment> \r\n    )                   \r\n  }\r\n}\r\n\r\n\r\nGraph.propTypes = {\r\n    tags: PropTypes.arrayOf(PropTypes.object).isRequired\r\n}\r\n\r\nexport default Graph","import React, {useEffect} from 'react';\r\nimport PropTypes from 'prop-types'\r\nimport {\r\n    FlexibleXYPlot, \r\n    XAxis, \r\n    YAxis, \r\n    LineSeries,\r\n    MarkSeries,\r\n    Crosshair,\r\n    // VerticalGridLines, \r\n    HorizontalGridLines, \r\n    Highlight} from 'react-vis';\r\n\r\nimport useTargetClick from '../../../utils/useTargetClick'\r\n\r\n\r\n\r\nfunction Graph(props) {\r\n  const tags = props.tags   \r\n  const displayedTags = tags.filter( tag => tag.disabled === false )  \r\n  const resetZoomButton = props.resetZoomButton\r\n  const [lastDrawLocation, setLastDrawLocation] = React.useState(null)\r\n  const [crosshairValues, setCrosshairValues] = React.useState([])\r\n\r\n  useTargetClick(resetZoomButton, ()=>{\r\n    console.log('seted onclick')\r\n    setLastDrawLocation(null)\r\n  })\r\n\r\n  useEffect(() => {\r\n    if (lastDrawLocation) {\r\n      resetZoomButton.current.className = resetZoomButton.current.className.replace('d-none', 'd-block')\r\n    } else {\r\n      resetZoomButton.current.className = resetZoomButton.current.className.replace('d-block', 'd-none')\r\n    }\r\n  }, [lastDrawLocation])\r\n\r\n\r\n  const crosshairData = displayedTags.map( (tag) => {\r\n    return tag.values.map((value) => {\r\n      value.title = tag.tag_name\r\n      value.color = tag.curve_color\r\n      return value\r\n    })\r\n  });  \r\n\r\n  const _onMouseLeave = () => {\r\n    setCrosshairValues([]);\r\n  };\r\n\r\n  const _onNearestX = (value, {index}) => {\r\n    setCrosshairValues( crosshairData.map(d => d[index]) );\r\n  };\r\n\r\n  function format_time(time) {\r\n    const s = new Date(time)\r\n    let formatter = new Intl.DateTimeFormat([] , {dateStyle: 'long', timeStyle: 'medium'});\r\n    return formatter.format(s)\r\n  }\r\n\r\n  let has_displayed_tags = false\r\n  displayedTags.forEach(tag => {\r\n    if (tag.values.length > 0) {has_displayed_tags = true}\r\n  })\r\n\r\n  if (has_displayed_tags) {\r\n    return (\r\n      <React.Fragment>\r\n        <div className='graph-container  h-100' style={{overflow: 'hidden'}}>\r\n          <FlexibleXYPlot \r\n            margin={{left: 40, right: 0, top: 0, bottom: 30}} \r\n            xType=\"time\"\r\n            animation\r\n            xDomain={\r\n              lastDrawLocation && [\r\n                lastDrawLocation.left,\r\n                lastDrawLocation.right\r\n              ]\r\n            }\r\n            yDomain={\r\n              lastDrawLocation && [\r\n                lastDrawLocation.bottom,\r\n                lastDrawLocation.top\r\n              ]\r\n            } \r\n            yPadding={10}\r\n            onMouseLeave={_onMouseLeave}        \r\n          >\r\n            <HorizontalGridLines style={{stroke: '#444A50'}} />\r\n            <XAxis style={{line:{stroke: '#6c757d'}}} tickTotal={15} />\r\n            <YAxis style={{line:{stroke: '#6c757d'}}} />\r\n            { displayedTags.map((tag, index)=>{\r\n              if (index === 0) {\r\n                return <LineSeries onNearestX={_onNearestX} data={tag.values} color={tag.curve_color} key={tag.tag_id} />\r\n              }\r\n              else {\r\n                return <LineSeries data={tag.values} color={tag.curve_color} key={tag.tag_id} />\r\n              }\r\n            }) }\r\n\r\n            <Highlight\r\n              onBrushEnd={area => setLastDrawLocation(area)}\r\n              onDrag={area => {\r\n                setLastDrawLocation({\r\n                  lastDrawLocation: {\r\n                    bottom: lastDrawLocation.bottom + (area.top - area.bottom),\r\n                    left: lastDrawLocation.left - (area.right - area.left),\r\n                    right: lastDrawLocation.right - (area.right - area.left),\r\n                    top: lastDrawLocation.top + (area.top - area.bottom)\r\n                  }\r\n                });\r\n              }}\r\n            />\r\n\r\n            {crosshairValues[0] && \r\n              crosshairValues.map((point, index)=>{\r\n                return point ? (\r\n                          <MarkSeries\r\n                            key = {index}\r\n                            color = {point.color}\r\n                            size = '5'\r\n                            data={[point]}/>\r\n                        ) : null \r\n            })}\r\n\r\n            <Crosshair values={crosshairValues} style={{line:{backgroundColor:'red'}}}>  \r\n              {crosshairValues[0] && \r\n                <div className='rounded p-1 mx-2' style={{background: 'rgba(37, 37, 38, 1)'}}>\r\n                  <table className=\"table text-light p-0 m-0\">\r\n                    <thead> \r\n                    <tr>\r\n                        <td colSpan=\"3\" style={{fontSize: '1.2em', color: 'rgb(180, 180, 180)'}} \r\n                          className='border-0 font-weight-bold p-1 m-0 text-center text-nowrap'\r\n                        >\r\n                          {format_time(crosshairValues[0].x)}\r\n                        </td>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      { crosshairValues.map((point, index)=>{\r\n                        return point ? (\r\n                          <tr style={{fontSize: '1.1em', color: 'rgb(210, 210, 210)'}} key={index}>\r\n                            <td style={{color: point.color, paddingTop: '4px'}} className='text-nowrap border-0 px-1 pb-0 m-0\tfas fa-minus'></td>   \r\n                            <td className='text-nowrap border-0 pl-1 pr-2 py-0 m-0'> {point.title}: </td>   \r\n                            <td className='text-nowrap border-0 px-1 py-0 m-0 font-weight-bold  text-right'> {point.y} </td>\r\n                          </tr> \r\n                        ) : null\r\n                      })}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              }\r\n            </Crosshair>\r\n          </FlexibleXYPlot>\r\n        </div>\r\n      </ React.Fragment>\r\n    );  \r\n  } else {\r\n    return (\r\n      <React.Fragment>\r\n      <div className='graph-container h-100'>\r\n        <FlexibleXYPlot \r\n          dontCheckIfEmpty\r\n          margin={{left: 30, right: 0, top: 0, bottom: 30}}      \r\n        >\r\n          <HorizontalGridLines style={{stroke: '#444A50'}} />\r\n          <XAxis />\r\n          <YAxis />\r\n          <LineSeries data={[{x:0, y:0}]} /> \r\n        </FlexibleXYPlot>\r\n      </div>\r\n      </ React.Fragment> \r\n    )                   \r\n  }\r\n}\r\n\r\n\r\nGraph.propTypes = {\r\n    tags: PropTypes.arrayOf(PropTypes.object).isRequired\r\n}\r\n\r\nexport default Graph","import React from 'react' \r\nimport SearchableDiscreteColorLegend from 'react-vis/dist/legends/searchable-discrete-color-legend';\r\n\r\n\r\n\r\n\r\nexport default function Legend(props) { \r\n  var [searchText, setSearchText] = React.useState('')\r\n\r\n  var state = {\r\n    onClick: props.onClick,\r\n    items: props.tags.map((tag) => {\r\n      return {title: tag.tag_name, color: tag.curve_color, tag_id:tag.tag_id, disabled:tag.disabled}\r\n    })\r\n  }\r\n\r\n  function _clickHandler (item) {\r\n    state.onClick(item.tag_id);    \r\n  };\r\n\r\n  function _searchChangeHandler (searchText) {\r\n    setSearchText(searchText)\r\n  };\r\n\r\n  return (\r\n    <div className='d-block text-dark pl-3'>\r\n      <SearchableDiscreteColorLegend\r\n        height={ parseInt(props.height.replace('px', '')) }\r\n        // width={300}\r\n        onSearchChange={_searchChangeHandler}\r\n        searchPlaceholder={'Поиск...'}\r\n        searchText={searchText}\r\n        onItemClick={_clickHandler}\r\n        items={state.items}\r\n      />\r\n    </div>\r\n  );\r\n}","import React, { useState } from 'react' \r\n\r\n\r\n\r\nexport default function Toolbar(props) { \r\n  const [showRangeForm, setShowRangeForm] = useState(false)\r\n  const [activeButton, setActiveButton] = useState([false, true, false, false, false, false, false, false])\r\n  const changeGraphInterval = props.changeGraphInterval\r\n\r\n  function toggleActiveButton(btn) {\r\n    // enable selected button and off all other\r\n    const b = activeButton.map( (item, index) => {\r\n      return (index === btn) ? true : false\r\n    })\r\n    setActiveButton(b)\r\n    // display form for range input \r\n    setShowRangeForm( (btn === 7) ? true : false ) \r\n  }\r\n\r\n  function getActiveCalss(btn) {\r\n    return activeButton[btn] ? ' active' : ''\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n    <div className='d-flex justify-content-left p-0 pt-2 m-0'>\r\n        <button type=\"button\" \r\n          className={'btn btn-sm btn-outline-secondary mx-1 ' + getActiveCalss(0)} \r\n          onClick={()=>{\r\n            toggleActiveButton(0)\r\n            changeGraphInterval('5m', 'all')\r\n          }}\r\n        >онлайн</button>\r\n\r\n        <button type=\"button\" \r\n          className={'btn btn-sm btn-outline-secondary mx-1 ' + getActiveCalss(1)} \r\n          onClick={()=>{\r\n            toggleActiveButton(1)\r\n            changeGraphInterval('1h', '1m')\r\n          }}\r\n        >1 час</button>\r\n\r\n        <button type=\"button\" \r\n          className={'btn btn-sm btn-outline-secondary mx-1 ' + getActiveCalss(2)} \r\n          onClick={()=>{\r\n            toggleActiveButton(2)\r\n            changeGraphInterval('6h', '5m')\r\n          }}\r\n        >6 часов</button>\r\n\r\n        <button type=\"button\" \r\n          className={'btn btn-sm btn-outline-secondary mx-1 ' + getActiveCalss(3)} \r\n          onClick={()=>{\r\n            toggleActiveButton(3)\r\n            changeGraphInterval('12h', '10m')\r\n          }}\r\n        >12 часов</button>\r\n\r\n        <button type=\"button\" \r\n          className={'btn btn-sm btn-outline-secondary mx-1 ' + getActiveCalss(4)} \r\n          onClick={()=>{\r\n            toggleActiveButton(4)\r\n            changeGraphInterval('1d', '30m')\r\n          }}\r\n        >сутки</button>\r\n\r\n        <button type=\"button\" \r\n          className={'btn btn-sm btn-outline-secondary mx-1 ' + getActiveCalss(5)} \r\n          onClick={()=>{\r\n            toggleActiveButton(5)\r\n            changeGraphInterval('7d', '2h')\r\n          }}\r\n        >неделя</button>\r\n\r\n        <button type=\"button\" \r\n          className={'btn btn-sm btn-outline-secondary mx-1 ' + getActiveCalss(6)} \r\n          onClick={()=>{\r\n            toggleActiveButton(6)\r\n            changeGraphInterval('30d', '12h')\r\n          }}\r\n        >месяц</button>\r\n\r\n        <button type=\"button\" \r\n          className={'btn btn-sm btn-outline-secondary mx-1 ' + getActiveCalss(7)} \r\n          onClick={()=>{\r\n            toggleActiveButton(7)\r\n            changeGraphInterval('30d', '12h') // todo\r\n          }}\r\n        >интервал</button> \r\n    </div>\r\n\r\n    {showRangeForm ? <RangeForm /> : null }\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n\r\nfunction RangeForm(props) {\r\n  return (\r\n    <React.Fragment>\r\n    <form className='pt-2'>\r\n      <div className=\"input-group input-group-sm \">\r\n        <div className=\"input-group-prepend \">\r\n          <span className=\"input-group-text bg-secondary text-light border-secondary ml-1\">C</span>\r\n        </div>\r\n        <input type=\"date\" className=\"form-control bg-dark text-light border-secondary\"></input>\r\n        <input type=\"time\" className=\"form-control bg-dark text-light border-secondary\"></input>\r\n\r\n        <div className=\"input-group-prepend \">\r\n          <span className=\"input-group-text bg-secondary text-light border-secondary ml-2\">По</span>\r\n        </div>\r\n        <input type=\"date\" className=\"form-control bg-dark text-light border-secondary\"></input>\r\n        <input type=\"time\" className=\"form-control bg-dark text-light border-secondary\"></input>\r\n\r\n        <button type=\"button\" className='btn btn-sm btn-secondary ml-2 mr-1'>показать</button> <br/>\r\n      </div>\r\n    </form>\r\n    </React.Fragment>\r\n  );\r\n}","import React from 'react'\r\nimport './Loader.css'\r\n\r\nexport default function Loader() {\r\n    return(\r\n        <div className=\"lds-ellipsis\"><div></div><div></div><div></div><div></div></div>\r\n    )\r\n}","import React from 'react';\r\nimport PropTypes from 'prop-types'\r\nimport Graph from './Graph'\r\nimport GraphWithCrosshair from './GraphWithCrosshair'\r\nimport Legend from './Legend'\r\nimport Toolbar from './Toolbar'\r\nimport Loader from '../../../base/components/Loader'\r\n\r\n\r\nfunction TagsHistoricalGraph(props) {\r\n  // eslint-disable-next-line no-unused-vars\r\n  const [modal, setModal] = React.useState(false) // use it just for force update this component\r\n  const [crosshair, setCrosshair] = React.useState(false)\r\n  const graphCard = React.useRef(null)\r\n  const graphContainer = React.useRef(null)\r\n  const modalButton = React.useRef(null)\r\n  const crosshairButton = React.useRef(null)\r\n  const legendContainer = React.useRef(null)\r\n  const resetZoomButton = React.useRef(null)\r\n  const tags = props.tagsHistory  \r\n  const GRAPH_HEIGH = props.height ? props.height : '300px'\r\n\r\n  const toggleModal = () => {\r\n    const cl = ' full-screen-card'\r\n    if (graphCard.current.className.includes(cl)) {\r\n      graphCard.current.className = graphCard.current.className.replace(cl, '')\r\n      graphContainer.current.style.height = GRAPH_HEIGH\r\n      graphContainer.current.className = graphContainer.current.className.replace('col-10', 'col-8')\r\n      if (props.legend) {legendContainer.current.className = legendContainer.current.className.replace('col-2', 'col-4')}    \r\n      modalButton.current.className = modalButton.current.className.replace('fa-compress', 'fa-expand') \r\n      modalButton.current.className = modalButton.current.className.replace('text-primary', 'text-light')      \r\n      setModal(false)\r\n    } else {\r\n      graphCard.current.className += cl\r\n      graphContainer.current.style.height = 'calc(100vh - 150px)'\r\n      graphContainer.current.className = graphContainer.current.className.replace('col-8', 'col-10')\r\n      if (props.legend) {legendContainer.current.className = legendContainer.current.className.replace('col-4', 'col-2')}\r\n      modalButton.current.className = modalButton.current.className.replace('fa-expand', 'fa-compress') \r\n      modalButton.current.className = modalButton.current.className.replace('text-light', 'text-primary')       \r\n      setModal(true)\r\n    }\r\n  }\r\n\r\n  const toggleCroshair = () => {\r\n    if (crosshair) {\r\n      setCrosshair(!crosshair)\r\n      crosshairButton.current.className = crosshairButton.current.className.replace('text-primary', 'desk-text-color-primary')      \r\n    } else {\r\n      setCrosshair(!crosshair)\r\n      crosshairButton.current.className = crosshairButton.current.className.replace('desk-text-color-primary', 'text-primary') \r\n    }\r\n  }\r\n\r\n  return (   \r\n    <React.Fragment>\r\n    <div ref={graphCard} className='card shadow-sm py-2 desk-bg-color-secondary desk-text-color-primary h-100'>\r\n      <div className='d-flex mb-1'>\r\n        <h5 className=\"px-3 pt-1 pb-2 m-0\">{props.title}</h5>\r\n        <span className='ml-auto'></span>\r\n\r\n        <button type=\"button\" \r\n          ref={resetZoomButton} \r\n          className={'btn btn-link text-primary m-0 p-0 mt-1 mr-2 fas fa-search-minus d-none'} \r\n          style={{width: '28px', height: '28px', fontSize:'1em', textDecoration: 'none', outline: 'none', boxShadow: 'none'}} \r\n          onClick={null}\r\n        ></button>\r\n\r\n        <button type=\"button\"\r\n          ref={crosshairButton} \r\n          className={'btn btn-link desk-text-color-primary m-0 p-0 mt-1 mr-2 fas fa-ruler-vertical'} \r\n          style={{width: '28px', height: '28px', fontSize:'1em', textDecoration: 'none', outline: 'none', boxShadow: 'none'}}\r\n          onClick={toggleCroshair}\r\n        ></button> \r\n\r\n        <button type=\"button\" \r\n          ref={modalButton} \r\n          className={'btn btn-link desk-text-color-primary m-0 p-0 mt-1 mr-2 fas fa-expand'} \r\n          style={{width: '28px', height: '28px', fontSize:'1em', textDecoration: 'none', outline: 'none', boxShadow: 'none'}} \r\n          onClick={toggleModal}\r\n        ></button>  \r\n      </div>\r\n\r\n      { props.loading ? \r\n        <div className='d-flex justify-content-center'><Loader /></div> :\r\n          <div className=\"row m-0 px-3 py-0\">\r\n            <div ref={graphContainer} className={`${ props.legend ? 'col-8' : 'col-12'} m-0 p-0`} style={{height: GRAPH_HEIGH}}>\r\n              { crosshair ? \r\n                <GraphWithCrosshair tags={tags} resetZoomButton={resetZoomButton} /> : \r\n                <Graph tags={tags} resetZoomButton={resetZoomButton} /> \r\n              }\r\n            </div>\r\n\r\n            { props.legend && (\r\n              <div ref={legendContainer} className=\"col-4 m-0 p-0\">\r\n                <Legend tags={tags} onClick={props.toggleCurveDisplay} height={GRAPH_HEIGH}/>\r\n              </div>\r\n            )}\r\n\r\n            { props.toolbar && (\r\n              <div className=\"col-12 align-self-start m-0 p-0\">\r\n                <Toolbar toggleModal={toggleModal} toggleCroshair={toggleCroshair} changeGraphInterval={props.changeGraphInterval}/>\r\n              </div>\r\n            )}\r\n        </div>\r\n      }\r\n    </div>\r\n    </ React.Fragment>\r\n  );\r\n}\r\n\r\n\r\nTagsHistoricalGraph.propTypes = {\r\n    tagsHistory: PropTypes.arrayOf(PropTypes.object).isRequired\r\n}\r\n\r\nexport default TagsHistoricalGraph","// const colors = [\r\n//     '#19CDD7', '#DDB27C', '#88572C', \r\n//     '#FF991F', '#F15C17', '#223F9A', \r\n//     '#DA70BF', '#125C77', '#4DC19C', \r\n//     '#776E57', '#12939A', '#17B8BE', \r\n//     '#F6D18A', '#B7885E', '#FFCB99', \r\n//     '#F89570', '#829AE3', '#E79FD5', \r\n//     '#1E96BE', '#89DAC1', '#B3AD9E'\r\n// ]\r\n\r\nconst colors = [\r\n    '#f44336', '#00BCD4', '#FF9800', \r\n    '#E91E63', '#009688', '#FF5722', \r\n    '#9C27B0', '#4CAF50', '#795548', \r\n    '#673AB7', '#8BC34A', '#607D8B', \r\n    '#3F51B5', '#CDDC39', \r\n    '#2196F3', '#FFEB3B', \r\n    '#03A9F4', '#FFC107', \r\n]\r\n\r\n\r\nexport default function getColor(index) {\r\n    const clorsNumber = colors.length\r\n    var ind\r\n    if (index+1 > clorsNumber) {\r\n        ind = index % clorsNumber\r\n    }\r\n    else {\r\n        ind = index\r\n    }\r\n    return colors[ind]\r\n}","import React, { useEffect } from 'react' \r\n\r\nimport TagsHistoricalGraph from './components/TagsGraph/TagsHistoricalGraph'\r\nimport getColor from './components/TagsGraph/GraphColors'\r\nimport axiosInstance from \"../backendAPI/axiosClient\";\r\nimport getBaseUrl from '../backendAPI/localSettings'\r\nconst BASE_URL = getBaseUrl()\r\n\r\n\r\n\r\nexport default function WidgetGraph(props) {\r\n  const [loading, setLoading] = React.useState(true)\r\n  const [graphInterval, setGraphInterval] = React.useState({interval:'1h', resolution:'1m', tags: props.widget.tags})\r\n  const [tagsHistory, setTagsHistory] = React.useState([])\r\n  const device_id = props.device_id;\r\n\r\n  function updateTagsHistory(tags) {\r\n    const prepared_tags = tags.map( (tag, index) => {\r\n      return ({\r\n        tag_id: tag.tag_id,\r\n        tag_code: tag.tag_code,\r\n        tag_name: tag.tag_name,\r\n        disabled: false,\r\n        curve_color : getColor(index),\r\n        values: tag.values.map( (value) => {\r\n          return {x: new Date(value.add_date), y: value.value}\r\n        })\r\n      })\r\n    })  \r\n    setTagsHistory( (prev) => {\r\n      return prepared_tags.map( (tag)=> {\r\n        const fltr = prev.filter( entry=>entry.tag_id === tag.tag_id )\r\n        var disabled = (fltr.length > 0) ? fltr[0].disabled : tag.disabled\r\n        return {...tag, disabled: disabled}\r\n      })\r\n    }) \r\n  }\r\n\r\n  // read tags historical data\r\n  function readTagsHistory() {\r\n    axiosInstance.get(BASE_URL + \"/device/tags/history/\", { params: { id: device_id, ...graphInterval}} )\r\n    .then(responce => {\r\n      responce && updateTagsHistory(responce.data)\r\n    })  \r\n  }\r\n  \r\n  // read parameters\r\n  useEffect(() => {\r\n    readTagsHistory();\r\n    const loadingTimeout = setTimeout( () => { setLoading(false) }, 1000);\r\n    const graphUpdateInterval = setInterval( readTagsHistory, getGraphUpdateTimeout(graphInterval.interval))\r\n    return () => {\r\n      clearTimeout(loadingTimeout);\r\n      clearInterval(graphUpdateInterval);\r\n    };\r\n  }, [graphInterval])\r\n\r\n  \r\n  function changeGraphInterval(interval, resolution){\r\n    setGraphInterval( (prev) => {\r\n      return {...prev, interval: interval, resolution: resolution}\r\n    })\r\n  }\r\n\r\n  function getGraphUpdateTimeout(interval){\r\n    if (interval === '5m') {\r\n      return 2000                       // 2s\r\n    } else if (interval === '1h') {\r\n      return 30000                      // 30s\r\n    } else if (interval === '6h') {\r\n      return 60000 * 2                  // 2m\r\n    } else if (interval === '12h') {\r\n      return 60000 * 5                  // 5m\r\n    } else if (interval === '1d') {\r\n      return 60000 * 15                 // 15m\r\n    } else if (interval === '7d') {\r\n      return 60000 * 60                 // 1h\r\n    } else if (interval === '30d') {\r\n      return 60000 * 60 * 6             // 6h\r\n    } else {\r\n      return 60000 * 5                  // 5m\r\n    }\r\n  }\r\n\r\n  // toggle curve display\r\n  function toggleCurveDisplay(tag_id){\r\n    const n = tagsHistory.map( entry => { \r\n      if (entry.tag_id===tag_id) { entry.disabled = !entry.disabled } \r\n      return entry\r\n    })\r\n    setTagsHistory(n)\r\n  }\r\n\r\n  // render the widget\r\n  return (\r\n    <React.Fragment>\r\n        <TagsHistoricalGraph \r\n            tagsHistory={tagsHistory} \r\n            toggleCurveDisplay={toggleCurveDisplay}\r\n            title={props.widget.title}\r\n            legend={props.widget.legend}\r\n            loading={loading}\r\n            toolbar={props.widget.toolbar}\r\n            height={props.widget.height}\r\n            changeGraphInterval={changeGraphInterval}\r\n        /> \r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\n\r\nfunction TagsCurrentValueRow({tag, columns, index}) {\r\n    return (\r\n        <tr>\r\n            { (columns.indexOf('#No') >= 0) ? <td className='border-secondary text-secondary pl-2'> {index + 1} </td> : null }  \r\n            { (columns.indexOf('code') >= 0) ? <td className='border-secondary'> {tag.code} </td> : null }\r\n            { (columns.indexOf('name') >= 0) ? <td className='border-secondary'> {tag.name} </td> : null }\r\n            { (columns.indexOf('value') >= 0) ? <td className='border-secondary'> {tag.value} </td> : null }\r\n        </tr>\r\n    )\r\n}\r\n\r\n\r\n\r\nTagsCurrentValueRow.propTypes = {\r\n    tag: PropTypes.object.isRequired,\r\n    index: PropTypes.number.isRequired,\r\n}\r\n\r\nexport default TagsCurrentValueRow","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport TagsCurrentValueRow from './TagsCurrentValueRow'\r\nimport Loader from '../../../base/components/Loader'\r\n\r\n\r\nfunction TagsCurrentValueList(props) {\r\n  // eslint-disable-next-line no-unused-vars\r\n  const [modal, setModal] = React.useState(false) // use it just for force update this component\r\n  const modalButton = React.useRef(null)\r\n  const graphCard = React.useRef(null)\r\n\r\n  const toggleModal = () => {\r\n    const cl = ' full-screen-card'\r\n    if (graphCard.current.className.includes(cl)) {\r\n      graphCard.current.className = graphCard.current.className.replace(cl, '')\r\n      modalButton.current.className = modalButton.current.className.replace('fa-compress', 'fa-expand') \r\n      modalButton.current.className = modalButton.current.className.replace('text-primary', 'text-light')      \r\n      setModal(false)\r\n    } else {\r\n      graphCard.current.className += cl\r\n      modalButton.current.className = modalButton.current.className.replace('fa-expand', 'fa-compress') \r\n      modalButton.current.className = modalButton.current.className.replace('text-light', 'text-primary')       \r\n      setModal(true)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div ref={graphCard} className='card shadow-sm py-2 bg-dark text-light h-100'>\r\n      <div className='d-flex mb-1'>\r\n        <h5 className=\"px-3 pt-1 pb-0 m-0\">{props.title}</h5>\r\n        <span className='ml-auto'></span>\r\n\r\n        <button type=\"button\" \r\n          ref={modalButton} \r\n          className={'btn btn-link text-light m-0 p-0 mt-1 mr-2 fas fa-expand'} \r\n          style={{width: '28px', height: '28px', fontSize:'1em', textDecoration: 'none', outline: 'none', boxShadow: 'none'}} \r\n          onClick={toggleModal}\r\n        ></button>  \r\n      </div>\r\n  \r\n      { props.loading ? \r\n        <div className='d-flex justify-content-center'><Loader /></div> \r\n        :\r\n        <>\r\n        { props.columns ?    \r\n        <div className=\"table-responsive px-3\">\r\n          <table className=\"table table-hover table-dark table-sm text-light w-100 mb-0\">\r\n            <thead> \r\n              <tr>\r\n                { (props.columns.indexOf('#No') >= 0) ? <th className='border-0 text-secondary font-weight-bold pl-2'>№</th> : null }\r\n                { (props.columns.indexOf('code') >= 0) ? <th className='border-0 text-secondary font-weight-bold'>Код параметра</th> : null }\r\n                { (props.columns.indexOf('name') >= 0) ? <th className='border-0 text-secondary font-weight-bold'>Наименование параметра</th> : null }\r\n                { (props.columns.indexOf('value') >= 0) ? <th className='border-0 text-secondary font-weight-bold'>Текущее значение</th> : null }\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n                { props.tags.map((tag, index) => {\r\n                  return (\r\n                    <TagsCurrentValueRow tag={tag} columns={props.columns} key={tag.code} index={index} />\r\n                  )\r\n                }) }\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        :\r\n          <i className='text-secondary ml-3'>Данные для отображения не заданы ... </i>\r\n        } \r\n        </>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nTagsCurrentValueList.propTypes = {\r\n    tags: PropTypes.arrayOf(PropTypes.object).isRequired\r\n}\r\n\r\nexport default TagsCurrentValueList","import React, { useEffect } from 'react' \r\n\r\nimport TagsCurrentValueList from './components/TagsList/TagsCurrentValueList'\r\nimport axiosInstance from \"../backendAPI/axiosClient\";\r\nimport getBaseUrl from '../backendAPI/localSettings'\r\nconst BASE_URL = getBaseUrl()\r\n\r\n\r\n\r\nexport default function WidgetTable(props) {\r\n  const [tags, setTags] = React.useState([])\r\n  const [loading, setLoading] = React.useState(true)\r\n  const device_id = props.device_id;\r\n  const displayedTags =  props.widget.tags;\r\n\r\n  function readDeviceTags() {\r\n    axiosInstance.get(BASE_URL + \"/device/tags/value/\", { params: { id: device_id, tags: displayedTags }} )\r\n    .then((responce) => {\r\n      responce && setTags(responce.data)     \r\n    })  \r\n  }\r\n  \r\n  // read parameters\r\n  useEffect(() => {\r\n    readDeviceTags();\r\n    const loadingTimeout = setTimeout( () => { setLoading(false) }, 1000);\r\n    const tagsUpdateInterval = setInterval(readDeviceTags, 2000);\r\n    return () => {\r\n      clearTimeout(loadingTimeout);      \r\n      clearInterval(tagsUpdateInterval);\r\n    };\r\n  }, [])\r\n\r\n  // render the page\r\n  return (\r\n    <React.Fragment>\r\n        <TagsCurrentValueList\r\n          tags={tags} \r\n          title={props.widget.title} \r\n          columns={props.widget.columns} \r\n          loading={loading} \r\n        />\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n","import React from 'react'\r\nimport Loader from '../../../base/components/Loader'\r\n\r\n\r\nexport default function TagIndicator(props) {\r\n  const tag = props.tag\r\n  const addTextRight = props.addTextRight\r\n  const addTextLeft = props.addTextLeft\r\n\r\n  var value = 'none'\r\n  if (tag && tag.value.toFixed) {\r\n    value = props.precision ? tag.value.toFixed(props.precision) : tag.value\r\n  }\r\n\r\n  return (\r\n    <div className='card shadow-sm py-2 desk-bg-color-secondary desk-text-color-primary h-100'>\r\n      <div className='d-flex mb-1'>\r\n        <h5 className=\"px-3 pt-1 pb-0 m-0\">{props.title}</h5>\r\n        <span className='ml-auto'></span>  \r\n      </div>\r\n  \r\n      { props.loading ? \r\n        <div className='d-flex justify-content-center'><Loader /></div> \r\n      :     \r\n        <div className=\"d-flex justify-content-center align-items-center h-100 px-3\">\r\n          {tag ? \r\n            <p className='display-4 m-0 p-0'>\r\n              <span>{addTextLeft} </span> \r\n              {value} \r\n              <span> {addTextRight}</span>\r\n            </p> \r\n          :\r\n            <p className='display-4 desk-text-color-secondary m-0 p-0'>Нет данных</p> \r\n          }\r\n        </div>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n\r\n","import React, { useEffect } from 'react' \r\n\r\nimport TagIndicator from './components/TagsIndicator/TagIndicator'\r\nimport axiosInstance from \"../backendAPI/axiosClient\"\r\nimport getBaseUrl from '../backendAPI/localSettings'\r\nconst BASE_URL = getBaseUrl()\r\n\r\n\r\n\r\nexport default function WidgetIndicator(props) {\r\n  const [tags, setTags] = React.useState([])\r\n  const [loading, setLoading] = React.useState(true)\r\n  const device_id = props.device_id\r\n  const displayedTags =  props.widget.tags  \r\n  const tag = tags[0] // TODO: widget display just 1 tag now\r\n\r\n  function readDeviceTags() {\r\n    axiosInstance.get(BASE_URL + \"/device/tags/value/\",  { params: { id: device_id, tags: displayedTags }} )\r\n    .then((responce) => {\r\n      responce && setTags(responce.data)\r\n    })  \r\n  }\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    readDeviceTags();\r\n    const loadingTimeout = setTimeout( () => { setLoading(false) }, 1000);\r\n    const tagsUpdateInterval = setInterval(readDeviceTags, 2000);\r\n    return () => {\r\n      clearTimeout(loadingTimeout);      \r\n      clearInterval(tagsUpdateInterval);\r\n    };\r\n  }, [])\r\n\r\n\r\n  return (\r\n    <React.Fragment>\r\n        <TagIndicator\r\n          tag={tag} \r\n          title={props.widget.title}\r\n          precision={props.widget.precision}\r\n          addTextRight={props.widget.addTextRight}\r\n          addTextLeft={props.widget.addTextLeft}\r\n          loading={loading} \r\n        />\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n","import React from 'react'\r\n\r\n\r\nexport default function TagsCurrentValueRow({record, index}) {\r\n    return (\r\n        <tr>\r\n            <td className='border-secondary text-secondary pl-2 d-none d-lg-table-cell' style={{width:'5%'}}> {index + 1} </td>   \r\n            <td className='border-secondary d-none d-xl-table-cell' style={{width:'15%'}}> {format_date(record.date)} </td> \r\n            <td className='border-secondary d-table-cell d-xl-none' style={{width:'15%'}}> {format_date(record.date, 'short')} </td> \r\n            <td className='border-secondary' style={{width:'10%'}}> {format_time(record.date)} </td>\r\n            <td className='border-secondary'> {record.message} </td>\r\n        </tr>\r\n    )\r\n}\r\n\r\n\r\nfunction format_time(time, style='medium') {\r\n    const s = new Date(time)\r\n    let formatter = new Intl.DateTimeFormat([] , {timeStyle: style});\r\n    return formatter.format(s)\r\n  }\r\n\r\nfunction format_date(time, style='long') {\r\n    const s = new Date(time)\r\n    let formatter = new Intl.DateTimeFormat([] , {dateStyle: style});\r\n    return formatter.format(s)\r\n  }\r\n\r\n","import React from 'react'\r\nimport RecordsRow from './RecordsRow'\r\nimport Loader from '../../../base/components/Loader'\r\n\r\n\r\nexport default function TagsCurrentValueList(props) {\r\n  // eslint-disable-next-line no-unused-vars\r\n  const [modal, setModal] = React.useState(false) // use it just for force update this component\r\n  const modalButton = React.useRef(null)\r\n  const graphCard = React.useRef(null)\r\n  const toggleCategorySelection = props.toggleCategorySelection\r\n  const categories = props.categories\r\n\r\n  const toggleModal = () => {\r\n    const cl = ' full-screen-card'\r\n    if (graphCard.current.className.includes(cl)) {\r\n      graphCard.current.className = graphCard.current.className.replace(cl, '')\r\n      modalButton.current.className = modalButton.current.className.replace('fa-compress', 'fa-expand') \r\n      modalButton.current.className = modalButton.current.className.replace('text-primary', 'text-light')      \r\n      setModal(false)\r\n    } else {\r\n      graphCard.current.className += cl\r\n      modalButton.current.className = modalButton.current.className.replace('fa-expand', 'fa-compress') \r\n      modalButton.current.className = modalButton.current.className.replace('text-light', 'text-primary')       \r\n      setModal(true)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div ref={graphCard} className='card shadow-sm py-2 desk-bg-color-secondary desk-text-color-primary h-100'>\r\n      <div className='d-flex mb-1'>\r\n        <h5 className=\"px-3 pt-1 pb-0 m-0\">{props.title}</h5>\r\n        <span className='ml-auto'></span>\r\n\r\n        { props.category_selection_panel && \r\n          <CategorySelectionPanel toggleCategorySelection={toggleCategorySelection} categories={categories}/> \r\n        }\r\n\r\n        <button type=\"button\" \r\n          ref={modalButton} \r\n          className={'btn btn-link desk-text-color-primary m-0 p-0 mt-1 mr-2 fas fa-expand'} \r\n          style={{width: '28px', height: '28px', fontSize:'1em', textDecoration: 'none', outline: 'none', boxShadow: 'none'}} \r\n          onClick={toggleModal}\r\n        ></button>  \r\n      </div>\r\n  \r\n      { props.loading ? \r\n        <div className='d-flex justify-content-center'><Loader /></div> \r\n        :\r\n        <>\r\n          { props.records.length > 0 ? <RecordsTable records={props.records}/> : <NoRecords /> }\r\n          <PaginationBar readNextPage={props.readNextPage} readPreviousPage={props.readPreviousPage} changePage={props.changePage} pagination={props.pagination} />\r\n        </>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nfunction RecordsTable(props) {\r\n  return (\r\n    <div className=\"table-responsive px-3\">\r\n      <table className=\"table table-hover table-dark table-sm desk-bg-color-secondary desk-text-color-primary desk-border-color-primary w-100 mb-0\">\r\n        <thead> \r\n          <tr>\r\n            <th className='border-0 desk-text-color-secondary font-weight-bold pl-2 d-none d-lg-table-cell' style={{width:'5%'}}>№</th>\r\n            <th className='border-0 desk-text-color-secondary font-weight-bold' style={{width:'15%'}}>Дата</th>\r\n            <th className='border-0 desk-text-color-secondary font-weight-bold' style={{width:'10%'}}>Время</th>\r\n            <th className='border-0 desk-text-color-secondary font-weight-bold'>Событие</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n            { props.records.map((record, index) => {\r\n              return (\r\n                <RecordsRow record={record} key={index} index={index} />\r\n              )\r\n            }) }\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nfunction NoRecords() {\r\n  return <i className='desk-text-color-secondary ml-3'>Записи отсутствуют ...</i>\r\n}\r\n\r\n\r\nfunction CategorySelectionPanel(props) {\r\n  const toggleCategorySelection = props.toggleCategorySelection\r\n  const categories = props.categories\r\n  return(\r\n    <>\r\n      <div className='d-inline mr-3'>\r\n        {categories.map( (category, index)=>{\r\n          return <CategorySecetionButton key={index} selected={category.selected} onClick={()=>{toggleCategorySelection(index)}}>{category.name}</CategorySecetionButton>\r\n        } )}\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\n\r\nfunction CategorySecetionButton(props) {\r\n  return (\r\n    <button \r\n      type=\"button\" \r\n      className='btn btn-link desk-text-color-primary ml-3 p-0 mt-1' \r\n      style={{boxShadow: 'none'}}\r\n      onClick={props.onClick}\r\n    >\r\n      { props.selected ? <i className='fas fa-check-square text-success mr-2'></i> : <i className='far fa-square text-info mr-2'></i> }\r\n      { props.children }\r\n    </button>    \r\n  )\r\n}\r\n\r\n\r\n\r\nfunction PaginationBar(props) {\r\n  const list = Array.apply(null, Array(props.pagination.num_pages))\r\n\r\n  if (props.pagination.num_pages <= 1) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div className='d-flex justify-content-center p-3'>\r\n      <button type='button' className='btn btn-sm btn-outline-info m-1' onClick={props.readPreviousPage} > {'<<'} </button>\r\n      { list.map((item, index)=>{\r\n          const active = (index+1 === props.pagination.page_number) ? ' active' : ''\r\n          return(\r\n            <button type='button' key={index}\r\n              className={'btn btn-sm btn-outline-info m-1' + active} \r\n              style={{minWidth:'35px'}}\r\n              onClick={()=>{props.changePage(index+1)}}\r\n            >\r\n              {index+1}\r\n            </button>\r\n          )\r\n        })\r\n      }\r\n      <button type='button' className='btn btn-sm btn-outline-info m-1' onClick={props.readNextPage} > {'>>'} </button>\r\n    </div>\r\n  )\r\n}","import React, { useEffect } from 'react' \r\n\r\nimport RecordsList from './components/EventsLog/RecordsList'\r\nimport axiosInstance from \"../backendAPI/axiosClient\";\r\nimport getBaseUrl from '../backendAPI/localSettings'\r\nconst BASE_URL = getBaseUrl()\r\n\r\n\r\n\r\nexport default function WidgetEventsLog(props) {\r\n  const [records, setRecords] = React.useState([])\r\n  const [loading, setLoading] = React.useState(true)\r\n  const [categories, setCategories] = React.useState( [\r\n    {name: 'Аварийные',       code: 'Alarm',   selected: true},\r\n    {name: 'Предупреждения',  code: 'Warning',  selected: true},\r\n    {name: 'Информационные',  code: 'Info',     selected: true},\r\n    {name: 'Отладочные',      code: 'Debug',    selected: false}\r\n  ])\r\n  const device_id = props.device_id;\r\n  const [pagination, setPagination] = React.useState({next: null, previous: null})\r\n  const [page, setPage] = React.useState(1)\r\n\r\n  const toggleCategorySelection = (toggle_index) => {\r\n    setCategories( categories.map( (category, index)=> {\r\n      if (toggle_index === index) {\r\n        return {...category, selected: !category.selected}\r\n      } else { return category }\r\n    }))\r\n  }\r\n\r\n  function readLogRecords(url, props={}){\r\n    axiosInstance.get(url, props)\r\n    .then((responce) => {\r\n      responce && setRecords(responce.data.results)\r\n      responce && setPagination({\r\n        next: responce.data.next, \r\n        previous: responce.data.previous, \r\n        num_pages: responce.data.num_pages, \r\n        page_number: responce.data.page_number, \r\n      })\r\n    }) \r\n  }\r\n\r\n  function readLogPage(page) {\r\n    const selected_categories = categories.filter( category => category.selected )\r\n    const selected_category_codes = selected_categories.map( category => category.code )\r\n    readLogRecords(BASE_URL + \"/events/log/\", { params: { id: device_id, categories: selected_category_codes, page:page }} ) \r\n  }\r\n  function readNextPage() {\r\n    pagination.next && setPage(page+1)\r\n  }\r\n  function readPreviousPage() {\r\n    pagination.previous && setPage(page-1)\r\n  }\r\n  function changePage(page) {\r\n    setPage(page)\r\n  }  \r\n  function updateFirstPage(page) {\r\n    if (page===1) {readLogPage(1)}\r\n  }\r\n\r\n\r\n  // read parameters\r\n  useEffect(() => {\r\n    readLogPage(page)\r\n    const loadingTimeout = setTimeout( () => { setLoading(false) }, 500);\r\n    const tagsUpdateInterval = setInterval(()=>updateFirstPage(page), 10000)\r\n    return () => {\r\n      clearTimeout(loadingTimeout);      \r\n      clearInterval(tagsUpdateInterval);\r\n    };\r\n  }, [categories, page, ])\r\n\r\n\r\n  // render the page\r\n  return (\r\n    <React.Fragment>\r\n        <RecordsList\r\n          records={records} \r\n          title={props.widget.title} \r\n          categories={categories}\r\n          category_selection_panel={props.widget.category_selection_panel} \r\n          toggleCategorySelection={toggleCategorySelection}\r\n          readNextPage={readNextPage}\r\n          readPreviousPage={readPreviousPage}\r\n          changePage={changePage}\r\n          pagination={pagination}\r\n          loading={loading} \r\n        />\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n","import React from 'react' \r\n\r\nimport WidgetGraph from './WidgetGraph'\r\nimport WidgetTable from './WidgetTable'\r\nimport WidgetIndicator from './WidgetIndicator' \r\nimport WidgetEventsLog from './WidgetEventsLog' \r\n\r\n\r\n\r\nexport default function RenderWidgets(props) {\r\n  const widgetsTemplate = props.widgetsTemplate\r\n  const device_id = props.device_id\r\n  if (!props.widgetsTemplate) {return null}\r\n  if (!props.widgetsTemplate.widgets) {return null}\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className='container-fluid row equal p-0 m-0'>\r\n      {\r\n        widgetsTemplate.widgets.map((widget, index)=>{\r\n          return <WidgetRender widget={widget} device_id={device_id} key={index} />\r\n        })\r\n      }\r\n      </div>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\n\r\nfunction WidgetRender(props) {\r\n  const widget = props.widget\r\n  const device_id = props.device_id\r\n\r\n  if (widget.type === 'table') {\r\n    return (\r\n      <div className={`col-xl-${widget.width * 3} col-lg-${Math.min(widget.width * 6, 12)} col-md-12 p-1 m-0`}>\r\n        <WidgetTable device_id={device_id} widget={widget}/>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (widget.type === 'graph') {\r\n    return (\r\n      <div className={`col-xl-${widget.width * 3} col-lg-${Math.min(widget.width * 6, 12)} col-md-12 p-1 m-0`}>\r\n        <WidgetGraph device_id={device_id} widget={widget}/>\r\n      </div>\r\n    )    \r\n  }   \r\n\r\n  if (widget.type === 'indicator') {\r\n    return (\r\n      <div className={`col-xl-${widget.width * 3} col-lg-${Math.min(widget.width * 6, 12)} col-md-12 p-1 m-0`}>\r\n        <WidgetIndicator device_id={device_id} widget={widget}/>\r\n      </div>\r\n    )    \r\n  }    \r\n\r\n  if (widget.type === 'eventslog') {\r\n    return (\r\n      <div className={`col-xl-${widget.width * 3} col-lg-${Math.min(widget.width * 6, 12)} col-md-12 p-1 m-0`}>\r\n        <WidgetEventsLog device_id={device_id} widget={widget}/>\r\n      </div>\r\n    )    \r\n  }    \r\n}\r\n","import React from 'react' \r\nimport {useParams} from 'react-router-dom'\r\n\r\nimport DeviceHeader from '../components/DeviceHeader'\r\nimport RenderWidgets from '../../Widgets/renderWidgets'\r\n\r\n\r\n\r\nexport default function DeviceOverviewPage(props) {\r\n  const { device_id } = useParams();\r\n  const widgetsTemplate = props.widgetsTemplate;\r\n  \r\n  // render the page\r\n  return (\r\n    <React.Fragment>\r\n      <DeviceHeader device_id={device_id}/>\r\n      <RenderWidgets widgetsTemplate={widgetsTemplate} device_id={device_id}/>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n","import React from 'react' \r\n// import {useParams} from 'react-router-dom'\r\n\r\n\r\nexport default function DeviceSettingsPage() {\r\n  // const { device_id } = useParams();\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className='p-1'>\r\n        <h3>Настройки устройства</h3>\r\n        <p>Раздел находиться в разработке ... </p>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n ","import React from 'react' \r\nimport {useParams} from 'react-router-dom'\r\n\r\nimport DeviceHeader from '../components/DeviceHeader'\r\nimport RenderWidgets from '../../Widgets/renderWidgets'\r\n\r\n\r\n\r\nconst WidgetsTemplate = {\r\n  widgets:[   \r\n    {\r\n      type: 'eventslog',\r\n      width: 4,\r\n      title: 'Журнал событий',\r\n      category_selection_panel: true\r\n    }      \r\n  ]\r\n}\r\n\r\n\r\n\r\nexport default function DeviceEventsLogPage(props) {\r\n  const { device_id } = useParams();\r\n  \r\n  // render the page\r\n  return (\r\n    <React.Fragment>\r\n      <DeviceHeader device_id={device_id}/>\r\n      <RenderWidgets widgetsTemplate={WidgetsTemplate} device_id={device_id}/>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n ","import React from 'react' \r\nimport {useParams} from 'react-router-dom'\r\n\r\nimport DeviceHeader from '../components/DeviceHeader'\r\nimport RenderWidgets from '../../Widgets/renderWidgets'\r\n\r\n\r\n\r\nconst WidgetsTemplate = {\r\n  widgets:[   \r\n    {\r\n      type: 'graph',\r\n      width: 4,\r\n      height: 'calc(65vh)',\r\n      title: 'История',\r\n      tags: null,\r\n      legend: true,\r\n      toolbar: true,\r\n    }      \r\n  ]\r\n}\r\n\r\n\r\n\r\nexport default function DeviceOverviewPage(props) {\r\n  const { device_id } = useParams();\r\n  \r\n  // render the page\r\n  return (\r\n    <React.Fragment>\r\n      <DeviceHeader device_id={device_id}/>\r\n      <RenderWidgets widgetsTemplate={WidgetsTemplate} device_id={device_id}/>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n","import axiosInstance from \"./axiosClient\";\r\nimport getBaseUrl from './localSettings';\r\n\r\n\r\n// ---------------------------------------------------------------------------------\r\n// access to company parameters\r\nexport function getCompanyParameters(cb_success, cb_error=null, cb_finally=null) {\r\n  const params = {};\r\n  const endpoint = \"/company/info/\";\r\n  backendApiRequest(GET, endpoint, null, params, cb_success, cb_error, cb_finally);\r\n}\r\nexport function postCompanyParameters(parameters, cb_success, cb_error) {\r\n  const params = {};\r\n  const body = {...parameters};\r\n  const endpoint = \"/company/info/\";\r\n  backendApiRequest(POST, endpoint, body, params, cb_success, cb_error);\r\n}\r\n\r\n\r\n// ---------------------------------------------------------------------------------\r\n// access to device configuration parameters\r\nexport function getDeviceParameters(device_id, cb_success, cb_error=null) {\r\n  const params = { id: device_id };\r\n  const endpoint = \"/device/parameters/\";\r\n  backendApiRequest(GET, endpoint, null, params, cb_success, cb_error); \r\n}\r\nexport function postDeviceParameters(device_id, device_parameters, cb_success, cb_error) {\r\n  const params = { id: device_id };\r\n  const body = {...device_parameters}; \r\n  const endpoint = \"/device/parameters/\";\r\n  backendApiRequest(POST, endpoint, body, params, cb_success, cb_error); \r\n}\r\n\r\n// access to device modbus parameters\r\nexport function getDeviceModbusParameters(device_id, cb_success, cb_error=null) {\r\n  const params = { id: device_id };\r\n  const endpoint = \"/device/modbus/parameters/\";\r\n  backendApiRequest(GET, endpoint, null, params, cb_success, cb_error); \r\n}\r\nexport function postDeviceModbusParameters(device_id, device_parameters, cb_success, cb_error) {\r\n  const params = { id: device_id };\r\n  const body = {...device_parameters};\r\n  const endpoint = \"/device/modbus/parameters/\";\r\n  backendApiRequest(POST, endpoint, body, params, cb_success, cb_error);  \r\n}\r\n\r\n// access to device tags parameters\r\nexport function getDeviceTagsParameters(device_id, tags_list, cb_success, cb_error=null) {\r\n  const params = { id: device_id, tags: tags_list };\r\n  const endpoint = \"/device/tags/parameters/\";\r\n  backendApiRequest(GET, endpoint, null, params, cb_success, cb_error);\r\n}\r\nexport function postDeviceTagsParameters(device_id, tags_parameters, cb_success, cb_error) {\r\n  const params = { id: device_id };\r\n  const body = tags_parameters;\r\n  const endpoint = \"/device/tags/parameters/\";\r\n  backendApiRequest(POST, endpoint, body, params, cb_success, cb_error);\r\n}\r\nexport function deleteDeviceTags(device_id, tags_list, cb_success, cb_error=null) {\r\n  const params = { id: device_id, tags: tags_list };\r\n  const endpoint = \"/device/tags/parameters/\";\r\n  backendApiRequest(DELETE, endpoint, null, params, cb_success, cb_error);\r\n}\r\n\r\n\r\n// ---------------------------------------------------------------------------------\r\n// access to events parameters\r\nexport function getEventsConfig(device_id, events_list, cb_success) {\r\n  const params = { id: device_id, events_id: events_list };\r\n  const endpoint = \"/events/config/\";\r\n  backendApiRequest(GET, endpoint, null, params, cb_success );\r\n}\r\nexport function postEventsConfig(device_id, events_parameters, cb_success, cb_error) {\r\n  const params = { id: device_id };\r\n  const body = events_parameters;\r\n  const endpoint = \"/events/config/\";\r\n  backendApiRequest(POST, endpoint, body, params, cb_success, cb_error );\r\n}\r\nexport function deleteEvents(device_id, events_list, cb_success) {\r\n  const params = { id: device_id, events_id: events_list };\r\n  const endpoint = \"/events/config/\";\r\n  backendApiRequest(DELETE, endpoint, null, params, cb_success );\r\n}\r\n\r\n\r\n\r\n\r\n\r\n// ---------------------------------------------------------------------------------\r\n// ---------------------------------------------------------------------------------\r\n// commot backend requests\r\nconst GET     = 'GET';\r\nconst POST    = 'POST';\r\nconst DELETE  = 'DELETE';\r\n\r\nasync function backendApiRequest(method, endpoint, body, params, \r\n    cb_success, cb_error=null, cb_finally=null) {\r\n  let response = null;\r\n  const BASE_URL = getBaseUrl();\r\n\r\n  switch (method) {\r\n    case GET:\r\n      try { \r\n        response = await axiosInstance.get(BASE_URL + endpoint, { params: params } );\r\n        response && cb_success(response.data);\r\n      } catch (error) {\r\n        error.response && cb_error && cb_error(error.response.data);\r\n      }\r\n      break;\r\n\r\n    case POST:\r\n      try { \r\n        response = await axiosInstance.post(BASE_URL + endpoint, body, { params: params } );\r\n        response && cb_success(response.data);\r\n      } catch (error) {\r\n        error.response && cb_error && cb_error(error.response.data);\r\n      }\r\n      break;\r\n\r\n    case DELETE:\r\n      response = await axiosInstance.delete(BASE_URL + endpoint, { params: params } );\r\n      response && cb_success(response.data);\r\n      break;\r\n\r\n    default:\r\n      throw new Error(`Api method ${method} not supported.`);\r\n  }\r\n\r\n  cb_finally && cb_finally();\r\n}","import React from 'react';\r\n\r\nconst lableDefaultClassName = 'desk-text-color-secondary';\r\nconst inputDefaultClassName = 'form-control form-control-sm desk-bg-color-secondary-2 desk-border-color-primary desk-text-color-primary';\r\n\r\nexport function TextField(props){\r\n  /* props.titel : str\r\n     props.placeholder : str  \r\n     props.id : str\r\n     props.value : str\r\n     props.comment : str or jsx\r\n     props.onChange : function */\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"form-group\">\r\n        <label htmlFor={props.id} className={lableDefaultClassName}>{props.titel}</label>\r\n        <input \r\n          type=\"text\" \r\n          className={inputDefaultClassName} \r\n          placeholder={props.placeholder} \r\n          id={props.id} \r\n          defaultValue={props.value}\r\n          onChange={props.onChange}\r\n        >\r\n        </input>\r\n        <ErrorMessage> {props.errors} </ErrorMessage>\r\n        <CommentMessage> {props.comment} </CommentMessage>\r\n      </div>\r\n    </React.Fragment>\r\n  ) \r\n}\r\n  \r\nexport function NumberField(props){\r\n  /* props.titel : str\r\n     props.placeholder : str  => like \"12\"\r\n     props.min : str  => like \"1\"\r\n     props.max : str  => like \"5\"\r\n     props.id : str\r\n     props.value : int\r\n     props.comment : str or jsx\r\n     props.onChange : function */\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"form-group\">\r\n        <label htmlFor={props.id} className={lableDefaultClassName}>{props.titel}</label>\r\n        <input \r\n          type=\"number\" \r\n          className={inputDefaultClassName} \r\n          placeholder={props.placeholder} \r\n          id={props.id} \r\n          defaultValue={props.value}\r\n          min={props.min}\r\n          max={props.max}\r\n          onChange={props.onChange}            \r\n        >\r\n        </input>\r\n        <ErrorMessage> {props.errors} </ErrorMessage>\r\n        <CommentMessage> {props.comment} </CommentMessage>\r\n      </div>\r\n    </React.Fragment>\r\n  ) \r\n}\r\n  \r\nexport function SelectField(props){\r\n  /* props.titel : str\r\n     props.placeholder : str\r\n     props.options : [{value, name}, {value, name}, ]\r\n     props.id : str\r\n     props.value : int\r\n     props.comment : str or jsx\r\n     props.onChange : function */\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"form-group\">\r\n        <label htmlFor={props.id} className={lableDefaultClassName}>{props.titel}</label>\r\n        <select \r\n          className={inputDefaultClassName} \r\n          id={props.id} \r\n          placeholder={props.placeholder} \r\n          value={ props.value ? props.value : '' }\r\n          onChange={props.onChange}            \r\n        >\r\n          <option value=\"\" disabled hidden>---</option>\r\n          {props.options && props.options.map((option, index)=>{\r\n            return <option key={index} value={option.value}>{option.name}</option>\r\n          })}\r\n        </select>\r\n        <ErrorMessage> {props.errors} </ErrorMessage>\r\n        <CommentMessage> {props.comment} </CommentMessage>\r\n      </div>\r\n    </React.Fragment>\r\n  ) \r\n}\r\n  \r\nexport function MultipleSelectField(props){\r\n  /* props.titel : str\r\n     props.placeholder : str\r\n     props.options : [{value, name}, {value, name}, ]\r\n     props.id : str\r\n     props.value : []\r\n     props.comment : str or jsx\r\n     props.onChange : function */\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"form-group\">\r\n        <label htmlFor={props.id} className={lableDefaultClassName}>{props.titel}</label>\r\n        <select \r\n          multiple \r\n          className={inputDefaultClassName} \r\n          id={props.id} \r\n          placeholder={props.placeholder}\r\n          value={ props.value ? props.value : [] } \r\n          onChange={props.onChange}            \r\n        >\r\n          {props.options && props.options.map((option, index)=>{\r\n            return <option key={index} value={option.value}>{option.name}</option>\r\n          })}\r\n        </select>\r\n        <ErrorMessage> {props.errors} </ErrorMessage>\r\n        <CommentMessage> {props.comment} </CommentMessage>\r\n      </div>\r\n    </React.Fragment>\r\n  ) \r\n}\r\n  \r\nexport function CheckboxField(props){\r\n  /* props.titel : str\r\n      props.id : str\r\n      props.checked : boolean\r\n      props.comment : str or jsx\r\n      props.onChange : function */\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"form-check pb-3\">\r\n        <input \r\n          type=\"checkbox\" \r\n          className=\"form-check-input\" \r\n          id={props.id} \r\n          checked={props.checked}\r\n          onChange={props.onChange}\r\n        >\r\n        </input>\r\n        <span>{props.titel}</span>\r\n        <ErrorMessage> {props.errors} </ErrorMessage>\r\n        <CommentMessage> {props.comment} </CommentMessage>\r\n      </div>\r\n    </React.Fragment>\r\n  ) \r\n}\r\n  \r\nexport function InlineCheckboxField(props){\r\n  /* props.titel : str\r\n     props.id : str\r\n     props.checked : boolean\r\n     props.comment : str or jsx\r\n     props.onChange : function */\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"form-check-inline pb-3\">\r\n        <input \r\n          type=\"checkbox\" \r\n          className=\"form-check-input\" \r\n          id={props.id} \r\n          checked={props.checked}\r\n          onChange={props.onChange}\r\n        >\r\n        </input>\r\n        <span>{props.titel}</span>\r\n        <ErrorMessage> {props.errors} </ErrorMessage>\r\n        <CommentMessage> {props.comment} </CommentMessage>\r\n      </div>\r\n    </React.Fragment>\r\n  ) \r\n}\r\n\r\n\r\n// -----------------------------------------------------------------------------\r\nexport function ErrorMessage(props){\r\n  return <div className='text-small text-danger p-0 m-0'> {props.children} </div>  \r\n}\r\nexport function CommentMessage(props){\r\n  return <div className='text-small text-info p-0 m-0'> {props.children} </div> \r\n}\r\n\r\nexport function FormContainer(props) {\r\n  return <div className='container p-0' style={{maxWidth:'800px'}}> {props.children} </div> \r\n}\r\n\r\n\r\n// -----------------------------------------------------------------------------\r\n// utils\r\nexport function getSelectedOptions(e) {\r\n  var options = e.target.options;\r\n  var value = [];\r\n  for (var i = 0, l = options.length; i < l; i++) {\r\n    if (options[i].selected) {\r\n      value.push(options[i].value);\r\n    }\r\n  }  \r\n  return value\r\n}\r\n","import React, {useState, useEffect} from 'react' \r\nimport { useHistory, useParams } from \"react-router-dom\"\r\n\r\nimport Loader from '../../base/components/Loader'\r\nimport {\r\n  getDeviceTagsParameters,\r\n  postDeviceTagsParameters,\r\n  deleteDeviceTags,\r\n} from '../../backendAPI/backendAPI'\r\n\r\nimport {TextField, NumberField, SelectField, getSelectedOptions, ErrorMessage, FormContainer} from '../../base/forms/forms'\r\n\r\n\r\n\r\nexport default function TagDetailPage() {\r\n  const { tag_id, device_id } = useParams();\r\n  const [tagParameters, setTagParameters] = useState({})\r\n  const [formErrors, setFormErrors] = useState(null)\r\n  const [loading, setLoading] = React.useState(true)\r\n  const history = useHistory()\r\n\r\n  useEffect(()=>{\r\n    getDeviceTagsParameters(device_id, [tag_id], (data)=>{\r\n      setTagParameters(data[0])\r\n      setLoading(false)\r\n    })\r\n  }, [])\r\n  \r\n  const submitTagParameters = (tag_parameters) => {\r\n    postDeviceTagsParameters(device_id, [tag_parameters], \r\n      (responce_data)=>{ \r\n        setTagParameters(responce_data[0]); setFormErrors(null);  \r\n        history.push(`/device/${device_id}/admin/config/`);\r\n      },\r\n      (errors_data)=>{ setFormErrors(errors_data[0]) }\r\n    )\r\n  }\r\n\r\n  const cancelChanges = () => { \r\n    history.push(`/device/${device_id}/admin/config/`)\r\n  }\r\n\r\n  const deleteTag = () => { \r\n    deleteDeviceTags(device_id, [tag_id], ()=>{ history.push(`/device/${device_id}/admin/config/`) })\r\n  }\r\n  \r\n  return (\r\n    <React.Fragment>\r\n      { loading ? \r\n        <div className='d-flex justify-content-center'><Loader /></div> \r\n        :\r\n        <FormContainer> \r\n          <TagDetailForm tagParameters={tagParameters} formErrors={formErrors} \r\n            submitTagParameters={submitTagParameters} \r\n            cancelChanges={cancelChanges} \r\n            deleteTag={deleteTag} \r\n          />\r\n        </FormContainer> \r\n      }\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\n\r\n\r\nexport function TagCreatePage() {\r\n  const { device_id } = useParams();\r\n  const history = useHistory()\r\n  const defaultTagParameters = { \r\n    code: '', name: '', data_type: 'INT',\r\n    modbus_parameters: {data_type: 'INT', register_address: 0, read_function: '3', write_function: '6'}\r\n  }\r\n  const [formErrors, setFormErrors] = useState({})\r\n\r\n  const submitTagParameters = (tag_parameters) => {\r\n    postDeviceTagsParameters(device_id, [tag_parameters], \r\n      ()=>{ history.push(`/device/${device_id}/admin/config/`) },\r\n      (errors_data)=>{ setFormErrors(errors_data[0]) }\r\n    )\r\n  }\r\n\r\n  const cancelChanges = () => { \r\n    history.push(`/device/${device_id}/admin/config/`)\r\n  }\r\n  \r\n  return (\r\n    <FormContainer> \r\n      <TagDetailForm tagParameters={defaultTagParameters} formErrors={formErrors} \r\n        submitTagParameters={submitTagParameters} \r\n        cancelChanges={cancelChanges} \r\n      />\r\n    </FormContainer>\r\n  )\r\n}\r\n\r\n\r\n\r\n// ----------------------------------------------------------------------------------------------------------------------------\r\nfunction TagDetailForm (props) {\r\n  const [tag, setTag] = useState(props.tagParameters)\r\n  const onSubmit = props.submitTagParameters\r\n  const onCancel = props.cancelChanges\r\n  const onDelete = props.deleteTag\r\n  const buttonsStyle = {minWidth: '150px'}\r\n\r\n  const serverDataTypeOptions = [    \r\n    {value: 'INT',    name:'INT'}, \r\n    {value: 'FLOAT',  name:'FLOAT'}, \r\n    {value: 'STRING', name:'STRING'},\r\n    {value: 'BOOL',   name:'BOOL'}\r\n  ]\r\n  const modbusDataTypeOptions = [    \r\n    {value: 'WORD',   name:'WORD'}, \r\n    {value: 'INT',    name:'INT'}, \r\n    {value: 'UINT',   name:'UINT'}, \r\n    {value: 'FLOAT',  name:'FLOAT'}, \r\n    {value: 'STRING', name:'STRING'},\r\n    {value: 'BOOL',   name:'BOOL'}\r\n  ]\r\n  const modbusReadFunctionOptions = [    \r\n    {value: '1',  name:'1 - Read Coil'}, \r\n    {value: '2',  name:'2 - Read Discrete Input'}, \r\n    {value: '3',  name:'3 - Read Holding Registers'}, \r\n    {value: '4',  name:'4 - Read Input Registers'}\r\n  ]\r\n  const modbusWriteFunctionOptions = [    \r\n    {value: '5',   name:'5 - Write Single Coil'}, \r\n    {value: '6',   name:'6 - Write Single Holding Register'}, \r\n    {value: '15',  name:'15 - Write Multiple Coils'}, \r\n    {value: '16',  name:'16 - Write Multiple Holding Registers'}\r\n  ]\r\n\r\n  const handlCodeChange = (e) => { setTag({...tag, code: e.target.value}) }\r\n  const handlNameChange = (e) => { setTag({...tag, name: e.target.value}) }\r\n  const handlDataTypeChange = (e) => { setTag({...tag, data_type: getSelectedOptions(e)[0]}) }\r\n  const handlModbusDataTypeChange = (e) => { setTag({\r\n    ...tag, modbus_parameters: {...tag.modbus_parameters, data_type: getSelectedOptions(e)[0] } \r\n  })}\r\n  const handlModbusRegisterAddressChange = (e) => { setTag({\r\n    ...tag, modbus_parameters: {...tag.modbus_parameters, register_address: e.target.value } \r\n  })}\r\n  const handlModbusReadFunctionChange = (e) => { setTag({\r\n    ...tag, modbus_parameters: {...tag.modbus_parameters, read_function: getSelectedOptions(e)[0] } \r\n  })}\r\n  const handlModbusWriteFunctionChange = (e) => { setTag({\r\n    ...tag, \r\n    modbus_parameters: {...tag.modbus_parameters, write_function: getSelectedOptions(e)[0] } \r\n  })}\r\n\r\n  const handlSubmit = (e) => { \r\n    e.preventDefault();\r\n    onSubmit(tag);\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <form onSubmit={handlSubmit}> \r\n        <h5 className='text-info text-center'>Параметры тега</h5>     \r\n        <TextField titel={'Код'} id={'code'} value={tag.code} onChange={handlCodeChange} \r\n          errors={props.formErrors ? props.formErrors.code : null}\r\n        />  \r\n        <TextField titel={'Наименование'} id={'name'} value={tag.name} onChange={handlNameChange}\r\n          errors={props.formErrors ? props.formErrors.name : null}\r\n        />\r\n        <SelectField titel={'Тип данных на сервере'} id={'data_type'} value={tag.data_type} options={serverDataTypeOptions} onChange={handlDataTypeChange} \r\n          errors={props.formErrors ? props.formErrors.data_type : null}\r\n        />\r\n\r\n        <h5 className='text-info text-center'>Параметры Modbus</h5>\r\n        <SelectField titel={'Тип данных в устройстве'} id={'modbus_data_type'} value={tag.modbus_parameters ? tag.modbus_parameters.data_type : null} \r\n          options={modbusDataTypeOptions} onChange={handlModbusDataTypeChange} \r\n          errors={props.formErrors && props.formErrors.modbus_parameters ? props.formErrors.modbus_parameters.data_type : null}\r\n        />\r\n        <NumberField titel={'Адрес регистра'} id={'modbus_register_address'} value={tag.modbus_parameters ? tag.modbus_parameters.register_address : null } \r\n          onChange={handlModbusRegisterAddressChange}\r\n          errors={props.formErrors && props.formErrors.modbus_parameters ? props.formErrors.modbus_parameters.register_address : null}\r\n        />\r\n        <SelectField titel={'Функиця чтения'} id={'modbus_read_function'} value={tag.modbus_parameters ? tag.modbus_parameters.read_function : null} \r\n          options={modbusReadFunctionOptions} onChange={handlModbusReadFunctionChange} \r\n          errors={props.formErrors && props.formErrors.modbus_parameters ? props.formErrors.modbus_parameters.read_function : null}\r\n        />\r\n        <SelectField titel={'Функиця записи'} id={'modbus_write_function'} value={tag.modbus_parameters ? tag.modbus_parameters.write_function : null} \r\n          options={modbusWriteFunctionOptions} onChange={handlModbusWriteFunctionChange} \r\n          errors={props.formErrors && props.formErrors.modbus_parameters ? props.formErrors.modbus_parameters.write_function : null}  \r\n        />\r\n\r\n        <ErrorMessage>\r\n          {props.formErrors && props.formErrors.non_field_errors ? \r\n            <div className='card bg-danger text-dark my-3 p-2'> {props.formErrors.non_field_errors}</div>\r\n            : null\r\n          }\r\n        </ErrorMessage>\r\n\r\n\r\n        <div className='d-flex flex-wrap justify-content-center'>\r\n          <button type=\"submit\" className=\"btn btn-outline-primary m-2\" style={buttonsStyle}>Сохранить</button>\r\n          <button type=\"button\" className=\"btn btn-outline-secondary m-2\" style={buttonsStyle} onClick={onCancel}>Отмена</button>\r\n          { props.deleteTag && <button type=\"button\" className=\"btn btn-outline-danger m-2\" style={buttonsStyle} onClick={onDelete}>Удалить</button> }\r\n        </div>\r\n      </form>\r\n    </React.Fragment>\r\n  )\r\n}\r\n","import React, {useState, useEffect} from 'react' \r\nimport {useHistory, useParams} from \"react-router-dom\"\r\n\r\nimport Loader from '../../base/components/Loader'\r\n\r\nimport {\r\n  getDeviceParameters, \r\n  postDeviceParameters, \r\n  getDeviceModbusParameters, \r\n  postDeviceModbusParameters,\r\n  getDeviceTagsParameters\r\n} from '../../backendAPI/backendAPI'\r\n\r\nimport { TextField, NumberField, SelectField, \r\n  CheckboxField, getSelectedOptions, ErrorMessage\r\n} from '../../base/forms/forms'\r\n\r\n\r\nexport default function DeviceConfigPage() {\r\n  const { device_id } = useParams()\r\n  const [deviceParameters, setDeviceParameters] = useState({})\r\n  const [deviceParametersFormErrors, setDeviceParametersFormErrors] = useState(null)\r\n  const [deviceModbusParameters, setDeviceModbusParameters] = useState({})\r\n  const [deviceModbusParametersFormErrors, setDeviceModbusParametersFormErrors] = useState(null)\r\n  const [deviceTagsParameters, setDeviceTagsParameters] = useState([])\r\n  const [loading1, setLoading1] = React.useState(true)\r\n  const [loading2, setLoading2] = React.useState(true)\r\n  const [loading3, setLoading3] = React.useState(true)\r\n\r\n  useEffect(()=>{\r\n    getDeviceParameters(device_id, (data)=>{\r\n      setDeviceParameters(data)\r\n      setLoading1(false)\r\n    })\r\n    getDeviceModbusParameters(device_id, (data)=>{\r\n      setDeviceModbusParameters(data)\r\n      setLoading2(false)\r\n    })\r\n    getDeviceTagsParameters(device_id, [], (data)=>{\r\n      setDeviceTagsParameters(data)\r\n      setLoading3(false)\r\n    })\r\n  }, [])\r\n\r\n  const submitDeviceConfig = (device_parameters) => {\r\n    postDeviceParameters(device_id, device_parameters, \r\n      (responce_data)=>{ setDeviceParameters(responce_data); setDeviceParametersFormErrors(null); },\r\n      (errors_data)=>{ setDeviceParametersFormErrors(errors_data); },\r\n    )\r\n  }\r\n  const submitModbusParameters = (modbus_parameters) => {\r\n    postDeviceModbusParameters(device_id, modbus_parameters, \r\n      (responce_data)=>{ setDeviceModbusParameters(responce_data); setDeviceModbusParametersFormErrors(null); },\r\n      (errors_data)=>{ setDeviceModbusParametersFormErrors(errors_data); }\r\n    )\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      { loading1 || loading2 || loading3 ? \r\n        <div className='d-flex justify-content-center'><Loader /></div> \r\n        :\r\n        <div className='row'>\r\n          <div className='col-12 col-lg-5'>\r\n            <DeviceConfigsForm deviceParameters={deviceParameters} formErrors={deviceParametersFormErrors} submitDeviceConfig={submitDeviceConfig} />\r\n            <p className='my-3 border-top border-secondary'></p>\r\n            <DeviceModbusParametersForm deviceModbusParameters={deviceModbusParameters} formErrors={deviceModbusParametersFormErrors} submitModbusParameters={submitModbusParameters} />\r\n          </div>\r\n          <div className='col-12 col-lg-7 border-left border-secondary'>\r\n            <p className='my-3 d-lg-none border-top border-secondary'></p>\r\n            <TagsList deviceTagsParameters={deviceTagsParameters} device_id={device_id} />\r\n          </div>\r\n        </div>\r\n      }\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\n\r\n\r\n// ----------------------------------------------------------------------------------------------------------------------------\r\nfunction DeviceConfigsForm(props) {\r\n  const [parameters, setParameters] = useState(props.deviceParameters)\r\n  const onSubmit = props.submitDeviceConfig\r\n\r\n  const handlNameChange = (e) => { setParameters({...parameters, name: e.target.value}) }\r\n  const handlTimeoutChange = (e) => { setParameters({...parameters, timeout: e.target.value}) }\r\n  const handlPollingPeriodChange = (e) => { setParameters({...parameters, polling_period: e.target.value}) }\r\n\r\n  const handlSubmit = (e) => { \r\n    e.preventDefault();\r\n    onSubmit(parameters);\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <form onSubmit={handlSubmit}>\r\n        <h5 className='text-info'>Параметры прибора</h5>\r\n        <TextField titel={'Наименование прибора'} id={'name'} placeholder={'...'} value={parameters.name} onChange={handlNameChange}\r\n          errors={props.formErrors ? props.formErrors.name : null}\r\n        />\r\n        <NumberField titel={'Период опроса (сек)'} id={'polling_period'} placeholder={'...'} value={parameters.polling_period} min={1} \r\n          onChange={handlPollingPeriodChange}\r\n          errors={props.formErrors ? props.formErrors.polling_period : null}\r\n        />\r\n        <NumberField titel={'Таймаут соединения (сек)'} id={'timeout'} placeholder={'...'} value={parameters.timeout} \r\n          onChange={handlTimeoutChange}\r\n          errors={props.formErrors ? props.formErrors.timeout : null}\r\n        />\r\n\r\n        <ErrorMessage>\r\n          {props.formErrors && props.formErrors.non_field_errors ? <div className='card bg-danger text-dark my-3 p-2'> {props.formErrors.non_field_errors}</div> : null }\r\n        </ErrorMessage>\r\n\r\n        <div className='d-flex justify-content-center'>\r\n          <button type=\"submit\" className=\"btn btn-outline-primary\">Сохранить</button>\r\n        </div>\r\n      </form>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n// ----------------------------------------------------------------------------------------------------------------------------\r\nfunction DeviceModbusParametersForm(props) {\r\n  const [parameters, setParameters] = useState(props.deviceModbusParameters)\r\n  const onSubmit = props.submitModbusParameters\r\n\r\n  const protocolTypeOptions = [    \r\n    {value: 'RTU',    name:'Modbus-RTU'}, \r\n    {value: 'ASCII',  name:'Modbus-ASCII'}, \r\n    {value: 'TCP',     name:'Modbus-TCP'}\r\n  ]\r\n  const baudrateOptions = [    \r\n    {value: 300,    name:'300'}, \r\n    {value: 600,    name:'600'}, \r\n    {value: 1200,   name:'1200'},\r\n    {value: 2400,   name:'2400'},\r\n    {value: 4800,   name:'4800'},\r\n    {value: 9600,   name:'9600'},\r\n    {value: 14400,  name:'14400'},\r\n    {value: 19200,  name:'19200'},\r\n    {value: 28800,  name:'28800'},\r\n    {value: 38400,  name:'38400'},\r\n    {value: 57600,  name:'57600'},\r\n    {value: 115200, name:'115200'}\r\n  ]\r\n  const addressSizeOptions = [    \r\n    {value: '8', name:'8'}\r\n  ]\r\n  const parityOptions = [\r\n    {value: 'none', name: 'нет'},\r\n    {value: 'even', name: 'четность'},\r\n    {value: 'odd',  name: 'нечетность'}\r\n  ]\r\n  const stopBitOptions = [\r\n    {value: '1', name: '1'},\r\n    {value: '2',  name: '2'}\r\n  ]\r\n\r\n  const handlProtocolTypeChange = (e) => { setParameters({...parameters, protocol_type: getSelectedOptions(e)[0]}) }\r\n  const handlDeviceAddressChange = (e) => { setParameters({...parameters, device_address: e.target.value}) }\r\n  const handlBaudrateChange = (e) => { setParameters({...parameters, baudrate: getSelectedOptions(e)[0]}) }\r\n  const handlAddressSizeChange = (e) => { setParameters({...parameters, address_size: getSelectedOptions(e)[0]}) }\r\n  const handlParityChange = (e) => { setParameters({...parameters, parity: getSelectedOptions(e)[0]}) }\r\n  const handlStopbitChange = (e) => { setParameters({...parameters, stopbit: getSelectedOptions(e)[0]}) }\r\n  const handlPacketTimoutChange = (e) => { setParameters({...parameters, packet_timout: e.target.value}) }\r\n  const handlBitTimoutChange = (e) => { setParameters({...parameters, bit_timout: e.target.value}) }\r\n  const handlLowerByteForwardChange = (e) => { setParameters({...parameters, lower_byte_forward: e.target.checked}) }\r\n  const handlLowerRegisterForwardChange = (e) => { setParameters({...parameters, lower_register_forward: e.target.checked}) }\r\n  const handlAllowGroupReadingChange = (e) => { setParameters({...parameters, allow_group_reading: e.target.checked}) }\r\n\r\n  const handlSubmit = (e) => { \r\n    e.preventDefault();\r\n    onSubmit(parameters);\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <form onSubmit={handlSubmit}>\r\n        <h5 className='text-info'>Параметры протокола Modbus</h5>\r\n        <SelectField titel={'Протокол'} id={'protocol_type'} value={parameters.protocol_type} options={protocolTypeOptions} \r\n          onChange={handlProtocolTypeChange} \r\n          errors={props.formErrors ? props.formErrors.protocol_type : null}\r\n        />\r\n        <NumberField titel={'Адрес устройства'} id={'device_address'} value={parameters.device_address} min={1} max={247} \r\n          onChange={handlDeviceAddressChange}\r\n          errors={props.formErrors ? props.formErrors.device_address : null}\r\n        />\r\n        <SelectField titel={'Скорость передачи данных'} id={'baudrate'} value={parameters.baudrate} options={baudrateOptions} \r\n          onChange={handlBaudrateChange} \r\n          errors={props.formErrors ? props.formErrors.baudrate : null}\r\n        />\r\n        <SelectField titel={'Длинна адреса'} id={'address_size'} value={parameters.address_size} options={addressSizeOptions} \r\n          onChange={handlAddressSizeChange} \r\n          errors={props.formErrors ? props.formErrors.address_size : null}\r\n        />\r\n        <SelectField titel={'Контроль чётности'} id={'parity'} value={parameters.parity} options={parityOptions} \r\n          onChange={handlParityChange} \r\n          errors={props.formErrors ? props.formErrors.parity : null}\r\n        />\r\n        <SelectField titel={'Количество стоп-битов'} id={'stopbit'} value={parameters.stopbit} options={stopBitOptions} \r\n          onChange={handlStopbitChange} \r\n          errors={props.formErrors ? props.formErrors.stopbit : null}\r\n        />\r\n        <NumberField titel={'Таймаут запроса (мс)'} id={'packet_timout'} value={parameters.packet_timout} \r\n          onChange={handlPacketTimoutChange}\r\n          errors={props.formErrors ? props.formErrors.packet_timout : null}\r\n        />\r\n        <NumberField titel={'Таймаут бита (мс)'} id={'bit_timout'} value={parameters.bit_timout} \r\n          onChange={handlBitTimoutChange}\r\n          errors={props.formErrors ? props.formErrors.bit_timout : null}\r\n        />\r\n        <CheckboxField titel={'Младшим байтом вперед'} id={'lower_byte_forward'} checked={parameters.lower_byte_forward} \r\n          onChange={handlLowerByteForwardChange}\r\n          errors={props.formErrors ? props.formErrors.lower_byte_forward : null}\r\n        />  \r\n        <CheckboxField titel={'Младшим регистром вперед'} id={'lower_register_forward'} checked={parameters.lower_register_forward} \r\n          onChange={handlLowerRegisterForwardChange}\r\n          errors={props.formErrors ? props.formErrors.lower_register_forward : null}\r\n        />  \r\n        <CheckboxField titel={'Разрешить групповое чтение'} id={'allow_group_reading'} checked={parameters.allow_group_reading} \r\n          onChange={handlAllowGroupReadingChange}\r\n          errors={props.formErrors ? props.formErrors.allow_group_reading : null}\r\n        />  \r\n        \r\n        <ErrorMessage>\r\n          {props.formErrors && props.formErrors.non_field_errors ? <div className='card bg-danger text-dark my-3 p-2'> {props.formErrors.non_field_errors}</div> : null }\r\n        </ErrorMessage>\r\n\r\n        <div className='d-flex justify-content-center'>\r\n          <button type=\"submit\" className=\"btn btn-outline-primary\">Сохранить</button>\r\n        </div>\r\n      </form>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n// ----------------------------------------------------------------------------------------------------------------------------\r\nfunction TagsList (props) {\r\n  const tags = props.deviceTagsParameters\r\n  const history = useHistory()\r\n\r\n  const createNewTag = () => {\r\n    history.push(`/device/${props.device_id}/admin/config/tags/create/`)\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className='d-flex'>\r\n        <h5 className='text-info'>Теги прибора</h5>\r\n        <button type=\"button\" className=\"btn btn-sm btn-outline-success ml-auto\" onClick={createNewTag}> \r\n          <i className='fas fa-plus px-1'></i> Добавить новый тег\r\n        </button>\r\n      </div>\r\n\r\n      { tags.length > 0 ?\r\n        <div className=\"table-responsive\">\r\n          <table className=\"table table-hover table-dark table-striped table-sm desk-bg-color-secondary desk-text-color-primary desk-border-color-primary w-100 mb-0\">\r\n            <thead> \r\n              <tr>\r\n                <th className='border-0 text-secondary font-weight-bold pl-2'>№</th>\r\n                <th className='border-0 text-secondary font-weight-bold'>Код параметра</th>\r\n                <th className='border-0 text-secondary font-weight-bold'>Тип данных</th>\r\n                <th className='border-0 text-secondary font-weight-bold'>Наименование</th>\r\n                <th className='border-0 text-secondary font-weight-bold'>Текущее значение</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {\r\n                tags.map((tag, index)=>{\r\n                  return ( <TagsListEntry key={index} tag={tag} index={index} device_id={props.device_id} /> )\r\n                })\r\n              }\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        :\r\n        <i className='text-secondary ml-3'>Теги не заданы ... </i>\r\n      }\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\n\r\nfunction TagsListEntry (props) {\r\n  const tag = props.tag\r\n  const history = useHistory()\r\n\r\n  const goToTagDetail = (tag_id) => {\r\n    history.push(`/device/${props.device_id}/admin/config/tags/${tag_id}/detail/`)\r\n  }\r\n\r\n  return (\r\n    <tr className='table-row-like-link' onClick={()=> goToTagDetail(tag.id)}>\r\n      <td className='border-0 text-secondary pl-2'> {props.index + 1} </td> \r\n      <td className='border-0'> {tag.code} </td>\r\n      <td className='border-0'> {tag.data_type} </td>\r\n      <td className='border-0'> {tag.name} </td>\r\n      <td className='border-0'> {tag.value} </td>\r\n    </tr>\r\n  )\r\n}\r\n\r\n\r\n\r\n\r\n","import React from 'react' \r\n\r\n\r\nexport default function Page404() {\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className='desk-bg-color-primary text-secondary content-height'>\r\n        <div className='container mt-5 text-center'>\r\n          <h1>Error 404</h1>\r\n          <h3>Страница не найдена</h3>\r\n        </div>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n ","import React, {useState, useEffect} from 'react' \r\n\r\nimport Loader from '../../base/components/Loader'\r\nimport {getDeviceParameters} from '../../backendAPI/backendAPI'\r\n\r\n\r\n\r\nexport default function DeviceStatusBar (props) {\r\n    const device_id = props.device_id;\r\n    const [deviceParameters, setDeviceParameters] = useState({})\r\n    const [loading, setLoading] = React.useState(true)\r\n  \r\n    useEffect(()=>{\r\n      getDeviceParameters(device_id, (data)=>{\r\n        setDeviceParameters(data)\r\n        setLoading(false)\r\n      })\r\n    }, [])\r\n  \r\n    return (\r\n      <React.Fragment>\r\n        { loading ? \r\n          <div className='d-flex justify-content-center'><Loader /></div> \r\n          :\r\n          <div className='d-flex border-bottom border-secondary mb-3 pb-2'>\r\n            <h5 className='pt-2 mt-1'>Прибор: <b>{deviceParameters.name}</b></h5>\r\n            <div className='ml-auto mx-3 px-3 border-x border-secondary'>\r\n              { deviceParameters.is_online ? \r\n                <div className='text-success'>\r\n                  <span>Онлайн</span> <br/>\r\n                  <i className='fas fa-check text-center w-100'></i>\r\n                </div>\r\n              : <div className='text-danger'>\r\n                  <span>Нет связи</span> <br/>\r\n                  <i className='fas fa-times text-center w-100'></i>\r\n                </div>\r\n              }\r\n            </div>\r\n            <div>\r\n              <p className='m-0 mr-1 text-right'>Последний сеанс связи: <br/> {deviceParameters.verbose_last_update}</p>\r\n            </div>\r\n          </div>\r\n        }\r\n      </React.Fragment>\r\n    )\r\n  }\r\n  \r\n  ","import React from 'react' \r\nimport {Switch, Route, useParams} from \"react-router-dom\"\r\n\r\nimport TagDetailPage, {TagCreatePage} from './tagDetail'\r\nimport DeviceConfigPage from './deviceDetail'\r\nimport Page404 from '../../base/pages/pageNotFound'\r\nimport DeviceStatusBar from '../components/AdminPageDeviceStatusBar'\r\n\r\n\r\n\r\n\r\nexport default function DeviceAdminPage() {\r\n  const { device_id } = useParams();\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <h3 className='p-1'>Настройка параметров прибора</h3>\r\n      <div className='px-3 pb-3 pt-2 mx-1 my-0 desk-bg-color-secondary rounded desk-text-color-primary' style={{minHeight: 'calc(100vh - 135px)'}}>\r\n        <DeviceStatusBar device_id={device_id}/>\r\n        <Switch>\r\n          <Route exact path={'/device/:device_id/admin/config/'} component={()=><DeviceConfigPage/>} />\r\n          <Route exact path={`/device/:device_id/admin/config/tags/:tag_id/detail/`} component={()=><TagDetailPage/>} />\r\n          <Route exact path={`/device/:device_id/admin/config/tags/create/`} component={()=><TagCreatePage/>} />\r\n          <Route component={Page404} />\r\n        </Switch> \r\n      </div>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\n\r\n\r\n","import React, {useEffect} from 'react';\r\nimport {useParams} from 'react-router-dom';\r\n\r\nimport {TextField, NumberField, SelectField, MultipleSelectField,\r\n  CheckboxField, getSelectedOptions\r\n} from '../../base/forms/forms';\r\n\r\nimport sortWidgetsByOrder from '../utils/sortWidgetsByOrder';\r\n\r\nimport Loader from '../../base/components/Loader';\r\nimport axiosInstance from \"../../backendAPI/axiosClient\";\r\nimport getBaseUrl from '../../backendAPI/localSettings';\r\nconst BASE_URL = getBaseUrl();\r\n\r\nexport default function WidgetsAdminPage(props) {\r\n  const { device_id } = useParams();\r\n  const updateWidgetsTemplate = props.updateWidgetsTemplate;\r\n  const [widgetsTemplate, setWidgetsTemplate] = React.useState( sortWidgetsByOrder(props.widgetsTemplate) );\r\n  const [selectedWidget, setSelectedWidget] = React.useState(0);\r\n  const [tags, setTags] = React.useState([]);\r\n\r\n  // read tags list\r\n  const readDeviceTags = () => {\r\n    axiosInstance.get(BASE_URL + \"/device/tags/value/\", { params: { id: device_id }} )\r\n    .then((responce) => {\r\n      responce && setTags(responce.data)\r\n    })  \r\n  };\r\n\r\n  useEffect(() => {\r\n    readDeviceTags();\r\n  }, []);\r\n\r\n\r\n  // I use it for fix bug: witout this, when I change the same type forms, \r\n  // form fields data does not changing \r\n  // if i hide and show the form, fields data update correctly\r\n  const [displayWidget, setDisplayWidget] = React.useState(false); \r\n  const rerenderWidgetForm = () => {\r\n    setDisplayWidget(false);\r\n    setTimeout( () => { setDisplayWidget(true) }, 0);\r\n  };\r\n  useEffect(() => {\r\n    rerenderWidgetForm()\r\n  }, [selectedWidget, tags]); \r\n\r\n\r\n  // control buttons\r\n  const changeSelectedWidget = (widgetNumber) => {\r\n    setSelectedWidget(widgetNumber)\r\n  };\r\n\r\n  const saveWidgetsTemplate = () => {\r\n    updateWidgetsTemplate(widgetsTemplate)\r\n  };\r\n\r\n  const cancelTemplateChanges = () => {\r\n    setWidgetsTemplate( sortWidgetsByOrder(props.widgetsTemplate) )\r\n    setSelectedWidget(0)\r\n    rerenderWidgetForm()\r\n  };\r\n\r\n  const deleteWidget = (index) => {\r\n    const wt = widgetsTemplate.widgets.map((w)=>{return w})\r\n    wt.splice(index, 1)\r\n    setWidgetsTemplate({widgets: wt})\r\n    setSelectedWidget(0)\r\n  };\r\n\r\n  // update widget config\r\n  const updateWidget = (WidgetData) => {\r\n    const wt = widgetsTemplate.widgets.map((w, index)=>{\r\n      if (index === selectedWidget) {\r\n        return WidgetData\r\n      } else {\r\n        return w\r\n      }\r\n    })\r\n    setWidgetsTemplate({widgets: wt})\r\n  };\r\n\r\n  // const onChangeWidgetOrder = (w_index, new_order) => {\r\n  //   // TODO\r\n  //   ;\r\n  // }\r\n\r\n  // add new widget\r\n  const addWidgetToTemplate = (widget) => {\r\n    var a = widgetsTemplate.widgets.map((item)=>{return item})\r\n    a.push(widget)\r\n    setWidgetsTemplate({widgets: a})   \r\n  };\r\n\r\n  const addWidgetHendler = (type) => {\r\n    if (type === 'table') { addWidgetToTemplate(DefaultTable) } \r\n    else if (type === 'graph') { addWidgetToTemplate(DefaultGraph) }\r\n    else if (type === 'indicator') { addWidgetToTemplate(DefaultIndicator) }\r\n  };\r\n\r\n  if (!widgetsTemplate.widgets) {return <Loader />}\r\n\r\n  // render page\r\n  return (\r\n    <React.Fragment>\r\n      <h3 className='p-1'>Настройка виджетов</h3>\r\n      <div className='row equal p-0 m-0'>\r\n        <div className='col-md-6 col-lg-7 col-xl-8 px-1' style={{minHeight: '80vh'}}>\r\n          <div className='p-0 m-0 desk-bg-color-secondary rounded h-100'>\r\n            <WidgetsGrid widgetsTemplate={widgetsTemplate} selectedWidget={selectedWidget} changeSelectedWidget={changeSelectedWidget}/>\r\n          </div>\r\n        </div>\r\n        <div className='col-md-6 col-lg-5 col-xl-4 px-1' style={{minHeight: '80vh'}}>\r\n          <div className='p-0 m-0 desk-bg-color-secondary rounded h-100'>\r\n            <WidgetsControlPanel addWidget={addWidgetHendler} saveWidgetsTemplate={saveWidgetsTemplate} cancelChanges={cancelTemplateChanges}/>\r\n            { displayWidget ? \r\n              <WidgetForm widget={widgetsTemplate.widgets[selectedWidget]} tags={tags} updateWidget={updateWidget} deleteWidget={()=>deleteWidget(selectedWidget)}/> \r\n            : null \r\n            }\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n\r\n\r\n\r\n// -------------------------------------------------------------------------------------------------\r\nfunction WidgetsGrid(props){\r\n  const widgetsTemplate = props.widgetsTemplate\r\n  const selectedWidget = props.selectedWidget\r\n  const changeSelectedWidget = props.changeSelectedWidget\r\n\r\n  if (!widgetsTemplate.widgets) {return <Loader />}\r\n\r\n  const content = widgetsTemplate.widgets.map((widget, index)=>{\r\n    const btnAddClass= (index===selectedWidget) ?  'border-primary' : ''\r\n    return (\r\n      <div key={index} className={`col-${widget.width * 3} p-1 m-0`}> \r\n        <button className={'btn desk-bg-color-secondary desk-text-color-secondary w-100 h-100 text-left p-0 ' + btnAddClass} style={{overflow:'hidden', minHeight:'10vh', boxShadow: 'none'}} onClick={()=>{changeSelectedWidget(index)}}>\r\n          <div className='h-100 p-0 px-2'>\r\n            <span className='small text-nowrap'>{widget.title}</span>\r\n            <WidgetPreview widget={widget} />\r\n          </div>\r\n        </button>\r\n      </div>\r\n    )\r\n  })\r\n\r\n  return (\r\n    <div className='d-flex justify-content-center m-0 p-4' style={{}}>\r\n      <div className='row equal rounded desk-bg-color-primary m-0 p-3 w-100' style={{maxWidth:'800px'}}>\r\n        {content}\r\n      </div>\r\n    </div>\r\n  )\r\n} \r\n\r\n\r\nconst WidgetPreview = (props) => {\r\n  const widget = props.widget\r\n  const color = props.color ? props.color : 'secondary'\r\n\r\n  if (widget.type === 'table') {\r\n    return (\r\n      <div className='d-flex justify-content-center'>\r\n        <span className={`fas fa-table text-${color} m-2`} style={{fontSize:'4em'}}></span>\r\n      </div>\r\n    )\r\n  } else if (widget.type === 'graph') {\r\n    return (\r\n      <div className='d-flex justify-content-center'>\r\n        <span className={`fas fa-chart-area text-${color} m-2`} style={{fontSize:'4em'}}></span>\r\n      </div>\r\n      )\r\n  } else if (widget.type === 'indicator') {\r\n    return (\r\n      <div className='d-flex justify-content-center'>\r\n        <span className={`border rounded-sm text-${color} border-${color} text-nowrap m-2 px-2`} style={{fontSize:'1.5em'}}>{widget.addTextLeft} XX.X {widget.addTextRight}</span>\r\n      </div>\r\n      )\r\n  } else {\r\n    return null\r\n  }   \r\n}\r\n\r\n\r\n// -------------------------------------------------------------------------------------------------\r\nfunction WidgetsControlPanel(props){\r\n  const [show, setShow] = React.useState(false);\r\n  const handleClose = () => setShow(false);\r\n  const handleShow = () => setShow(true);\r\n\r\n  const handleAddWidget = (type) => {\r\n    props.addWidget(type);\r\n    handleClose();\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className='p-2'> \r\n        <div className='m-1 pt-2 pb-3 border-bottom border-secondary'>\r\n          <div className='d-flex justify-content-left'>\r\n            <button className='btn btn-outline-info btn-sm mr-3' type='button' onClick={handleShow}> Добавить виджет</button>\r\n            <button className='btn btn-outline-success btn-sm mr-3' type='button' onClick={props.saveWidgetsTemplate}>Сохранить</button>\r\n            <button className='btn btn-outline-danger btn-sm' type='button' onClick={props.cancelChanges}>Отмена</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <ModalSelectWidgetType show={show} handleClose={handleClose} handleAddWidget={handleAddWidget}/>\r\n    </>\r\n  )\r\n}\r\n\r\n\r\nfunction WidgetForm(props){\r\n  const widget = props.widget\r\n  const tags = props.tags\r\n  const updateWidget = props.updateWidget\r\n  const deleteWidget = props.deleteWidget\r\n  let w = {}\r\n\r\n  if (! widget) {return null}\r\n\r\n  if (widget.type === 'table') { w = <WTableForm widget={widget} tags={tags} updateWidget={updateWidget} deleteWidget={deleteWidget}/> }\r\n  if (widget.type === 'graph') { w = <WGraphForm widget={widget} tags={tags} updateWidget={updateWidget} deleteWidget={deleteWidget}/> }\r\n  if (widget.type === 'indicator') { w = <WIndicatorForm widget={widget} tags={tags} updateWidget={updateWidget} deleteWidget={deleteWidget}/> } \r\n  \r\n  return (\r\n    <div className='p-0 m-0 my-1'> \r\n      <FormContainer> {w} </FormContainer>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nfunction FormContainer(props){\r\n  return (\r\n    <div className='desk-text-color-primary p-2 m-0 mx-1 h-100'>\r\n      {props.children}\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n// -------------------------------------------------------------------------------------------------\r\nfunction ModalSelectWidgetType(props){\r\n  const WidgetTypeButton = (props) => {\r\n    return (\r\n      <div className='col-4 p-1 w-100'>\r\n        <button type=\"button\" className=\"btn btn-primary w-100 h-100\" onClick={props.onClick}>\r\n          <div className='h-100 p-0 px-2'>\r\n            {props.children}\r\n          </div>\r\n        </button>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (props.show) {\r\n    return(\r\n      <div className=\"modal modal-bg d-block\">\r\n        <div className=\"modal-dialog\">\r\n          <div className=\"modal-content\">\r\n\r\n            <div className=\"modal-header\">\r\n              <h4 className=\"modal-title\">Добавить новый виджет</h4>\r\n              <button type=\"button\" className=\"close\" onClick={props.handleClose}>&times;</button>\r\n            </div>\r\n\r\n            <div className=\"modal-body\">\r\n              <div className='row equal px-1'>\r\n                <WidgetTypeButton onClick={()=> props.handleAddWidget('indicator')}>\r\n                  <span className='text-nowrap'>Индикатор</span>\r\n                  <div className='pt-2'></div>\r\n                  <WidgetPreview widget={{type:'indicator'}} color={'light'} />\r\n                </WidgetTypeButton>\r\n                <WidgetTypeButton onClick={()=> props.handleAddWidget('table')}>\r\n                  <span className='text-nowrap'>Таблица</span>\r\n                  <WidgetPreview widget={{type:'table'}} color={'light'} />\r\n                </WidgetTypeButton>\r\n                <WidgetTypeButton onClick={()=> props.handleAddWidget('graph')}>\r\n                  <span className='text-nowrap'>График</span>\r\n                  <WidgetPreview widget={{type:'graph'}} color={'light'} />\r\n                </WidgetTypeButton>  \r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"modal-footer\">\r\n              <button type=\"button\" className=\"btn btn-danger\" onClick={props.handleClose}>Отмена</button>\r\n            </div>\r\n\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  } else {\r\n    return null\r\n  }\r\n}\r\n\r\n\r\n// -------------------------------------------------------------------------------------------------\r\nfunction WTableForm(props){\r\n  const widget = props.widget\r\n  const tags = props.tags\r\n  const updateWidget = props.updateWidget\r\n  const columnOptions = [\r\n    {value: '#No', name: '№'},\r\n    {value: 'code', name: 'Код тега'},\r\n    {value: 'name', name: 'Наименование тега'},\r\n    {value: 'value', name: 'Значение тега'}\r\n  ]\r\n  let tagsOptions = []\r\n\r\n  if (tags) {\r\n    tagsOptions = tags.map((tag)=>{\r\n      return {value: tag.code, name: (tag.code + ' - ' + tag.name) }\r\n    })\r\n  }\r\n\r\n  const handlTitleChange = (e) => { updateWidget({...widget, title: e.target.value}) }\r\n  const handlOrderChange = (e) => { updateWidget({...widget, order: e.target.value}) }\r\n  const handlWidthChange = (e) => { updateWidget({...widget, width: e.target.value}) }\r\n  const handlSelectedTagsChange = (e) => { updateWidget({...widget, tags: getSelectedOptions(e)}) }\r\n  const handlSelectedColumnsChange = (e) => { updateWidget({...widget, columns: getSelectedOptions(e)}) }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className='d-flex'>\r\n        <h6>Таблица</h6>\r\n        <button type=\"button\" className=\"btn btn-sm btn-outline-danger ml-auto\" onClick={props.deleteWidget}>Удалить</button>\r\n      </div>\r\n      <form>\r\n        <TextField titel={'Название'} id={'title'} placeholder={'...'} value={widget.title} onChange={handlTitleChange}/>\r\n        <NumberField titel={'Порядок отображения'} id={'order'} placeholder={'...'} value={widget.order} onChange={handlOrderChange}/>\r\n        <NumberField titel={'Ширина'} id={'width'} placeholder={'...'} value={widget.width} min={1} max={4} onChange={handlWidthChange}/>\r\n        <MultipleSelectField \r\n          titel={'Теги'} \r\n          id={'tags'} \r\n          placeholder={'...'} \r\n          value={widget.tags} \r\n          options={tagsOptions} \r\n          comment={<span className='m-0 p-0 d-block mt-1'>Удерживайте <kbd className='text-info'>Ctrl</kbd> для выбора нескольких элементов</span>}\r\n          onChange={handlSelectedTagsChange}\r\n        />\r\n        <MultipleSelectField \r\n          titel={'Колонки'} \r\n          id={'columns'} \r\n          placeholder={'...'} \r\n          value={widget.columns} \r\n          options={columnOptions} \r\n          comment={<span className='m-0 p-0 d-block mt-1'>Удерживайте <kbd className='text-info'>Ctrl</kbd> для выбора нескольких элементов</span>}\r\n          onChange={handlSelectedColumnsChange}\r\n        />          \r\n      </form>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\n// table config example\r\n// {\r\n//   type: 'table',\r\n//   width: 2,\r\n//   title: 'Таблица параметров 2',\r\n//   tags: ['TEMP1', 'TEMP2', 'TEMP3'],   \r\n//   columns: ['#No', 'code', 'name', 'value']              \r\n// }\r\n\r\n\r\n// ----------------------------------------------------------------------------------\r\nfunction WGraphForm(props){\r\n  const widget = props.widget\r\n  const tags = props.tags\r\n  const updateWidget = props.updateWidget\r\n  let tagsOptions = []\r\n\r\n  if (tags) {\r\n    tagsOptions = tags.map((tag)=>{\r\n      return  {value: tag.code, name: (tag.code + ' - ' + tag.name) }\r\n    })\r\n  }\r\n\r\n  const handlTitleChange = (e) => { updateWidget({...widget, title: e.target.value}) }\r\n  const handlOrderChange = (e) => { updateWidget({...widget, order: e.target.value}) }\r\n  const handlWidthChange = (e) => { updateWidget({...widget, width: e.target.value}) }\r\n  const handlSelectedTagsChange = (e) => { updateWidget({...widget, tags: getSelectedOptions(e)}) }\r\n  const handlLegendChange = (e) => { updateWidget({...widget, legend: e.target.checked}) }\r\n  const handlToolbarChange = (e) => { updateWidget({...widget, toolbar: e.target.checked}) }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className='d-flex'>\r\n        <h6>График</h6>\r\n        <button type=\"button\" className=\"btn btn-sm btn-outline-danger ml-auto\" onClick={props.deleteWidget}>Удалить</button>\r\n      </div>\r\n      <form>\r\n        <TextField titel={'Название'} id={'title'} placeholder={'...'} value={widget.title} onChange={handlTitleChange}/>\r\n        <NumberField titel={'Порядок отображения'} id={'order'} placeholder={'...'} value={widget.order} onChange={handlOrderChange}/>\r\n        <NumberField titel={'Ширина'} id={'width'} placeholder={'...'} value={widget.width} min={1} max={4} onChange={handlWidthChange}/>\r\n        <MultipleSelectField \r\n          titel={'Теги'} \r\n          id={'tags'} \r\n          placeholder={'...'} \r\n          value={widget.tags} \r\n          options={tagsOptions} \r\n          comment={<span className='m-0 p-0 d-block mt-1'>Удерживайте <kbd className='text-info'>Ctrl</kbd> для выбора нескольких элементов</span>}\r\n          onChange={handlSelectedTagsChange}\r\n        />\r\n        <CheckboxField titel={'Легенда'} id={'legend'} checked={widget.legend} onChange={handlLegendChange}/>  \r\n        <CheckboxField titel={'Панель инструментов'} id={'toolbar'} checked={widget.toolbar} onChange={handlToolbarChange}/>  \r\n      </form>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\n// graph config example\r\n// {\r\n//   type: 'graph',\r\n//   width: 2,\r\n//   title: 'Влажность',\r\n//   tags: ['RH1', 'RH2'],\r\n//   legend: true,\r\n//   toolbar: true,\r\n// }  \r\n\r\n\r\n// ----------------------------------------------------------------------------------\r\nfunction WIndicatorForm(props){\r\n  const widget = props.widget\r\n  const tags = props.tags\r\n  const updateWidget = props.updateWidget\r\n  let tagsOptions = []\r\n\r\n  if (tags) {\r\n    tagsOptions = tags.map((tag)=>{\r\n      return {value: tag.code, name: (tag.code + ' - ' + tag.name) }\r\n    })\r\n  }\r\n\r\n  const handlTitleChange = (e) => { updateWidget({...widget, title: e.target.value}) }\r\n  const handlOrderChange = (e) => { updateWidget({...widget, order: e.target.value}) }\r\n  const handlWidthChange = (e) => { updateWidget({...widget, width: e.target.value}) }\r\n  const handlSelectedTagsChange = (e) => { updateWidget({...widget, tags: getSelectedOptions(e)}) }  \r\n  const handlPrecisionChange = (e) => { updateWidget({...widget, precision: e.target.value}) }  \r\n  const handlTextLeftChange = (e) => { updateWidget({...widget, addTextLeft: e.target.value}) }\r\n  const handlTextRightChange = (e) => { updateWidget({...widget, addTextRight: e.target.value}) }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className='d-flex'>\r\n        <h6>Индикатор</h6>\r\n        <button type=\"button\" className=\"btn btn-sm btn-outline-danger ml-auto\" onClick={props.deleteWidget}>Удалить</button>\r\n      </div>\r\n      <form>\r\n        <TextField titel={'Название'} id={'title'} placeholder={'...'} value={widget.title} onChange={handlTitleChange}/>\r\n        <NumberField titel={'Порядок отображения'} id={'order'} placeholder={'...'} value={widget.order} onChange={handlOrderChange}/>\r\n        <NumberField titel={'Ширина'} id={'width'} placeholder={'...'} value={widget.width} min={1} max={4} onChange={handlWidthChange}/>\r\n        <SelectField \r\n          titel={'Тег'} \r\n          id={'tags'} \r\n          placeholder={'...'} \r\n          value={widget.tags[0]} \r\n          options={tagsOptions} \r\n          onChange={handlSelectedTagsChange}          \r\n        />\r\n        <NumberField titel={'Количество знаков после запятой'} id={'precision'} placeholder={'...'} value={widget.precision} min={0} max={5} onChange={handlPrecisionChange}/>\r\n        <TextField titel={'Добавить текст слева'} id={'addTextLeft'} placeholder={'...'} value={widget.addTextLeft} onChange={handlTextLeftChange}/>\r\n        <TextField titel={'Добавить текст справа'} id={'addTextRight'} placeholder={'...'} value={widget.addTextRight} onChange={handlTextRightChange}/>\r\n      </form>        \r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\n// indicator config example\r\n// {\r\n//   type: 'indicator',\r\n//   width: 1,\r\n//   title: 'Температура зоны 1',\r\n//   addTextLeft: '',\r\n//   addTextRight: '°C',      \r\n//   tags: ['PT1'],                \r\n// }\r\n\r\n\r\n\r\n\r\n// ----------------------------------------------------------------------------------\r\n// utils\r\n\r\nconst DefaultTable = {\r\n  type: 'table',\r\n  width: 4,\r\n  title: 'Новая таблица',\r\n  tags: [],   \r\n  columns: ['#No', 'code', 'name', 'value']               \r\n}\r\n\r\nconst DefaultGraph = {\r\n  type: 'graph',\r\n  width: 4,\r\n  title: 'Новый график',\r\n  tags: [],\r\n  legend: false,\r\n  toolbar: true,              \r\n}\r\n\r\nconst DefaultIndicator = {\r\n  type: 'indicator',\r\n  width: 1,\r\n  title: 'Новый индикатор',\r\n  tags: [],          \r\n  precision: 1,     \r\n}","import React, {useState, useEffect} from 'react' \r\nimport {NavLink, useParams} from 'react-router-dom'\r\n\r\nimport Loader from '../../base/components/Loader'\r\n\r\nimport {\r\n  getEventsConfig,\r\n  postEventsConfig,\r\n  deleteEvents,\r\n  getDeviceParameters,\r\n} from '../../backendAPI/backendAPI'\r\n\r\n\r\n\r\nexport default function EventsAdminPage() {\r\n  const { device_id } = useParams();\r\n  const [events, setEvents] = useState([])\r\n  const [deviceData, setDeviceData] = React.useState({})\r\n  const [loading, setLoading] = React.useState(true)\r\n\r\n  function handlEventDelete(event_id) {\r\n    deleteEvents(device_id, [event_id], ()=>{\r\n      setEvents(\r\n        events.filter((event)=>{ return event_id === event.id ? false : true })\r\n      )\r\n    }) \r\n  }  \r\n\r\n  function toggleEventEnable(event) {\r\n    const events_parameters = [{...event, enable: !event.enable}]  \r\n    postEventsConfig(device_id, events_parameters, \r\n      (data)=>{\r\n        const ev = events.map((event)=>{ return data[0].id === event.id ? {...data[0]} : event })\r\n        setEvents(ev)\r\n      }, \r\n      (errors_data)=>{ console.log(errors_data); }\r\n    )\r\n  }\r\n\r\n  useEffect(() => {\r\n    getEventsConfig(device_id, [], (data)=>{\r\n      setEvents(data);\r\n      setLoading(false);\r\n    }) \r\n    getDeviceParameters(device_id, setDeviceData);\r\n  }, [])\r\n\r\n  return (\r\n    <React.Fragment>\r\n        <h3 className='p-1'>Настройка событий устройства</h3>\r\n        <div className='p-3 mx-1 my-0 desk-bg-color-secondary desk-text-color-primary rounded' style={{minHeight: 'calc(100vh - 135px)'}}>\r\n          { loading ? \r\n            <div className='d-flex justify-content-center'><Loader /></div> : \r\n            <React.Fragment>\r\n              <div className='d-flex mb-3 border-bottom border-secondary pb-3'>\r\n                <h4 className='pt-1 text-info'>Список событий устройства \"{deviceData.name}\"</h4>\r\n                <NavLink  to={`/device/${device_id}/admin/events/create/`} \r\n                          className='btn btn-outline-info ml-auto'\r\n                          device_id={device_id}\r\n                >\r\n                  Добавить новое событие <i className=''></i>\r\n                </NavLink>\r\n              </div>\r\n\r\n              { events.length > 0 ?\r\n                <EventsList events={events} device_id={device_id} handlEventDelete={handlEventDelete} toggleEventEnable={toggleEventEnable}/>\r\n                :\r\n                <NoEvents />\r\n              }\r\n            </React.Fragment>\r\n          }\r\n        </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n\r\n\r\n//---------------------------------------------------------------------------------------\r\nfunction EventsList(props) {\r\n  const events = props.events;\r\n  const device_id = props.device_id;\r\n  const handlEventDelete = props.handlEventDelete;\r\n  const toggleEventEnable = props.toggleEventEnable;\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <table className=\"table table-dark table-sm table-hover desk-bg-color-secondary desk-text-color-primary desk-border-color-primary mb-0\">\r\n        <thead>\r\n          <tr className='desk-text-color-secondary'>\r\n            <th className='border-0'>№</th>\r\n            <th className='border-0'>Событие</th>\r\n            <th className='border-0'>Контролируется</th>\r\n            <th className='border-0'>Сейчас активны</th>\r\n            <th className='border-0'>Удалить</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <EventsListEntry events={events} device_id={device_id} handlEventDelete={handlEventDelete} toggleEventEnable={toggleEventEnable}/>\r\n        </tbody>\r\n      </table>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\n\r\n\r\nfunction EventsListEntry(props) {\r\n  const events = props.events;\r\n  const device_id = props.device_id;\r\n  const handlEventDelete = props.handlEventDelete;\r\n  const toggleEventEnable = props.toggleEventEnable;\r\n\r\n  return (\r\n    <React.Fragment>\r\n      { events.map((event, index)=>{\r\n        return ( \r\n          <React.Fragment key={index}> \r\n            <tr> \r\n              <td className='desk-text-color-secondary py-2'>{index+1}</td>\r\n\r\n              <td className='py-0'>\r\n                  <NavLink to={`/device/${device_id}/admin/events/${event.id}/detail/`} \r\n                    className='btn btn-link w-100 text-left pl-0 py-2 desk-text-color-primary'\r\n                  >\r\n                    { event.raise_message ? \r\n                      event.raise_message \r\n                    : \r\n                      <i className='desk-text-color-secondary'>Сообщение не задано ...</i>\r\n                    }\r\n                  </NavLink>\r\n              </td>\r\n\r\n              <td>\r\n                { event.enable ? \r\n                  <button className='btn btn-outline-dark fas fa-check text-success border-0' \r\n                    onClick={() => toggleEventEnable(event)}\r\n                  ></button> \r\n                : \r\n                  <button className='btn btn-outline-dark fas fa-times desk-text-color-secondary border-0' \r\n                    style={{fontSize:'1.3rem'}} \r\n                    onClick={() => toggleEventEnable(event)}\r\n                  ></button>\r\n                }\r\n              </td>\r\n\r\n              <td>\r\n                { event.is_active ? \r\n                  <i className='fas fa-exclamation-triangle text-warning ml-3 py-2' style={{fontSize:'1.1rem'}}></i> \r\n                : \r\n                  ''\r\n                }\r\n              </td>\r\n\r\n              <td>  \r\n                <button className='btn btn-outline-dark fas fa-times text-danger border-0' \r\n                  style={{fontSize:'1.2rem'}}\r\n                  onClick={() => handlEventDelete(event.id)}\r\n                ></button> \r\n              </td>\r\n            </tr> \r\n          </React.Fragment>\r\n        )\r\n        })\r\n      }\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\n\r\n\r\nfunction NoEvents() {\r\n  return <i className='text-secondary '>События отсутствуют ...</i>\r\n}","import React, {useState, useEffect} from 'react' \r\nimport {useHistory, useParams} from 'react-router-dom'\r\n\r\nimport Loader from '../../base/components/Loader'\r\nimport {CheckboxField, SelectField, TextField, FormContainer, getSelectedOptions} from '../../base/forms/forms'\r\n\r\nimport {\r\n  getEventsConfig,\r\n  postEventsConfig,\r\n  deleteEvents,\r\n} from '../../backendAPI/backendAPI'\r\n\r\n\r\nexport default function EventDetailPage() {\r\n  const { event_id, device_id } = useParams();\r\n  const [event, setEvent] = useState({})\r\n  const [eventFormErrors, setEventFromErrors] = useState(null)\r\n  const [loading, setLoading] = React.useState(true)\r\n  const history = useHistory()\r\n\r\n  function submitEventParameters( event ) {\r\n    postEventsConfig(device_id, [event], \r\n      ()=>{ \r\n        setEventFromErrors(null);\r\n        history.push(`/device/${device_id}/admin/events/`); \r\n      },\r\n      (errors_data)=>{ setEventFromErrors(errors_data[0]); }\r\n    )\r\n  }\r\n\r\n  const cancelChanges = () => { \r\n    history.push(`/device/${device_id}/admin/events/`)\r\n  }\r\n\r\n  const deleteEvent = () => { \r\n    deleteEvents(device_id, [event_id], ()=>{\r\n      history.push(`/device/${device_id}/admin/events/`)\r\n    }) \r\n  }\r\n\r\n  useEffect(() => {\r\n    getEventsConfig(device_id, [event_id], (data)=>{\r\n      setEvent(data[0]);\r\n      setLoading(false);\r\n    }) \r\n  }, [])\r\n\r\n  return (\r\n    <React.Fragment>\r\n        <h3 className='mb-3'>Параметры события</h3>\r\n        <div className='p-3 mx-1 my-0 rounded desk-bg-color-secondary desk-text-color-primary' style={{minHeight: 'calc(100vh - 135px)'}}>\r\n        { loading ? \r\n          <div className='d-flex justify-content-center'><Loader /></div> :\r\n          <FormContainer> \r\n            <h5 className='text-info text-center mb-3'>Редактирование параметров события</h5>  \r\n            <EventForm event={event} formErrors={eventFormErrors} onSubmit={submitEventParameters} onCancel={cancelChanges} onDelete={deleteEvent}/>\r\n          </FormContainer>\r\n        }\r\n        </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n\r\n\r\nexport function EventCreatePage() {\r\n  const { device_id } = useParams();\r\n  const defaultEventSettings = { device: device_id, enable: false, category: 'Alarm' }\r\n  const [eventFormErrors, setEventFromErrors] = useState(null)\r\n  const history = useHistory()\r\n\r\n  function submitEventParameters( event ) {\r\n    postEventsConfig(device_id, [event], \r\n      ()=>{ \r\n        setEventFromErrors(null);\r\n        history.push(`/device/${device_id}/admin/events/`); \r\n      },\r\n      (errors_data)=>{ setEventFromErrors(errors_data[0]); }\r\n    )\r\n  }\r\n\r\n  const cancelChanges = () => { \r\n    history.push(`/device/${device_id}/admin/events/`)\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n        <h3 className='mb-3'>Параметры события</h3>\r\n        <div className='p-3 mx-1 my-0 rounded desk-bg-color-secondary desk-text-color-primary' style={{minHeight: 'calc(100vh - 135px)'}}>\r\n          <FormContainer>\r\n            <h5 className='text-info text-center mb-3'>Создание нового события</h5>  \r\n            <EventForm event={defaultEventSettings} formErrors={eventFormErrors} onSubmit={submitEventParameters} onCancel={cancelChanges}/>\r\n          </FormContainer>\r\n        </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n\r\n\r\n// -------------------------------------------------------------------------------------------------------------------\r\nfunction EventForm(props) {\r\n  const [event, setEvent] = useState(props.event)\r\n  const onSubmit = props.onSubmit\r\n  const onCancel = props.onCancel\r\n  const onDelete = props.onDelete\r\n  const buttonsStyle = {minWidth: '150px'}\r\n  let categoriesOptions = [\r\n    {value: 'Alarm',    name:'Аварйное'}, \r\n    {value: 'Warning',  name:'Предупреждение'}, \r\n    {value: 'Info',     name:'Информационное'}, \r\n    {value: 'Debug',    name:'Отладочное'}\r\n  ]\r\n\r\n  const handlSubmit = (e) => { \r\n    e.preventDefault();\r\n    onSubmit(event);\r\n  }\r\n  const handlEnableChange = (e) => { setEvent({...event, enable: e.target.checked}) }\r\n  const handlExpressionChange = (e) => { setEvent({...event, expression: e.target.value}) }\r\n  const handlRaiseMessageChange = (e) => { setEvent({...event, raise_message: e.target.value}) }\r\n  const handlFallMessageChange = (e) => { setEvent({...event, fall_message: e.target.value}) }\r\n  const handlСategoriesChange = (e) => { setEvent({...event, category: getSelectedOptions(e)[0]}) }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <form onSubmit={handlSubmit}>\r\n        <CheckboxField titel={'Активировать контроль события'} id={'enable'} checked={event.enable} onChange={handlEnableChange}\r\n          errors={props.formErrors ? props.formErrors.enable : null}\r\n        />\r\n\r\n        <TextField titel={'Формула'} id={'expression'} placeholder={'...'} value={event.expression} onChange={handlExpressionChange}\r\n          errors={props.formErrors ? props.formErrors.expression : null}\r\n          comment={\r\n            <div>\r\n            <button type='button' className='mt-3 btn btn-sm btn-outline-info' data-toggle=\"collapse\" data-target=\"#expressions_help\">\r\n              Справка <i className='far fa-question-circle'></i>\r\n            </button>\r\n            <p id=\"expressions_help\" className=\"collapse mt-3 border-top border-bottom border-info py-3\">\r\n            В формуле допустимо применение следующих конструкций: <br/>\r\n            - получить текущее значение тега <kbd className='ml-2'>{'{{tag_code}}'}</kbd>  <br/>\r\n            - операторы сравнения\r\n            <kbd className='ml-2' title=\"Равно\">{'=='}</kbd>\r\n            <kbd className='ml-2' title=\"Неравно\">{'!='}</kbd>\r\n            <kbd className='ml-2' title=\"Больше\">{'>'}</kbd>\r\n            <kbd className='ml-2' title=\"Меньше\">{'<'}</kbd>\r\n            <kbd className='ml-2' title=\"Больше или равно\">{'>='}</kbd>\r\n            <kbd className='ml-2' title=\"Меньше или равно\">{'<='}</kbd>\r\n            <br/>\r\n            - арифметические операторы\r\n            <kbd className='ml-2' title=\"Суммирование\">{'+'}</kbd>\r\n            <kbd className='ml-2' title=\"Вычитание\">{'-'}</kbd>\r\n            <kbd className='ml-2' title=\"Деление\">{'/'}</kbd>\r\n            <kbd className='ml-2' title=\"Деление без остатка\">{'//'}</kbd>\r\n            <kbd className='ml-2' title=\"Остаток от деления\">{'%'}</kbd>\r\n            <kbd className='ml-2' title=\"Умножение\">{'*'}</kbd>\r\n            <kbd className='ml-2' title=\"Возведение в степень\">{'**'}</kbd>\r\n            <br/>\r\n            - логические операторы\r\n            <kbd className='ml-2' title=\"Логическое И\">{'and'}</kbd>\r\n            <kbd className='ml-2' title=\"Логическое ИЛИ\">{'or'}</kbd>\r\n            <kbd className='ml-2' title=\"Логическая инверсия\">{'not'}</kbd>\r\n            <br/>\r\n            - битовые операторы\r\n            <kbd className='ml-2' title=\"Битовое И\">{'&'}</kbd>\r\n            <kbd className='ml-2' title=\"Битовое ИЛИ\">{'|'}</kbd>\r\n            <kbd className='ml-2' title=\"Битовое исключающее ИЛИ\">{'^'}</kbd>\r\n            <kbd className='ml-2' title=\"Побитовая инверсия\">{'~'}</kbd>\r\n            <kbd className='ml-2' title=\"Побитовый сдвиг в лево\">{'<<'}</kbd>\r\n            <kbd className='ml-2' title=\"Побитовый сдвиг в право\">{'>>'}</kbd>\r\n            <br/>\r\n            Примеры формул:  <br/>\r\n            - является ли значение тега tag1 больше или равно 12.5 <kbd className='ml-2'>{'{{tag2}} >= 12.5'}</kbd> <br/>\r\n            - получение значения бита №5 тега tag2 <kbd className='ml-2'>{'{{tag2}} >> 5 & 1'}</kbd>  <br/>\r\n            - значение бита №0 тега tag2 или значение бита №14 тега tag3 <kbd className='ml-2'>{'({{tag2}} & 1) or ({{tag3}} >> 14 & 1)'}</kbd> \r\n          </p>\r\n          </div>\r\n          }\r\n        />\r\n\r\n        <TextField titel={'Сообщение срабатывания'} id={'raise_message'} placeholder={'...'} value={event.raise_message} \r\n          onChange={handlRaiseMessageChange}\r\n          errors={props.formErrors ? props.formErrors.raise_message : null}\r\n        />\r\n        <TextField titel={'Сообщение отключения'} id={'fall_message'} placeholder={'...'} value={event.fall_message} \r\n          onChange={handlFallMessageChange}\r\n          errors={props.formErrors ? props.formErrors.fall_message : null}\r\n        />\r\n        <SelectField titel={'Категория'} id={'category'} placeholder={'...'} value={event.category} \r\n          options={categoriesOptions} \r\n          onChange={handlСategoriesChange}\r\n          errors={props.formErrors ? props.formErrors.category : null}\r\n        />\r\n\r\n        <p className='border-top border-secondary'></p>        \r\n        <div className='row'>\r\n          <p className='col-md-6'> Текущее состояние:  \r\n              {event.is_active ? <span className='text-warning'> АКТИВНО </span> : \r\n                                 <span className='text-light'> НЕ АКТИВНО </span>\r\n              } \r\n          </p>\r\n          <p className='col-md-6'> Время последнего срабтывания:  \r\n              {event.raise_time ? <span> {format_time(event.raise_time)} </span>: \r\n                                  <span className='text-secondary'> Никогда </span>\r\n              } \r\n          </p>\r\n        </div>\r\n\r\n        <p className='border-top border-secondary'></p>\r\n        <div className='d-flex flex-wrap justify-content-center'>\r\n          <button type=\"submit\" className=\"btn btn-outline-primary m-2\" style={buttonsStyle}>Сохранить</button>\r\n          <button type=\"button\" className=\"btn btn-outline-secondary m-2\" style={buttonsStyle} onClick={onCancel}>Отмена</button>\r\n          { props.onDelete && <button type=\"button\" className=\"btn btn-outline-danger m-2\" style={buttonsStyle} onClick={onDelete}>Удалить</button> }\r\n        </div>\r\n\r\n      </form>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\n\r\n\r\nfunction format_time(time, date_style='long', time_style='medium') {\r\n  const s = new Date(time)\r\n  let formatter = new Intl.DateTimeFormat([] , {dateStyle: date_style, timeStyle: time_style});\r\n  return formatter.format(s)\r\n}\r\n\r\n\r\n","import React, {useEffect} from 'react' \r\nimport {Switch, Route, useParams} from 'react-router-dom'\r\n\r\nimport axiosInstance from \"../backendAPI/axiosClient\"\r\nimport getBaseUrl from '../backendAPI/localSettings'\r\nimport sortWidgetsByOrder from './utils/sortWidgetsByOrder'\r\n\r\nimport Sidebar from './components/DeviceSidebar'\r\nimport DeviceOverviewPage from './pages/overview'\r\nimport DeviceSettingsPage from './pages/settings'\r\nimport DeviceEventsLogPage from './pages/eventsLog'\r\nimport DeviceGraphsPage from './pages/graphs'\r\nimport DeviceAdminPage from './pages/deviceAdmin'\r\nimport WidgetsAdminPage from './pages/widgetsAdmin'\r\nimport EventsAdminPage from './pages/eventsAdmin'\r\nimport EventDetailPage, {EventCreatePage} from './pages/eventDetail'\r\nimport Page404 from '../base/pages/pageNotFound'\r\n\r\nconst BASE_URL = getBaseUrl()\r\n\r\n\r\n\r\nexport default function DeviceApp() { \r\n  let { id } = useParams();\r\n  const [widgetsTemplate, setWidgetsTemplate] = React.useState({})\r\n\r\n  useEffect(() => {\r\n    getWidgetsTemplate( id, (data)=> {\r\n      setWidgetsTemplate( sortWidgetsByOrder(data.template) );\r\n    });   \r\n  }, []) \r\n\r\n  function updateWidgetsTemplate(newTemplate){\r\n    setWidgetsTemplate(newTemplate)\r\n    postWidgetsTemplate(id, newTemplate)\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className='desk-bg-color-primary text-secondary h-100'>\r\n      <div className=\"row m-0 p-0\">\r\n        <Sidebar deviceId={id}/>\r\n        <div className=\"col-10 m-0 p-0\">\r\n          <div className=\"content-height p-2\">\r\n            <Switch>\r\n              <Route exact path={`/device/:device_id/overview/`} component={()=><DeviceOverviewPage widgetsTemplate={widgetsTemplate}/>} />\r\n              <Route exact path={`/device/:device_id/settings/`} component={()=><DeviceSettingsPage />} />\r\n              <Route exact path={`/device/:device_id/events/`} component={()=><DeviceEventsLogPage />} />\r\n              <Route exact path={`/device/:device_id/graphs/`} component={()=><DeviceGraphsPage />} />\r\n              <Route path={`/device/:device_id/admin/config/`} component={()=><DeviceAdminPage />} />\r\n              <Route exact path={`/device/:device_id/admin/widgets/`} \r\n                component={()=><WidgetsAdminPage updateWidgetsTemplate={updateWidgetsTemplate} widgetsTemplate={widgetsTemplate}/>} \r\n              />\r\n              <Route exact path={`/device/:device_id/admin/events/`} component={()=><EventsAdminPage/>} />\r\n              <Route exact path={`/device/:device_id/admin/events/:event_id/detail/`} component={()=><EventDetailPage/>} />\r\n              <Route exact path={`/device/:device_id/admin/events/create/`} component={()=><EventCreatePage/>} />\r\n              <Route component={Page404} />\r\n            </Switch>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n\r\nasync function getWidgetsTemplate(device_id, cb) {\r\n  const request = await axiosInstance.get(BASE_URL + \"/widgets/template/\", { params: { id: device_id }})\r\n  cb({...request.data});\r\n}\r\n\r\nasync function postWidgetsTemplate(device_id, template_data, cb) {\r\n  const body = {'template': template_data}\r\n  const request = await axiosInstance.post(BASE_URL + \"/widgets/template/\", body, { params: { id: device_id }})\r\n  cb && cb({...request.data});\r\n}\r\n\r\n\r\n","import React from 'react'\r\nimport {NavLink} from 'react-router-dom'\r\n\r\nexport default function Sidebar() {\r\n    return (\r\n        <div className=\"col-2 m-0 p-0\">\r\n        <div className=\"sidebar-bg-color-primary p-2 h-100\">\r\n          <div className=\"p-1\">\r\n\r\n            <div className=\"nav flex-column nav-pills\" style={{overflow: 'hidden'}} id=\"v-pills-tab\" role=\"tablist\" aria-orientation=\"vertical\">\r\n                <NavLink className=\"nav-link sidebar-text-color-primary btn remove-outline\" activeClassName=\"sidebar-bg-color-secondary\" to=\"/company/overview/\">\r\n                  <div className=\"d-inline-flex w-100 justify-content-center justify-content-lg-start\">\r\n                    <i className='fas fa-home' style={{fontSize:'1.3em'}}></i>\r\n                    <span className='pl-3 d-none d-lg-inline'>Обзор</span>\r\n                  </div>\r\n                </NavLink>\r\n                \r\n                <NavLink className=\"nav-link sidebar-text-color-primary btn remove-outline\" activeClassName=\"sidebar-bg-color-secondary\" to=\"/company/map/\">\r\n                  <div className=\"d-inline-flex w-100 justify-content-center justify-content-lg-start\">\r\n                    <i className='fas fa-map-marked-alt' style={{fontSize:'1.3em'}}></i>\r\n                    <span className='pl-3 d-none d-lg-inline'>Карта</span>\r\n                  </div> \r\n                </NavLink>\r\n                \r\n                <NavLink className=\"nav-link sidebar-text-color-primary btn remove-outline\" activeClassName=\"sidebar-bg-color-secondary\" to=\"/company/employers/\">\r\n                  <div className=\"d-inline-flex w-100 justify-content-center justify-content-lg-start\">\r\n                    <i className='fas fa-users' style={{fontSize:'1.3em'}}></i>\r\n                    <span className='pl-3 d-none d-lg-inline'>Сотрудники</span>\r\n                  </div>\r\n                </NavLink>\r\n\r\n                <NavLink className=\"nav-link sidebar-text-color-primary btn remove-outline\" activeClassName=\"sidebar-bg-color-secondary\" to=\"/company/profile/\"> \r\n                  <div className=\"d-inline-flex w-100 justify-content-center justify-content-lg-start\">\r\n                    <i className='fas fa-chalkboard-teacher' style={{fontSize:'1.3em'}}></i>\r\n                    <span className='pl-3 d-none d-lg-inline'>Кабинет</span>\r\n                  </div>\r\n                </NavLink>\r\n            </div>\r\n            \r\n          </div>\r\n        </div>\r\n        </div>\r\n    )\r\n}","import React, { useEffect } from 'react' \r\nimport {Link} from 'react-router-dom'\r\n\r\nimport axiosInstance from \"../../backendAPI/axiosClient\";\r\nimport getBaseUrl from '../../backendAPI/localSettings'\r\nconst BASE_URL = getBaseUrl()\r\n\r\nfunction DeviceCard(props) {\r\n    const [deviceData, setDeviceData] = React.useState({})\r\n    const device = props.device   \r\n   \r\n    function readDeviceParameters() {\r\n      axiosInstance.get(BASE_URL + \"/device/parameters/\", { params: { id: device.id }} )\r\n        .then(responce => { \r\n            if (responce) {\r\n                const deviceParameters = responce.data\r\n                setDeviceData({...deviceParameters}) \r\n            }\r\n        }) \r\n    }\r\n    \r\n    useEffect(() => {\r\n      readDeviceParameters();\r\n      const deviceParametersUpdateInterval = setInterval(readDeviceParameters, 5000);\r\n      return () => {\r\n        clearInterval(deviceParametersUpdateInterval);\r\n      };\r\n    }, [])\r\n\r\n\r\n    return (\r\n        <React.Fragment>\r\n        <Link className=\"nav-link p-0 m-0\" to={`/device/${device.id}/overview/`}>\r\n            <div className='border rounded p-2 h-100 desk-bg-color-secondary desk-text-color-primary desk-border-color-primary card-hover' style={{overflow: 'hidden'}} >\r\n                <h6 className='text-nowrap'>{device.name}</h6>\r\n                <div className='p-0 m-0 small w-100'>\r\n                    <table className=\"table table-sm p-0 m-0 desk-bg-color-secondary desk-text-color-primary desk-border-color-primary w-100\">\r\n                        <tbody>\r\n                            <tr></tr>\r\n                            <tr>\r\n                                <td>Связь: </td>   \r\n                                <td className='text-right'> {deviceData.is_online ? \r\n                                    <span className='desk-text-color-primary'>ОК</span> : \r\n                                    <span className='badge badge-pill badge-danger text-dark' style={{fontSize: '0.85em'}}>НЕТ</span> }\r\n                                </td>\r\n                            </tr> \r\n                            <tr>\r\n                                <td>Обновлено: </td>   \r\n                                <td className='text-right'> {deviceData.last_update ? \r\n                                    format_time(deviceData.last_update, (deviceData.is_online ? null : 'text-warning')) :\r\n                                    <span className='desk-text-color-secondary'>никогда</span> } \r\n                                </td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>Аварии: </td>   \r\n                                <td className='text-right'> Нет  </td>\r\n                            </tr>                                                         \r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </Link>    \r\n        </ React.Fragment> \r\n    )                   \r\n}\r\n\r\n\r\n\r\nfunction format_time (time, className='text-light') {\r\n    const s = new Date(time)\r\n    var yesterday = new Date()\r\n    yesterday = yesterday.setDate(yesterday.getDate() - 1);\r\n    if (s > yesterday) {\r\n        let formatter = new Intl.DateTimeFormat([] , {hour: '2-digit', minute: '2-digit'});\r\n        return <span className={className}>{formatter.format(s)}</span>\r\n    } else {\r\n        let formatter = new Intl.DateTimeFormat([] , {month: \"short\", day: \"numeric\" });\r\n        return <span className={className}>{formatter.format(s)}</span>           \r\n    }\r\n}\r\n\r\n\r\n\r\nexport default DeviceCard\r\n","import React from 'react';\r\n\r\nimport DeviceCard from './DeviceCard'\r\n\r\nfunction FacilityCard(props) {\r\n  const facilityInfo = props.facilityInfo   \r\n  const devices = facilityInfo.devices\r\n\r\n  const mapDeviceCards = (ds) => {\r\n    return ds.map((device, index) => {\r\n      return (\r\n        <div key={device.id} className='col-lg-4 col-md-6 col-sm-12 p-1 m-0 h-100'>\r\n          <DeviceCard device={device} index={index}/>\r\n        </div>\r\n      )\r\n    })\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n    <div className='card desk-bg-color-secondary desk-text-color-secondary shadow-sm p-0 m-0'>\r\n      <h6 className='px-2 pt-2 pb-0 m-0'>{facilityInfo.name}</h6>\r\n      <div className='container-fluid h-100 p-1 m-0 row'>\r\n          {devices.length > 0 ? mapDeviceCards(devices) : <p className='desk-text-color-secondary p-1'>Устройств нет ...</p> }       \r\n      </div>\r\n    </div>    \r\n    </ React.Fragment> \r\n  )                   \r\n}\r\n\r\nexport default FacilityCard","import React, { useEffect, useState } from 'react';\r\nimport {useHistory} from \"react-router-dom\";\r\n\r\nimport Loader from '../../base/components/Loader';\r\nimport FacilityCard from '../components/FacilityCard';\r\nimport {getCompanyParameters} from '../../backendAPI/backendAPI';\r\n\r\n\r\nexport default function CompanyOverviewPage() {\r\n  const [companyInfo, setCompanyInfo] = useState({});\r\n  const [loading, setLoading] = React.useState(true);\r\n  const history = useHistory();\r\n\r\n  useEffect(()=>{\r\n    getCompanyParameters( \r\n      (response) => {setCompanyInfo({'isExist': true, ...response});},\r\n      (error) => {setCompanyInfo({'isExist': false}); console.log(error);},\r\n      () => {setLoading(false);}\r\n    );\r\n  }, []);\r\n\r\n  const editCompany = () => {\r\n    companyInfo.isExist ? history.push(`/company/detail`) : history.push(`/company/create`);\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <h3 className='p-1'>\r\n        Компания <b>{ (!loading && companyInfo.isExist) ? \r\n          companyInfo.company.name : \r\n          null}\r\n        </b>\r\n        <button type='button' className='btn btn-sm desk-text-color-secondary card-hover float-right' \r\n                onClick={editCompany}>\r\n          <i className='fas fa-pen' style={{fontSize:'1.3em'}}></i>\r\n        </button>\r\n      </h3>\r\n      \r\n      <div className='container-fluid row p-0 m-0'>\r\n        { loading ? <Loader /> \r\n        : companyInfo.isExist ? <CompanyOverviewBlock companyInfo={companyInfo}/> \r\n          : <CompanyDoesntExistBlock /> \r\n        }\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n\r\nfunction CompanyOverviewBlock(props) {\r\n  const hasFacilities = props.companyInfo.facilities.length > 0;\r\n  return ( hasFacilities ? \r\n    <FacilityOverviewBlock companyInfo={props.companyInfo}/> : \r\n    <FacilityDoesntExistBlock />\r\n  );\r\n}\r\n\r\nfunction CompanyDoesntExistBlock(props) {\r\n  const history = useHistory();\r\n  const createNewCompany = () => {history.push(`/company/create`)}\r\n  return (\r\n    <React.Fragment>\r\n      <div className='container-fluid px-2'>\r\n        <p className='text-warning'>У вас еще нет зарегестрированной компании</p>\r\n        <button type='button' className='btn btn-outline-warning' \r\n                onClick={createNewCompany}>\r\n          Зарегистировать\r\n        </button>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n\r\nfunction FacilityOverviewBlock(props) {\r\n  return (\r\n    <React.Fragment>\r\n      { props.companyInfo.facilities.map((facility, index) => {\r\n        return (\r\n          <div key={facility.id} className='container-fluid p-1 m-0 col-xl-6'>\r\n            <FacilityCard facilityInfo={facility} index={index}/>\r\n          </div>\r\n        )\r\n      }) }        \r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nfunction FacilityDoesntExistBlock() {\r\n  return (\r\n    <React.Fragment>\r\n      <div className='container-fluid px-2'>\r\n        <p className='text-warning'>У вас еще нет объектов для мониторинга</p>\r\n        <button type='button' className='btn btn-outline-warning'\r\n                onClick={()=>alert('Данная функция еще находится в разработке.')}>\r\n          Добавить\r\n        </button>\r\n      </div>        \r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n\r\n","import React from 'react' \r\n\r\n\r\nexport default function EmployersPage() {\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className='p-1'>\r\n        <h3>Сотрудники компании</h3>\r\n        <p>Раздел находиться в разработке ... </p>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n","import React from 'react' \r\n\r\n\r\nexport default function FacilitiesOnMapPage() {\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className='p-1'>   \r\n        <h3>Объекты компании на карте</h3>\r\n        <p>Раздел находиться в разработке ... </p>\r\n      </div> \r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n ","import React from 'react' \r\n\r\n\r\nexport default function CompanyProfilePage() {\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className='p-1'> \r\n        <h3>Кабинет</h3>\r\n        <p>Раздел находиться в разработке ... </p>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n ","import React, {useState, useEffect} from 'react';\r\nimport {useHistory} from \"react-router-dom\";\r\n\r\nimport {getCompanyParameters, postCompanyParameters\r\n  } from '../../backendAPI/backendAPI';\r\nimport Loader from '../../base/components/Loader';\r\nimport {TextField, ErrorMessage, FormContainer} from '../../base/forms/forms';\r\n\r\n\r\nexport default function CompanyDetailPage() {\r\n  const [companyParams, setCompanyParams] = useState({});\r\n  const [formErrors, setFormErrors] = useState(null);\r\n  const [loading, setLoading] = React.useState(true);\r\n  const history = useHistory();\r\n\r\n  useEffect(()=>{\r\n    getCompanyParameters( response =>{\r\n      setCompanyParams({'name': response.company.name});\r\n      setLoading(false);\r\n    });\r\n  }, []);\r\n  \r\n  const submitCompanyParameters = (parameters) => {\r\n    postCompanyParameters(parameters, (response)=>{ \r\n        setCompanyParams(response); setFormErrors(null);  \r\n        history.push(`/company/overview/`);\r\n      },\r\n      (errors)=>{setFormErrors(errors);}\r\n    );\r\n  }\r\n\r\n  const cancelChanges = () => {history.push(`/company/overview/`)}\r\n  \r\n  return (\r\n    <React.Fragment>\r\n      { loading ? \r\n        <div className='d-flex justify-content-center'><Loader /></div> \r\n        :\r\n        <FormContainer> \r\n          <CompanyDetailForm companyParameters={companyParams} formErrors={formErrors} \r\n            submitCompanyParameters={submitCompanyParameters} \r\n            cancelChanges={cancelChanges} \r\n          />\r\n        </FormContainer> \r\n      }\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\n\r\nexport function CompanyCreatePage() {\r\n  const defaultParameters = {name: ''}\r\n  const [formErrors, setFormErrors] = useState(null);\r\n  const history = useHistory();\r\n \r\n  const submitCompanyParameters = (parameters) => {\r\n    postCompanyParameters(parameters, \r\n      (response)=>{history.push(`/company/overview/`);},\r\n      (errors)=>{setFormErrors(errors);}\r\n    );\r\n  }\r\n\r\n  const cancelChanges = () => {history.push(`/company/overview/`)}\r\n  \r\n  return (\r\n    <FormContainer> \r\n      <CompanyDetailForm companyParameters={defaultParameters} formErrors={formErrors} \r\n        submitCompanyParameters={submitCompanyParameters} \r\n        cancelChanges={cancelChanges} \r\n      />\r\n    </FormContainer>\r\n  )\r\n}\r\n\r\n\r\n\r\n// ----------------------------------------------------------------------------------------------------------------------------\r\nfunction CompanyDetailForm (props) {\r\n  const [company, setCompany] = useState(props.companyParameters);\r\n  const onSubmit = props.submitCompanyParameters;\r\n  const onCancel = props.cancelChanges;\r\n  const buttonsStyle = {minWidth: '150px'};\r\n\r\n  const handlNameChange = (e) => { setCompany({...company, name: e.target.value}) };\r\n\r\n  const handlSubmit = (e) => { \r\n    e.preventDefault();\r\n    onSubmit(company);\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <form onSubmit={handlSubmit}> \r\n        <h5 className='text-info text-center pt-3'>Параметры компании</h5>     \r\n        <TextField titel={'Наименование'} id={'name'} value={company.name} onChange={handlNameChange}\r\n          errors={props.formErrors ? props.formErrors.name : null}\r\n        />\r\n\r\n        <ErrorMessage>\r\n          {props.formErrors && props.formErrors.non_field_errors ? \r\n            <div className='card bg-danger text-dark my-3 p-2'> {props.formErrors.non_field_errors}</div>\r\n            : null\r\n          }\r\n        </ErrorMessage>\r\n\r\n        <div className='d-flex flex-wrap justify-content-center'>\r\n          <button type=\"submit\" className=\"btn btn-outline-primary m-2\" style={buttonsStyle}>Сохранить</button>\r\n          <button type=\"button\" className=\"btn btn-outline-secondary m-2\" style={buttonsStyle} onClick={onCancel}>Отмена</button>\r\n        </div>\r\n      </form>\r\n    </React.Fragment>\r\n  )\r\n}\r\n","import React from 'react' \r\nimport {Switch, Route} from 'react-router-dom'\r\n\r\nimport Sidebar from './components/CompanySidebar'\r\nimport CompanyOverviewPage from './pages/overview'\r\nimport EmployersPage from './pages/employers'\r\nimport FacilitiesOnMapPage from './pages/facilitiesOnMap'\r\nimport CompanyProfilePage from './pages/profile'\r\nimport CompanyDetailPage, {CompanyCreatePage} from './pages/companyDetail'\r\nimport Page404 from '../base/pages/pageNotFound'\r\n\r\nexport default function CompanyApp() { \r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className='desk-bg-color-primary desk-text-color-secondary h-100'>\r\n      <div className=\"row m-0 p-0\">\r\n        <Sidebar />\r\n        <div className=\"col-10 m-0 p-0\">\r\n          <div className=\"content-height p-2\">\r\n            <Switch>\r\n              <Route exact path='/company' component={CompanyOverviewPage} />\r\n              <Route exact path='/company/overview' component={CompanyOverviewPage} />\r\n              <Route exact path='/company/map' component={FacilitiesOnMapPage} />\r\n              <Route exact path='/company/employers' component={EmployersPage} />\r\n              <Route exact path='/company/profile' component={CompanyProfilePage} />\r\n              <Route exact path='/company/create' component={CompanyCreatePage} />\r\n              <Route exact path='/company/detail' component={CompanyDetailPage} />\r\n              <Route component={Page404} />\r\n            </Switch>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n","import React, { Component } from \"react\";\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport auth from '../../backendAPI/auth'; \r\n\r\n\r\nexport default class Login extends Component {\r\n  constructor(props) {\r\n      super(props);\r\n      this.state = {username: \"\", password: \"\"};\r\n      this.handleChange = this.handleChange.bind(this);\r\n      this.handleSubmit = this.handleSubmit.bind(this);\r\n  }\r\n\r\n  handleChange(event) {\r\n      this.setState({[event.target.name]: event.target.value});\r\n  }\r\n\r\n  handleSubmit(event) {\r\n    event.preventDefault();\r\n    const cb = ()=>{ this.props.history.push('/company/overview/') };\r\n    auth.login(this.state.username, this.state.password, cb );\r\n  }\r\n\r\n  render() {\r\n    const inputFieldClassName = 'form-control desk-bg-color-secondary-2 desk-border-color-primary desk-text-color-primary';\r\n    return (\r\n    <div className='desk-bg-color-primary desk-text-color-primary content-height'>  \r\n      <div className='container card p-3 mt-5 desk-bg-color-secondary' style={{maxWidth: '500px'}}>\r\n        <h2 className=\"desk-text-color-secondary\">Вход</h2>\r\n        <form onSubmit={this.handleSubmit}>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"username\">Пользователь:</label>\r\n            <input name=\"username\" type=\"text\" className={inputFieldClassName} id=\"username\" value={this.state.username} onChange={this.handleChange}/>\r\n          </div> \r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"pwd\">Пароль:</label> \r\n            <input name=\"password\" type=\"password\" className={inputFieldClassName} id=\"pwd\" value={this.state.password} onChange={this.handleChange}/>\r\n          </div> \r\n          <button type=\"submit\" className=\"btn btn-outline-primary\">Войти</button>\r\n          <div className=\"pt-3\">\r\n            <span className=\"pr-2 desk-text-color-secondary\">Еще не зарегестрированы?</span>\r\n            <Link className=\"\" to=\"/user/registration/\">Регистрация</Link>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n    )\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport axiosInstance from \"../../backendAPI/axiosClient\";\r\nimport auth from '../../backendAPI/auth';\r\n\r\n\r\nexport default class Signup extends Component{\r\n  constructor(props){\r\n      super(props);\r\n      this.state = {\r\n          username: \"\",\r\n          password: \"\",\r\n          email:\"\",\r\n          errors:{username:null, email:null, password:null}\r\n      };\r\n      this.handleChange = this.handleChange.bind(this);\r\n      this.handleSubmit = this.handleSubmit.bind(this);\r\n  }\r\n\r\n  handleChange(event) {\r\n      this.setState({[event.target.name]: event.target.value});\r\n  }\r\n\r\n  async handleSubmit(event) {\r\n    event.preventDefault();\r\n    try {\r\n        const response = await axiosInstance.post('/user/create/', {\r\n            username: this.state.username,\r\n            email: this.state.email,\r\n            password: this.state.password\r\n        }).then(()=>{\r\n            const cb = ()=>{ this.props.history.push('/company/overview/') };\r\n            auth.login(this.state.username, this.state.password, cb );\r\n        });\r\n        return response;\r\n    } catch (error) {\r\n        console.log(error.stack);\r\n        this.setState({\r\n          errors:error.response.data\r\n        });           \r\n    }\r\n  }\r\n\r\n  render() {\r\n    const inputFieldClassName = 'form-control desk-bg-color-secondary-2 desk-border-color-primary desk-text-color-primary';\r\n    return (\r\n      <div className='desk-bg-color-primary desk-text-color-primary content-height'>  \r\n        <div className='container card p-3 mt-5 desk-bg-color-secondary' style={{maxWidth: '500px'}}>\r\n            <h2 className=\"desk-text-color-secondary\">Регистрация</h2>              \r\n            <form onSubmit={this.handleSubmit}>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"username\">Имя пользователя:</label>\r\n                <input name=\"username\" type=\"text\" className={inputFieldClassName} id=\"username\" value={this.state.username} onChange={this.handleChange}/>\r\n                { this.state.errors.username ? <span className='text-danger'>{this.state.errors.username}</span> : null}\r\n              </div> \r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"mail\">Электронная почта:</label>\r\n                <input name=\"email\" type=\"email\" className={inputFieldClassName} id=\"mail\" value={this.state.email} onChange={this.handleChange}/>\r\n                { this.state.errors.email ? <span className='text-danger'>{this.state.errors.email}</span> : null}\r\n              </div> \r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"pwd\">Пароль:</label> \r\n                <input name=\"password\" type=\"password\" className={inputFieldClassName} id=\"pwd\" value={this.state.password} onChange={this.handleChange}/>\r\n                { this.state.errors.password ? <span className='text-danger'>{this.state.errors.password}</span> : null}\r\n              </div> \r\n              <button type=\"submit\" className=\"btn btn-outline-primary\">Подтвердить</button>\r\n              <div className=\"pt-3\">\r\n                <span className=\"pr-2 desk-text-color-secondary\">Уже зарегестрированы?</span>\r\n                <Link className=\"\" to=\"/user/login/\">Вход</Link>\r\n              </div>\r\n            </form>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React from 'react' \r\n\r\n\r\nexport default function ProfilePage(props) {\r\n  return (\r\n    <React.Fragment>\r\n    <div className='desk-bg-color-primary content-height'> \r\n      <div className='container card desk-bg-color-secondary desk-text-color-secondary shadow-sm my-4 pt-4'>\r\n        <h2>Профиль пользователя</h2>\r\n\r\n        <div className='row my-3'>\r\n          <div className='col-lg-6'>\r\n            <table className=\"table tadle-dark desk-text-color-primary desk-border-color-primary\">\r\n              <tbody>\r\n                <tr>\r\n                  <td className='border-secondary'>Пользователь:</td> \r\n                  <td className='border-secondary'><b>{props.userInfo.username}</b></td>\r\n                </tr>\r\n                <tr>\r\n                  <td className='border-secondary'>Имя:</td> \r\n                  <td className='border-secondary'><b>{props.userInfo.first_name}</b></td>\r\n                </tr>\r\n                <tr>\r\n                  <td className='border-secondary'>Фамилия:</td> \r\n                  <td className='border-secondary'><b>{props.userInfo.last_name}</b></td>\r\n                </tr>\r\n                <tr>\r\n                  <td className='border-secondary'>Электронная почта:</td> \r\n                  <td className='border-secondary'><b>{props.userInfo.email}</b></td>\r\n                </tr>            \r\n              </tbody>\r\n            </table>\r\n          </div> \r\n        </div> \r\n      </div>  \r\n    </div>\r\n    </React.Fragment>\r\n);\r\n}\r\n","import React, { Component } from \"react\";\r\nimport {Link, withRouter} from 'react-router-dom'\r\n\r\nimport auth from '../../backendAPI/auth' \r\n\r\nclass LogoutBtn extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleLogout = this.handleLogout.bind(this);\r\n    }\r\n\r\n    handleLogout() {\r\n        auth.logout(()=>{\r\n            this.props.history.push('/')\r\n        });\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <li className=\"nav-item\" >\r\n                <Link className=\"nav-link navbar-text-color-primary\" to=\"\" onClick={this.handleLogout}>Выйти</Link>\r\n            </li>\r\n        )\r\n    };\r\n};         \r\n\r\nexport default withRouter(LogoutBtn)","import React from 'react'\r\nimport {Link} from 'react-router-dom'\r\n\r\nimport LogoutBtn from '../../users/components/LogoutBtn'\r\n\r\nexport default function Navbar(props) {\r\n  const authed = props.authed\r\n  const userInfo = props.userInfo\r\n  \r\n  return (\r\n    <nav className=\"navbar navbar-expand-sm navbar-dark navbar-bg-color-primary header-height p-0 m-0\">\r\n      <Link className=\"navbar-brand header-height navbar-text-color-logo py-2 pl-3 pr-0 m-0\" to=\"/\">CI Cloud</Link>\r\n\r\n      <button className=\"navbar-toggler header-height border-0 m-0\" style={{outline: 'none', boxShadow: 'none'}} type=\"button\" data-toggle=\"collapse\" data-target=\"#collapsibleNavbar\">\r\n        <span className=\"navbar-toggler-icon\"></span>\r\n      </button>\r\n\r\n      <div className=\"collapse navbar-collapse navbar-bg-color-primary\" id=\"collapsibleNavbar\" style={{zIndex: '1'}}>\r\n        <div className='d-md-none border-top border-secondary'></div>\r\n        <ul className=\"navbar-nav px-3\">\r\n          {authed ? (\r\n            <React.Fragment>\r\n              <li className=\"nav-item\">\r\n                <Link className=\"nav-link navbar-text-color-primary\" to=\"/company/overview\">Компания</Link>\r\n              </li>\r\n              <li className=\"nav-item\">\r\n                <Link className=\"nav-link navbar-text-color-primary\" to=\"/company/profile\">Кабинет</Link>\r\n              </li>\r\n            </React.Fragment>\r\n          ) : null }\r\n        </ul>  \r\n    \r\n        <ul className=\"navbar-nav ml-auto px-3\">\r\n          <li className=\"nav-item\">\r\n            <button className='nav-link btn btn-sm btn-outline-primary navbar-text-color-primary border-0 remove-outline'\r\n              onClick={props.switchThemaHandler}>\r\n              {props.darkThema ? <i className=\"fas fa-sun\"></i> : <i className=\"fas fa-moon\"></i>}\r\n            </button>\r\n          </li>\r\n        </ul>\r\n\r\n        <ul className=\"navbar-nav pr-3\">\r\n          { authed ?\r\n            <React.Fragment>\r\n              { userInfo ?\r\n                <React.Fragment> \r\n                  <li className=\"nav-item\">\r\n                    <Link className=\"nav-link navbar-text-color-primary\" to=\"/user/profile\">{userInfo.username}</Link>\r\n                  </li>\r\n                  <li className=\"nav-item border-right border-secondary my-1 d-none d-sm-inline\"></li>\r\n                </React.Fragment>                        \r\n                : \r\n                null \r\n              }\r\n              <LogoutBtn />\r\n            </React.Fragment>\r\n            :\r\n            <li className=\"nav-item\">\r\n              <Link className=\"nav-link navbar-text-color-primary\" to=\"/user/login\">Войти</Link>\r\n            </li>\r\n          }\r\n        </ul> \r\n      </div>\r\n    </nav>       \r\n  );\r\n}","import React from 'react';\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport auth from '../../backendAPI/auth';\r\n\r\n\r\nexport default function WelcomePage(props) {\r\n  // const backgroundStyle = {\r\n  //   backgroundImage: 'url(\"./img/grid.png\")',\r\n  //   backgroundRepeat: 'repeat-x',\r\n  //   backgroundAttachment: 'fixed'\r\n  // }\r\n  function loginDemoUser() {\r\n    const cb = ()=>{ props.history.push('/company/overview/') };\r\n    auth.login('demo', 'DemoUserPassword', cb);\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className='desk-bg-color-primary text-dark content-height'>\r\n      <div className='card' style={{background:'none', border:'none'}}>\r\n        <div className='container card border-0 my-4 px-3 pt-3 pb-4 w-100' style={{background:'rgba(5,10,40, 0.3)'}}>\r\n          <div className=\"card p-3\" style={{background:'rgba(255,255,255, 0.9)'}}>\r\n            <h3 className='text-center'>Добро пожаловать на <b>CI Cloud</b></h3>\r\n            <h5 className='text-center text-secondary'>Для начала работы\r\n              <Link className='px-2' to=\"/user/login/\">Войдите</Link>\r\n              или\r\n              <Link className='px-2' to=\"/user/registration/\">Зарегистрируйтесь</Link>\r\n            </h5>\r\n          </div>\r\n\r\n          <div className=\"row equal px-1 py-5\">\r\n            <CardContainer>\r\n              <h6>Удаленный мониторинга и управления промышленными и IoT устройствами</h6>\r\n            </CardContainer>\r\n\r\n            <CardContainer>\r\n              <h6>Контроль аварийных событий и уведомление о событиях на объекте </h6>\r\n            </CardContainer>\r\n\r\n            <CardContainer>\r\n              <h6>Простое подключение и настройка опроса устройств</h6>\r\n            </CardContainer>\r\n\r\n            <CardContainer>\r\n              <h6>Открытый API для интеграции с сторонним ПО и IoT устройствами </h6>\r\n            </CardContainer>\r\n\r\n            <CardContainer>\r\n              <h6>Единый интерфейс для Персональных компьютеров и Мобильных устройств </h6>\r\n            </CardContainer>\r\n\r\n            <CardContainer>\r\n              <h6> Вы можете воспользоваться  \r\n                <button type=\"button\" className=\"btn btn-link px-2 py-0 m-0\" onClick={loginDemoUser}>\r\n                  демо-версией\r\n                </button> для ознакомления\r\n              </h6>\r\n            </CardContainer>\r\n          </div>  \r\n\r\n          \r\n          <UpdateDescriptionContainer>\r\n            <h5 className='pb-3 text-dark text-center'>Список последних обновлений: </h5>\r\n            <UpdateDescriptionTitle> Обновление 0.1.7 </UpdateDescriptionTitle>\r\n            <UpdateDescriptionHeader> Доступна функция Жунала событий </UpdateDescriptionHeader>\r\n            <UpdateDescriptionMessage> \r\n              Теперь вы можите настраивать аварийные и другие события, \r\n              облако будет автоматически контролировать условия их срабатывания.\r\n              При срабатывании условия события в Журнал будет записано соответствующее сообщение.\r\n            </UpdateDescriptionMessage> \r\n            <UpdateDescriptionHeader> Доступна настройка параметров и тегов прибора </UpdateDescriptionHeader>\r\n            <UpdateDescriptionMessage> \r\n              Теперь в разделе Администрирование доступен\r\n              подраздел Прибор, в котором собраны все настройки подключения прибора. \r\n              Так же в данном подразделе Вы можите настраивать и добавление Теги прибора.\r\n            </UpdateDescriptionMessage>  \r\n\r\n            <UpdateDescriptionTitle> Обновление 0.1.6 </UpdateDescriptionTitle>\r\n            <UpdateDescriptionHeader> Доступны Виджеты устройства </UpdateDescriptionHeader>\r\n            <UpdateDescriptionMessage> \r\n              Теперь в разделе Администрирование доступен\r\n              подраздел Виджеты, в котором вы можите добавлять и настраивать виджеты, \r\n              для отображения информации об устройстве на странице Обзор.\r\n            </UpdateDescriptionMessage>  \r\n          </UpdateDescriptionContainer>\r\n        </div>\r\n      </div>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n\r\nfunction CardContainer (props) {\r\n  return (\r\n    <div className=\"col-4 p-2\">\r\n      <div className=\"card h-100 border-0\" style={{background:'rgba(255,255,255, 0.9)'}}>\r\n        <div className=\"card-body text-center text-dark\">\r\n          {props.children}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nfunction UpdateDescriptionContainer (props) {\r\n  return (\r\n    <div className=\"card border-0 mb-3\" style={{background:'rgba(255,255,255, 0.9)'}}>\r\n    <div className=\"card-body\">\r\n      {props.children}\r\n    </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction UpdateDescriptionTitle (props) {\r\n  return <h6 className='text-primary border-top border-info pt-3'> {props.children} </h6> \r\n}\r\n\r\nfunction UpdateDescriptionHeader (props) {\r\n  return <h6 className='text-success'> {props.children} </h6> \r\n}\r\n\r\nfunction UpdateDescriptionMessage (props) {\r\n  return <p className='text-dark'> {props.children} </p> \r\n}","import './App.css'\r\nimport './themes.css'\r\nimport '../node_modules/react-vis/dist/style.css'\r\n\r\nimport React, { useEffect, useState } from 'react' \r\nimport {\r\n  BrowserRouter as Router, \r\n  Switch, \r\n  Route,\r\n} from 'react-router-dom'\r\n\r\nimport {ProtectedRoute} from './utils/protectedRoute'\r\nimport {useLocalStorage} from './utils/useLocalStorage'\r\nimport {FullScreen, useFullScreenHandle} from \"react-full-screen\";\r\n\r\nimport DeviceApp from './device/deviceApp'\r\nimport CompanyApp from './company/companyApp'\r\nimport Login from './users/pages/login'\r\nimport Registration from './users/pages/registration'\r\nimport ProfilePage from './users/pages/profile'\r\nimport Navbar from './base/components/Navbar'\r\nimport WelcomePage from './base/pages/welcome'\r\nimport Page404 from './base/pages/pageNotFound'\r\n\r\nimport auth from './backendAPI/auth'\r\n\r\nexport default function App() {\r\n  const [loading, setLoading] = useState(true);\r\n  const [loading2, setLoading2] = useState(true);\r\n  const [darkThema, setDarkThema] = useLocalStorage(\"thema\", false);\r\n  const [authed, setAuthed] = useState(false);\r\n  const [userInfo, setUserInfo] = useState({});\r\n\r\n  const handle = useFullScreenHandle();\r\n\r\n  useEffect(() => {\r\n    setCssThema(darkThema);\r\n    auth.checkAuthentication(() => { setLoading(false) });\r\n    auth.onLogin = () => {setAuthed(true)};  \r\n    auth.onLogout = () => {setAuthed(false)}; \r\n    auth.onUserInfoReaded = (ui) => {\r\n      setUserInfo(ui); \r\n      setLoading2(false);\r\n    };   \r\n  }, [])\r\n\r\n  const setCssThema = (darkThema) => {\r\n    const root = document.getElementById('root');\r\n    if (darkThema) {\r\n      root.className='dark-thema';\r\n    } else {\r\n      root.className='light-thema';\r\n    }\r\n  };\r\n\r\n  const switchThemaHandler = () => {\r\n    const thema = !darkThema; \r\n    setDarkThema(thema);\r\n    setCssThema(thema);\r\n  };\r\n\r\n  if (loading || loading2) { \r\n    return null \r\n  } else { \r\n    return (\r\n      <React.Fragment>\r\n        <button className='full-screen-button fas fa-expand ' onClick={handle.enter}></button>\r\n        <FullScreen handle={handle}>\r\n          <Router>        \r\n            <Route exact path='/' component={()=>{\r\n              return (\r\n                <video autoPlay=\"autoplay\" muted loop=\"loop\" id=\"myVideo\">\r\n                  <source src=\"PowerPlant29080.mp4\" type=\"video/mp4\" />\r\n                </video>\r\n              )}\r\n            }/>\r\n\r\n            <Navbar authed={authed} userInfo={userInfo} darkThema={darkThema} \r\n              switchThemaHandler={switchThemaHandler} />\r\n            <Switch>\r\n              <Route exact path='/' component={WelcomePage} />\r\n              <Route exact path='/user/login' component={Login}  />\r\n              <Route exact path='/user/registration' component={Registration} />\r\n              <ProtectedRoute exact path='/user/profile' component={ ()=> <ProfilePage userInfo = {userInfo} /> } />\r\n              <ProtectedRoute path='/company' component={CompanyApp} />                   \r\n              <ProtectedRoute path='/device/:id' component={DeviceApp} />\r\n              <Route component={Page404} />\r\n            </Switch>\r\n          </Router>\r\n        </FullScreen>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\n\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}