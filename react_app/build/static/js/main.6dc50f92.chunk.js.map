{"version":3,"sources":["backendAPI/axiosApi.js","backendAPI/localSettings.js","backendAPI/auth.js","utils/protectedRoute.js","device/utils/sortWidgetsByOrder.js","device/components/DeviceSidebar.js","device/components/DeviceHeader.js","utils/useTargetClick.js","Widgets/components/TagsGraph/Graph.js","Widgets/components/TagsGraph/GraphWithCrosshair.js","Widgets/components/TagsGraph/Legend.js","Widgets/components/TagsGraph/Toolbar.js","base/components/Loader.js","Widgets/components/TagsGraph/TagsHistoricalGraph.js","Widgets/components/TagsGraph/GraphColors.js","Widgets/WidgetGraph.js","Widgets/components/TagsList/TagsCurrentValueRow.js","Widgets/components/TagsList/TagsCurrentValueList.js","Widgets/WidgetTable.js","Widgets/components/TagsIndicator/TagIndicator.js","Widgets/WidgetIndicator.js","Widgets/components/EventsLog/RecordsRow.js","Widgets/components/EventsLog/RecordsList.js","Widgets/WidgetEventsLog.js","Widgets/renderWidgets.js","device/pages/overview.js","device/pages/settings.js","device/pages/eventsLog.js","device/pages/graphs.js","backendAPI/backendAPI.js","base/forms/forms.js","device/pages/tagDetail.js","device/pages/deviceDetail.js","base/pages/pageNotFound.js","device/components/AdminPageDeviceStatusBar.js","device/pages/deviceAdmin.js","device/pages/widgetsAdmin.js","device/pages/eventsAdmin.js","device/pages/eventDetail.js","device/deviceApp.js","company/components/CompanySidebar.js","company/components/DeviceCard.js","company/components/FacilityCard.js","company/pages/overview.js","company/pages/employers.js","company/pages/facilitiesOnMap.js","company/pages/profile.js","company/companyApp.js","users/pages/login.js","users/pages/registration.js","users/pages/profile.js","users/components/LogoutBtn.js","base/components/Navbar.js","base/pages/welcome.js","App.js","reportWebVitals.js","index.js"],"names":["axiosInstance","axios","create","baseURL","timeout","headers","Authorization","localStorage","getItem","Content-Type","accept","interceptors","response","use","error","originalRequest","config","status","url","Promise","reject","data","code","statusText","refreshToken","tokenParts","JSON","parse","atob","split","now","Math","ceil","Date","exp","post","refresh","then","setItem","access","defaults","catch","err","console","log","auth","Auth","Object","classCallCheck","this","authenticated","onLogin","onLogout","onUserInfoReaded","cb","get","_onLogin","_onLogout","username","password","refresh_token","removeItem","_context3","t0","request","objectSpread","userInfo","readUserInfo","clearUserInfo","ProtectedRoute","_ref","Component","component","rest","objectWithoutProperties","react_default","a","createElement","react_router","assign","render","props","isAuthenticated","to","pathname","state","from","location","sortWidgetsByOrder","template","widgets","sort","b","KeyA","parseInt","order","KeyB","Sidebar","_React$useState","React","useState","_React$useState2","slicedToArray","displaySubMenu","setDisplaySubMenu","deviceId","styleBtnRemoveOutline","outline","boxShadow","className","style","overflow","id","role","aria-orientation","react_router_dom","activeClassName","concat","fontSize","onClick","Fragment","BASE_URL","DeviceHeader","deviceData","setDeviceData","device_id","readDeviceParameters","params","responce","useEffect","deviceParametersUpdateInterval","setInterval","clearInterval","name","is_online","verbose_last_update","useTargetClick","ref","callback","handleClick","e","current","contains","target","document","addEventListener","removeEventListener","Graph","_this","displayedTags","tags","filter","tag","disabled","resetZoomButton","lastDrawLocation","setLastDrawLocation","replace","has_displayed_tags","map","values","length","es","margin","left","right","top","bottom","xType","animation","xDomain","yDomain","yPadding","stroke","line","tickTotal","color","curve_color","key","tag_id","onBrushEnd","area","onDrag","setState","dontCheckIfEmpty","x","y","_React$useState3","_React$useState4","crosshairValues","setCrosshairValues","crosshairData","value","title","tag_name","_onNearestX","index","d","onMouseLeave","onNearestX","point","size","backgroundColor","background","colSpan","time","s","Intl","DateTimeFormat","dateStyle","timeStyle","format","format_time","paddingTop","Legend","searchText","setSearchText","items","searchable_discrete_color_legend_default","height","onSearchChange","searchPlaceholder","onItemClick","item","Toolbar","_useState","_useState2","showRangeForm","setShowRangeForm","_useState3","_useState4","activeButton","setActiveButton","changeGraphInterval","toggleActiveButton","btn","getActiveCalss","type","RangeForm","Loader","TagsHistoricalGraph","setModal","crosshair","setCrosshair","graphCard","useRef","graphContainer","modalButton","crosshairButton","legendContainer","tagsHistory","GRAPH_HEIGH","toggleModal","cl","includes","legend","toggleCroshair","width","textDecoration","loading","Loader_Loader","GraphWithCrosshair","TagsGraph_Graph","toggleCurveDisplay","toolbar","colors","getColor","clorsNumber","WidgetGraph","setLoading","interval","resolution","widget","graphInterval","setGraphInterval","_React$useState5","_React$useState6","setTagsHistory","readTagsHistory","prepared_tags","tag_code","add_date","prev","fltr","entry","updateTagsHistory","loadingTimeout","setTimeout","graphUpdateInterval","clearTimeout","TagsGraph_TagsHistoricalGraph","n","TagsCurrentValueRow","columns","indexOf","TagsCurrentValueList","TagsList_TagsCurrentValueRow","WidgetTable","setTags","readDeviceTags","tagsUpdateInterval","TagsList_TagsCurrentValueList","TagIndicator","addTextRight","addTextLeft","precision","toFixed","WidgetIndicator","record","format_date","date","arguments","undefined","message","toggleCategorySelection","categories","category_selection_panel","CategorySelectionPanel","records","RecordsTable","NoRecords","PaginationBar","readNextPage","readPreviousPage","changePage","pagination","RecordsRow_TagsCurrentValueRow","category","CategorySecetionButton","selected","children","list","Array","apply","num_pages","active","page_number","minWidth","WidgetEventsLog","setRecords","setCategories","_React$useState7","next","previous","_React$useState8","setPagination","_React$useState9","_React$useState10","page","setPage","readLogPage","selected_category_codes","results","readLogRecords","updateFirstPage","RecordsList_TagsCurrentValueList","toggle_index","RenderWidgets","widgetsTemplate","WidgetRender","min","DeviceOverviewPage","useParams","DeviceSettingsPage","WidgetsTemplate","DeviceEventsLogPage","getDeviceParameters","cb_success","backendApiRequest","GET","getDeviceTagsParameters","tags_list","postDeviceTagsParameters","tags_parameters","cb_error","POST","getEventsConfig","events_list","events_id","postEventsConfig","events_parameters","deleteEvents","DELETE","_callee","method","endpoint","body","_args","backendAPI_regeneratorRuntime","wrap","_context","sent","abrupt","t1","delete","stop","TextField","htmlFor","titel","placeholder","defaultValue","onChange","ErrorMessage","errors","CommentMessage","comment","NumberField","max","SelectField","hidden","options","option","MultipleSelectField","multiple","CheckboxField","checked","FormContainer","maxWidth","getSelectedOptions","i","l","push","TagDetailPage","_useParams","tagParameters","setTagParameters","formErrors","setFormErrors","history","useHistory","TagDetailForm","submitTagParameters","tag_parameters","responce_data","errors_data","cancelChanges","deleteTag","deleteDeviceTags","TagCreatePage","_useState5","_useState6","data_type","modbus_parameters","register_address","read_function","write_function","_useState7","_useState8","setTag","onSubmit","onCancel","onDelete","buttonsStyle","preventDefault","non_field_errors","DeviceConfigPage","deviceParameters","setDeviceParameters","deviceParametersFormErrors","setDeviceParametersFormErrors","deviceModbusParameters","setDeviceModbusParameters","deviceModbusParametersFormErrors","setDeviceModbusParametersFormErrors","_useState9","_useState10","deviceTagsParameters","setDeviceTagsParameters","loading1","setLoading1","loading2","setLoading2","loading3","setLoading3","getDeviceModbusParameters","DeviceConfigsForm","submitDeviceConfig","device_parameters","postDeviceParameters","DeviceModbusParametersForm","submitModbusParameters","postDeviceModbusParameters","TagsList","_useState11","_useState12","parameters","setParameters","polling_period","_useState13","_useState14","protocol_type","device_address","baudrate","address_size","parity","stopbit","packet_timout","bit_timout","lower_byte_forward","lower_register_forward","allow_group_reading","TagsListEntry","Page404","DeviceStatusBar","DeviceAdminPage","minHeight","exact","path","WidgetsAdminPage","updateWidgetsTemplate","setWidgetsTemplate","selectedWidget","setSelectedWidget","displayWidget","setDisplayWidget","rerenderWidgetForm","addWidgetToTemplate","WidgetsGrid","changeSelectedWidget","widgetNumber","WidgetsControlPanel","addWidget","DefaultTable","DefaultGraph","DefaultIndicator","saveWidgetsTemplate","WidgetForm","updateWidget","WidgetData","wt","w","deleteWidget","splice","content","btnAddClass","widgetsAdmin_WidgetPreview","WidgetPreview","show","setShow","handleClose","ModalSelectWidgetType","handleAddWidget","WTableForm","WGraphForm","WIndicatorForm","widgetsAdmin_FormContainer","WidgetTypeButton","tagsOptions","EventsAdminPage","events","setEvents","EventsList","handlEventDelete","event_id","event","toggleEventEnable","enable","ev","NoEvents","EventsListEntry","raise_message","is_active","EventDetailPage","setEvent","eventFormErrors","setEventFromErrors","EventForm","EventCreatePage","defaultEventSettings","device","expression","data-toggle","data-target","fall_message","raise_time","date_style","time_style","DeviceApp","newTemplate","postWidgetsTemplate","getWidgetsTemplate","graphs_DeviceOverviewPage","deviceApp_regeneratorRuntime","_callee2","template_data","_context2","DeviceCard","last_update","yesterday","setDate","getDate","formatter","hour","minute","month","day","FacilityCard","facilityInfo","devices","components_DeviceCard","CompanyOverviewPage","companyInfo","setCompanyInfo","readCompanyInfo","inf","company","facilities","facility","components_FacilityCard","overview_regeneratorRuntime","EmployersPage","FacilitiesOnMapPage","CompanyProfilePage","CompanyApp","CompanySidebar_Sidebar","Login","possibleConstructorReturn","getPrototypeOf","call","handleChange","bind","assertThisInitialized","handleSubmit","defineProperty","_this2","login","Signup","email","stack","ProfilePage","first_name","last_name","LogoutBtn","handleLogout","logout","withRouter","Navbar","authed","zIndex","components_LogoutBtn","WelcomePage","border","href","App","setAuthed","setUserInfo","handle","useFullScreenHandle","checkAuthentication","ui","enter","index_modern","autoplay","muted","loop","src","Registration","protectedRoute_ProtectedRoute","reportWebVitals","onPerfEntry","Function","__webpack_require__","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","App_App","getElementById"],"mappings":"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","file":"static/js/main.6dc50f92.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\nimport getBaseUrl from './localSettings'\r\nconst baseURL = getBaseUrl();\r\n\r\nconst axiosInstance = axios.create({\r\n    baseURL: baseURL,\r\n    timeout: 60000,\r\n    headers: {\r\n        'Authorization': \"JWT \" + localStorage.getItem('access_token'),\r\n        'Content-Type': 'application/json',\r\n        'accept': 'application/json'\r\n    }\r\n});\r\n\r\n\r\naxiosInstance.interceptors.response.use(\r\n    response => response,\r\n    error => {\r\n        const originalRequest = error.config;\r\n\r\n        // Prevent infinite loops\r\n        if (error.response.status === 401 && originalRequest.url === '/user/token/refresh/') {\r\n            // window.location.href = '/user/login/';                  \r\n            return Promise.reject(error);\r\n        }\r\n\r\n        if (error.response.data.code === \"token_not_valid\" &&\r\n            error.response.status === 401 && \r\n            error.response.statusText === \"Unauthorized\") \r\n            {\r\n                const refreshToken = localStorage.getItem('refresh_token');\r\n\r\n                if (refreshToken){\r\n                    const tokenParts = JSON.parse(atob(refreshToken.split('.')[1]));\r\n\r\n                    // exp date in token is expressed in seconds, while now() returns milliseconds:\r\n                    const now = Math.ceil(Date.now() / 1000);\r\n\r\n                    if (tokenParts.exp > now) {\r\n                        return axiosInstance\r\n                        .post('/user/token/refresh/', {refresh: refreshToken})\r\n                        .then((response) => {\r\n            \r\n                            localStorage.setItem('access_token', response.data.access);\r\n                            localStorage.setItem('refresh_token', response.data.refresh);\r\n            \r\n                            axiosInstance.defaults.headers['Authorization'] = \"JWT \" + response.data.access;\r\n                            originalRequest.headers['Authorization'] = \"JWT \" + response.data.access;\r\n            \r\n                            return axiosInstance(originalRequest);\r\n                        })\r\n                        .catch(err => {\r\n                            console.log(err)\r\n                        });\r\n                    }else{\r\n                        console.log(\"Refresh token is expired\", tokenParts.exp, now);\r\n                        // window.location.href = 'user/login/';\r\n                    }\r\n                }else{\r\n                    console.log(\"Refresh token not available.\")\r\n                    // window.location.href = 'user/login/';\r\n                }\r\n        }\r\n      \r\n     \r\n      // specific error handling done elsewhere\r\n      return Promise.reject(error);\r\n  }\r\n);\r\n\r\n\r\nexport default axiosInstance","\r\n\r\nexport default function getBaseUrl(){\r\n    return \"http://engine.ci-cloud.online\"\r\n    // return \"http://localhost:8000\"\r\n}","import axiosInstance from \"./axiosApi\";\r\n\r\nclass Auth{\r\n    constructor() {\r\n        this.authenticated = false;\r\n        this.onLogin = ()=>{};\r\n        this.onLogout = ()=>{};\r\n        this.onUserInfoReaded = ()=>{};\r\n    }\r\n\r\n    async checkAuthentication (cb) {\r\n        try {\r\n            const response = await axiosInstance.get('/user/token/check/')\r\n            if (response) {\r\n                this._onLogin();\r\n            } else {\r\n                this._onLogout();\r\n            }\r\n        } catch (error) {\r\n            this._onLogout();\r\n        }    \r\n        cb();         \r\n    }\r\n\r\n    async login(username, password, cb) {\r\n        try {\r\n            const response = await axiosInstance.post('/user/token/obtain/', {\r\n              username: username,\r\n              password: password\r\n            });\r\n            axiosInstance.defaults.headers['Authorization'] = \"JWT \" + response.data.access;\r\n            localStorage.setItem('access_token', response.data.access);\r\n            localStorage.setItem('refresh_token', response.data.refresh);\r\n            this._onLogin();\r\n            cb();\r\n        } catch (error) {\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    async logout(cb) {\r\n        try {\r\n            await axiosInstance.post('user/token/blacklist/', {\r\n                \"refresh_token\": localStorage.getItem(\"refresh_token\")\r\n            });\r\n            localStorage.removeItem('access_token');\r\n            localStorage.removeItem('refresh_token');\r\n            axiosInstance.defaults.headers['Authorization'] = null;\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n        this._onLogout();\r\n        cb();        \r\n    }\r\n\r\n    isAuthenticated() {\r\n        return this.authenticated;\r\n    }\r\n\r\n    async readUserInfo(){\r\n        const request = await axiosInstance.get('/user/info/')\r\n        this.onUserInfoReaded( { ...request.data } )\r\n    }\r\n\r\n    clearUserInfo(){\r\n        this.userInfo = {}\r\n        this.onUserInfoReaded( {} )\r\n    }\r\n\r\n    _onLogin () {\r\n        this.authenticated = true;\r\n        this.onLogin();\r\n        this.readUserInfo();\r\n    }\r\n    _onLogout () {\r\n        this.authenticated = false;\r\n        this.onLogout();\r\n        this.clearUserInfo();        \r\n    }\r\n}\r\n\r\nexport default new Auth()","import React from 'react' \r\nimport {Route, Redirect} from 'react-router-dom'\r\n\r\nimport auth from '../backendAPI/auth' \r\n\r\n\r\n\r\nexport const ProtectedRoute = ({component: Component, ...rest}) => {\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) => {\r\n        if (auth.isAuthenticated()) {\r\n          return <Component {...props} />\r\n        } else {\r\n          return <Redirect to={{pathname: '/user/login', state: {from: props.location}}} />\r\n        }\r\n      }}\r\n    />\r\n  )\r\n}","\r\n\r\nexport default function sortWidgetsByOrder(template) {\r\n    var widgets = template.widgets\r\n    if (!widgets) {return {'widgets':[]}}\r\n\r\n\r\n    widgets.sort( (a, b) => {\r\n        var KeyA = parseInt(a.order)\r\n        var KeyB = parseInt(b.order)\r\n        if (KeyA < KeyB) return -1;\r\n        if (KeyA > KeyB) return 1;\r\n        return 0;\r\n      });\r\n\r\n\r\n    return {'widgets':widgets}\r\n}","import React from 'react'\r\nimport {NavLink} from 'react-router-dom'\r\n\r\nexport default function Sidebar(props) {\r\n  const [displaySubMenu, setDisplaySubMenu] = React.useState(false)\r\n  const {deviceId} = props\r\n\r\n  const styleBtnRemoveOutline = {outline: 'none', boxShadow: 'none'}\r\n\r\n  return (\r\n    <div className=\"col-2 m-0 p-0\">\r\n      <div className=\"bg-dark bg-color-gray p-2 h-100\">\r\n        <div className=\"p-1\">\r\n\r\n          <div className=\"nav flex-column nav-pills\" style={{overflow: 'hidden'}} id=\"v-pills-tab\" role=\"tablist\" aria-orientation=\"vertical\">\r\n              <NavLink className=\"nav-link text-light btn\" style={styleBtnRemoveOutline} activeClassName=\"bg-dark\" to={`/device/${deviceId}/overview/`}>\r\n                <div className=\"d-inline-flex w-100 justify-content-center justify-content-lg-start\">\r\n                  <i className='fas fa-home' style={{fontSize:'1.3em'}}></i>\r\n                  <span className='pl-3 d-none d-lg-inline text-left'>Обзор</span>\r\n                </div>\r\n              </NavLink>\r\n              <NavLink className=\"nav-link text-light btn\" style={styleBtnRemoveOutline} activeClassName=\"bg-dark\" to={`/device/${deviceId}/settings/`}>\r\n                <div className=\"d-inline-flex w-100 justify-content-center justify-content-lg-start \">\r\n                  <i className='far fa-edit' style={{fontSize:'1.3em'}}></i>\r\n                  <span className='pl-3 d-none d-lg-inline text-left'>Настройки</span>\r\n                </div> \r\n              </NavLink>\r\n              <NavLink className=\"nav-link text-light btn\" style={styleBtnRemoveOutline} activeClassName=\"bg-dark\" to={`/device/${deviceId}/graphs/`}>\r\n                <div className=\"d-inline-flex w-100 justify-content-center justify-content-lg-start\">\r\n                  <i className='far fa-chart-bar' style={{fontSize:'1.3em'}}></i>\r\n                  <span className='pl-3 d-none d-lg-inline text-left'>Графики</span>\r\n                </div>\r\n              </NavLink>\r\n              <NavLink className=\"nav-link text-light btn\" style={styleBtnRemoveOutline} activeClassName=\"bg-dark\" to={`/device/${deviceId}/events/`}> \r\n                <div className=\"d-inline-flex w-100 justify-content-center justify-content-lg-start\">\r\n                  <i className='far fa-bell' style={{fontSize:'1.3em'}}></i>\r\n                  <span className='pl-3 d-none d-lg-inline text-left'>Журнал</span>\r\n                </div>\r\n              </NavLink>\r\n            </div>\r\n\r\n\r\n            <div className=\"nav flex-column nav-pills\" style={{overflow: 'hidden'}} >              \r\n              <div className='border-top mt-3 pt-3 border-secondary'></div>\r\n              <button className=\"nav-link text-light btn\" style={styleBtnRemoveOutline} onClick={()=>{setDisplaySubMenu(!displaySubMenu)}}>\r\n                <div className=\"d-inline-flex w-100 justify-content-center justify-content-lg-start\">\r\n                  <i className='\tfas fa-list py-1' style={{fontSize:'1.3em'}}></i>\r\n                  <span className='pl-3 d-none d-lg-inline text-left'>Администрирование</span>\r\n                  <i className='fas fa-caret-down py-1 pl-1 ml-auto d-none d-lg-inline' ></i>\r\n                </div>\r\n              </button>\r\n\r\n              {displaySubMenu && <React.Fragment>\r\n                <NavLink className=\"nav-link text-light btn\" style={styleBtnRemoveOutline} activeClassName=\"bg-dark\" to={`/device/${deviceId}/admin/config/`}> \r\n                  <div className=\"d-inline-flex w-100 justify-content-center justify-content-lg-start\">\r\n                    <i className='fas fa-circle px-1 pt-2' style={{fontSize:'0.6em'}}></i>\r\n                    <span className='pl-3 d-none d-lg-inline text-left'>Прибор</span>\r\n                  </div>\r\n                </NavLink>\r\n\r\n                <NavLink className=\"nav-link text-light btn\" style={styleBtnRemoveOutline} activeClassName=\"bg-dark\" to={`/device/${deviceId}/admin/widgets/`}> \r\n                  <div className=\"d-inline-flex w-100 justify-content-center justify-content-lg-start\">\r\n                    <i className='fas fa-circle px-1 pt-2' style={{fontSize:'0.6em'}}></i>\r\n                    <span className='pl-3 d-none d-lg-inline text-left'>Виджеты</span>\r\n                  </div>\r\n                </NavLink>\r\n\r\n                <NavLink className=\"nav-link text-light btn\" style={styleBtnRemoveOutline} activeClassName=\"bg-dark\" to={`/device/${deviceId}/admin/events/`}> \r\n                  <div className=\"d-inline-flex w-100 justify-content-center justify-content-lg-start\">\r\n                    <i className='fas fa-circle px-1 pt-2' style={{fontSize:'0.6em'}}></i>\r\n                    <span className='pl-3 d-none d-lg-inline text-left'>События</span>\r\n                  </div>\r\n                </NavLink>\r\n              </React.Fragment> }\r\n          </div>\r\n          \r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}","import React, { useEffect } from 'react' \r\n\r\nimport axiosInstance from \"../../backendAPI/axiosApi\";\r\nimport getBaseUrl from '../../backendAPI/localSettings'\r\nconst BASE_URL = getBaseUrl()\r\n\r\n\r\n\r\nexport default function DeviceHeader(props) {\r\n  const [deviceData, setDeviceData] = React.useState({})\r\n  const device_id = props.device_id;\r\n\r\n  function readDeviceParameters() {\r\n    axiosInstance.get(BASE_URL + \"/device/parameters/\", { params: { id: device_id }} )\r\n      .then(responce => { \r\n        responce && setDeviceData({...responce.data}) \r\n      }) \r\n  }\r\n  \r\n  useEffect(() => {\r\n    readDeviceParameters();\r\n    const deviceParametersUpdateInterval = setInterval(readDeviceParameters, 5000);\r\n    return () => {\r\n      clearInterval(deviceParametersUpdateInterval);\r\n    };\r\n  }, [])\r\n\r\n  \r\n  // render the page\r\n  return (\r\n    <React.Fragment>\r\n      <div className='d-flex border rounded border-dark px-3 mb-1 mx-1'>\r\n        <h3 className='pt-1'>Устройство: <b>{deviceData.name}</b></h3>\r\n        <div className='ml-auto mx-3 px-3 border-x border-dark'>\r\n          { deviceData.is_online ? \r\n            <div className='text-success'>\r\n              <span>Онлайн</span> <br/>\r\n              <i className='fas fa-check text-center w-100'></i>\r\n            </div>\r\n          : <div className='text-danger'>\r\n              <span>Нет связи</span> <br/>\r\n              <i className='fas fa-times text-center w-100'></i>\r\n            </div>\r\n          }\r\n        </div>\r\n        <div>\r\n          <p className='m-0 mr-1 text-right'>Данные обновлены: <br/> {deviceData.verbose_last_update}</p>\r\n        </div>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n","import { useEffect } from \"react\";\r\n\r\nconst useTargetClick = (ref, callback) => {\r\n  const handleClick = e => {\r\n    if (ref.current && ref.current.contains(e.target)) {\r\n      callback();\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    document.addEventListener(\"click\", handleClick);\r\n\r\n    return () => {\r\n      document.removeEventListener(\"click\", handleClick);\r\n    };\r\n  });\r\n};\r\n\r\nexport default useTargetClick;","import React, {useEffect} from 'react';\r\nimport PropTypes from 'prop-types'\r\nimport {\r\n    FlexibleXYPlot, \r\n    XAxis, \r\n    YAxis, \r\n    LineSeries,\r\n    // VerticalGridLines, \r\n    HorizontalGridLines, \r\n    Highlight} from 'react-vis';\r\n\r\nimport useTargetClick from '../../../utils/useTargetClick'\r\n\r\n\r\nfunction Graph(props) {\r\n  const tags = props.tags \r\n  const displayedTags = tags.filter( tag => tag.disabled === false )\r\n  const resetZoomButton = props.resetZoomButton\r\n  const [lastDrawLocation, setLastDrawLocation] = React.useState(null)\r\n\r\n  useTargetClick(resetZoomButton, ()=>{\r\n    console.log('seted onclick')\r\n    setLastDrawLocation(null)\r\n  })\r\n\r\n  useEffect(() => {\r\n    if (lastDrawLocation) {\r\n      resetZoomButton.current.className = resetZoomButton.current.className.replace('d-none', 'd-block')\r\n    } else {\r\n      resetZoomButton.current.className = resetZoomButton.current.className.replace('d-block', 'd-none')\r\n    }\r\n  }, [lastDrawLocation])\r\n\r\n  \r\n  let has_displayed_tags = false\r\n  displayedTags.map( (tag) => {\r\n    if (tag.values.length > 0) {has_displayed_tags = true}\r\n  })\r\n\r\n  if (has_displayed_tags) {\r\n    return (\r\n      <React.Fragment>\r\n        <div className='graph-container h-100' style={{overflow: 'hidden'}}>\r\n          <FlexibleXYPlot \r\n            margin={{left: 40, right: 0, top: 0, bottom: 30}} \r\n            xType=\"time\"\r\n            animation\r\n            xDomain={\r\n              lastDrawLocation && [\r\n                lastDrawLocation.left,\r\n                lastDrawLocation.right\r\n              ]\r\n            }\r\n            yDomain={\r\n              lastDrawLocation && [\r\n                lastDrawLocation.bottom,\r\n                lastDrawLocation.top\r\n              ]\r\n            }\r\n            yPadding={10} \r\n          >\r\n            <HorizontalGridLines style={{stroke: '#444A50'}} />\r\n            <XAxis style={{line:{stroke: '#6c757d'}}} tickTotal={15} />\r\n            <YAxis style={{line:{stroke: '#6c757d'}}} />\r\n            { displayedTags.map((tag)=>{ \r\n              return <LineSeries data={tag.values} color={tag.curve_color} key={tag.tag_id} />\r\n            }) }\r\n\r\n            <Highlight\r\n              onBrushEnd={area => setLastDrawLocation(area)}\r\n              onDrag={area => {\r\n                this.setState({\r\n                  lastDrawLocation: {\r\n                    bottom: lastDrawLocation.bottom + (area.top - area.bottom),\r\n                    left: lastDrawLocation.left - (area.right - area.left),\r\n                    right: lastDrawLocation.right - (area.right - area.left),\r\n                    top: lastDrawLocation.top + (area.top - area.bottom)\r\n                  }\r\n                });\r\n                }}\r\n              />\r\n          </FlexibleXYPlot>\r\n        </div>\r\n      </ React.Fragment>\r\n    );\r\n  } else {\r\n    return (\r\n      <React.Fragment>\r\n      <div className='graph-container h-100'>\r\n        <FlexibleXYPlot \r\n          dontCheckIfEmpty\r\n          margin={{left: 30, right: 0, top: 0, bottom: 30}}      \r\n        >\r\n          <HorizontalGridLines style={{stroke: '#444A50'}} />\r\n          <XAxis />\r\n          <YAxis />\r\n          <LineSeries data={[{x:0, y:0}]} /> \r\n        </FlexibleXYPlot>\r\n      </div>\r\n      </ React.Fragment> \r\n    )                   \r\n  }\r\n}\r\n\r\n\r\nGraph.propTypes = {\r\n    tags: PropTypes.arrayOf(PropTypes.object).isRequired\r\n}\r\n\r\nexport default Graph","import React, {useEffect} from 'react';\r\nimport PropTypes from 'prop-types'\r\nimport {\r\n    FlexibleXYPlot, \r\n    XAxis, \r\n    YAxis, \r\n    LineSeries,\r\n    MarkSeries,\r\n    Crosshair,\r\n    // VerticalGridLines, \r\n    HorizontalGridLines, \r\n    Highlight} from 'react-vis';\r\n\r\nimport useTargetClick from '../../../utils/useTargetClick'\r\n\r\n\r\n\r\nfunction Graph(props) {\r\n  const tags = props.tags   \r\n  const displayedTags = tags.filter( tag => tag.disabled === false )  \r\n  const resetZoomButton = props.resetZoomButton\r\n  const [lastDrawLocation, setLastDrawLocation] = React.useState(null)\r\n  const [crosshairValues, setCrosshairValues] = React.useState([])\r\n\r\n  useTargetClick(resetZoomButton, ()=>{\r\n    console.log('seted onclick')\r\n    setLastDrawLocation(null)\r\n  })\r\n\r\n  useEffect(() => {\r\n    if (lastDrawLocation) {\r\n      resetZoomButton.current.className = resetZoomButton.current.className.replace('d-none', 'd-block')\r\n    } else {\r\n      resetZoomButton.current.className = resetZoomButton.current.className.replace('d-block', 'd-none')\r\n    }\r\n  }, [lastDrawLocation])\r\n\r\n\r\n  const crosshairData = displayedTags.map( (tag) => {\r\n    return tag.values.map((value) => {\r\n      value.title = tag.tag_name\r\n      value.color = tag.curve_color\r\n      return value\r\n    })\r\n  });  \r\n\r\n  const _onMouseLeave = () => {\r\n    setCrosshairValues([]);\r\n  };\r\n\r\n  const _onNearestX = (value, {index}) => {\r\n    setCrosshairValues( crosshairData.map(d => d[index]) );\r\n  };\r\n\r\n  function format_time(time) {\r\n    const s = new Date(time)\r\n    let formatter = new Intl.DateTimeFormat([] , {dateStyle: 'long', timeStyle: 'medium'});\r\n    return formatter.format(s)\r\n  }\r\n\r\n  let has_displayed_tags = false\r\n  displayedTags.map( (tag) => {\r\n    if (tag.values.length > 0) {has_displayed_tags = true}\r\n  })\r\n\r\n  if (has_displayed_tags) {\r\n    return (\r\n      <React.Fragment>\r\n        <div className='graph-container  h-100' style={{overflow: 'hidden'}}>\r\n          <FlexibleXYPlot \r\n            margin={{left: 40, right: 0, top: 0, bottom: 30}} \r\n            xType=\"time\"\r\n            animation\r\n            xDomain={\r\n              lastDrawLocation && [\r\n                lastDrawLocation.left,\r\n                lastDrawLocation.right\r\n              ]\r\n            }\r\n            yDomain={\r\n              lastDrawLocation && [\r\n                lastDrawLocation.bottom,\r\n                lastDrawLocation.top\r\n              ]\r\n            } \r\n            yPadding={10}\r\n            onMouseLeave={_onMouseLeave}        \r\n          >\r\n            <HorizontalGridLines style={{stroke: '#444A50'}} />\r\n            <XAxis style={{line:{stroke: '#6c757d'}}} tickTotal={15} />\r\n            <YAxis style={{line:{stroke: '#6c757d'}}} />\r\n            { displayedTags.map((tag, index)=>{\r\n              if (index === 0) {\r\n                return <LineSeries onNearestX={_onNearestX} data={tag.values} color={tag.curve_color} key={tag.tag_id} />\r\n              }\r\n              else {\r\n                return <LineSeries data={tag.values} color={tag.curve_color} key={tag.tag_id} />\r\n              }\r\n            }) }\r\n\r\n            <Highlight\r\n              onBrushEnd={area => setLastDrawLocation(area)}\r\n              onDrag={area => {\r\n                setLastDrawLocation({\r\n                  lastDrawLocation: {\r\n                    bottom: lastDrawLocation.bottom + (area.top - area.bottom),\r\n                    left: lastDrawLocation.left - (area.right - area.left),\r\n                    right: lastDrawLocation.right - (area.right - area.left),\r\n                    top: lastDrawLocation.top + (area.top - area.bottom)\r\n                  }\r\n                });\r\n              }}\r\n            />\r\n\r\n            {crosshairValues[0] && \r\n              crosshairValues.map((point, index)=>{\r\n                return point ? (\r\n                          <MarkSeries\r\n                            key = {index}\r\n                            color = {point.color}\r\n                            size = '5'\r\n                            data={[point]}/>\r\n                        ) : null \r\n            })}\r\n\r\n            <Crosshair values={crosshairValues} style={{line:{backgroundColor:'red'}}}>  \r\n              {crosshairValues[0] && \r\n                <div className='rounded p-1 mx-2' style={{background: 'rgba(37, 37, 38, 1)'}}>\r\n                  <table className=\"table text-light p-0 m-0\">\r\n                    <thead> \r\n                    <tr>\r\n                        <td colSpan=\"3\" style={{fontSize: '1.2em', color: 'rgb(180, 180, 180)'}} \r\n                          className='border-0 font-weight-bold p-1 m-0 text-center text-nowrap'\r\n                        >\r\n                          {format_time(crosshairValues[0].x)}\r\n                        </td>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      { crosshairValues.map((point, index)=>{\r\n                        return point ? (\r\n                          <tr style={{fontSize: '1.1em', color: 'rgb(210, 210, 210)'}} key={index}>\r\n                            <td style={{color: point.color, paddingTop: '4px'}} className='text-nowrap border-0 px-1 pb-0 m-0\tfas fa-minus'></td>   \r\n                            <td className='text-nowrap border-0 pl-1 pr-2 py-0 m-0'> {point.title}: </td>   \r\n                            <td className='text-nowrap border-0 px-1 py-0 m-0 font-weight-bold  text-right'> {point.y} </td>\r\n                          </tr> \r\n                        ) : null\r\n                      })}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              }\r\n            </Crosshair>\r\n          </FlexibleXYPlot>\r\n        </div>\r\n      </ React.Fragment>\r\n    );  \r\n  } else {\r\n    return (\r\n      <React.Fragment>\r\n      <div className='graph-container h-100'>\r\n        <FlexibleXYPlot \r\n          dontCheckIfEmpty\r\n          margin={{left: 30, right: 0, top: 0, bottom: 30}}      \r\n        >\r\n          <HorizontalGridLines style={{stroke: '#444A50'}} />\r\n          <XAxis />\r\n          <YAxis />\r\n          <LineSeries data={[{x:0, y:0}]} /> \r\n        </FlexibleXYPlot>\r\n      </div>\r\n      </ React.Fragment> \r\n    )                   \r\n  }\r\n}\r\n\r\n\r\nGraph.propTypes = {\r\n    tags: PropTypes.arrayOf(PropTypes.object).isRequired\r\n}\r\n\r\nexport default Graph","import React from 'react' \r\nimport SearchableDiscreteColorLegend from 'react-vis/dist/legends/searchable-discrete-color-legend';\r\n\r\n\r\n\r\n\r\nexport default function Legend(props) { \r\n  var [searchText, setSearchText] = React.useState('')\r\n\r\n  var state = {\r\n    onClick: props.onClick,\r\n    items: props.tags.map((tag) => {\r\n      return {title: tag.tag_name, color: tag.curve_color, tag_id:tag.tag_id, disabled:tag.disabled}\r\n    })\r\n  }\r\n\r\n  function _clickHandler (item) {\r\n    state.onClick(item.tag_id);    \r\n  };\r\n\r\n  function _searchChangeHandler (searchText) {\r\n    setSearchText(searchText)\r\n  };\r\n\r\n  return (\r\n    <div className='d-block text-dark pl-3'>\r\n      <SearchableDiscreteColorLegend\r\n        height={ parseInt(props.height.replace('px', '')) }\r\n        // width={300}\r\n        onSearchChange={_searchChangeHandler}\r\n        searchPlaceholder={'Поиск...'}\r\n        searchText={searchText}\r\n        onItemClick={_clickHandler}\r\n        items={state.items}\r\n      />\r\n    </div>\r\n  );\r\n}","import React, { useState } from 'react' \r\n\r\n\r\n\r\nexport default function Toolbar(props) { \r\n  const [showRangeForm, setShowRangeForm] = useState(false)\r\n  const [activeButton, setActiveButton] = useState([false, true, false, false, false, false, false, false])\r\n  const changeGraphInterval = props.changeGraphInterval\r\n\r\n  function toggleActiveButton(btn) {\r\n    // enable selected button and off all other\r\n    const b = activeButton.map( (item, index) => {\r\n      return (index === btn) ? true : false\r\n    })\r\n    setActiveButton(b)\r\n    // display form for range input \r\n    setShowRangeForm( (btn === 7) ? true : false ) \r\n  }\r\n\r\n  function getActiveCalss(btn) {\r\n    return activeButton[btn] ? ' active' : ''\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n    <div className='d-flex justify-content-left p-0 pt-2 m-0'>\r\n        <button type=\"button\" \r\n          className={'btn btn-sm btn-outline-secondary mx-1 ' + getActiveCalss(0)} \r\n          onClick={()=>{\r\n            toggleActiveButton(0)\r\n            changeGraphInterval('5m', 'all')\r\n          }}\r\n        >онлайн</button>\r\n\r\n        <button type=\"button\" \r\n          className={'btn btn-sm btn-outline-secondary mx-1 ' + getActiveCalss(1)} \r\n          onClick={()=>{\r\n            toggleActiveButton(1)\r\n            changeGraphInterval('1h', '1m')\r\n          }}\r\n        >1 час</button>\r\n\r\n        <button type=\"button\" \r\n          className={'btn btn-sm btn-outline-secondary mx-1 ' + getActiveCalss(2)} \r\n          onClick={()=>{\r\n            toggleActiveButton(2)\r\n            changeGraphInterval('6h', '5m')\r\n          }}\r\n        >6 часов</button>\r\n\r\n        <button type=\"button\" \r\n          className={'btn btn-sm btn-outline-secondary mx-1 ' + getActiveCalss(3)} \r\n          onClick={()=>{\r\n            toggleActiveButton(3)\r\n            changeGraphInterval('12h', '10m')\r\n          }}\r\n        >12 часов</button>\r\n\r\n        <button type=\"button\" \r\n          className={'btn btn-sm btn-outline-secondary mx-1 ' + getActiveCalss(4)} \r\n          onClick={()=>{\r\n            toggleActiveButton(4)\r\n            changeGraphInterval('1d', '30m')\r\n          }}\r\n        >сутки</button>\r\n\r\n        <button type=\"button\" \r\n          className={'btn btn-sm btn-outline-secondary mx-1 ' + getActiveCalss(5)} \r\n          onClick={()=>{\r\n            toggleActiveButton(5)\r\n            changeGraphInterval('7d', '2h')\r\n          }}\r\n        >неделя</button>\r\n\r\n        <button type=\"button\" \r\n          className={'btn btn-sm btn-outline-secondary mx-1 ' + getActiveCalss(6)} \r\n          onClick={()=>{\r\n            toggleActiveButton(6)\r\n            changeGraphInterval('30d', '12h')\r\n          }}\r\n        >месяц</button>\r\n\r\n        <button type=\"button\" \r\n          className={'btn btn-sm btn-outline-secondary mx-1 ' + getActiveCalss(7)} \r\n          onClick={()=>{\r\n            toggleActiveButton(7)\r\n            changeGraphInterval('30d', '12h') // todo\r\n          }}\r\n        >интервал</button> \r\n    </div>\r\n\r\n    {showRangeForm ? <RangeForm /> : null }\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n\r\nfunction RangeForm(props) {\r\n  return (\r\n    <React.Fragment>\r\n    <form className='pt-2'>\r\n      <div className=\"input-group input-group-sm \">\r\n        <div className=\"input-group-prepend \">\r\n          <span className=\"input-group-text bg-secondary text-light border-secondary ml-1\">C</span>\r\n        </div>\r\n        <input type=\"date\" className=\"form-control bg-dark text-light border-secondary\"></input>\r\n        <input type=\"time\" className=\"form-control bg-dark text-light border-secondary\"></input>\r\n\r\n        <div className=\"input-group-prepend \">\r\n          <span className=\"input-group-text bg-secondary text-light border-secondary ml-2\">По</span>\r\n        </div>\r\n        <input type=\"date\" className=\"form-control bg-dark text-light border-secondary\"></input>\r\n        <input type=\"time\" className=\"form-control bg-dark text-light border-secondary\"></input>\r\n\r\n        <button type=\"button\" className='btn btn-sm btn-secondary ml-2 mr-1'>показать</button> <br/>\r\n      </div>\r\n    </form>\r\n    </React.Fragment>\r\n  );\r\n}","import React from 'react'\r\nimport './Loader.css'\r\n\r\nexport default function Loader() {\r\n    return(\r\n        <div className=\"lds-ellipsis\"><div></div><div></div><div></div><div></div></div>\r\n    )\r\n}","import React from 'react';\r\nimport PropTypes from 'prop-types'\r\nimport Graph from './Graph'\r\nimport GraphWithCrosshair from './GraphWithCrosshair'\r\nimport Legend from './Legend'\r\nimport Toolbar from './Toolbar'\r\nimport Loader from '../../../base/components/Loader'\r\n\r\n\r\nfunction TagsHistoricalGraph(props) {\r\n  const [modal, setModal] = React.useState(false) // use it just for force update this component\r\n  const [crosshair, setCrosshair] = React.useState(false)\r\n  const graphCard = React.useRef(null)\r\n  const graphContainer = React.useRef(null)\r\n  const modalButton = React.useRef(null)\r\n  const crosshairButton = React.useRef(null)\r\n  const legendContainer = React.useRef(null)\r\n  const resetZoomButton = React.useRef(null)\r\n  const tags = props.tagsHistory  \r\n  const GRAPH_HEIGH = props.height ? props.height : '300px'\r\n\r\n  const toggleModal = () => {\r\n    const cl = ' full-screen-card'\r\n    if (graphCard.current.className.includes(cl)) {\r\n      graphCard.current.className = graphCard.current.className.replace(cl, '')\r\n      graphContainer.current.style.height = GRAPH_HEIGH\r\n      graphContainer.current.className = graphContainer.current.className.replace('col-10', 'col-8')\r\n      if (props.legend) {legendContainer.current.className = legendContainer.current.className.replace('col-2', 'col-4')}    \r\n      modalButton.current.className = modalButton.current.className.replace('fa-compress', 'fa-expand') \r\n      modalButton.current.className = modalButton.current.className.replace('text-primary', 'text-light')      \r\n      setModal(false)\r\n    } else {\r\n      graphCard.current.className += cl\r\n      graphContainer.current.style.height = 'calc(100vh - 150px)'\r\n      graphContainer.current.className = graphContainer.current.className.replace('col-8', 'col-10')\r\n      if (props.legend) {legendContainer.current.className = legendContainer.current.className.replace('col-4', 'col-2')}\r\n      modalButton.current.className = modalButton.current.className.replace('fa-expand', 'fa-compress') \r\n      modalButton.current.className = modalButton.current.className.replace('text-light', 'text-primary')       \r\n      setModal(true)\r\n    }\r\n  }\r\n\r\n  const toggleCroshair = () => {\r\n    if (crosshair) {\r\n      setCrosshair(!crosshair)\r\n      crosshairButton.current.className = crosshairButton.current.className.replace('text-primary', 'text-light')      \r\n    } else {\r\n      setCrosshair(!crosshair)\r\n      crosshairButton.current.className = crosshairButton.current.className.replace('text-light', 'text-primary') \r\n    }\r\n  }\r\n\r\n  return (   \r\n    <React.Fragment>\r\n    <div ref={graphCard} className='card shadow-sm py-2 bg-dark text-light h-100'>\r\n      <div className='d-flex mb-1'>\r\n        <h5 className=\"px-3 pt-1 pb-2 m-0\">{props.title}</h5>\r\n        <span className='ml-auto'></span>\r\n\r\n        <button type=\"button\" \r\n          ref={resetZoomButton} \r\n          className={'btn btn-link text-primary m-0 p-0 mt-1 mr-2 fas fa-search-minus d-none'} \r\n          style={{width: '28px', height: '28px', fontSize:'1em', textDecoration: 'none', outline: 'none', boxShadow: 'none'}} \r\n          onClick={null}\r\n        ></button>\r\n\r\n        <button type=\"button\"\r\n          ref={crosshairButton} \r\n          className={'btn btn-link text-light m-0 p-0 mt-1 mr-2 fas fa-ruler-vertical'} \r\n          style={{width: '28px', height: '28px', fontSize:'1em', textDecoration: 'none', outline: 'none', boxShadow: 'none'}}\r\n          onClick={toggleCroshair}\r\n        ></button> \r\n\r\n        <button type=\"button\" \r\n          ref={modalButton} \r\n          className={'btn btn-link text-light m-0 p-0 mt-1 mr-2 fas fa-expand'} \r\n          style={{width: '28px', height: '28px', fontSize:'1em', textDecoration: 'none', outline: 'none', boxShadow: 'none'}} \r\n          onClick={toggleModal}\r\n        ></button>  \r\n      </div>\r\n\r\n      { props.loading ? \r\n        <div className='d-flex justify-content-center'><Loader /></div> :\r\n          <div className=\"row m-0 px-3 py-0\">\r\n            <div ref={graphContainer} className={`${ props.legend ? 'col-8' : 'col-12'} m-0 p-0`} style={{height: GRAPH_HEIGH}}>\r\n              { crosshair ? \r\n                <GraphWithCrosshair tags={tags} resetZoomButton={resetZoomButton} /> : \r\n                <Graph tags={tags} resetZoomButton={resetZoomButton} /> \r\n              }\r\n            </div>\r\n\r\n            { props.legend && (\r\n              <div ref={legendContainer} className=\"col-4 m-0 p-0\">\r\n                <Legend tags={tags} onClick={props.toggleCurveDisplay} height={GRAPH_HEIGH}/>\r\n              </div>\r\n            )}\r\n\r\n            { props.toolbar && (\r\n              <div className=\"col-12 align-self-start m-0 p-0\">\r\n                <Toolbar toggleModal={toggleModal} toggleCroshair={toggleCroshair} changeGraphInterval={props.changeGraphInterval}/>\r\n              </div>\r\n            )}\r\n        </div>\r\n      }\r\n    </div>\r\n    </ React.Fragment>\r\n  );\r\n}\r\n\r\n\r\nTagsHistoricalGraph.propTypes = {\r\n    tagsHistory: PropTypes.arrayOf(PropTypes.object).isRequired\r\n}\r\n\r\nexport default TagsHistoricalGraph","// const colors = [\r\n//     '#19CDD7', '#DDB27C', '#88572C', \r\n//     '#FF991F', '#F15C17', '#223F9A', \r\n//     '#DA70BF', '#125C77', '#4DC19C', \r\n//     '#776E57', '#12939A', '#17B8BE', \r\n//     '#F6D18A', '#B7885E', '#FFCB99', \r\n//     '#F89570', '#829AE3', '#E79FD5', \r\n//     '#1E96BE', '#89DAC1', '#B3AD9E'\r\n// ]\r\n\r\nconst colors = [\r\n    '#f44336', '#00BCD4', '#FF9800', \r\n    '#E91E63', '#009688', '#FF5722', \r\n    '#9C27B0', '#4CAF50', '#795548', \r\n    '#673AB7', '#8BC34A', '#607D8B', \r\n    '#3F51B5', '#CDDC39', \r\n    '#2196F3', '#FFEB3B', \r\n    '#03A9F4', '#FFC107', \r\n]\r\n\r\n\r\nexport default function getColor(index) {\r\n    const clorsNumber = colors.length\r\n    var ind\r\n    if (index+1 > clorsNumber) {\r\n        ind = index % clorsNumber\r\n    }\r\n    else {\r\n        ind = index\r\n    }\r\n    return colors[ind]\r\n}","import React, { useEffect } from 'react' \r\n\r\nimport TagsHistoricalGraph from './components/TagsGraph/TagsHistoricalGraph'\r\nimport getColor from './components/TagsGraph/GraphColors'\r\nimport axiosInstance from \"../backendAPI/axiosApi\";\r\nimport getBaseUrl from '../backendAPI/localSettings'\r\nconst BASE_URL = getBaseUrl()\r\n\r\n\r\n\r\nexport default function WidgetGraph(props) {\r\n  const [loading, setLoading] = React.useState(true)\r\n  const [graphInterval, setGraphInterval] = React.useState({interval:'1h', resolution:'1m', tags: props.widget.tags})\r\n  const [tagsHistory, setTagsHistory] = React.useState([])\r\n  const device_id = props.device_id;\r\n\r\n  function updateTagsHistory(tags) {\r\n    const prepared_tags = tags.map( (tag, index) => {\r\n      return ({\r\n        tag_id: tag.tag_id,\r\n        tag_code: tag.tag_code,\r\n        tag_name: tag.tag_name,\r\n        disabled: false,\r\n        curve_color : getColor(index),\r\n        values: tag.values.map( (value) => {\r\n          return {x: new Date(value.add_date), y: value.value}\r\n        })\r\n      })\r\n    })  \r\n    setTagsHistory( (prev) => {\r\n      return prepared_tags.map( (tag)=> {\r\n        const fltr = prev.filter( entry=>entry.tag_id === tag.tag_id )\r\n        var disabled = (fltr.length > 0) ? fltr[0].disabled : tag.disabled\r\n        return {...tag, disabled: disabled}\r\n      })\r\n    }) \r\n  }\r\n\r\n  // read tags historical data\r\n  function readTagsHistory() {\r\n    axiosInstance.get(BASE_URL + \"/device/tags/history/\", { params: { id: device_id, ...graphInterval}} )\r\n    .then(responce => {\r\n      responce && updateTagsHistory(responce.data)\r\n    })  \r\n  }\r\n  \r\n  // read parameters\r\n  useEffect(() => {\r\n    readTagsHistory();\r\n    const loadingTimeout = setTimeout( () => { setLoading(false) }, 1000);\r\n    const graphUpdateInterval = setInterval( readTagsHistory, getGraphUpdateTimeout(graphInterval.interval))\r\n    return () => {\r\n      clearTimeout(loadingTimeout);\r\n      clearInterval(graphUpdateInterval);\r\n    };\r\n  }, [graphInterval])\r\n\r\n  \r\n  function changeGraphInterval(interval, resolution){\r\n    setGraphInterval( (prev) => {\r\n      return {...prev, interval: interval, resolution: resolution}\r\n    })\r\n  }\r\n\r\n  function getGraphUpdateTimeout(interval){\r\n    if (interval === '5m') {\r\n      return 2000                       // 2s\r\n    } else if (interval === '1h') {\r\n      return 30000                      // 30s\r\n    } else if (interval === '6h') {\r\n      return 60000 * 2                  // 2m\r\n    } else if (interval === '12h') {\r\n      return 60000 * 5                  // 5m\r\n    } else if (interval === '1d') {\r\n      return 60000 * 15                 // 15m\r\n    } else if (interval === '7d') {\r\n      return 60000 * 60                 // 1h\r\n    } else if (interval === '30d') {\r\n      return 60000 * 60 * 6             // 6h\r\n    } else {\r\n      return 60000 * 5                  // 5m\r\n    }\r\n  }\r\n\r\n  // toggle curve display\r\n  function toggleCurveDisplay(tag_id){\r\n    const n = tagsHistory.map( entry => { \r\n      if (entry.tag_id===tag_id) { entry.disabled = !entry.disabled } \r\n      return entry\r\n    })\r\n    setTagsHistory(n)\r\n  }\r\n\r\n  // render the widget\r\n  return (\r\n    <React.Fragment>\r\n        <TagsHistoricalGraph \r\n            tagsHistory={tagsHistory} \r\n            toggleCurveDisplay={toggleCurveDisplay}\r\n            title={props.widget.title}\r\n            legend={props.widget.legend}\r\n            loading={loading}\r\n            toolbar={props.widget.toolbar}\r\n            height={props.widget.height}\r\n            changeGraphInterval={changeGraphInterval}\r\n        /> \r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\n\r\nfunction TagsCurrentValueRow({tag, columns, index}) {\r\n    return (\r\n        <tr>\r\n            { (columns.indexOf('#No') >= 0) ? <td className='border-secondary text-secondary pl-2'> {index + 1} </td> : null }  \r\n            { (columns.indexOf('code') >= 0) ? <td className='border-secondary'> {tag.code} </td> : null }\r\n            { (columns.indexOf('name') >= 0) ? <td className='border-secondary'> {tag.name} </td> : null }\r\n            { (columns.indexOf('value') >= 0) ? <td className='border-secondary'> {tag.value} </td> : null }\r\n        </tr>\r\n    )\r\n}\r\n\r\n\r\n\r\nTagsCurrentValueRow.propTypes = {\r\n    tag: PropTypes.object.isRequired,\r\n    index: PropTypes.number.isRequired,\r\n}\r\n\r\nexport default TagsCurrentValueRow","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport TagsCurrentValueRow from './TagsCurrentValueRow'\r\nimport Loader from '../../../base/components/Loader'\r\n\r\n\r\nfunction TagsCurrentValueList(props) {\r\n  const [modal, setModal] = React.useState(false) // use it just for force update this component\r\n  const modalButton = React.useRef(null)\r\n  const graphCard = React.useRef(null)\r\n\r\n  const toggleModal = () => {\r\n    const cl = ' full-screen-card'\r\n    if (graphCard.current.className.includes(cl)) {\r\n      graphCard.current.className = graphCard.current.className.replace(cl, '')\r\n      modalButton.current.className = modalButton.current.className.replace('fa-compress', 'fa-expand') \r\n      modalButton.current.className = modalButton.current.className.replace('text-primary', 'text-light')      \r\n      setModal(false)\r\n    } else {\r\n      graphCard.current.className += cl\r\n      modalButton.current.className = modalButton.current.className.replace('fa-expand', 'fa-compress') \r\n      modalButton.current.className = modalButton.current.className.replace('text-light', 'text-primary')       \r\n      setModal(true)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div ref={graphCard} className='card shadow-sm py-2 bg-dark text-light h-100'>\r\n      <div className='d-flex mb-1'>\r\n        <h5 className=\"px-3 pt-1 pb-0 m-0\">{props.title}</h5>\r\n        <span className='ml-auto'></span>\r\n\r\n        <button type=\"button\" \r\n          ref={modalButton} \r\n          className={'btn btn-link text-light m-0 p-0 mt-1 mr-2 fas fa-expand'} \r\n          style={{width: '28px', height: '28px', fontSize:'1em', textDecoration: 'none', outline: 'none', boxShadow: 'none'}} \r\n          onClick={toggleModal}\r\n        ></button>  \r\n      </div>\r\n  \r\n      { props.loading ? \r\n        <div className='d-flex justify-content-center'><Loader /></div> \r\n        :\r\n        <>\r\n        { props.columns ?    \r\n        <div className=\"table-responsive px-3\">\r\n          <table className=\"table table-hover table-dark table-sm text-light w-100 mb-0\">\r\n            <thead> \r\n              <tr>\r\n                { (props.columns.indexOf('#No') >= 0) ? <th className='border-0 text-secondary font-weight-bold pl-2'>№</th> : null }\r\n                { (props.columns.indexOf('code') >= 0) ? <th className='border-0 text-secondary font-weight-bold'>Код параметра</th> : null }\r\n                { (props.columns.indexOf('name') >= 0) ? <th className='border-0 text-secondary font-weight-bold'>Наименование параметра</th> : null }\r\n                { (props.columns.indexOf('value') >= 0) ? <th className='border-0 text-secondary font-weight-bold'>Текущее значение</th> : null }\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n                { props.tags.map((tag, index) => {\r\n                  return (\r\n                    <TagsCurrentValueRow tag={tag} columns={props.columns} key={tag.code} index={index} />\r\n                  )\r\n                }) }\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        :\r\n          <i className='text-secondary ml-3'>Данные для отображения не заданы ... </i>\r\n        } \r\n        </>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nTagsCurrentValueList.propTypes = {\r\n    tags: PropTypes.arrayOf(PropTypes.object).isRequired\r\n}\r\n\r\nexport default TagsCurrentValueList","import React, { useEffect } from 'react' \r\n\r\nimport TagsCurrentValueList from './components/TagsList/TagsCurrentValueList'\r\nimport axiosInstance from \"../backendAPI/axiosApi\";\r\nimport getBaseUrl from '../backendAPI/localSettings'\r\nconst BASE_URL = getBaseUrl()\r\n\r\n\r\n\r\nexport default function WidgetTable(props) {\r\n  const [tags, setTags] = React.useState([])\r\n  const [loading, setLoading] = React.useState(true)\r\n  const device_id = props.device_id;\r\n  const displayedTags =  props.widget.tags;\r\n\r\n  function readDeviceTags() {\r\n    axiosInstance.get(BASE_URL + \"/device/tags/value/\", { params: { id: device_id, tags: displayedTags }} )\r\n    .then((responce) => {\r\n      responce && setTags(responce.data)     \r\n    })  \r\n  }\r\n  \r\n  // read parameters\r\n  useEffect(() => {\r\n    readDeviceTags();\r\n    const loadingTimeout = setTimeout( () => { setLoading(false) }, 1000);\r\n    const tagsUpdateInterval = setInterval(readDeviceTags, 2000);\r\n    return () => {\r\n      clearTimeout(loadingTimeout);      \r\n      clearInterval(tagsUpdateInterval);\r\n    };\r\n  }, [])\r\n\r\n  // render the page\r\n  return (\r\n    <React.Fragment>\r\n        <TagsCurrentValueList\r\n          tags={tags} \r\n          title={props.widget.title} \r\n          columns={props.widget.columns} \r\n          loading={loading} \r\n        />\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n","import React from 'react'\r\nimport Loader from '../../../base/components/Loader'\r\n\r\n\r\nexport default function TagIndicator(props) {\r\n  const tag = props.tag\r\n  const addTextRight = props.addTextRight\r\n  const addTextLeft = props.addTextLeft\r\n\r\n  var value = 'none'\r\n  if (tag) {\r\n    value = props.precision ? tag.value.toFixed(props.precision) : tag.value\r\n  }\r\n\r\n  return (\r\n    <div className='card shadow-sm py-2 bg-dark text-light h-100'>\r\n      <div className='d-flex mb-1'>\r\n        <h5 className=\"px-3 pt-1 pb-0 m-0\">{props.title}</h5>\r\n        <span className='ml-auto'></span>  \r\n      </div>\r\n  \r\n      { props.loading ? \r\n        <div className='d-flex justify-content-center'><Loader /></div> :     \r\n        <div className=\"d-flex justify-content-center align-items-end h-100 px-3\">\r\n          {tag ? \r\n            <p className='display-4 m-0 p-0'>\r\n              <span>{addTextLeft} </span> \r\n              {value} \r\n              <span> {addTextRight}</span>\r\n            </p> :\r\n            <p className='display-4 text-secondary m-0 p-0'>Нет данных</p> \r\n          }\r\n        </div>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n\r\n","import React, { useEffect } from 'react' \r\n\r\nimport TagIndicator from './components/TagsIndicator/TagIndicator'\r\nimport axiosInstance from \"../backendAPI/axiosApi\"\r\nimport getBaseUrl from '../backendAPI/localSettings'\r\nconst BASE_URL = getBaseUrl()\r\n\r\n\r\n\r\nexport default function WidgetIndicator(props) {\r\n  const [tags, setTags] = React.useState([])\r\n  const [loading, setLoading] = React.useState(true)\r\n  const device_id = props.device_id\r\n  const displayedTags =  props.widget.tags  \r\n  const tag = tags[0] // TODO: widget display just 1 tag now\r\n\r\n  function readDeviceTags() {\r\n    axiosInstance.get(BASE_URL + \"/device/tags/value/\",  { params: { id: device_id, tags: displayedTags }} )\r\n    .then((responce) => {\r\n      responce && setTags(responce.data)\r\n    })  \r\n  }\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    readDeviceTags();\r\n    const loadingTimeout = setTimeout( () => { setLoading(false) }, 1000);\r\n    const tagsUpdateInterval = setInterval(readDeviceTags, 2000);\r\n    return () => {\r\n      clearTimeout(loadingTimeout);      \r\n      clearInterval(tagsUpdateInterval);\r\n    };\r\n  }, [])\r\n\r\n\r\n  return (\r\n    <React.Fragment>\r\n        <TagIndicator\r\n          tag={tag} \r\n          title={props.widget.title}\r\n          precision={props.widget.precision}\r\n          addTextRight={props.widget.addTextRight}\r\n          addTextLeft={props.widget.addTextLeft}\r\n          loading={loading} \r\n        />\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\n\r\nexport default function TagsCurrentValueRow({record, index}) {\r\n    return (\r\n        <tr>\r\n            <td className='border-secondary text-secondary pl-2 d-none d-lg-table-cell' style={{width:'5%'}}> {index + 1} </td>   \r\n            <td className='border-secondary d-none d-xl-table-cell' style={{width:'15%'}}> {format_date(record.date)} </td> \r\n            <td className='border-secondary d-table-cell d-xl-none' style={{width:'15%'}}> {format_date(record.date, 'short')} </td> \r\n            <td className='border-secondary' style={{width:'10%'}}> {format_time(record.date)} </td>\r\n            <td className='border-secondary'> {record.message} </td>\r\n        </tr>\r\n    )\r\n}\r\n\r\n\r\n\r\nfunction format_time(time, style='medium') {\r\n    const s = new Date(time)\r\n    let formatter = new Intl.DateTimeFormat([] , {timeStyle: style});\r\n    return formatter.format(s)\r\n  }\r\n\r\nfunction format_date(time, style='long') {\r\n    const s = new Date(time)\r\n    let formatter = new Intl.DateTimeFormat([] , {dateStyle: style});\r\n    return formatter.format(s)\r\n  }\r\n\r\n","import React from 'react'\r\nimport RecordsRow from './RecordsRow'\r\nimport Loader from '../../../base/components/Loader'\r\n\r\n\r\nexport default function TagsCurrentValueList(props) {\r\n  const [modal, setModal] = React.useState(false) // use it just for force update this component\r\n  const modalButton = React.useRef(null)\r\n  const graphCard = React.useRef(null)\r\n  const toggleCategorySelection = props.toggleCategorySelection\r\n  const categories = props.categories\r\n\r\n  const toggleModal = () => {\r\n    const cl = ' full-screen-card'\r\n    if (graphCard.current.className.includes(cl)) {\r\n      graphCard.current.className = graphCard.current.className.replace(cl, '')\r\n      modalButton.current.className = modalButton.current.className.replace('fa-compress', 'fa-expand') \r\n      modalButton.current.className = modalButton.current.className.replace('text-primary', 'text-light')      \r\n      setModal(false)\r\n    } else {\r\n      graphCard.current.className += cl\r\n      modalButton.current.className = modalButton.current.className.replace('fa-expand', 'fa-compress') \r\n      modalButton.current.className = modalButton.current.className.replace('text-light', 'text-primary')       \r\n      setModal(true)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div ref={graphCard} className='card shadow-sm py-2 bg-dark text-light h-100'>\r\n      <div className='d-flex mb-1'>\r\n        <h5 className=\"px-3 pt-1 pb-0 m-0\">{props.title}</h5>\r\n        <span className='ml-auto'></span>\r\n\r\n        { props.category_selection_panel && <CategorySelectionPanel toggleCategorySelection={toggleCategorySelection} categories={categories}/> }\r\n\r\n        <button type=\"button\" \r\n          ref={modalButton} \r\n          className={'btn btn-link text-light m-0 p-0 mt-1 mr-2 fas fa-expand'} \r\n          style={{width: '28px', height: '28px', fontSize:'1em', textDecoration: 'none', outline: 'none', boxShadow: 'none'}} \r\n          onClick={toggleModal}\r\n        ></button>  \r\n      </div>\r\n  \r\n      { props.loading ? \r\n        <div className='d-flex justify-content-center'><Loader /></div> \r\n        :\r\n        <>\r\n          { props.records.length > 0 ? <RecordsTable records={props.records}/> : <NoRecords /> }\r\n          <PaginationBar readNextPage={props.readNextPage} readPreviousPage={props.readPreviousPage} changePage={props.changePage} pagination={props.pagination} />\r\n        </>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nfunction RecordsTable(props) {\r\n  return (\r\n    <div className=\"table-responsive px-3\">\r\n      <table className=\"table table-hover table-dark table-sm text-light w-100 mb-0\">\r\n        <thead> \r\n          <tr>\r\n            <th className='border-0 text-secondary font-weight-bold pl-2 d-none d-lg-table-cell' style={{width:'5%'}}>№</th>\r\n            <th className='border-0 text-secondary font-weight-bold' style={{width:'15%'}}>Дата</th>\r\n            <th className='border-0 text-secondary font-weight-bold' style={{width:'10%'}}>Время</th>\r\n            <th className='border-0 text-secondary font-weight-bold'>Событие</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n            { props.records.map((record, index) => {\r\n              return (\r\n                <RecordsRow record={record} key={index} index={index} />\r\n              )\r\n            }) }\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nfunction NoRecords() {\r\n  return <i className='text-secondary ml-3'>Записи отсутствуют ...</i>\r\n}\r\n\r\n\r\nfunction CategorySelectionPanel(props) {\r\n  const toggleCategorySelection = props.toggleCategorySelection\r\n  const categories = props.categories\r\n  return(\r\n    <>\r\n      <div className='d-inline mr-3'>\r\n        {categories.map( (category, index)=>{\r\n          return <CategorySecetionButton key={index} selected={category.selected} onClick={()=>{toggleCategorySelection(index)}}>{category.name}</CategorySecetionButton>\r\n        } )}\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\n\r\nfunction CategorySecetionButton(props) {\r\n  return (\r\n    <button \r\n      type=\"button\" \r\n      className='btn btn-link text-light ml-3 p-0 mt-1' \r\n      style={{boxShadow: 'none'}}\r\n      onClick={props.onClick}\r\n    >\r\n      { props.selected ? <i className='fas fa-check-square text-success mr-2'></i> : <i className='far fa-square text-info mr-2'></i> }\r\n      { props.children }\r\n    </button>    \r\n  )\r\n}\r\n\r\n\r\n\r\nfunction PaginationBar(props) {\r\n  const list = Array.apply(null, Array(props.pagination.num_pages))\r\n\r\n  if (props.pagination.num_pages <= 1) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div className='d-flex justify-content-center p-3'>\r\n      <button type='button' className='btn btn-sm btn-outline-info m-1' onClick={props.readPreviousPage} > {'<<'} </button>\r\n      { list.map((item, index)=>{\r\n          const active = (index+1 === props.pagination.page_number) ? ' active' : ''\r\n          return(\r\n            <button type='button' key={index}\r\n              className={'btn btn-sm btn-outline-info m-1' + active} \r\n              style={{minWidth:'35px'}}\r\n              onClick={()=>{props.changePage(index+1)}}\r\n            >\r\n              {index+1}\r\n            </button>\r\n          )\r\n        })\r\n      }\r\n      <button type='button' className='btn btn-sm btn-outline-info m-1' onClick={props.readNextPage} > {'>>'} </button>\r\n    </div>\r\n  )\r\n}","import React, { useEffect } from 'react' \r\n\r\nimport RecordsList from './components/EventsLog/RecordsList'\r\nimport axiosInstance from \"../backendAPI/axiosApi\";\r\nimport getBaseUrl from '../backendAPI/localSettings'\r\nconst BASE_URL = getBaseUrl()\r\n\r\n\r\n\r\nexport default function WidgetEventsLog(props) {\r\n  const [records, setRecords] = React.useState([])\r\n  const [loading, setLoading] = React.useState(true)\r\n  const [categories, setCategories] = React.useState( [\r\n    {name: 'Аварийные',       code: 'Alarm',   selected: true},\r\n    {name: 'Предупреждения',  code: 'Warning',  selected: true},\r\n    {name: 'Информационные',  code: 'Info',     selected: true},\r\n    {name: 'Отладочные',      code: 'Debug',    selected: false}\r\n  ])\r\n  const device_id = props.device_id;\r\n  const [pagination, setPagination] = React.useState({next: null, previous: null})\r\n  const [page, setPage] = React.useState(1)\r\n\r\n  const toggleCategorySelection = (toggle_index) => {\r\n    setCategories( categories.map( (category, index)=> {\r\n      if (toggle_index === index) {\r\n        return {...category, selected: !category.selected}\r\n      } else { return category }\r\n    }))\r\n  }\r\n\r\n  function readLogRecords(url, props={}){\r\n    axiosInstance.get(url, props)\r\n    .then((responce) => {\r\n      responce && setRecords(responce.data.results)\r\n      responce && setPagination({\r\n        next: responce.data.next, \r\n        previous: responce.data.previous, \r\n        num_pages: responce.data.num_pages, \r\n        page_number: responce.data.page_number, \r\n      })\r\n    }) \r\n  }\r\n\r\n  function readLogPage(page) {\r\n    const selected_categories = categories.filter( category => category.selected )\r\n    const selected_category_codes = selected_categories.map( category => category.code )\r\n    readLogRecords(BASE_URL + \"/events/log/\", { params: { id: device_id, categories: selected_category_codes, page:page }} ) \r\n  }\r\n  function readNextPage() {\r\n    pagination.next && setPage(page+1)\r\n  }\r\n  function readPreviousPage() {\r\n    pagination.previous && setPage(page-1)\r\n  }\r\n  function changePage(page) {\r\n    setPage(page)\r\n  }  \r\n  function updateFirstPage(page) {\r\n    if (page===1) {readLogPage(1)}\r\n  }\r\n\r\n\r\n  // read parameters\r\n  useEffect(() => {\r\n    readLogPage(page)\r\n    const loadingTimeout = setTimeout( () => { setLoading(false) }, 500);\r\n    const tagsUpdateInterval = setInterval(()=>updateFirstPage(page), 10000)\r\n    return () => {\r\n      clearTimeout(loadingTimeout);      \r\n      clearInterval(tagsUpdateInterval);\r\n    };\r\n  }, [categories, page, ])\r\n\r\n\r\n  // render the page\r\n  return (\r\n    <React.Fragment>\r\n        <RecordsList\r\n          records={records} \r\n          title={props.widget.title} \r\n          categories={categories}\r\n          category_selection_panel={props.widget.category_selection_panel} \r\n          toggleCategorySelection={toggleCategorySelection}\r\n          readNextPage={readNextPage}\r\n          readPreviousPage={readPreviousPage}\r\n          changePage={changePage}\r\n          pagination={pagination}\r\n          loading={loading} \r\n        />\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n","import React from 'react' \r\n\r\nimport WidgetGraph from './WidgetGraph'\r\nimport WidgetTable from './WidgetTable'\r\nimport WidgetIndicator from './WidgetIndicator' \r\nimport WidgetEventsLog from './WidgetEventsLog' \r\n\r\n\r\n\r\nexport default function RenderWidgets(props) {\r\n  const widgetsTemplate = props.widgetsTemplate\r\n  const device_id = props.device_id\r\n  if (!props.widgetsTemplate) {return null}\r\n  if (!props.widgetsTemplate.widgets) {return null}\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className='container-fluid row equal p-0 m-0'>\r\n      {\r\n        widgetsTemplate.widgets.map((widget, index)=>{\r\n          return <WidgetRender widget={widget} device_id={device_id} key={index} />\r\n        })\r\n      }\r\n      </div>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\n\r\nfunction WidgetRender(props) {\r\n  const widget = props.widget\r\n  const device_id = props.device_id\r\n\r\n  if (widget.type === 'table') {\r\n    return (\r\n      <div className={`col-xl-${widget.width * 3} col-lg-${Math.min(widget.width * 6, 12)} col-md-12 p-1 m-0`}>\r\n        <WidgetTable device_id={device_id} widget={widget}/>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (widget.type === 'graph') {\r\n    return (\r\n      <div className={`col-xl-${widget.width * 3} col-lg-${Math.min(widget.width * 6, 12)} col-md-12 p-1 m-0`}>\r\n        <WidgetGraph device_id={device_id} widget={widget}/>\r\n      </div>\r\n    )    \r\n  }   \r\n\r\n  if (widget.type === 'indicator') {\r\n    return (\r\n      <div className={`col-xl-${widget.width * 3} col-lg-${Math.min(widget.width * 6, 12)} col-md-12 p-1 m-0`}>\r\n        <WidgetIndicator device_id={device_id} widget={widget}/>\r\n      </div>\r\n    )    \r\n  }    \r\n\r\n  if (widget.type === 'eventslog') {\r\n    return (\r\n      <div className={`col-xl-${widget.width * 3} col-lg-${Math.min(widget.width * 6, 12)} col-md-12 p-1 m-0`}>\r\n        <WidgetEventsLog device_id={device_id} widget={widget}/>\r\n      </div>\r\n    )    \r\n  }    \r\n}\r\n","import React from 'react' \r\nimport {useParams} from 'react-router-dom'\r\n\r\nimport DeviceHeader from '../components/DeviceHeader'\r\nimport RenderWidgets from '../../Widgets/renderWidgets'\r\n\r\n\r\n\r\nexport default function DeviceOverviewPage(props) {\r\n  const { device_id } = useParams();\r\n  const widgetsTemplate = props.widgetsTemplate;\r\n  \r\n  // render the page\r\n  return (\r\n    <React.Fragment>\r\n      <DeviceHeader device_id={device_id}/>\r\n      <RenderWidgets widgetsTemplate={widgetsTemplate} device_id={device_id}/>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n","import React from 'react' \r\nimport {useParams} from 'react-router-dom'\r\n\r\n\r\nexport default function DeviceSettingsPage() {\r\n  const { device_id } = useParams();\r\n\r\n  return (\r\n    <React.Fragment>\r\n        <h3>Настройки устройства</h3>\r\n        <p>Раздел находиться в разработке ... </p>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n ","import React from 'react' \r\nimport {useParams} from 'react-router-dom'\r\n\r\nimport DeviceHeader from '../components/DeviceHeader'\r\nimport RenderWidgets from '../../Widgets/renderWidgets'\r\n\r\n\r\n\r\nconst WidgetsTemplate = {\r\n  widgets:[   \r\n    {\r\n      type: 'eventslog',\r\n      width: 4,\r\n      title: 'Журнал событий',\r\n      category_selection_panel: true\r\n    }      \r\n  ]\r\n}\r\n\r\n\r\n\r\nexport default function DeviceEventsLogPage(props) {\r\n  const { device_id } = useParams();\r\n  \r\n  // render the page\r\n  return (\r\n    <React.Fragment>\r\n      <DeviceHeader device_id={device_id}/>\r\n      <RenderWidgets widgetsTemplate={WidgetsTemplate} device_id={device_id}/>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n ","import React from 'react' \r\nimport {useParams} from 'react-router-dom'\r\n\r\nimport DeviceHeader from '../components/DeviceHeader'\r\nimport RenderWidgets from '../../Widgets/renderWidgets'\r\n\r\n\r\n\r\nconst WidgetsTemplate = {\r\n  widgets:[   \r\n    {\r\n      type: 'graph',\r\n      width: 4,\r\n      height: 'calc(65vh)',\r\n      title: 'История',\r\n      tags: null,\r\n      legend: true,\r\n      toolbar: true,\r\n    }      \r\n  ]\r\n}\r\n\r\n\r\n\r\nexport default function DeviceOverviewPage(props) {\r\n  const { device_id } = useParams();\r\n  \r\n  // render the page\r\n  return (\r\n    <React.Fragment>\r\n      <DeviceHeader device_id={device_id}/>\r\n      <RenderWidgets widgetsTemplate={WidgetsTemplate} device_id={device_id}/>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n","import axiosInstance from \"./axiosApi\";\r\nimport getBaseUrl from './localSettings'\r\n\r\n\r\n// ---------------------------------------------------------------------------------\r\n// access to device configuration parameters\r\nexport function getDeviceParameters(device_id, cb_success) {\r\n  const params = { id: device_id }\r\n  const endpoint = \"/device/parameters/\"\r\n  backendApiRequest(GET, endpoint, null, params, cb_success ) \r\n}\r\nexport function postDeviceParameters(device_id, device_parameters, cb_success, cb_error) {\r\n  const params = { id: device_id }\r\n  const body = {...device_parameters} \r\n  const endpoint = \"/device/parameters/\"\r\n  backendApiRequest(POST, endpoint, body, params, cb_success, cb_error ) \r\n}\r\n\r\n// access to device modbus parameters\r\nexport function getDeviceModbusParameters(device_id, cb_success) {\r\n  const params = { id: device_id }\r\n  const endpoint = \"/device/modbus/parameters/\"\r\n  backendApiRequest(GET, endpoint, null, params, cb_success ) \r\n}\r\nexport function postDeviceModbusParameters(device_id, device_parameters, cb_success, cb_error) {\r\n  const params = { id: device_id }\r\n  const body = {...device_parameters}\r\n  const endpoint = \"/device/modbus/parameters/\"\r\n  backendApiRequest(POST, endpoint, body, params, cb_success, cb_error )  \r\n}\r\n\r\n// access to device tags parameters\r\nexport function getDeviceTagsParameters(device_id, tags_list, cb_success) {\r\n  const params = { id: device_id, tags: tags_list }\r\n  const endpoint = \"/device/tags/parameters/\"\r\n  backendApiRequest(GET, endpoint, null, params, cb_success )\r\n}\r\nexport function postDeviceTagsParameters(device_id, tags_parameters, cb_success, cb_error) {\r\n  const params = { id: device_id }\r\n  const body = tags_parameters\r\n  const endpoint = \"/device/tags/parameters/\"\r\n  backendApiRequest(POST, endpoint, body, params, cb_success, cb_error )\r\n}\r\nexport function deleteDeviceTags(device_id, tags_list, cb_success) {\r\n  const params = { id: device_id, tags: tags_list }\r\n  const endpoint = \"/device/tags/parameters/\"\r\n  backendApiRequest(DELETE, endpoint, null, params, cb_success )\r\n}\r\n\r\n\r\n// ---------------------------------------------------------------------------------\r\n// access to events parameters\r\nexport function getEventsConfig(device_id, events_list, cb_success) {\r\n  const params = { id: device_id, events_id: events_list }\r\n  const endpoint = \"/events/config/\"\r\n  backendApiRequest(GET, endpoint, null, params, cb_success )\r\n}\r\nexport function postEventsConfig(device_id, events_parameters, cb_success, cb_error) {\r\n  const params = { id: device_id }\r\n  const body = events_parameters\r\n  const endpoint = \"/events/config/\"\r\n  backendApiRequest(POST, endpoint, body, params, cb_success, cb_error )\r\n}\r\nexport function deleteEvents(device_id, events_list, cb_success) {\r\n  const params = { id: device_id, events_id: events_list }\r\n  const endpoint = \"/events/config/\"\r\n  backendApiRequest(DELETE, endpoint, null, params, cb_success )\r\n}\r\n\r\n\r\n\r\n\r\n\r\n// ---------------------------------------------------------------------------------\r\n// ---------------------------------------------------------------------------------\r\n// ---------------------------------------------------------------------------------\r\n// commot backend requests\r\nconst GET     = 'GET'\r\nconst POST    = 'POST'\r\nconst DELETE  = 'DELETE'\r\n\r\nasync function backendApiRequest(method, endpoint, body, params, cb_success, cb_error=null) {\r\n  let response = null\r\n  const BASE_URL = getBaseUrl()\r\n\r\n  switch (method) {\r\n    case GET:\r\n      response = await axiosInstance.get(BASE_URL + endpoint, { params: params } )\r\n      response && cb_success(response.data)\r\n      break;\r\n\r\n    case POST:\r\n      try { \r\n        response = await axiosInstance.post(BASE_URL + endpoint, body, { params: params } )\r\n        response && cb_success(response.data)\r\n      } catch (error) {\r\n        error.response && cb_error && cb_error(error.response.data)\r\n      }\r\n      break;\r\n\r\n    case DELETE:\r\n      response = await axiosInstance.delete(BASE_URL + endpoint, { params: params } )\r\n      response && cb_success(response.data)\r\n      break;\r\n\r\n    default:\r\n      throw `Api method ${method} not supported.`\r\n  }\r\n}","import React from 'react' \r\n\r\nexport function TextField(props){\r\n    // props.titel : str\r\n    // props.placeholder : str  \r\n    // props.id : str\r\n    // props.value : str\r\n    // props.comment : str or jsx\r\n    // props.onChange : function\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"form-group\">\r\n          <label htmlFor={props.id} className='text-secondary'>{props.titel}</label>\r\n          <input \r\n            type=\"text\" \r\n            className=\"form-control form-control-sm bg-secondary border-secondary text-light\" \r\n            placeholder={props.placeholder} \r\n            id={props.id} \r\n            defaultValue={props.value}\r\n            onChange={props.onChange}\r\n          ></input>\r\n          <ErrorMessage> {props.errors} </ErrorMessage>\r\n          <CommentMessage> {props.comment} </CommentMessage>\r\n        </div>\r\n      </React.Fragment>\r\n    ) \r\n  }\r\n  \r\nexport function NumberField(props){\r\n    // props.titel : str\r\n    // props.placeholder : str  => like \"12\"\r\n    // props.min : str  => like \"1\"\r\n    // props.max : str  => like \"5\"\r\n    // props.id : str\r\n    // props.value : int\r\n    // props.comment : str or jsx\r\n    // props.onChange : function\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"form-group\">\r\n          <label htmlFor={props.id} className='text-secondary'>{props.titel}</label>\r\n          <input \r\n            type=\"number\" \r\n            className=\"form-control form-control-sm bg-secondary border-secondary text-light\" \r\n            placeholder={props.placeholder} \r\n            id={props.id} \r\n            defaultValue={props.value}\r\n            min={props.min}\r\n            max={props.max}\r\n            onChange={props.onChange}            \r\n          ></input>\r\n          <ErrorMessage> {props.errors} </ErrorMessage>\r\n          <CommentMessage> {props.comment} </CommentMessage>\r\n        </div>\r\n      </React.Fragment>\r\n    ) \r\n  }\r\n  \r\nexport function SelectField(props){\r\n    // props.titel : str\r\n    // props.placeholder : str\r\n    // props.options : [{value, name}, {value, name}, ]\r\n    // props.id : str\r\n    // props.value : int\r\n    // props.comment : str or jsx\r\n    // props.onChange : function\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"form-group\">\r\n          <label htmlFor={props.id} className='text-secondary'>{props.titel}</label>\r\n          <select \r\n            className=\"form-control form-control-sm bg-secondary border-secondary text-light\" \r\n            id={props.id} \r\n            placeholder={props.placeholder} \r\n            value={ props.value ? props.value : '' }\r\n            onChange={props.onChange}            \r\n          >\r\n            <option value=\"\" disabled hidden>---</option>\r\n            {props.options && props.options.map((option, index)=>{\r\n              return <option key={index} value={option.value}>{option.name}</option>\r\n            })}\r\n          </select>\r\n          <ErrorMessage> {props.errors} </ErrorMessage>\r\n          <CommentMessage> {props.comment} </CommentMessage>\r\n        </div>\r\n      </React.Fragment>\r\n    ) \r\n  }\r\n  \r\nexport function MultipleSelectField(props){\r\n    // props.titel : str\r\n    // props.placeholder : str\r\n    // props.options : [{value, name}, {value, name}, ]\r\n    // props.id : str\r\n    // props.value : []\r\n    // props.comment : str or jsx\r\n    // props.onChange : function\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"form-group\">\r\n          <label htmlFor={props.id} className='text-secondary'>{props.titel}</label>\r\n          <select \r\n            multiple \r\n            className=\"form-control form-control-sm bg-secondary border-secondary text-light\" \r\n            id={props.id} \r\n            placeholder={props.placeholder}\r\n            value={ props.value ? props.value : [] } \r\n            onChange={props.onChange}            \r\n          >\r\n            {props.options && props.options.map((option, index)=>{\r\n              return <option key={index} value={option.value}>{option.name}</option>\r\n            })}\r\n          </select>\r\n          <ErrorMessage> {props.errors} </ErrorMessage>\r\n          <CommentMessage> {props.comment} </CommentMessage>\r\n        </div>\r\n      </React.Fragment>\r\n    ) \r\n  }\r\n  \r\nexport function CheckboxField(props){\r\n    // props.titel : str\r\n    // props.id : str\r\n    // props.checked : boolean\r\n    // props.comment : str or jsx\r\n    // props.onChange : function\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"form-check pb-3\">\r\n          <input \r\n            type=\"checkbox\" \r\n            className=\"form-check-input\" \r\n            id={props.id} \r\n            checked={props.checked}\r\n            onChange={props.onChange}\r\n        ></input>\r\n          <span>{props.titel}</span>\r\n          <ErrorMessage> {props.errors} </ErrorMessage>\r\n          <CommentMessage> {props.comment} </CommentMessage>\r\n        </div>\r\n      </React.Fragment>\r\n    ) \r\n  }\r\n  \r\nexport function InlineCheckboxField(props){\r\n  // props.titel : str\r\n  // props.id : str\r\n  // props.checked : boolean\r\n  // props.comment : str or jsx\r\n  // props.onChange : function\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"form-check-inline pb-3\">\r\n        <input \r\n          type=\"checkbox\" \r\n          className=\"form-check-input\" \r\n          id={props.id} \r\n          checked={props.checked}\r\n          onChange={props.onChange}\r\n        ></input>\r\n        <span>{props.titel}</span>\r\n        <ErrorMessage> {props.errors} </ErrorMessage>\r\n        <CommentMessage> {props.comment} </CommentMessage>\r\n      </div>\r\n    </React.Fragment>\r\n  ) \r\n}\r\n\r\n\r\n\r\nexport function ErrorMessage(props){\r\n  return <div className='text-small text-danger p-0 m-0'> {props.children} </div>  \r\n}\r\nexport function CommentMessage(props){\r\n  return <div className='text-small text-info p-0 m-0'> {props.children} </div> \r\n}\r\n\r\nexport function FormContainer(props) {\r\n  return <div className='container p-0' style={{maxWidth: '800px'}}> {props.children} </div> \r\n}\r\n\r\n  // ----------------------------------------------------------------------------------\r\n// utils\r\n\r\nexport function getSelectedOptions(e) {\r\n  var options = e.target.options;\r\n  var value = [];\r\n  for (var i = 0, l = options.length; i < l; i++) {\r\n    if (options[i].selected) {\r\n      value.push(options[i].value);\r\n    }\r\n  }  \r\n  return value\r\n}\r\n","import React, {useState, useEffect} from 'react' \r\nimport { useHistory, useParams } from \"react-router-dom\"\r\n\r\nimport Loader from '../../base/components/Loader'\r\nimport {\r\n  getDeviceTagsParameters,\r\n  postDeviceTagsParameters,\r\n  deleteDeviceTags,\r\n} from '../../backendAPI/backendAPI'\r\n\r\nimport {TextField, NumberField, SelectField, getSelectedOptions, ErrorMessage, FormContainer} from '../../base/forms/forms'\r\n\r\n\r\n\r\nexport default function TagDetailPage() {\r\n  const { tag_id, device_id } = useParams();\r\n  const [tagParameters, setTagParameters] = useState({})\r\n  const [formErrors, setFormErrors] = useState(null)\r\n  const [loading, setLoading] = React.useState(true)\r\n  const history = useHistory()\r\n\r\n  useEffect(()=>{\r\n    getDeviceTagsParameters(device_id, [tag_id], (data)=>{\r\n      setTagParameters(data[0])\r\n      setLoading(false)\r\n    })\r\n  }, [])\r\n  \r\n  const submitTagParameters = (tag_parameters) => {\r\n    postDeviceTagsParameters(device_id, [tag_parameters], \r\n      (responce_data)=>{ \r\n        setTagParameters(responce_data[0]); setFormErrors(null);  \r\n        history.push(`/device/${device_id}/admin/config/`);\r\n      },\r\n      (errors_data)=>{ setFormErrors(errors_data[0]) }\r\n    )\r\n  }\r\n\r\n  const cancelChanges = () => { \r\n    history.push(`/device/${device_id}/admin/config/`)\r\n  }\r\n\r\n  const deleteTag = () => { \r\n    deleteDeviceTags(device_id, [tag_id], ()=>{ history.push(`/device/${device_id}/admin/config/`) })\r\n  }\r\n  \r\n  return (\r\n    <React.Fragment>\r\n      { loading ? \r\n        <div className='d-flex justify-content-center'><Loader /></div> \r\n        :\r\n        <FormContainer> \r\n          <TagDetailForm tagParameters={tagParameters} formErrors={formErrors} \r\n            submitTagParameters={submitTagParameters} \r\n            cancelChanges={cancelChanges} \r\n            deleteTag={deleteTag} \r\n          />\r\n        </FormContainer> \r\n      }\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\n\r\n\r\nexport function TagCreatePage() {\r\n  const { device_id } = useParams();\r\n  const history = useHistory()\r\n  const defaultTagParameters = { \r\n    code: '', name: '', data_type: 'INT',\r\n    modbus_parameters: {data_type: 'INT', register_address: 0, read_function: '3', write_function: '6'}\r\n  }\r\n  const [formErrors, setFormErrors] = useState({})\r\n\r\n  const submitTagParameters = (tag_parameters) => {\r\n    postDeviceTagsParameters(device_id, [tag_parameters], \r\n      ()=>{ history.push(`/device/${device_id}/admin/config/`) },\r\n      (errors_data)=>{ setFormErrors(errors_data[0]) }\r\n    )\r\n  }\r\n\r\n  const cancelChanges = () => { \r\n    history.push(`/device/${device_id}/admin/config/`)\r\n  }\r\n  \r\n  return (\r\n    <FormContainer> \r\n      <TagDetailForm tagParameters={defaultTagParameters} formErrors={formErrors} \r\n        submitTagParameters={submitTagParameters} \r\n        cancelChanges={cancelChanges} \r\n      />\r\n    </FormContainer>\r\n  )\r\n}\r\n\r\n\r\n\r\n// ----------------------------------------------------------------------------------------------------------------------------\r\nfunction TagDetailForm (props) {\r\n  const [tag, setTag] = useState(props.tagParameters)\r\n  const onSubmit = props.submitTagParameters\r\n  const onCancel = props.cancelChanges\r\n  const onDelete = props.deleteTag\r\n  const buttonsStyle = {minWidth: '150px'}\r\n\r\n  const serverDataTypeOptions = [    \r\n    {value: 'INT',    name:'INT'}, \r\n    {value: 'FLOAT',  name:'FLOAT'}, \r\n    {value: 'STRING', name:'STRING'},\r\n    {value: 'BOOL',   name:'BOOL'}\r\n  ]\r\n  const modbusDataTypeOptions = [    \r\n    {value: 'WORD',   name:'WORD'}, \r\n    {value: 'INT',    name:'INT'}, \r\n    {value: 'UINT',   name:'UINT'}, \r\n    {value: 'FLOAT',  name:'FLOAT'}, \r\n    {value: 'STRING', name:'STRING'},\r\n    {value: 'BOOL',   name:'BOOL'}\r\n  ]\r\n  const modbusReadFunctionOptions = [    \r\n    {value: '1',  name:'1 - Read Coil'}, \r\n    {value: '2',  name:'2 - Read Discrete Input'}, \r\n    {value: '3',  name:'3 - Read Holding Registers'}, \r\n    {value: '4',  name:'4 - Read Input Registers'}\r\n  ]\r\n  const modbusWriteFunctionOptions = [    \r\n    {value: '5',   name:'5 - Write Single Coil'}, \r\n    {value: '6',   name:'6 - Write Single Holding Register'}, \r\n    {value: '15',  name:'15 - Write Multiple Coils'}, \r\n    {value: '16',  name:'16 - Write Multiple Holding Registers'}\r\n  ]\r\n\r\n  const handlCodeChange = (e) => { setTag({...tag, code: e.target.value}) }\r\n  const handlNameChange = (e) => { setTag({...tag, name: e.target.value}) }\r\n  const handlDataTypeChange = (e) => { setTag({...tag, data_type: getSelectedOptions(e)[0]}) }\r\n  const handlModbusDataTypeChange = (e) => { setTag({\r\n    ...tag, modbus_parameters: {...tag.modbus_parameters, data_type: getSelectedOptions(e)[0] } \r\n  })}\r\n  const handlModbusRegisterAddressChange = (e) => { setTag({\r\n    ...tag, modbus_parameters: {...tag.modbus_parameters, register_address: e.target.value } \r\n  })}\r\n  const handlModbusReadFunctionChange = (e) => { setTag({\r\n    ...tag, modbus_parameters: {...tag.modbus_parameters, read_function: getSelectedOptions(e)[0] } \r\n  })}\r\n  const handlModbusWriteFunctionChange = (e) => { setTag({\r\n    ...tag, \r\n    modbus_parameters: {...tag.modbus_parameters, write_function: getSelectedOptions(e)[0] } \r\n  })}\r\n\r\n  const handlSubmit = (e) => { \r\n    e.preventDefault();\r\n    onSubmit(tag);\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <form onSubmit={handlSubmit}> \r\n        <h5 className='text-info text-center'>Параметры тега</h5>     \r\n        <TextField titel={'Код'} id={'code'} value={tag.code} onChange={handlCodeChange} \r\n          errors={props.formErrors ? props.formErrors.code : null}\r\n        />  \r\n        <TextField titel={'Наименование'} id={'name'} value={tag.name} onChange={handlNameChange}\r\n          errors={props.formErrors ? props.formErrors.name : null}\r\n        />\r\n        <SelectField titel={'Тип данных на сервере'} id={'data_type'} value={tag.data_type} options={serverDataTypeOptions} onChange={handlDataTypeChange} \r\n          errors={props.formErrors ? props.formErrors.data_type : null}\r\n        />\r\n\r\n        <h5 className='text-info text-center'>Параметры Modbus</h5>\r\n        <SelectField titel={'Тип данных в устройстве'} id={'modbus_data_type'} value={tag.modbus_parameters ? tag.modbus_parameters.data_type : null} \r\n          options={modbusDataTypeOptions} onChange={handlModbusDataTypeChange} \r\n          errors={props.formErrors && props.formErrors.modbus_parameters ? props.formErrors.modbus_parameters.data_type : null}\r\n        />\r\n        <NumberField titel={'Адрес регистра'} id={'modbus_register_address'} value={tag.modbus_parameters ? tag.modbus_parameters.register_address : null } \r\n          onChange={handlModbusRegisterAddressChange}\r\n          errors={props.formErrors && props.formErrors.modbus_parameters ? props.formErrors.modbus_parameters.register_address : null}\r\n        />\r\n        <SelectField titel={'Функиця чтения'} id={'modbus_read_function'} value={tag.modbus_parameters ? tag.modbus_parameters.read_function : null} \r\n          options={modbusReadFunctionOptions} onChange={handlModbusReadFunctionChange} \r\n          errors={props.formErrors && props.formErrors.modbus_parameters ? props.formErrors.modbus_parameters.read_function : null}\r\n        />\r\n        <SelectField titel={'Функиця записи'} id={'modbus_write_function'} value={tag.modbus_parameters ? tag.modbus_parameters.write_function : null} \r\n          options={modbusWriteFunctionOptions} onChange={handlModbusWriteFunctionChange} \r\n          errors={props.formErrors && props.formErrors.modbus_parameters ? props.formErrors.modbus_parameters.write_function : null}  \r\n        />\r\n\r\n        <ErrorMessage>\r\n          {props.formErrors && props.formErrors.non_field_errors ? \r\n            <div className='card bg-danger text-dark my-3 p-2'> {props.formErrors.non_field_errors}</div>\r\n            : null\r\n          }\r\n        </ErrorMessage>\r\n\r\n\r\n        <div className='d-flex flex-wrap justify-content-center'>\r\n          <button type=\"submit\" className=\"btn btn-outline-primary m-2\" style={buttonsStyle}>Сохранить</button>\r\n          <button type=\"button\" className=\"btn btn-outline-secondary m-2\" style={buttonsStyle} onClick={onCancel}>Отмена</button>\r\n          { props.deleteTag && <button type=\"button\" className=\"btn btn-outline-danger m-2\" style={buttonsStyle} onClick={onDelete}>Удалить</button> }\r\n        </div>\r\n      </form>\r\n    </React.Fragment>\r\n  )\r\n}\r\n","import React, {useState, useEffect} from 'react' \r\nimport {useHistory, useParams} from \"react-router-dom\"\r\n\r\nimport Loader from '../../base/components/Loader'\r\n\r\nimport {\r\n  getDeviceParameters, \r\n  postDeviceParameters, \r\n  getDeviceModbusParameters, \r\n  postDeviceModbusParameters,\r\n  getDeviceTagsParameters\r\n} from '../../backendAPI/backendAPI'\r\n\r\nimport { TextField, NumberField, SelectField, \r\n  CheckboxField, getSelectedOptions, ErrorMessage\r\n} from '../../base/forms/forms'\r\n\r\n\r\nexport default function DeviceConfigPage() {\r\n  const { device_id } = useParams()\r\n  const [deviceParameters, setDeviceParameters] = useState({})\r\n  const [deviceParametersFormErrors, setDeviceParametersFormErrors] = useState(null)\r\n  const [deviceModbusParameters, setDeviceModbusParameters] = useState({})\r\n  const [deviceModbusParametersFormErrors, setDeviceModbusParametersFormErrors] = useState(null)\r\n  const [deviceTagsParameters, setDeviceTagsParameters] = useState([])\r\n  const [loading1, setLoading1] = React.useState(true)\r\n  const [loading2, setLoading2] = React.useState(true)\r\n  const [loading3, setLoading3] = React.useState(true)\r\n\r\n  useEffect(()=>{\r\n    getDeviceParameters(device_id, (data)=>{\r\n      setDeviceParameters(data)\r\n      setLoading1(false)\r\n    })\r\n    getDeviceModbusParameters(device_id, (data)=>{\r\n      setDeviceModbusParameters(data)\r\n      setLoading2(false)\r\n    })\r\n    getDeviceTagsParameters(device_id, [], (data)=>{\r\n      setDeviceTagsParameters(data)\r\n      setLoading3(false)\r\n    })\r\n  }, [])\r\n\r\n  const submitDeviceConfig = (device_parameters) => {\r\n    postDeviceParameters(device_id, device_parameters, \r\n      (responce_data)=>{ setDeviceParameters(responce_data); setDeviceParametersFormErrors(null); },\r\n      (errors_data)=>{ setDeviceParametersFormErrors(errors_data); },\r\n    )\r\n  }\r\n  const submitModbusParameters = (modbus_parameters) => {\r\n    postDeviceModbusParameters(device_id, modbus_parameters, \r\n      (responce_data)=>{ setDeviceModbusParameters(responce_data); setDeviceModbusParametersFormErrors(null); },\r\n      (errors_data)=>{ setDeviceModbusParametersFormErrors(errors_data); }\r\n    )\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      { loading1 || loading2 || loading3 ? \r\n        <div className='d-flex justify-content-center'><Loader /></div> \r\n        :\r\n        <div className='row'>\r\n          <div className='col-12 col-lg-5'>\r\n            <DeviceConfigsForm deviceParameters={deviceParameters} formErrors={deviceParametersFormErrors} submitDeviceConfig={submitDeviceConfig} />\r\n            <p className='my-3 border-top border-secondary'></p>\r\n            <DeviceModbusParametersForm deviceModbusParameters={deviceModbusParameters} formErrors={deviceModbusParametersFormErrors} submitModbusParameters={submitModbusParameters} />\r\n          </div>\r\n          <div className='col-12 col-lg-7 border-left border-secondary'>\r\n            <p className='my-3 d-lg-none border-top border-secondary'></p>\r\n            <TagsList deviceTagsParameters={deviceTagsParameters} device_id={device_id} />\r\n          </div>\r\n        </div>\r\n      }\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\n\r\n\r\n// ----------------------------------------------------------------------------------------------------------------------------\r\nfunction DeviceConfigsForm(props) {\r\n  const [parameters, setParameters] = useState(props.deviceParameters)\r\n  const onSubmit = props.submitDeviceConfig\r\n\r\n  const handlNameChange = (e) => { setParameters({...parameters, name: e.target.value}) }\r\n  const handlTimeoutChange = (e) => { setParameters({...parameters, timeout: e.target.value}) }\r\n  const handlPollingPeriodChange = (e) => { setParameters({...parameters, polling_period: e.target.value}) }\r\n\r\n  const handlSubmit = (e) => { \r\n    e.preventDefault();\r\n    onSubmit(parameters);\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <form onSubmit={handlSubmit}>\r\n        <h5 className='text-info'>Параметры прибора</h5>\r\n        <TextField titel={'Наименование прибора'} id={'name'} placeholder={'...'} value={parameters.name} onChange={handlNameChange}\r\n          errors={props.formErrors ? props.formErrors.name : null}\r\n        />\r\n        <NumberField titel={'Период опроса (сек)'} id={'polling_period'} placeholder={'...'} value={parameters.polling_period} min={1} \r\n          onChange={handlPollingPeriodChange}\r\n          errors={props.formErrors ? props.formErrors.polling_period : null}\r\n        />\r\n        <NumberField titel={'Таймаут соединения (сек)'} id={'timeout'} placeholder={'...'} value={parameters.timeout} \r\n          onChange={handlTimeoutChange}\r\n          errors={props.formErrors ? props.formErrors.timeout : null}\r\n        />\r\n\r\n        <ErrorMessage>\r\n          {props.formErrors && props.formErrors.non_field_errors ? <div className='card bg-danger text-dark my-3 p-2'> {props.formErrors.non_field_errors}</div> : null }\r\n        </ErrorMessage>\r\n\r\n        <div className='d-flex justify-content-center'>\r\n          <button type=\"submit\" className=\"btn btn-outline-primary\">Сохранить</button>\r\n        </div>\r\n      </form>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n// ----------------------------------------------------------------------------------------------------------------------------\r\nfunction DeviceModbusParametersForm(props) {\r\n  const [parameters, setParameters] = useState(props.deviceModbusParameters)\r\n  const onSubmit = props.submitModbusParameters\r\n\r\n  const protocolTypeOptions = [    \r\n    {value: 'RTU',    name:'Modbus-RTU'}, \r\n    {value: 'ASCII',  name:'Modbus-ASCII'}, \r\n    {value: 'TCP',     name:'Modbus-TCP'}\r\n  ]\r\n  const baudrateOptions = [    \r\n    {value: 300,    name:'300'}, \r\n    {value: 600,    name:'600'}, \r\n    {value: 1200,   name:'1200'},\r\n    {value: 2400,   name:'2400'},\r\n    {value: 4800,   name:'4800'},\r\n    {value: 9600,   name:'9600'},\r\n    {value: 14400,  name:'14400'},\r\n    {value: 19200,  name:'19200'},\r\n    {value: 28800,  name:'28800'},\r\n    {value: 38400,  name:'38400'},\r\n    {value: 57600,  name:'57600'},\r\n    {value: 115200, name:'115200'}\r\n  ]\r\n  const addressSizeOptions = [    \r\n    {value: '8', name:'8'}\r\n  ]\r\n  const parityOptions = [\r\n    {value: 'none', name: 'нет'},\r\n    {value: 'even', name: 'четность'},\r\n    {value: 'odd',  name: 'нечетность'}\r\n  ]\r\n  const stopBitOptions = [\r\n    {value: '1', name: '1'},\r\n    {value: '2',  name: '2'}\r\n  ]\r\n\r\n  const handlProtocolTypeChange = (e) => { setParameters({...parameters, protocol_type: getSelectedOptions(e)[0]}) }\r\n  const handlDeviceAddressChange = (e) => { setParameters({...parameters, device_address: e.target.value}) }\r\n  const handlBaudrateChange = (e) => { setParameters({...parameters, baudrate: getSelectedOptions(e)[0]}) }\r\n  const handlAddressSizeChange = (e) => { setParameters({...parameters, address_size: getSelectedOptions(e)[0]}) }\r\n  const handlParityChange = (e) => { setParameters({...parameters, parity: getSelectedOptions(e)[0]}) }\r\n  const handlStopbitChange = (e) => { setParameters({...parameters, stopbit: getSelectedOptions(e)[0]}) }\r\n  const handlPacketTimoutChange = (e) => { setParameters({...parameters, packet_timout: e.target.value}) }\r\n  const handlBitTimoutChange = (e) => { setParameters({...parameters, bit_timout: e.target.value}) }\r\n  const handlLowerByteForwardChange = (e) => { setParameters({...parameters, lower_byte_forward: e.target.checked}) }\r\n  const handlLowerRegisterForwardChange = (e) => { setParameters({...parameters, lower_register_forward: e.target.checked}) }\r\n  const handlAllowGroupReadingChange = (e) => { setParameters({...parameters, allow_group_reading: e.target.checked}) }\r\n\r\n  const handlSubmit = (e) => { \r\n    e.preventDefault();\r\n    onSubmit(parameters);\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <form onSubmit={handlSubmit}>\r\n        <h5 className='text-info'>Параметры протокола Modbus</h5>\r\n        <SelectField titel={'Протокол'} id={'protocol_type'} value={parameters.protocol_type} options={protocolTypeOptions} \r\n          onChange={handlProtocolTypeChange} \r\n          errors={props.formErrors ? props.formErrors.protocol_type : null}\r\n        />\r\n        <NumberField titel={'Адрес устройства'} id={'device_address'} value={parameters.device_address} min={1} max={247} \r\n          onChange={handlDeviceAddressChange}\r\n          errors={props.formErrors ? props.formErrors.device_address : null}\r\n        />\r\n        <SelectField titel={'Скорость передачи данных'} id={'baudrate'} value={parameters.baudrate} options={baudrateOptions} \r\n          onChange={handlBaudrateChange} \r\n          errors={props.formErrors ? props.formErrors.baudrate : null}\r\n        />\r\n        <SelectField titel={'Длинна адреса'} id={'address_size'} value={parameters.address_size} options={addressSizeOptions} \r\n          onChange={handlAddressSizeChange} \r\n          errors={props.formErrors ? props.formErrors.address_size : null}\r\n        />\r\n        <SelectField titel={'Контроль чётности'} id={'parity'} value={parameters.parity} options={parityOptions} \r\n          onChange={handlParityChange} \r\n          errors={props.formErrors ? props.formErrors.parity : null}\r\n        />\r\n        <SelectField titel={'Количество стоп-битов'} id={'stopbit'} value={parameters.stopbit} options={stopBitOptions} \r\n          onChange={handlStopbitChange} \r\n          errors={props.formErrors ? props.formErrors.stopbit : null}\r\n        />\r\n        <NumberField titel={'Таймаут запроса (мс)'} id={'packet_timout'} value={parameters.packet_timout} \r\n          onChange={handlPacketTimoutChange}\r\n          errors={props.formErrors ? props.formErrors.packet_timout : null}\r\n        />\r\n        <NumberField titel={'Таймаут бита (мс)'} id={'bit_timout'} value={parameters.bit_timout} \r\n          onChange={handlBitTimoutChange}\r\n          errors={props.formErrors ? props.formErrors.bit_timout : null}\r\n        />\r\n        <CheckboxField titel={'Младшим байтом вперед'} id={'lower_byte_forward'} checked={parameters.lower_byte_forward} \r\n          onChange={handlLowerByteForwardChange}\r\n          errors={props.formErrors ? props.formErrors.lower_byte_forward : null}\r\n        />  \r\n        <CheckboxField titel={'Младшим регистром вперед'} id={'lower_register_forward'} checked={parameters.lower_register_forward} \r\n          onChange={handlLowerRegisterForwardChange}\r\n          errors={props.formErrors ? props.formErrors.lower_register_forward : null}\r\n        />  \r\n        <CheckboxField titel={'Разрешить групповое чтение'} id={'allow_group_reading'} checked={parameters.allow_group_reading} \r\n          onChange={handlAllowGroupReadingChange}\r\n          errors={props.formErrors ? props.formErrors.allow_group_reading : null}\r\n        />  \r\n        \r\n        <ErrorMessage>\r\n          {props.formErrors && props.formErrors.non_field_errors ? <div className='card bg-danger text-dark my-3 p-2'> {props.formErrors.non_field_errors}</div> : null }\r\n        </ErrorMessage>\r\n\r\n        <div className='d-flex justify-content-center'>\r\n          <button type=\"submit\" className=\"btn btn-outline-primary\">Сохранить</button>\r\n        </div>\r\n      </form>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n// ----------------------------------------------------------------------------------------------------------------------------\r\nfunction TagsList (props) {\r\n  const tags = props.deviceTagsParameters\r\n  const history = useHistory()\r\n\r\n  const createNewTag = () => {\r\n    history.push(`/device/${props.device_id}/admin/config/tags/create/`)\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className='d-flex'>\r\n        <h5 className='text-info'>Теги прибора</h5>\r\n        <button type=\"button\" className=\"btn btn-sm btn-outline-success ml-auto\" onClick={createNewTag}> \r\n          <i className='fas fa-plus px-1'></i> Добавить новый тег\r\n        </button>\r\n      </div>\r\n\r\n      { tags.length > 0 ?\r\n        <div className=\"table-responsive\">\r\n          <table className=\"table table-hover table-dark table-striped table-sm text-light w-100 mb-0\">\r\n            <thead> \r\n              <tr>\r\n                <th className='border-0 text-secondary font-weight-bold pl-2'>№</th>\r\n                <th className='border-0 text-secondary font-weight-bold'>Код параметра</th>\r\n                <th className='border-0 text-secondary font-weight-bold'>Тип данных</th>\r\n                <th className='border-0 text-secondary font-weight-bold'>Наименование</th>\r\n                <th className='border-0 text-secondary font-weight-bold'>Текущее значение</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {\r\n                tags.map((tag, index)=>{\r\n                  return ( <TagsListEntry key={index} tag={tag} index={index} device_id={props.device_id} /> )\r\n                })\r\n              }\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        :\r\n        <i className='text-secondary ml-3'>Теги не заданы ... </i>\r\n      }\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\n\r\nfunction TagsListEntry (props) {\r\n  const tag = props.tag\r\n  const history = useHistory()\r\n\r\n  const goToTagDetail = (tag_id) => {\r\n    history.push(`/device/${props.device_id}/admin/config/tags/${tag_id}/detail/`)\r\n  }\r\n\r\n  return (\r\n    <tr className='table-row-like-link' onClick={()=> goToTagDetail(tag.id)}>\r\n      <td className='border-0 text-secondary pl-2'> {props.index + 1} </td> \r\n      <td className='border-0'> {tag.code} </td>\r\n      <td className='border-0'> {tag.data_type} </td>\r\n      <td className='border-0'> {tag.name} </td>\r\n      <td className='border-0'> {tag.value} </td>\r\n    </tr>\r\n  )\r\n}\r\n\r\n\r\n\r\n\r\n","import React from 'react' \r\n\r\n\r\nexport default function Page404() {\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className='bg-color-dark-gray text-secondary content-height'>\r\n        <div className='container mt-5 text-center'>\r\n          <h1>Error 404</h1>\r\n          <h3>Страница не найдена</h3>\r\n        </div>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n ","import React, {useState, useEffect} from 'react' \r\n\r\nimport Loader from '../../base/components/Loader'\r\nimport {getDeviceParameters} from '../../backendAPI/backendAPI'\r\n\r\n\r\n\r\nexport default function DeviceStatusBar (props) {\r\n    const device_id = props.device_id;\r\n    const [deviceParameters, setDeviceParameters] = useState({})\r\n    const [loading, setLoading] = React.useState(true)\r\n  \r\n    useEffect(()=>{\r\n      getDeviceParameters(device_id, (data)=>{\r\n        setDeviceParameters(data)\r\n        setLoading(false)\r\n      })\r\n    }, [])\r\n  \r\n    return (\r\n      <React.Fragment>\r\n        { loading ? \r\n          <div className='d-flex justify-content-center'><Loader /></div> \r\n          :\r\n          <div className='d-flex border-bottom border-secondary mb-3 pb-2'>\r\n            <h5 className='pt-2 mt-1'>Прибор: <b>{deviceParameters.name}</b></h5>\r\n            <div className='ml-auto mx-3 px-3 border-x border-secondary'>\r\n              { deviceParameters.is_online ? \r\n                <div className='text-success'>\r\n                  <span>Онлайн</span> <br/>\r\n                  <i className='fas fa-check text-center w-100'></i>\r\n                </div>\r\n              : <div className='text-danger'>\r\n                  <span>Нет связи</span> <br/>\r\n                  <i className='fas fa-times text-center w-100'></i>\r\n                </div>\r\n              }\r\n            </div>\r\n            <div>\r\n              <p className='m-0 mr-1 text-right'>Последний сеанс связи: <br/> {deviceParameters.verbose_last_update}</p>\r\n            </div>\r\n          </div>\r\n        }\r\n      </React.Fragment>\r\n    )\r\n  }\r\n  \r\n  ","import React from 'react' \r\nimport {Switch, Route, useParams} from \"react-router-dom\"\r\n\r\nimport TagDetailPage, {TagCreatePage} from './tagDetail'\r\nimport DeviceConfigPage from './deviceDetail'\r\nimport Page404 from '../../base/pages/pageNotFound'\r\nimport DeviceStatusBar from '../components/AdminPageDeviceStatusBar'\r\n\r\n\r\n\r\n\r\nexport default function DeviceAdminPage() {\r\n  const { device_id } = useParams();\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <h3 className='mb-3'>Настройка параметров прибора</h3>\r\n      <div className='px-3 pb-3 pt-2 mx-1 my-0 bg-dark rounded text-light' style={{minHeight: 'calc(100vh - 135px)'}}>\r\n        <DeviceStatusBar device_id={device_id}/>\r\n        <Switch>\r\n          <Route exact path={'/device/:device_id/admin/config/'} component={()=><DeviceConfigPage/>} />\r\n          <Route exact path={`/device/:device_id/admin/config/tags/:tag_id/detail/`} component={()=><TagDetailPage/>} />\r\n          <Route exact path={`/device/:device_id/admin/config/tags/create/`} component={()=><TagCreatePage/>} />\r\n          <Route component={Page404} />\r\n        </Switch> \r\n      </div>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\n\r\n\r\n","import React, {useEffect} from 'react' \r\nimport {useParams} from 'react-router-dom'\r\n\r\nimport {\r\n  TextField,\r\n  NumberField,\r\n  SelectField,\r\n  MultipleSelectField,\r\n  CheckboxField,\r\n  getSelectedOptions\r\n} from '../../base/forms/forms'\r\n\r\nimport sortWidgetsByOrder from '../utils/sortWidgetsByOrder'\r\n\r\nimport Loader from '../../base/components/Loader'\r\nimport axiosInstance from \"../../backendAPI/axiosApi\";\r\nimport getBaseUrl from '../../backendAPI/localSettings'\r\nconst BASE_URL = getBaseUrl()\r\n\r\nexport default function WidgetsAdminPage(props) {\r\n  const { device_id } = useParams();\r\n  const updateWidgetsTemplate = props.updateWidgetsTemplate\r\n  const [widgetsTemplate, setWidgetsTemplate] = React.useState( sortWidgetsByOrder(props.widgetsTemplate) )\r\n  const [selectedWidget, setSelectedWidget] = React.useState(0)\r\n  const [tags, setTags] = React.useState([])\r\n\r\n  // read tags list\r\n  const readDeviceTags = () => {\r\n    axiosInstance.get(BASE_URL + \"/device/tags/value/\", { params: { id: device_id }} )\r\n    .then((responce) => {\r\n      responce && setTags(responce.data)\r\n    })  \r\n  }\r\n  useEffect(() => {\r\n    readDeviceTags();\r\n  }, [])\r\n\r\n\r\n  // I use it for fix bug: witout this, when I change the same type forms, \r\n  // form fields data does not changing \r\n  // if i hide and show the form, fields data update correctly\r\n  const [displayWidget, setDisplayWidget] = React.useState(false) \r\n  const rerenderWidgetForm = () => {\r\n    setDisplayWidget(false)\r\n    setTimeout( () => { setDisplayWidget(true) }, 0);\r\n  }\r\n  useEffect(() => {\r\n    rerenderWidgetForm()\r\n  }, [selectedWidget, tags])  \r\n\r\n\r\n  // control buttons\r\n  const changeSelectedWidget = (widgetNumber) => {\r\n    setSelectedWidget(widgetNumber)\r\n  }\r\n\r\n  const saveWidgetsTemplate = () => {\r\n    updateWidgetsTemplate(widgetsTemplate)\r\n  }\r\n\r\n  const cancelTemplateChanges = () => {\r\n    setWidgetsTemplate( sortWidgetsByOrder(props.widgetsTemplate) )\r\n    setSelectedWidget(0)\r\n    rerenderWidgetForm()\r\n  }\r\n\r\n  const deleteWidget = (index) => {\r\n    const wt = widgetsTemplate.widgets.map((w)=>{return w})\r\n    wt.splice(index, 1)\r\n    setWidgetsTemplate({widgets: wt})\r\n    setSelectedWidget(0)\r\n  }\r\n\r\n  // update widget config\r\n  const updateWidget = (WidgetData) => {\r\n    const wt = widgetsTemplate.widgets.map((w, index)=>{\r\n      if (index === selectedWidget) {\r\n        return WidgetData\r\n      } else {\r\n        return w\r\n      }\r\n    })\r\n    setWidgetsTemplate({widgets: wt})\r\n  }\r\n\r\n  // const onChangeWidgetOrder = (w_index, new_order) => {\r\n  //   // TODO\r\n  //   ;\r\n  // }\r\n\r\n  // add new widget\r\n  const addWidgetToTemplate = (widget) => {\r\n    var a = widgetsTemplate.widgets.map((item)=>{return item})\r\n    a.push(widget)\r\n    setWidgetsTemplate({widgets: a})   \r\n  }\r\n\r\n  const addWidgetHendler = (type) => {\r\n    if (type === 'table') { addWidgetToTemplate(DefaultTable) } \r\n    else if (type === 'graph') { addWidgetToTemplate(DefaultGraph) }\r\n    else if (type === 'indicator') { addWidgetToTemplate(DefaultIndicator) }\r\n  }\r\n\r\n  if (!widgetsTemplate.widgets) {return <Loader />}\r\n\r\n  // render page\r\n  return (\r\n    <React.Fragment>\r\n      <h3 className='mb-3'>Настройка виджетов</h3>\r\n      <div className='row equal p-0 m-0'>\r\n        <div className='col-md-6 col-lg-7 col-xl-8 px-1' style={{minHeight: '80vh'}}>\r\n          <div className='p-0 m-0 bg-dark rounded h-100'>\r\n            <WidgetsGrid widgetsTemplate={widgetsTemplate} selectedWidget={selectedWidget} changeSelectedWidget={changeSelectedWidget}/>\r\n          </div>\r\n        </div>\r\n        <div className='col-md-6 col-lg-5 col-xl-4 px-1' style={{minHeight: '80vh'}}>\r\n          <div className='p-0 m-0 bg-dark rounded h-100'>\r\n            <WidgetsControlPanel addWidget={addWidgetHendler} saveWidgetsTemplate={saveWidgetsTemplate} cancelChanges={cancelTemplateChanges}/>\r\n            { displayWidget ? \r\n              <WidgetForm widget={widgetsTemplate.widgets[selectedWidget]} tags={tags} updateWidget={updateWidget} deleteWidget={()=>deleteWidget(selectedWidget)}/> \r\n              : null }\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n\r\n\r\n\r\n// -------------------------------------------------------------------------------------------------\r\nfunction WidgetsGrid(props){\r\n  const widgetsTemplate = props.widgetsTemplate\r\n  const selectedWidget = props.selectedWidget\r\n  const changeSelectedWidget = props.changeSelectedWidget\r\n\r\n  if (!widgetsTemplate.widgets) {return <Loader />}\r\n\r\n  const content = widgetsTemplate.widgets.map((widget, index)=>{\r\n    const btnAddClass= (index===selectedWidget) ?  'border-primary' : ''\r\n    return (\r\n      <div key={index} className={`col-${widget.width * 3} p-1 m-0`}> \r\n        <button className={'btn btn-dark w-100 h-100 text-left p-0 ' + btnAddClass} style={{overflow:'hidden', minHeight:'10vh', boxShadow: 'none'}} onClick={()=>{changeSelectedWidget(index)}}>\r\n          <div className='h-100 p-0 px-2'>\r\n            <span className='small text-nowrap'>{widget.title}</span>\r\n            <WidgetPreview widget={widget} />\r\n          </div>\r\n        </button>\r\n      </div>\r\n    )\r\n  })\r\n\r\n  return (\r\n    <div className='d-flex justify-content-center m-0 p-4' style={{}}>\r\n      <div className='row equal rounded m-0 p-3' style={{backgroundColor: '#1E1E1E', maxWidth:'800px'}}>\r\n        {content}\r\n      </div>\r\n    </div>\r\n  )\r\n} \r\n\r\n\r\nconst WidgetPreview = (props) => {\r\n  const widget = props.widget\r\n  const color = props.color ? props.color : 'secondary'\r\n\r\n  if (widget.type === 'table') {\r\n    return (\r\n      <div className='d-flex justify-content-center'>\r\n        <span className={`fas fa-table text-${color} m-2`} style={{fontSize:'4em'}}></span>\r\n      </div>\r\n    )\r\n  } else if (widget.type === 'graph') {\r\n    return (\r\n      <div className='d-flex justify-content-center'>\r\n        <span className={`fas fa-chart-area text-${color} m-2`} style={{fontSize:'4em'}}></span>\r\n      </div>\r\n      )\r\n  } else if (widget.type === 'indicator') {\r\n    return (\r\n      <div className='d-flex justify-content-center'>\r\n        <span className={`border rounded-sm text-${color} border-${color} text-nowrap m-2 px-2`} style={{fontSize:'1.5em'}}>{widget.addTextLeft} XX.X {widget.addTextRight}</span>\r\n      </div>\r\n      )\r\n  } else {\r\n    return null\r\n  }   \r\n}\r\n\r\n\r\n// -------------------------------------------------------------------------------------------------\r\nfunction WidgetsControlPanel(props){\r\n  const [show, setShow] = React.useState(false);\r\n  const handleClose = () => setShow(false);\r\n  const handleShow = () => setShow(true);\r\n\r\n  const handleAddWidget = (type) => {\r\n    props.addWidget(type);\r\n    handleClose();\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className='p-2'> \r\n        <div className='m-1 pt-2 pb-3 border-bottom border-secondary'>\r\n          <div className='d-flex justify-content-left'>\r\n            <button className='btn btn-outline-info btn-sm mr-3' type='button' onClick={handleShow}> Добавить виджет</button>\r\n            <button className='btn btn-outline-success btn-sm mr-3' type='button' onClick={props.saveWidgetsTemplate}>Сохранить</button>\r\n            <button className='btn btn-outline-danger btn-sm' type='button' onClick={props.cancelChanges}>Отмена</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <ModalSelectWidgetType show={show} handleClose={handleClose} handleAddWidget={handleAddWidget}/>\r\n    </>\r\n  )\r\n}\r\n\r\n\r\nfunction WidgetForm(props){\r\n  const widget = props.widget\r\n  const tags = props.tags\r\n  const updateWidget = props.updateWidget\r\n  const deleteWidget = props.deleteWidget\r\n  let w = {}\r\n\r\n  if (! widget) {return null}\r\n\r\n  if (widget.type === 'table') { w = <WTableForm widget={widget} tags={tags} updateWidget={updateWidget} deleteWidget={deleteWidget}/> }\r\n  if (widget.type === 'graph') { w = <WGraphForm widget={widget} tags={tags} updateWidget={updateWidget} deleteWidget={deleteWidget}/> }\r\n  if (widget.type === 'indicator') { w = <WIndicatorForm widget={widget} tags={tags} updateWidget={updateWidget} deleteWidget={deleteWidget}/> } \r\n  \r\n  return (\r\n    <div className='p-0 m-0 my-1'> \r\n      <FormContainer> {w} </FormContainer>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nfunction FormContainer(props){\r\n  return (\r\n    <div className='text-light p-2 m-0 mx-1 h-100'>\r\n      {props.children}\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n// -------------------------------------------------------------------------------------------------\r\nfunction ModalSelectWidgetType(props){\r\n  const WidgetTypeButton = (props) => {\r\n    return (\r\n      <div className='col-4 p-1 w-100'>\r\n        <button type=\"button\" className=\"btn btn-primary w-100 h-100\" onClick={props.onClick}>\r\n          <div className='h-100 p-0 px-2'>\r\n            {props.children}\r\n          </div>\r\n        </button>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (props.show) {\r\n    return(\r\n      <div className=\"modal modal-bg d-block\">\r\n        <div className=\"modal-dialog\">\r\n          <div className=\"modal-content\">\r\n\r\n            <div className=\"modal-header\">\r\n              <h4 className=\"modal-title\">Добавить новый виджет</h4>\r\n              <button type=\"button\" className=\"close\" onClick={props.handleClose}>&times;</button>\r\n            </div>\r\n\r\n            <div className=\"modal-body\">\r\n              <div className='row equal px-1'>\r\n                <WidgetTypeButton onClick={()=> props.handleAddWidget('indicator')}>\r\n                  <span className='text-nowrap'>Индикатор</span>\r\n                  <div className='pt-2'></div>\r\n                  <WidgetPreview widget={{type:'indicator'}} color={'light'} />\r\n                </WidgetTypeButton>\r\n                <WidgetTypeButton onClick={()=> props.handleAddWidget('table')}>\r\n                  <span className='text-nowrap'>Таблица</span>\r\n                  <WidgetPreview widget={{type:'table'}} color={'light'} />\r\n                </WidgetTypeButton>\r\n                <WidgetTypeButton onClick={()=> props.handleAddWidget('graph')}>\r\n                  <span className='text-nowrap'>График</span>\r\n                  <WidgetPreview widget={{type:'graph'}} color={'light'} />\r\n                </WidgetTypeButton>  \r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"modal-footer\">\r\n              <button type=\"button\" className=\"btn btn-danger\" onClick={props.handleClose}>Отмена</button>\r\n            </div>\r\n\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  } else {\r\n    return null\r\n  }\r\n}\r\n\r\n\r\n// -------------------------------------------------------------------------------------------------\r\nfunction WTableForm(props){\r\n  const widget = props.widget\r\n  const tags = props.tags\r\n  const updateWidget = props.updateWidget\r\n  const columnOptions = [\r\n    {value: '#No', name: '№'},\r\n    {value: 'code', name: 'Код тега'},\r\n    {value: 'name', name: 'Наименование тега'},\r\n    {value: 'value', name: 'Значение тега'}\r\n  ]\r\n  let tagsOptions = []\r\n\r\n  if (tags) {\r\n    tagsOptions = tags.map((tag)=>{\r\n      return {value: tag.code, name: (tag.code + ' - ' + tag.name) }\r\n    })\r\n  }\r\n\r\n  const handlTitleChange = (e) => { updateWidget({...widget, title: e.target.value}) }\r\n  const handlOrderChange = (e) => { updateWidget({...widget, order: e.target.value}) }\r\n  const handlWidthChange = (e) => { updateWidget({...widget, width: e.target.value}) }\r\n  const handlSelectedTagsChange = (e) => { updateWidget({...widget, tags: getSelectedOptions(e)}) }\r\n  const handlSelectedColumnsChange = (e) => { updateWidget({...widget, columns: getSelectedOptions(e)}) }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className='d-flex'>\r\n        <h6>Таблица</h6>\r\n        <button type=\"button\" className=\"btn btn-sm btn-outline-danger ml-auto\" onClick={props.deleteWidget}>Удалить</button>\r\n      </div>\r\n      <form>\r\n        <TextField titel={'Название'} id={'title'} placeholder={'...'} value={widget.title} onChange={handlTitleChange}/>\r\n        <NumberField titel={'Порядок отображения'} id={'order'} placeholder={'...'} value={widget.order} onChange={handlOrderChange}/>\r\n        <NumberField titel={'Ширина'} id={'width'} placeholder={'...'} value={widget.width} min={1} max={4} onChange={handlWidthChange}/>\r\n        <MultipleSelectField \r\n          titel={'Теги'} \r\n          id={'tags'} \r\n          placeholder={'...'} \r\n          value={widget.tags} \r\n          options={tagsOptions} \r\n          comment={<span className='m-0 p-0 d-block mt-1'>Удерживайте <kbd className='text-info'>Ctrl</kbd> для выбора нескольких элементов</span>}\r\n          onChange={handlSelectedTagsChange}\r\n        />\r\n        <MultipleSelectField \r\n          titel={'Колонки'} \r\n          id={'columns'} \r\n          placeholder={'...'} \r\n          value={widget.columns} \r\n          options={columnOptions} \r\n          comment={<span className='m-0 p-0 d-block mt-1'>Удерживайте <kbd className='text-info'>Ctrl</kbd> для выбора нескольких элементов</span>}\r\n          onChange={handlSelectedColumnsChange}\r\n        />          \r\n      </form>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\n// table config example\r\n// {\r\n//   type: 'table',\r\n//   width: 2,\r\n//   title: 'Таблица параметров 2',\r\n//   tags: ['TEMP1', 'TEMP2', 'TEMP3'],   \r\n//   columns: ['#No', 'code', 'name', 'value']              \r\n// }\r\n\r\n\r\n// ----------------------------------------------------------------------------------\r\nfunction WGraphForm(props){\r\n  const widget = props.widget\r\n  const tags = props.tags\r\n  const updateWidget = props.updateWidget\r\n  let tagsOptions = []\r\n\r\n  if (tags) {\r\n    tagsOptions = tags.map((tag)=>{\r\n      return  {value: tag.code, name: (tag.code + ' - ' + tag.name) }\r\n    })\r\n  }\r\n\r\n  const handlTitleChange = (e) => { updateWidget({...widget, title: e.target.value}) }\r\n  const handlOrderChange = (e) => { updateWidget({...widget, order: e.target.value}) }\r\n  const handlWidthChange = (e) => { updateWidget({...widget, width: e.target.value}) }\r\n  const handlSelectedTagsChange = (e) => { updateWidget({...widget, tags: getSelectedOptions(e)}) }\r\n  const handlLegendChange = (e) => { updateWidget({...widget, legend: e.target.checked}) }\r\n  const handlToolbarChange = (e) => { updateWidget({...widget, toolbar: e.target.checked}) }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className='d-flex'>\r\n        <h6>График</h6>\r\n        <button type=\"button\" className=\"btn btn-sm btn-outline-danger ml-auto\" onClick={props.deleteWidget}>Удалить</button>\r\n      </div>\r\n      <form>\r\n        <TextField titel={'Название'} id={'title'} placeholder={'...'} value={widget.title} onChange={handlTitleChange}/>\r\n        <NumberField titel={'Порядок отображения'} id={'order'} placeholder={'...'} value={widget.order} onChange={handlOrderChange}/>\r\n        <NumberField titel={'Ширина'} id={'width'} placeholder={'...'} value={widget.width} min={1} max={4} onChange={handlWidthChange}/>\r\n        <MultipleSelectField \r\n          titel={'Теги'} \r\n          id={'tags'} \r\n          placeholder={'...'} \r\n          value={widget.tags} \r\n          options={tagsOptions} \r\n          comment={<span className='m-0 p-0 d-block mt-1'>Удерживайте <kbd className='text-info'>Ctrl</kbd> для выбора нескольких элементов</span>}\r\n          onChange={handlSelectedTagsChange}\r\n        />\r\n        <CheckboxField titel={'Легенда'} id={'legend'} checked={widget.legend} onChange={handlLegendChange}/>  \r\n        <CheckboxField titel={'Панель инструментов'} id={'toolbar'} checked={widget.toolbar} onChange={handlToolbarChange}/>  \r\n      </form>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\n// graph config example\r\n// {\r\n//   type: 'graph',\r\n//   width: 2,\r\n//   title: 'Влажность',\r\n//   tags: ['RH1', 'RH2'],\r\n//   legend: true,\r\n//   toolbar: true,\r\n// }  \r\n\r\n\r\n// ----------------------------------------------------------------------------------\r\nfunction WIndicatorForm(props){\r\n  const widget = props.widget\r\n  const tags = props.tags\r\n  const updateWidget = props.updateWidget\r\n  let tagsOptions = []\r\n\r\n  if (tags) {\r\n    tagsOptions = tags.map((tag)=>{\r\n      return {value: tag.code, name: (tag.code + ' - ' + tag.name) }\r\n    })\r\n  }\r\n\r\n  const handlTitleChange = (e) => { updateWidget({...widget, title: e.target.value}) }\r\n  const handlOrderChange = (e) => { updateWidget({...widget, order: e.target.value}) }\r\n  const handlWidthChange = (e) => { updateWidget({...widget, width: e.target.value}) }\r\n  const handlSelectedTagsChange = (e) => { updateWidget({...widget, tags: getSelectedOptions(e)}) }  \r\n  const handlPrecisionChange = (e) => { updateWidget({...widget, precision: e.target.value}) }  \r\n  const handlTextLeftChange = (e) => { updateWidget({...widget, addTextLeft: e.target.value}) }\r\n  const handlTextRightChange = (e) => { updateWidget({...widget, addTextRight: e.target.value}) }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className='d-flex'>\r\n        <h6>Индикатор</h6>\r\n        <button type=\"button\" className=\"btn btn-sm btn-outline-danger ml-auto\" onClick={props.deleteWidget}>Удалить</button>\r\n      </div>\r\n      <form>\r\n        <TextField titel={'Название'} id={'title'} placeholder={'...'} value={widget.title} onChange={handlTitleChange}/>\r\n        <NumberField titel={'Порядок отображения'} id={'order'} placeholder={'...'} value={widget.order} onChange={handlOrderChange}/>\r\n        <NumberField titel={'Ширина'} id={'width'} placeholder={'...'} value={widget.width} min={1} max={4} onChange={handlWidthChange}/>\r\n        <SelectField \r\n          titel={'Тег'} \r\n          id={'tags'} \r\n          placeholder={'...'} \r\n          value={widget.tags[0]} \r\n          options={tagsOptions} \r\n          onChange={handlSelectedTagsChange}          \r\n        />\r\n        <NumberField titel={'Количество знаков после запятой'} id={'precision'} placeholder={'...'} value={widget.precision} min={0} max={5} onChange={handlPrecisionChange}/>\r\n        <TextField titel={'Добавить текст слева'} id={'addTextLeft'} placeholder={'...'} value={widget.addTextLeft} onChange={handlTextLeftChange}/>\r\n        <TextField titel={'Добавить текст справа'} id={'addTextRight'} placeholder={'...'} value={widget.addTextRight} onChange={handlTextRightChange}/>\r\n      </form>        \r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\n// indicator config example\r\n// {\r\n//   type: 'indicator',\r\n//   width: 1,\r\n//   title: 'Температура зоны 1',\r\n//   addTextLeft: '',\r\n//   addTextRight: '°C',      \r\n//   tags: ['PT1'],                \r\n// }\r\n\r\n\r\n\r\n\r\n// ----------------------------------------------------------------------------------\r\n// utils\r\n\r\nconst DefaultTable = {\r\n  type: 'table',\r\n  width: 4,\r\n  title: 'Новая таблица',\r\n  tags: [],   \r\n  columns: ['#No', 'code', 'name', 'value']               \r\n}\r\n\r\nconst DefaultGraph = {\r\n  type: 'graph',\r\n  width: 4,\r\n  title: 'Новый график',\r\n  tags: [],\r\n  legend: false,\r\n  toolbar: true,              \r\n}\r\n\r\nconst DefaultIndicator = {\r\n  type: 'indicator',\r\n  width: 1,\r\n  title: 'Новый индикатор',\r\n  tags: [],          \r\n  precision: 1,     \r\n}","import React, {useState, useEffect} from 'react' \r\nimport {NavLink, useParams} from 'react-router-dom'\r\n\r\nimport Loader from '../../base/components/Loader'\r\n\r\nimport {\r\n  getEventsConfig,\r\n  postEventsConfig,\r\n  deleteEvents,\r\n  getDeviceParameters,\r\n} from '../../backendAPI/backendAPI'\r\n\r\n\r\n\r\nexport default function EventsAdminPage() {\r\n  const { device_id } = useParams();\r\n  const [events, setEvents] = useState([])\r\n  const [deviceData, setDeviceData] = React.useState({})\r\n  const [loading, setLoading] = React.useState(true)\r\n\r\n  function handlEventDelete(event_id) {\r\n    deleteEvents(device_id, [event_id], ()=>{\r\n      setEvents(\r\n        events.filter((event)=>{ return event_id === event.id ? false : true })\r\n      )\r\n    }) \r\n  }  \r\n\r\n  function toggleEventEnable(event) {\r\n    const events_parameters = [{...event, enable: !event.enable}]  \r\n    postEventsConfig(device_id, events_parameters, \r\n      (data)=>{\r\n        const ev = events.map((event)=>{ return data[0].id === event.id ? {...data[0]} : event })\r\n        setEvents(ev)\r\n      }, \r\n      (errors_data)=>{ console.log(errors_data); }\r\n    )\r\n  }\r\n\r\n  useEffect(() => {\r\n    getEventsConfig(device_id, [], (data)=>{\r\n      setEvents(data);\r\n      setLoading(false);\r\n    }) \r\n    getDeviceParameters(device_id, setDeviceData);\r\n  }, [])\r\n\r\n  return (\r\n    <React.Fragment>\r\n        <h3 className='mb-3'>Настройка событий устройства</h3>\r\n          <div className='p-3 mx-1 my-0 bg-dark rounded text-light' style={{minHeight: 'calc(100vh - 135px)'}}>\r\n            { loading ? \r\n              <div className='d-flex justify-content-center'><Loader /></div> : \r\n              <React.Fragment>\r\n                <div className='d-flex mb-3 border-bottom border-secondary pb-3'>\r\n                  <h4 className='pt-1 text-info'>Список событий устройства \"{deviceData.name}\"</h4>\r\n                  <NavLink  to={`/device/${device_id}/admin/events/create/`} \r\n                            className='btn btn-outline-info ml-auto'\r\n                            device_id={device_id}\r\n                  >\r\n                    Добавить новое событие <i className=''></i>\r\n                  </NavLink>\r\n                </div>\r\n\r\n                { events.length > 0 ?\r\n                  <EventsList events={events} device_id={device_id} handlEventDelete={handlEventDelete} toggleEventEnable={toggleEventEnable}/>\r\n                  :\r\n                  <NoEvents />\r\n                }\r\n              </React.Fragment>\r\n            }\r\n\r\n          </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n\r\n\r\n//---------------------------------------------------------------------------------------\r\nfunction EventsList(props) {\r\n  const events = props.events\r\n  const device_id = props.device_id\r\n  const handlEventDelete = props.handlEventDelete\r\n  const toggleEventEnable = props.toggleEventEnable\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <table className=\"table table-dark table-sm table-hover mb-0\">\r\n        <thead>\r\n          <tr className='text-secondary'>\r\n            <th className='border-0'>№</th>\r\n            <th className='border-0'>Событие</th>\r\n            <th className='border-0'>Контролируется</th>\r\n            <th className='border-0'>Сейчас активны</th>\r\n            <th className='border-0'>Удалить</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <EventsListEntry events={events} device_id={device_id} handlEventDelete={handlEventDelete} toggleEventEnable={toggleEventEnable}/>\r\n        </tbody>\r\n      </table>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\n\r\n\r\nfunction EventsListEntry(props) {\r\n  const events = props.events\r\n  const device_id = props.device_id\r\n  const handlEventDelete = props.handlEventDelete\r\n  const toggleEventEnable = props.toggleEventEnable\r\n\r\n  return (\r\n    <React.Fragment>\r\n      { events.map((event, index)=>{\r\n        return ( \r\n          <React.Fragment key={index}> \r\n            <tr> \r\n              <td className='text-secondary py-2'>{index+1}</td>\r\n\r\n              <td className='py-0'>\r\n                  <NavLink to={`/device/${device_id}/admin/events/${event.id}/detail/`} className='btn btn-link w-100 text-left pl-0 py-2 text-light'>\r\n                    {event.raise_message ? event.raise_message : <i className='text-secondary'>Сообщение не задано ...</i>}\r\n                  </NavLink>\r\n              </td>\r\n\r\n              <td>{event.enable ? <button className='btn btn-outline-dark fas fa-check text-success' \r\n                                          onClick={() => toggleEventEnable(event)}\r\n                                  ></button> : \r\n                                  <button className='btn btn-outline-dark fas fa-times text-secondary' \r\n                                          style={{fontSize:'1.3rem'}} \r\n                                          onClick={() => toggleEventEnable(event)}\r\n                                  ></button>}\r\n              </td>\r\n\r\n              <td>{event.is_active ? <i className='fas fa-exclamation-triangle text-warning ml-3 py-2' style={{fontSize:'1.1rem'}}></i> : ''}</td>\r\n\r\n              <td>  <button className='btn btn-outline-dark fas fa-times text-danger' \r\n                            style={{fontSize:'1.2rem'}}\r\n                            onClick={() => handlEventDelete(event.id)}\r\n                    ></button> \r\n              </td>\r\n            </tr> \r\n          </React.Fragment>\r\n        )\r\n        })\r\n      }\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\n\r\n\r\nfunction NoEvents() {\r\n  return <i className='text-secondary '>События отсутствуют ...</i>\r\n}","import React, {useState, useEffect} from 'react' \r\nimport {useHistory, useParams} from 'react-router-dom'\r\n\r\nimport Loader from '../../base/components/Loader'\r\nimport {CheckboxField, SelectField, TextField, FormContainer, getSelectedOptions} from '../../base/forms/forms'\r\n\r\nimport {\r\n  getEventsConfig,\r\n  postEventsConfig,\r\n  deleteEvents,\r\n} from '../../backendAPI/backendAPI'\r\n\r\n\r\nexport default function EventDetailPage() {\r\n  const { event_id, device_id } = useParams();\r\n  const [event, setEvent] = useState({})\r\n  const [eventFormErrors, setEventFromErrors] = useState(null)\r\n  const [loading, setLoading] = React.useState(true)\r\n  const history = useHistory()\r\n\r\n  function submitEventParameters( event ) {\r\n    postEventsConfig(device_id, [event], \r\n      ()=>{ \r\n        setEventFromErrors(null);\r\n        history.push(`/device/${device_id}/admin/events/`); \r\n      },\r\n      (errors_data)=>{ setEventFromErrors(errors_data[0]); }\r\n    )\r\n  }\r\n\r\n  const cancelChanges = () => { \r\n    history.push(`/device/${device_id}/admin/events/`)\r\n  }\r\n\r\n  const deleteEvent = () => { \r\n    deleteEvents(device_id, [event_id], ()=>{\r\n      history.push(`/device/${device_id}/admin/events/`)\r\n    }) \r\n  }\r\n\r\n  useEffect(() => {\r\n    getEventsConfig(device_id, [event_id], (data)=>{\r\n      setEvent(data[0]);\r\n      setLoading(false);\r\n    }) \r\n  }, [])\r\n\r\n  return (\r\n    <React.Fragment>\r\n        <h3 className='mb-3'>Параметры события</h3>\r\n        <div className='p-3 mx-1 my-0 bg-dark rounded text-light' style={{minHeight: 'calc(100vh - 135px)'}}>\r\n        { loading ? \r\n          <div className='d-flex justify-content-center'><Loader /></div> :\r\n          <FormContainer> \r\n            <h5 className='text-info text-center mb-3'>Редактирование параметров события</h5>  \r\n            <EventForm event={event} formErrors={eventFormErrors} onSubmit={submitEventParameters} onCancel={cancelChanges} onDelete={deleteEvent}/>\r\n          </FormContainer>\r\n        }\r\n        </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n\r\n\r\nexport function EventCreatePage() {\r\n  const { device_id } = useParams();\r\n  const defaultEventSettings = { device: device_id, enable: false, category: 'Alarm' }\r\n  const [eventFormErrors, setEventFromErrors] = useState(null)\r\n  const history = useHistory()\r\n\r\n  function submitEventParameters( event ) {\r\n    postEventsConfig(device_id, [event], \r\n      ()=>{ \r\n        setEventFromErrors(null);\r\n        history.push(`/device/${device_id}/admin/events/`); \r\n      },\r\n      (errors_data)=>{ setEventFromErrors(errors_data[0]); }\r\n    )\r\n  }\r\n\r\n  const cancelChanges = () => { \r\n    history.push(`/device/${device_id}/admin/events/`)\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n        <h3 className='mb-3'>Параметры события</h3>\r\n        <div className='p-3 mx-1 my-0 bg-dark rounded text-light' style={{minHeight: 'calc(100vh - 135px)'}}>\r\n          <FormContainer>\r\n            <h5 className='text-info text-center mb-3'>Создание нового события</h5>  \r\n            <EventForm event={defaultEventSettings} formErrors={eventFormErrors} onSubmit={submitEventParameters} onCancel={cancelChanges}/>\r\n          </FormContainer>\r\n        </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n\r\n\r\n// -------------------------------------------------------------------------------------------------------------------\r\nfunction EventForm(props) {\r\n  const [event, setEvent] = useState(props.event)\r\n  const onSubmit = props.onSubmit\r\n  const onCancel = props.onCancel\r\n  const onDelete = props.onDelete\r\n  const buttonsStyle = {minWidth: '150px'}\r\n  let categoriesOptions = [\r\n    {value: 'Alarm',    name:'Аварйное'}, \r\n    {value: 'Warning',  name:'Предупреждение'}, \r\n    {value: 'Info',     name:'Информационное'}, \r\n    {value: 'Debug',    name:'Отладочное'}\r\n  ]\r\n\r\n  const handlSubmit = (e) => { \r\n    e.preventDefault();\r\n    onSubmit(event);\r\n  }\r\n  const handlEnableChange = (e) => { setEvent({...event, enable: e.target.checked}) }\r\n  const handlExpressionChange = (e) => { setEvent({...event, expression: e.target.value}) }\r\n  const handlRaiseMessageChange = (e) => { setEvent({...event, raise_message: e.target.value}) }\r\n  const handlFallMessageChange = (e) => { setEvent({...event, fall_message: e.target.value}) }\r\n  const handlСategoriesChange = (e) => { setEvent({...event, category: getSelectedOptions(e)[0]}) }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <form onSubmit={handlSubmit}>\r\n        <CheckboxField titel={'Активировать контроль события'} id={'enable'} checked={event.enable} onChange={handlEnableChange}\r\n          errors={props.formErrors ? props.formErrors.enable : null}\r\n        />\r\n\r\n        <TextField titel={'Формула'} id={'expression'} placeholder={'...'} value={event.expression} onChange={handlExpressionChange}\r\n          errors={props.formErrors ? props.formErrors.expression : null}\r\n          comment={\r\n            <div>\r\n            <button type='button' className='mt-3 btn btn-sm btn-outline-info' data-toggle=\"collapse\" data-target=\"#expressions_help\">\r\n              Справка <i className='far fa-question-circle'></i>\r\n            </button>\r\n            <p id=\"expressions_help\" className=\"collapse mt-3 border-top border-bottom border-info py-3\">\r\n            В формуле допустимо применение следующих конструкций: <br/>\r\n            - получить текущее значение тега <kbd className='ml-2'>{'{{tag_code}}'}</kbd>  <br/>\r\n            - операторы сравнения\r\n            <kbd className='ml-2' title=\"Равно\">{'=='}</kbd>\r\n            <kbd className='ml-2' title=\"Неравно\">{'!='}</kbd>\r\n            <kbd className='ml-2' title=\"Больше\">{'>'}</kbd>\r\n            <kbd className='ml-2' title=\"Меньше\">{'<'}</kbd>\r\n            <kbd className='ml-2' title=\"Больше или равно\">{'>='}</kbd>\r\n            <kbd className='ml-2' title=\"Меньше или равно\">{'<='}</kbd>\r\n            <br/>\r\n            - арифметические операторы\r\n            <kbd className='ml-2' title=\"Суммирование\">{'+'}</kbd>\r\n            <kbd className='ml-2' title=\"Вычитание\">{'-'}</kbd>\r\n            <kbd className='ml-2' title=\"Деление\">{'/'}</kbd>\r\n            <kbd className='ml-2' title=\"Деление без остатка\">{'//'}</kbd>\r\n            <kbd className='ml-2' title=\"Остаток от деления\">{'%'}</kbd>\r\n            <kbd className='ml-2' title=\"Умножение\">{'*'}</kbd>\r\n            <kbd className='ml-2' title=\"Возведение в степень\">{'**'}</kbd>\r\n            <br/>\r\n            - логические операторы\r\n            <kbd className='ml-2' title=\"Логическое И\">{'and'}</kbd>\r\n            <kbd className='ml-2' title=\"Логическое ИЛИ\">{'or'}</kbd>\r\n            <kbd className='ml-2' title=\"Логическая инверсия\">{'not'}</kbd>\r\n            <br/>\r\n            - битовые операторы\r\n            <kbd className='ml-2' title=\"Битовое И\">{'&'}</kbd>\r\n            <kbd className='ml-2' title=\"Битовое ИЛИ\">{'|'}</kbd>\r\n            <kbd className='ml-2' title=\"Битовое исключающее ИЛИ\">{'^'}</kbd>\r\n            <kbd className='ml-2' title=\"Побитовая инверсия\">{'~'}</kbd>\r\n            <kbd className='ml-2' title=\"Побитовый сдвиг в лево\">{'<<'}</kbd>\r\n            <kbd className='ml-2' title=\"Побитовый сдвиг в право\">{'>>'}</kbd>\r\n            <br/>\r\n            Примеры формул:  <br/>\r\n            - является ли значение тега tag1 больше или равно 12.5 <kbd className='ml-2'>{'{{tag2}} >= 12.5'}</kbd> <br/>\r\n            - получение значения бита №5 тега tag2 <kbd className='ml-2'>{'{{tag2}} >> 5 & 1'}</kbd>  <br/>\r\n            - значение бита №0 тега tag2 или значение бита №14 тега tag3 <kbd className='ml-2'>{'({{tag2}} & 1) or ({{tag3}} >> 14 & 1)'}</kbd> \r\n          </p>\r\n          </div>\r\n          }\r\n        />\r\n\r\n        <TextField titel={'Сообщение срабатывания'} id={'raise_message'} placeholder={'...'} value={event.raise_message} \r\n          onChange={handlRaiseMessageChange}\r\n          errors={props.formErrors ? props.formErrors.raise_message : null}\r\n        />\r\n        <TextField titel={'Сообщение отключения'} id={'fall_message'} placeholder={'...'} value={event.fall_message} \r\n          onChange={handlFallMessageChange}\r\n          errors={props.formErrors ? props.formErrors.fall_message : null}\r\n        />\r\n        <SelectField titel={'Категория'} id={'category'} placeholder={'...'} value={event.category} \r\n          options={categoriesOptions} \r\n          onChange={handlСategoriesChange}\r\n          errors={props.formErrors ? props.formErrors.category : null}\r\n        />\r\n\r\n        <p className='border-top border-secondary'></p>        \r\n        <div className='row'>\r\n          <p className='col-md-6'> Текущее состояние:  \r\n              {event.is_active ? <span className='text-warning'> АКТИВНО </span> : \r\n                                 <span className='text-light'> НЕ АКТИВНО </span>\r\n              } \r\n          </p>\r\n          <p className='col-md-6'> Время последнего срабтывания:  \r\n              {event.raise_time ? <span> {format_time(event.raise_time)} </span>: \r\n                                  <span className='text-secondary'> Никогда </span>\r\n              } \r\n          </p>\r\n        </div>\r\n\r\n        <p className='border-top border-secondary'></p>\r\n        <div className='d-flex flex-wrap justify-content-center'>\r\n          <button type=\"submit\" className=\"btn btn-outline-primary m-2\" style={buttonsStyle}>Сохранить</button>\r\n          <button type=\"button\" className=\"btn btn-outline-secondary m-2\" style={buttonsStyle} onClick={onCancel}>Отмена</button>\r\n          { props.onDelete && <button type=\"button\" className=\"btn btn-outline-danger m-2\" style={buttonsStyle} onClick={onDelete}>Удалить</button> }\r\n        </div>\r\n\r\n      </form>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\n\r\n\r\nfunction format_time(time, date_style='long', time_style='medium') {\r\n  const s = new Date(time)\r\n  let formatter = new Intl.DateTimeFormat([] , {dateStyle: date_style, timeStyle: time_style});\r\n  return formatter.format(s)\r\n}\r\n\r\n\r\n","import React, {useEffect} from 'react' \r\nimport {Switch, Route, useParams} from 'react-router-dom'\r\n\r\nimport axiosInstance from \"../backendAPI/axiosApi\"\r\nimport getBaseUrl from '../backendAPI/localSettings'\r\nimport sortWidgetsByOrder from './utils/sortWidgetsByOrder'\r\n\r\nimport Sidebar from './components/DeviceSidebar'\r\nimport DeviceOverviewPage from './pages/overview'\r\nimport DeviceSettingsPage from './pages/settings'\r\nimport DeviceEventsLogPage from './pages/eventsLog'\r\nimport DeviceGraphsPage from './pages/graphs'\r\nimport DeviceAdminPage from './pages/deviceAdmin'\r\nimport WidgetsAdminPage from './pages/widgetsAdmin'\r\nimport EventsAdminPage from './pages/eventsAdmin'\r\nimport EventDetailPage, {EventCreatePage} from './pages/eventDetail'\r\nimport Page404 from '../base/pages/pageNotFound'\r\n\r\nconst BASE_URL = getBaseUrl()\r\n\r\n\r\n\r\nexport default function DeviceApp() { \r\n  let { id } = useParams();\r\n  const [widgetsTemplate, setWidgetsTemplate] = React.useState({})\r\n\r\n  useEffect(() => {\r\n    getWidgetsTemplate( id, (data)=> {\r\n      setWidgetsTemplate( sortWidgetsByOrder(data.template) );\r\n    });   \r\n  }, []) \r\n\r\n  function updateWidgetsTemplate(newTemplate){\r\n    setWidgetsTemplate(newTemplate)\r\n    postWidgetsTemplate(id, newTemplate)\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className='bg-color-dark-gray text-secondary h-100'>\r\n      <div className=\"row m-0 p-0\">\r\n        <Sidebar deviceId={id}/>\r\n        <div className=\"col-10 m-0 p-0\">\r\n          <div className=\"content-height p-3\">\r\n            <Switch>\r\n              <Route exact path={`/device/:device_id/overview/`} component={()=><DeviceOverviewPage widgetsTemplate={widgetsTemplate}/>} />\r\n              <Route exact path={`/device/:device_id/settings/`} component={()=><DeviceSettingsPage />} />\r\n              <Route exact path={`/device/:device_id/events/`} component={()=><DeviceEventsLogPage />} />\r\n              <Route exact path={`/device/:device_id/graphs/`} component={()=><DeviceGraphsPage />} />\r\n              <Route path={`/device/:device_id/admin/config/`} component={()=><DeviceAdminPage />} />\r\n              <Route exact path={`/device/:device_id/admin/widgets/`} \r\n                component={()=><WidgetsAdminPage updateWidgetsTemplate={updateWidgetsTemplate} widgetsTemplate={widgetsTemplate}/>} \r\n              />\r\n              <Route exact path={`/device/:device_id/admin/events/`} component={()=><EventsAdminPage/>} />\r\n              <Route exact path={`/device/:device_id/admin/events/:event_id/detail/`} component={()=><EventDetailPage/>} />\r\n              <Route exact path={`/device/:device_id/admin/events/create/`} component={()=><EventCreatePage/>} />\r\n              <Route component={Page404} />\r\n            </Switch>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n\r\nasync function getWidgetsTemplate(device_id, cb) {\r\n  const request = await axiosInstance.get(BASE_URL + \"/widgets/template/\", { params: { id: device_id }})\r\n  cb({...request.data});\r\n}\r\n\r\nasync function postWidgetsTemplate(device_id, template_data, cb) {\r\n  const body = {'template': template_data}\r\n  const request = await axiosInstance.post(BASE_URL + \"/widgets/template/\", body, { params: { id: device_id }})\r\n  cb && cb({...request.data});\r\n}\r\n\r\n\r\n","import React from 'react'\r\nimport {NavLink} from 'react-router-dom'\r\n\r\nexport default function Sidebar() {\r\n    return (\r\n        <div className=\"col-2 m-0 p-0\">\r\n        <div className=\"bg-dark bg-color-gray p-2 h-100\">\r\n          <div className=\"p-1\">\r\n\r\n            <div className=\"nav flex-column nav-pills\" style={{overflow: 'hidden'}} id=\"v-pills-tab\" role=\"tablist\" aria-orientation=\"vertical\">\r\n                <NavLink className=\"nav-link text-light btn\" style={{outline: 'none', boxShadow: 'none'}} activeClassName=\"bg-dark\" to=\"/company/overview/\">\r\n                  <div className=\"d-inline-flex w-100 justify-content-center justify-content-lg-start\">\r\n                    <i className='fas fa-home' style={{fontSize:'1.3em'}}></i>\r\n                    <span className='pl-3 d-none d-lg-inline'>Обзор</span>\r\n                  </div>\r\n                </NavLink>\r\n                \r\n                <NavLink className=\"nav-link text-light btn\" style={{outline: 'none', boxShadow: 'none'}} activeClassName=\"bg-dark\" to=\"/company/map/\">\r\n                  <div className=\"d-inline-flex w-100 justify-content-center justify-content-lg-start\">\r\n                    <i className='fas fa-map-marked-alt' style={{fontSize:'1.3em'}}></i>\r\n                    <span className='pl-3 d-none d-lg-inline'>Карта</span>\r\n                  </div> \r\n                </NavLink>\r\n                \r\n                <NavLink className=\"nav-link text-light btn\" style={{outline: 'none', boxShadow: 'none'}} activeClassName=\"bg-dark\" to=\"/company/employers/\">\r\n                  <div className=\"d-inline-flex w-100 justify-content-center justify-content-lg-start\">\r\n                    <i className='fas fa-users' style={{fontSize:'1.3em'}}></i>\r\n                    <span className='pl-3 d-none d-lg-inline'>Сотрудники</span>\r\n                  </div>\r\n                </NavLink>\r\n\r\n                <NavLink className=\"nav-link text-light btn\" style={{outline: 'none', boxShadow: 'none'}} activeClassName=\"bg-dark\" to=\"/company/profile/\"> \r\n                  <div className=\"d-inline-flex w-100 justify-content-center justify-content-lg-start\">\r\n                    <i className='fas fa-chalkboard-teacher' style={{fontSize:'1.3em'}}></i>\r\n                    <span className='pl-3 d-none d-lg-inline'>Кабинет</span>\r\n                  </div>\r\n                </NavLink>\r\n            </div>\r\n            \r\n          </div>\r\n        </div>\r\n        </div>\r\n    )\r\n}","import React, { useEffect } from 'react' \r\nimport {Link} from 'react-router-dom'\r\n\r\nimport axiosInstance from \"../../backendAPI/axiosApi\";\r\nimport getBaseUrl from '../../backendAPI/localSettings'\r\nconst BASE_URL = getBaseUrl()\r\n\r\nfunction DeviceCard(props) {\r\n    const [deviceData, setDeviceData] = React.useState({})\r\n    const device = props.device   \r\n   \r\n    function readDeviceParameters() {\r\n      axiosInstance.get(BASE_URL + \"/device/parameters/\", { params: { id: device.id }} )\r\n        .then(responce => { \r\n            if (responce) {\r\n                const deviceParameters = responce.data\r\n                setDeviceData({...deviceParameters}) \r\n            }\r\n        }) \r\n    }\r\n    \r\n    useEffect(() => {\r\n      readDeviceParameters();\r\n      const deviceParametersUpdateInterval = setInterval(readDeviceParameters, 5000);\r\n      return () => {\r\n        clearInterval(deviceParametersUpdateInterval);\r\n      };\r\n    }, [])\r\n\r\n\r\n    return (\r\n        <React.Fragment>\r\n        <Link className=\"nav-link p-0 m-0\" to={`/device/${device.id}/overview/`}>\r\n            <div className='border border-secondary rounded p-2 h-100 bg-dark text-light card-hover' style={{overflow: 'hidden'}} >\r\n                <h6 className='text-nowrap'>{device.name}</h6>\r\n                <div className='p-0 m-0 small w-100'>\r\n                    <table className=\"table table-sm p-0 m-0 table-dark text-light w-100\">\r\n                        <tbody>\r\n                            <tr>\r\n                                <td> Связь: </td>   \r\n                                <td className='text-right'> {deviceData.is_online ? \r\n                                    <span className='text-light' >ОК</span> : \r\n                                    <span className='badge badge-pill badge-danger text-dark' style={{fontSize: '0.85em'}}>НЕТ</span> }\r\n                                </td>\r\n                            </tr> \r\n                            <tr>\r\n                                <td>  Обновлено: </td>   \r\n                                <td className='text-right'> {deviceData.last_update ? \r\n                                    format_time(deviceData.last_update, (deviceData.is_online ? null : 'text-warning')) :\r\n                                    <span className='text-secondary'>никогда</span> } \r\n                                </td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>   Аварии: </td>   \r\n                                <td className='text-right'> Нет  </td>\r\n                            </tr>                                                         \r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </Link>    \r\n        </ React.Fragment> \r\n    )                   \r\n}\r\n\r\n\r\n\r\nfunction format_time (time, className='text-light') {\r\n    const s = new Date(time)\r\n    var yesterday = new Date()\r\n    yesterday = yesterday.setDate(yesterday.getDate() - 1);\r\n    if (s > yesterday) {\r\n        let formatter = new Intl.DateTimeFormat([] , {hour: '2-digit', minute: '2-digit'});\r\n        return <span className={className}>{formatter.format(s)}</span>\r\n    } else {\r\n        let formatter = new Intl.DateTimeFormat([] , {month: \"short\", day: \"numeric\" });\r\n        return <span className={className}>{formatter.format(s)}</span>           \r\n    }\r\n}\r\n\r\n\r\n\r\nexport default DeviceCard\r\n","import React from 'react';\r\n\r\nimport DeviceCard from './DeviceCard'\r\n\r\nfunction FacilityCard(props) {\r\n  const facilityInfo = props.facilityInfo   \r\n  const devices = facilityInfo.devices\r\n\r\n  const mapDeviceCards = (ds) => {\r\n    return ds.map((device, index) => {\r\n      return (\r\n        <div key={device.id} className='col-lg-4 col-md-6 col-sm-12 p-1 m-0 h-100'>\r\n          <DeviceCard device={device} index={index}/>\r\n        </div>\r\n      )\r\n    })\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n    <div className='card bg-dark text-light shadow-sm p-0 m-0'>\r\n      <h6 className='px-2 pt-2 pb-0 m-0'>{facilityInfo.name}</h6>\r\n      <div className='container-fluid h-100 p-1 m-0 row'>\r\n          {devices.length > 0 ? mapDeviceCards(devices) : <p className='text-secondary p-1'>Устройств нет ...</p> }       \r\n      </div>\r\n    </div>    \r\n    </ React.Fragment> \r\n  )                   \r\n}\r\n\r\nexport default FacilityCard","import React, { useEffect, useState } from 'react' \r\n\r\nimport Loader from '../../base/components/Loader'\r\nimport FacilityCard from '../components/FacilityCard'\r\nimport axiosInstance from \"../../backendAPI/axiosApi\";\r\nimport getBaseUrl from '../../backendAPI/localSettings'\r\nconst BASE_URL = getBaseUrl()\r\n\r\n\r\n\r\nexport default function CompanyOverviewPage() {\r\n  const [companyInfo, setCompanyInfo] = useState({})\r\n  const [loading, setLoading] = React.useState(true)\r\n\r\n  useEffect(() => {\r\n    readCompanyInfo( (inf)=> {\r\n      setCompanyInfo(inf);\r\n      setLoading(false);\r\n    });   \r\n  }, [])  \r\n\r\n  return (\r\n    <React.Fragment>\r\n      <h3 className='px-3 pt-3 pb-0'>Предприятие <b>{loading ? null : companyInfo.company.name}</b></h3>\r\n\r\n      <div className='container-fluid py-0 px-2 m-0 row'>\r\n        {loading ? <Loader /> : \r\n          <React.Fragment>\r\n            { companyInfo.facilities.map((facility, index) => {\r\n                return (\r\n                  <div key={facility.id} className='container-fluid px-2 py-0 mx-0 my-2 col-xl-6'>\r\n                    <FacilityCard facilityInfo={facility} index={index}/>\r\n                  </div>\r\n                )\r\n            }) }       \r\n          </React.Fragment>\r\n        }\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n\r\nasync function readCompanyInfo(cb) {\r\n  const request = await axiosInstance.get(BASE_URL + \"/company/info/\")\r\n  cb({...request.data});\r\n}\r\n ","import React from 'react' \r\n\r\n\r\nexport default function EmployersPage() {\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className='p-3'>\r\n        <h3>Сотрудники компании</h3>\r\n        <p>Раздел находиться в разработке ... </p>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n","import React from 'react' \r\n\r\n\r\nexport default function FacilitiesOnMapPage() {\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className='p-3'>   \r\n        <h3>Объекты компании на карте</h3>\r\n        <p>Раздел находиться в разработке ... </p>\r\n      </div> \r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n ","import React from 'react' \r\n\r\n\r\nexport default function CompanyProfilePage() {\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className='p-3'> \r\n        <h3>Кабинет</h3>\r\n        <p>Раздел находиться в разработке ... </p>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n ","import React from 'react' \r\nimport {Switch, Route} from 'react-router-dom'\r\n\r\nimport Sidebar from './components/CompanySidebar'\r\nimport CompanyOverviewPage from './pages/overview'\r\nimport EmployersPage from './pages/employers'\r\nimport FacilitiesOnMapPage from './pages/facilitiesOnMap'\r\nimport CompanyProfilePage from './pages/profile'\r\nimport Page404 from '../base/pages/pageNotFound'\r\n\r\nexport default function CompanyApp() { \r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className='bg-color-dark-gray text-secondary h-100'>\r\n      <div className=\"row m-0 p-0\">\r\n        <Sidebar />\r\n        <div className=\"col-10 m-0 p-0\">\r\n          <div className=\"content-height\">\r\n            <Switch>\r\n              <Route exact path='/company' component={CompanyOverviewPage} />\r\n              <Route exact path='/company/overview' component={CompanyOverviewPage} />\r\n              <Route exact path='/company/map' component={FacilitiesOnMapPage} />\r\n              <Route exact path='/company/employers' component={EmployersPage} />\r\n              <Route exact path='/company/profile' component={CompanyProfilePage} />\r\n              <Route component={Page404} />\r\n            </Switch>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n","import React, { Component } from \"react\";\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport auth from '../../backendAPI/auth' \r\n\r\n\r\nclass Login extends Component {\r\n  constructor(props) {\r\n      super(props);\r\n      this.state = {username: \"\", password: \"\"};\r\n\r\n      this.handleChange = this.handleChange.bind(this);\r\n      this.handleSubmit = this.handleSubmit.bind(this);\r\n  }\r\n\r\n  handleChange(event) {\r\n      this.setState({[event.target.name]: event.target.value});\r\n  }\r\n\r\n  handleSubmit(event) {\r\n    event.preventDefault();\r\n    const cb = ()=>{ this.props.history.push('/company/overview/') }\r\n    auth.login(this.state.username, this.state.password, cb );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n    <div className='bg-color-dark-gray text-secondary content-height'>  \r\n      <div className='container card p-3 mt-5 bg-dark' style={{maxWidth: '500px'}}>\r\n        <h2>Вход</h2>\r\n        <form onSubmit={this.handleSubmit}>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"username\">Пользователь:</label>\r\n            <input name=\"username\" type=\"text\" className=\"form-control bg-secondary border-secondary text-light\" id=\"username\" value={this.state.username} onChange={this.handleChange}/>\r\n          </div> \r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"pwd\">Пароль:</label> \r\n            <input name=\"password\" type=\"password\" className=\"form-control bg-secondary border-secondary text-light\" id=\"pwd\" value={this.state.password} onChange={this.handleChange}/>\r\n          </div> \r\n          <button type=\"submit\" className=\"btn btn-outline-primary\">Войти</button>\r\n          <div className=\"pt-3\">\r\n            <span className=\"pr-2 text-secondary\">Еще не зарегестрированы?</span>\r\n            <Link className=\"\" to=\"/user/registration/\">Регистрация</Link>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n    )\r\n  }\r\n}\r\nexport default Login;","import React, { Component } from \"react\";\r\nimport {Link} from 'react-router-dom'\r\n\r\nimport axiosInstance from \"../../backendAPI/axiosApi\";\r\n\r\nclass Signup extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            username: \"\",\r\n            password: \"\",\r\n            email:\"\",\r\n            errors:{username:null, email:null, password:null}\r\n        };\r\n\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n    }\r\n\r\n    handleChange(event) {\r\n        this.setState({[event.target.name]: event.target.value});\r\n    }\r\n\r\n    async handleSubmit(event) {\r\n      event.preventDefault();\r\n      try {\r\n          const response = await axiosInstance.post('/user/create/', {\r\n              username: this.state.username,\r\n              email: this.state.email,\r\n              password: this.state.password\r\n          });\r\n          return response;\r\n      } catch (error) {\r\n          console.log(error.stack);\r\n          this.setState({\r\n            errors:error.response.data\r\n          });           \r\n      }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n          <div className='bg-color-dark-gray text-secondary content-height'>  \r\n            <div className='container card p-3 mt-5 bg-dark' style={{maxWidth: '500px'}}>\r\n                <h2>Регистрация</h2>              \r\n                <form onSubmit={this.handleSubmit}>\r\n                  <div className=\"form-group\">\r\n                    <label htmlFor=\"username\">Имя пользователя:</label>\r\n                    <input name=\"username\" type=\"text\" className=\"form-control bg-secondary border-secondary text-light\" id=\"username\" value={this.state.username} onChange={this.handleChange}/>\r\n                    { this.state.errors.username ? <span className='text-danger'>{this.state.errors.username}</span> : null}\r\n                  </div> \r\n                  <div className=\"form-group\">\r\n                    <label htmlFor=\"mail\">Электронная почта:</label>\r\n                    <input name=\"email\" type=\"email\" className=\"form-control bg-secondary border-secondary text-light\" id=\"mail\" value={this.state.email} onChange={this.handleChange}/>\r\n                    { this.state.errors.email ? <span className='text-danger'>{this.state.errors.email}</span> : null}\r\n                  </div> \r\n                  <div className=\"form-group\">\r\n                    <label htmlFor=\"pwd\">Пароль:</label> \r\n                    <input name=\"password\" type=\"password\" className=\"form-control bg-secondary border-secondary text-light\" id=\"pwd\" value={this.state.password} onChange={this.handleChange}/>\r\n                    { this.state.errors.password ? <span className='text-danger'>{this.state.errors.password}</span> : null}\r\n                  </div> \r\n                  <button type=\"submit\" className=\"btn btn-outline-primary\">Подтвердить</button>\r\n                  <div className=\"pt-3\">\r\n                    <span className=\"pr-2 text-secondary\">Уже зарегестрированы?</span>\r\n                    <Link className=\"\" to=\"/user/login/\">Вход</Link>\r\n                  </div>\r\n                </form>\r\n            </div>\r\n          </div>\r\n        )\r\n    }\r\n}\r\nexport default Signup;","import React from 'react' \r\n\r\n\r\nexport default function ProfilePage(props) {\r\n  return (\r\n    <React.Fragment>\r\n    <div className='bg-color-dark-gray text-secondary content-height'> \r\n      <div className='container card bg-dark shadow-sm my-4 pt-4'>\r\n        <h2>Профиль пользователя</h2>\r\n\r\n        <div className='row my-3'>\r\n          <div className='col-lg-6'>\r\n            <table className=\"table text-light tadle-dark \">\r\n              <tbody>\r\n                <tr>\r\n                  <td className='border-secondary'>Пользователь:</td> \r\n                  <td className='border-secondary'><b>{props.userInfo.username}</b></td>\r\n                </tr>\r\n                <tr>\r\n                  <td className='border-secondary'>Имя:</td> \r\n                  <td className='border-secondary'><b>{props.userInfo.first_name}</b></td>\r\n                </tr>\r\n                <tr>\r\n                  <td className='border-secondary'>Фамилия:</td> \r\n                  <td className='border-secondary'><b>{props.userInfo.last_name}</b></td>\r\n                </tr>\r\n                <tr>\r\n                  <td className='border-secondary'>Электронная почта:</td> \r\n                  <td className='border-secondary'><b>{props.userInfo.email}</b></td>\r\n                </tr>            \r\n              </tbody>\r\n            </table>\r\n          </div> \r\n        </div> \r\n      </div>  \r\n    </div>\r\n    </React.Fragment>\r\n);\r\n}\r\n","import React, { Component } from \"react\";\r\nimport {Link, withRouter} from 'react-router-dom'\r\n\r\nimport auth from '../../backendAPI/auth' \r\n\r\nclass LogoutBtn extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleLogout = this.handleLogout.bind(this);\r\n    }\r\n\r\n    handleLogout() {\r\n        auth.logout(()=>{\r\n            this.props.history.push('/')\r\n        });\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <li className=\"nav-item\" >\r\n                <Link className=\"nav-link\" to=\"\" onClick={this.handleLogout}>Выйти</Link>\r\n            </li>\r\n        )\r\n    };\r\n};         \r\n\r\nexport default withRouter(LogoutBtn)","import React from 'react'\r\nimport {Link} from 'react-router-dom'\r\n\r\nimport LogoutBtn from '../../users/components/LogoutBtn'\r\n\r\nexport default function Navbar(props) {\r\n    const authed = props.authed\r\n    const userInfo = props.userInfo\r\n    \r\n    return (\r\n        <nav className=\"navbar navbar-expand-sm bg-dark navbar-dark bg-color-indigo header-height p-0 m-0\">\r\n            <Link className=\"navbar-brand header-height py-2 pl-3 pr-0 m-0\" to=\"/\">CI Cloud</Link>\r\n\r\n            <button className=\"navbar-toggler header-height border-0 m-0\" style={{outline: 'none', boxShadow: 'none'}} type=\"button\" data-toggle=\"collapse\" data-target=\"#collapsibleNavbar\">\r\n                <span className=\"navbar-toggler-icon\"></span>\r\n            </button>\r\n\r\n            <div className=\"collapse navbar-collapse bg-color-indigo\" id=\"collapsibleNavbar\" style={{zIndex: '1'}}>\r\n                <div className='d-md-none border-top border-secondary'></div>\r\n                <ul className=\"navbar-nav px-3\">\r\n                    {authed ? (\r\n                        <React.Fragment>\r\n                            <li className=\"nav-item\">\r\n                                <Link className=\"nav-link\" to=\"/company/overview\">Предприятие</Link>\r\n                            </li>\r\n                            <li className=\"nav-item\">\r\n                                <Link className=\"nav-link\" to=\"/company/facilities\">Обьекты</Link>\r\n                            </li>\r\n                            <li className=\"nav-item\">\r\n                                <Link className=\"nav-link\" to=\"/company/profile\">Кабинет</Link>\r\n                            </li>\r\n                        </React.Fragment>\r\n                    ) : null }\r\n                </ul>  \r\n        \r\n                <ul className=\"navbar-nav ml-auto px-3\">\r\n                    {authed ? (\r\n                        <React.Fragment>\r\n                            { userInfo ?\r\n                                <React.Fragment> \r\n                                    <li className=\"nav-item\">\r\n                                        <Link className=\"nav-link\" to=\"/user/profile\">{userInfo.username}</Link>\r\n                                    </li>\r\n                                    <li className=\"nav-item border-right border-secondary my-1 d-none d-sm-inline\"> </li>\r\n                                </React.Fragment>                        \r\n                            : null }\r\n                            <LogoutBtn />\r\n                        </React.Fragment>\r\n                    ) : (\r\n                        <li className=\"nav-item\">\r\n                            <Link className=\"nav-link\" to=\"/user/login\">Войти</Link>\r\n                        </li>\r\n                    )}\r\n                </ul> \r\n            </div>\r\n        </nav>       \r\n    );\r\n}","import React from 'react' \r\nimport {Link} from 'react-router-dom'\r\n\r\nimport auth from '../../backendAPI/auth' \r\n\r\n\r\nfunction WelcomePage(props) {\r\n  // const backgroundStyle = {\r\n  //   backgroundImage: 'url(\"./img/grid.png\")',\r\n  //   backgroundRepeat: 'repeat-x',\r\n  //   backgroundAttachment: 'fixed'\r\n  // }\r\n\r\n\r\n  function loginDemoUser() {\r\n    const cb = ()=>{ props.history.push('/company/overview/') }\r\n    auth.login('demo', 'DemoUserPassword', cb);\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className='bg-color-dark-gray text-light content-height'>\r\n      <div className='card' style={{background:'none', border:'none'}}>\r\n        <div className='container card my-5 p-3 w-100' style={{background:'rgba(30,30,30, 0.9)'}}>\r\n            <div className='text-center pt-4'>\r\n                <h3>Добро пожаловать на <b>CI Cloud</b></h3>\r\n            </div>\r\n            <br/>\r\n            <div className='text-center'>\r\n                <h5>Для начала работы\r\n                  <Link className='px-2' to=\"/user/login/\">Войдите</Link>\r\n                  или\r\n                  <Link className='px-2' to=\"/user/registration/\">Зарегистрируйтесь</Link>\r\n                </h5>\r\n            </div>\r\n\r\n            <div className=\"card-columns py-5\">\r\n              <div className=\"card border-secondary\" style={{background:'none'}}>\r\n                <div className=\"card-body text-center\">\r\n                  <h6>Удаленный мониторинга и управления промышленными и IoT устройствами</h6>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"card border-secondary\" style={{background:'none'}}>\r\n                <div className=\"card-body text-center\">\r\n                  <h6>Контроль аварийных событий и уведомление о событиях на объекте </h6>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"card border-secondary\" style={{background:'none'}}>\r\n                <div className=\"card-body text-center\">\r\n                  <h6>Простое подключение и настройка опроса устройств</h6>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"card border-secondary\" style={{background:'none'}}>\r\n                <div className=\"card-body text-center\">\r\n                  <h6>Открытый API для интеграции с сторонним ПО и \r\n                    IoT устройствами \r\n                  </h6>\r\n                </div>\r\n              </div>  \r\n\r\n              <div className=\"card border-secondary\" style={{background:'none'}}>\r\n                <div className=\"card-body text-center\">\r\n                  <h6>Единый интерфейс для Персональных компьютеров и Мобильных устройств </h6>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"card border-secondary\" style={{background:'none'}}>\r\n                <div className=\"card-body text-center\">\r\n                  <h6> Вы можете воспользоваться  \r\n                    <a className=\"px-2\" href='#' onClick={loginDemoUser}>демо-версией сервиса</a>\r\n                    для ознакомления\r\n                  </h6> \r\n                </div>\r\n              </div>\r\n            </div>  \r\n\r\n            <h5 className='pb-3 text-info text-center'>Список последних обновлений: </h5>\r\n            <div className=\"card border-secondary mb-3\" style={{background:'none'}}>\r\n              <div className=\"card-body\">\r\n                <h6 className='text-primary'> Релиз Альфа 0.7 </h6> \r\n                <h6 className='text-success'> Доступна функция Жунала событий </h6> \r\n                <p className='text-info'> Теперь вы можите настраивать аварийные и другие события, \r\n                  облако будет автоматически контролировать условия их срабатывания.\r\n                  При срабатывании условия события в Журнал будет записано соответствующее сообщение.\r\n                </p> \r\n                <h6 className='text-success'> Доступна настройка параметров и тегов прибора </h6> \r\n                <p className='text-info'> Теперь в разделе Администрирование доступен\r\n                подраздел Прибор, в котором собраны все настройки подключения прибора. \r\n                Так же в данном подразделе Вы можите настраивать и добавление Теги прибора.\r\n                </p> \r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"card border-secondary mb-3\" style={{background:'none'}}>\r\n              <div className=\"card-body\">\r\n                <h6 className='text-primary'> Релиз Альфа 0.6 </h6> \r\n                <h6 className='text-success'> Доступны Виджеты устройства </h6> \r\n                <p className='text-info'> Теперь в разделе Администрирование доступен\r\n                подраздел Виджеты, в котором вы можите добавлять и настраивать виджеты, \r\n                для отображения информации об устройстве на странице Обзор.\r\n                </p> \r\n              </div>\r\n            </div>\r\n\r\n        </div>\r\n      </div>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default WelcomePage","import './App.css'\r\nimport '../node_modules/react-vis/dist/style.css'\r\n\r\nimport React, { useEffect, useState } from 'react' \r\nimport {\r\n  BrowserRouter as Router, \r\n  Switch, \r\n  Route,\r\n} from 'react-router-dom'\r\n\r\nimport {ProtectedRoute} from './utils/protectedRoute'\r\nimport { FullScreen, useFullScreenHandle } from \"react-full-screen\";\r\n\r\nimport DeviceApp from './device/deviceApp'\r\nimport CompanyApp from './company/companyApp'\r\nimport Login from './users/pages/login'\r\nimport Registration from './users/pages/registration'\r\nimport ProfilePage from './users/pages/profile'\r\nimport Navbar from './base/components/Navbar'\r\nimport WelcomePage from './base/pages/welcome'\r\nimport Page404 from './base/pages/pageNotFound'\r\n\r\nimport auth from './backendAPI/auth'\r\n\r\nexport default function App() {\r\n  const [loading, setLoading] = useState(true)\r\n  const [loading2, setLoading2] = useState(true)\r\n  const [authed, setAuthed] = useState(false)\r\n  const [userInfo, setUserInfo] = useState({})\r\n\r\n  const handle = useFullScreenHandle();\r\n\r\n  useEffect(() => {\r\n    auth.checkAuthentication(() => { setLoading(false) })\r\n    auth.onLogin = () => {setAuthed(true)}    \r\n    auth.onLogout = () => {setAuthed(false)}    \r\n    auth.onUserInfoReaded = (ui) => {\r\n      setUserInfo(ui); \r\n      setLoading2(false);\r\n    }   \r\n  }, [])\r\n\r\n  if (loading || loading2) { \r\n    return null \r\n  } else { \r\n    return (\r\n      <React.Fragment>\r\n        <button className='full-screen-button fas fa-expand ' onClick={handle.enter}></button>\r\n        <FullScreen handle={handle}>\r\n          <Router>        \r\n            <Route exact path='/' component={()=>{\r\n              return (\r\n              <video autoplay=\"autoplay\" muted loop=\"loop\" id=\"myVideo\">\r\n                <source src=\"Map145956.mp4\" type=\"video/mp4\" />\r\n              </video>\r\n              )}\r\n            }/>\r\n\r\n            <Navbar authed={authed} userInfo = {userInfo} />\r\n            <Switch>\r\n              <Route exact path='/' component={WelcomePage} />\r\n              <Route exact path='/user/login' component={Login}  />\r\n              <Route exact path='/user/registration' component={Registration} />\r\n              <ProtectedRoute exact path='/user/profile' component={ ()=> <ProfilePage userInfo = {userInfo} /> } />\r\n              <ProtectedRoute path='/company' component={CompanyApp} />                   \r\n              <ProtectedRoute path='/device/:id' component={DeviceApp} />\r\n              <Route component={Page404} />\r\n            </Switch>\r\n          </Router>\r\n        </FullScreen>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\n\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}