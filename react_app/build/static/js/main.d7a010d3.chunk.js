(this.webpackJsonpreact_app=this.webpackJsonpreact_app||[]).push([[0],{125:function(e,t,n){},126:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(2),s=n.n(a),r=n(63),l=n.n(r),i=(n(76),n(4)),o=(n(77),n(78),n(5)),d=n(8),j=n(3),b=n(68),m=n(7),u=n.n(m),h=n(10),x=n(19),O=n(20),p=n(64);var f=n.n(p).a.create({baseURL:"http://localhost:8000",timeout:6e4,headers:{Authorization:"JWT "+localStorage.getItem("access_token"),"Content-Type":"application/json",accept:"application/json"}});f.interceptors.response.use((function(e){return e}),(function(e){var t=e.config;if(401===e.response.status&&"/user/token/refresh/"===t.url)return Promise.reject(e);if("token_not_valid"===e.response.data.code&&401===e.response.status&&"Unauthorized"===e.response.statusText){var n=localStorage.getItem("refresh_token");if(n){var c=JSON.parse(atob(n.split(".")[1])),a=Math.ceil(Date.now()/1e3);if(c.exp>a)return f.post("/user/token/refresh/",{refresh:n}).then((function(e){return localStorage.setItem("access_token",e.data.access),localStorage.setItem("refresh_token",e.data.refresh),f.defaults.headers.Authorization="JWT "+e.data.access,t.headers.Authorization="JWT "+e.data.access,f(t)})).catch((function(e){console.log(e)}));console.log("Refresh token is expired",c.exp,a)}else console.log("Refresh token not available.")}return Promise.reject(e)}));var g=f,v=new(function(){function e(){Object(x.a)(this,e),this.authenticated=!1,this.onLogin=function(){},this.onLogout=function(){},this.onUserInfoReaded=function(){}}return Object(O.a)(e,[{key:"checkAuthentication",value:function(){var e=Object(h.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.get("/user/token/check/");case 3:e.sent?this._onLogin():this._onLogout(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this._onLogout();case 10:t();case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(h.a)(u.a.mark((function e(t,n,c){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.post("/user/token/obtain/",{username:t,password:n});case 3:a=e.sent,g.defaults.headers.Authorization="JWT "+a.data.access,localStorage.setItem("access_token",a.data.access),localStorage.setItem("refresh_token",a.data.refresh),this._onLogin(),c(),e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(0),e.t0;case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(t,n,c){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(h.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.post("user/token/blacklist/",{refresh_token:localStorage.getItem("refresh_token")});case 3:localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),g.defaults.headers.Authorization=null,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:this._onLogout(),t();case 13:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isAuthenticated",value:function(){return this.authenticated}},{key:"readUserInfo",value:function(){var e=Object(h.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.get("/user/info/");case 2:t=e.sent,this.onUserInfoReaded(Object(j.a)({},t.data));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"clearUserInfo",value:function(){this.userInfo={},this.onUserInfoReaded({})}},{key:"_onLogin",value:function(){this.authenticated=!0,this.onLogin(),this.readUserInfo()}},{key:"_onLogout",value:function(){this.authenticated=!1,this.onLogout(),this.clearUserInfo()}}]),e}()),N=function(e){var t=e.component,n=Object(b.a)(e,["component"]);return Object(c.jsx)(d.b,Object(j.a)(Object(j.a)({},n),{},{render:function(e){return v.isAuthenticated()?Object(c.jsx)(t,Object(j.a)({},e)):Object(c.jsx)(d.a,{to:{pathname:"/user/login",state:{from:e.location}}})}}))},y=n(45);function w(e){var t=e.widgets;return t?(t.sort((function(e,t){var n=parseInt(e.order),c=parseInt(t.order);return n<c?-1:n>c?1:0})),{widgets:t}):{widgets:[]}}function k(e){var t=s.a.useState(!1),n=Object(i.a)(t,2),a=n[0],r=n[1],l=e.deviceId,d={outline:"none",boxShadow:"none"};return Object(c.jsx)("div",{className:"col-2 m-0 p-0",children:Object(c.jsx)("div",{className:"bg-dark bg-color-gray p-2 h-100",children:Object(c.jsxs)("div",{className:"p-1",children:[Object(c.jsxs)("div",{className:"nav flex-column nav-pills",style:{overflow:"hidden"},id:"v-pills-tab",role:"tablist","aria-orientation":"vertical",children:[Object(c.jsx)(o.c,{className:"nav-link text-light btn",style:d,activeClassName:"bg-dark",to:"/device/".concat(l,"/overview/"),children:Object(c.jsxs)("div",{className:"d-inline-flex w-100 justify-content-center justify-content-lg-start",children:[Object(c.jsx)("i",{className:"fas fa-home",style:{fontSize:"1.3em"}}),Object(c.jsx)("span",{className:"pl-3 d-none d-lg-inline text-left",children:"\u041e\u0431\u0437\u043e\u0440"})]})}),Object(c.jsx)(o.c,{className:"nav-link text-light btn",style:d,activeClassName:"bg-dark",to:"/device/".concat(l,"/settings/"),children:Object(c.jsxs)("div",{className:"d-inline-flex w-100 justify-content-center justify-content-lg-start ",children:[Object(c.jsx)("i",{className:"far fa-edit",style:{fontSize:"1.3em"}}),Object(c.jsx)("span",{className:"pl-3 d-none d-lg-inline text-left",children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"})]})}),Object(c.jsx)(o.c,{className:"nav-link text-light btn",style:d,activeClassName:"bg-dark",to:"/device/".concat(l,"/graphs/"),children:Object(c.jsxs)("div",{className:"d-inline-flex w-100 justify-content-center justify-content-lg-start",children:[Object(c.jsx)("i",{className:"far fa-chart-bar",style:{fontSize:"1.3em"}}),Object(c.jsx)("span",{className:"pl-3 d-none d-lg-inline text-left",children:"\u0413\u0440\u0430\u0444\u0438\u043a\u0438"})]})}),Object(c.jsx)(o.c,{className:"nav-link text-light btn",style:d,activeClassName:"bg-dark",to:"/device/".concat(l,"/events/"),children:Object(c.jsxs)("div",{className:"d-inline-flex w-100 justify-content-center justify-content-lg-start",children:[Object(c.jsx)("i",{className:"far fa-bell",style:{fontSize:"1.3em"}}),Object(c.jsx)("span",{className:"pl-3 d-none d-lg-inline text-left",children:"\u0416\u0443\u0440\u043d\u0430\u043b"})]})})]}),Object(c.jsxs)("div",{className:"nav flex-column nav-pills",style:{overflow:"hidden"},children:[Object(c.jsx)("div",{className:"border-top mt-3 pt-3 border-secondary"}),Object(c.jsx)("button",{className:"nav-link text-light btn",style:d,onClick:function(){r(!a)},children:Object(c.jsxs)("div",{className:"d-inline-flex w-100 justify-content-center justify-content-lg-start",children:[Object(c.jsx)("i",{className:"\tfas fa-list py-1",style:{fontSize:"1.3em"}}),Object(c.jsx)("span",{className:"pl-3 d-none d-lg-inline text-left",children:"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"}),Object(c.jsx)("i",{className:"fas fa-caret-down py-1 pl-1 ml-auto d-none d-lg-inline"})]})}),a&&Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)(o.c,{className:"nav-link text-light btn",style:d,activeClassName:"bg-dark",to:"/device/".concat(l,"/admin/config/"),children:Object(c.jsxs)("div",{className:"d-inline-flex w-100 justify-content-center justify-content-lg-start",children:[Object(c.jsx)("i",{className:"fas fa-circle px-1 pt-2",style:{fontSize:"0.6em"}}),Object(c.jsx)("span",{className:"pl-3 d-none d-lg-inline text-left",children:"\u041f\u0440\u0438\u0431\u043e\u0440"})]})}),Object(c.jsx)(o.c,{className:"nav-link text-light btn",style:d,activeClassName:"bg-dark",to:"/device/".concat(l,"/admin/widgets/"),children:Object(c.jsxs)("div",{className:"d-inline-flex w-100 justify-content-center justify-content-lg-start",children:[Object(c.jsx)("i",{className:"fas fa-circle px-1 pt-2",style:{fontSize:"0.6em"}}),Object(c.jsx)("span",{className:"pl-3 d-none d-lg-inline text-left",children:"\u0412\u0438\u0434\u0436\u0435\u0442\u044b"})]})}),Object(c.jsx)(o.c,{className:"nav-link text-light btn",style:d,activeClassName:"bg-dark",to:"/device/".concat(l,"/admin/events/"),children:Object(c.jsxs)("div",{className:"d-inline-flex w-100 justify-content-center justify-content-lg-start",children:[Object(c.jsx)("i",{className:"fas fa-circle px-1 pt-2",style:{fontSize:"0.6em"}}),Object(c.jsx)("span",{className:"pl-3 d-none d-lg-inline text-left",children:"\u0421\u043e\u0431\u044b\u0442\u0438\u044f"})]})})]})]})]})})})}function _(e){var t=s.a.useState({}),n=Object(i.a)(t,2),r=n[0],l=n[1],o=e.device_id;function d(){g.get("http://localhost:8000/device/parameters/",{params:{id:o}}).then((function(e){e&&l(Object(j.a)({},e.data))}))}return Object(a.useEffect)((function(){d();var e=setInterval(d,5e3);return function(){clearInterval(e)}}),[]),Object(c.jsx)(s.a.Fragment,{children:Object(c.jsxs)("div",{className:"d-flex border rounded border-dark px-3 mb-1 mx-1",children:[Object(c.jsxs)("h3",{className:"pt-1",children:["\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e: ",Object(c.jsx)("b",{children:r.name})]}),Object(c.jsx)("div",{className:"ml-auto mx-3 px-3 border-x border-dark",children:r.is_online?Object(c.jsxs)("div",{className:"text-success",children:[Object(c.jsx)("span",{children:"\u041e\u043d\u043b\u0430\u0439\u043d"})," ",Object(c.jsx)("br",{}),Object(c.jsx)("i",{className:"fas fa-check text-center w-100"})]}):Object(c.jsxs)("div",{className:"text-danger",children:[Object(c.jsx)("span",{children:"\u041d\u0435\u0442 \u0441\u0432\u044f\u0437\u0438"})," ",Object(c.jsx)("br",{}),Object(c.jsx)("i",{className:"fas fa-times text-center w-100"})]})}),Object(c.jsx)("div",{children:Object(c.jsxs)("p",{className:"m-0 mr-1 text-right",children:["\u0414\u0430\u043d\u043d\u044b\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b: ",Object(c.jsx)("br",{})," ",r.verbose_last_update]})})]})})}var C=n(6),S=function(e,t){var n=function(n){e.current&&e.current.contains(n.target)&&t()};Object(a.useEffect)((function(){return document.addEventListener("click",n),function(){document.removeEventListener("click",n)}}))};var E=function(e){var t=this,n=e.tags.filter((function(e){return!1===e.disabled})),r=e.resetZoomButton,l=s.a.useState(null),o=Object(i.a)(l,2),d=o[0],j=o[1];S(r,(function(){console.log("seted onclick"),j(null)})),Object(a.useEffect)((function(){r.current.className=d?r.current.className.replace("d-none","d-block"):r.current.className.replace("d-block","d-none")}),[d]);var b=!1;return n.map((function(e){e.values.length>0&&(b=!0)})),b?Object(c.jsx)(s.a.Fragment,{children:Object(c.jsx)("div",{className:"graph-container h-100",style:{overflow:"hidden"},children:Object(c.jsxs)(C.b,{margin:{left:40,right:0,top:0,bottom:30},xType:"time",animation:!0,xDomain:d&&[d.left,d.right],yDomain:d&&[d.bottom,d.top],yPadding:10,children:[Object(c.jsx)(C.d,{style:{stroke:"#444A50"}}),Object(c.jsx)(C.g,{style:{line:{stroke:"#6c757d"}},tickTotal:15}),Object(c.jsx)(C.h,{style:{line:{stroke:"#6c757d"}}}),n.map((function(e){return Object(c.jsx)(C.e,{data:e.values,color:e.curve_color},e.tag_id)})),Object(c.jsx)(C.c,{onBrushEnd:function(e){return j(e)},onDrag:function(e){t.setState({lastDrawLocation:{bottom:d.bottom+(e.top-e.bottom),left:d.left-(e.right-e.left),right:d.right-(e.right-e.left),top:d.top+(e.top-e.bottom)}})}})]})})}):Object(c.jsx)(s.a.Fragment,{children:Object(c.jsx)("div",{className:"graph-container h-100",children:Object(c.jsxs)(C.b,{dontCheckIfEmpty:!0,margin:{left:30,right:0,top:0,bottom:30},children:[Object(c.jsx)(C.d,{style:{stroke:"#444A50"}}),Object(c.jsx)(C.g,{}),Object(c.jsx)(C.h,{}),Object(c.jsx)(C.e,{data:[{x:0,y:0}]})]})})})};var F=function(e){var t=e.tags.filter((function(e){return!1===e.disabled})),n=e.resetZoomButton,r=s.a.useState(null),l=Object(i.a)(r,2),o=l[0],d=l[1],j=s.a.useState([]),b=Object(i.a)(j,2),m=b[0],u=b[1];S(n,(function(){console.log("seted onclick"),d(null)})),Object(a.useEffect)((function(){n.current.className=o?n.current.className.replace("d-none","d-block"):n.current.className.replace("d-block","d-none")}),[o]);var h=t.map((function(e){return e.values.map((function(t){return t.title=e.tag_name,t.color=e.curve_color,t}))})),x=function(e,t){var n=t.index;u(h.map((function(e){return e[n]})))},O=!1;return t.map((function(e){e.values.length>0&&(O=!0)})),O?Object(c.jsx)(s.a.Fragment,{children:Object(c.jsx)("div",{className:"graph-container  h-100",style:{overflow:"hidden"},children:Object(c.jsxs)(C.b,{margin:{left:40,right:0,top:0,bottom:30},xType:"time",animation:!0,xDomain:o&&[o.left,o.right],yDomain:o&&[o.bottom,o.top],yPadding:10,onMouseLeave:function(){u([])},children:[Object(c.jsx)(C.d,{style:{stroke:"#444A50"}}),Object(c.jsx)(C.g,{style:{line:{stroke:"#6c757d"}},tickTotal:15}),Object(c.jsx)(C.h,{style:{line:{stroke:"#6c757d"}}}),t.map((function(e,t){return 0===t?Object(c.jsx)(C.e,{onNearestX:x,data:e.values,color:e.curve_color},e.tag_id):Object(c.jsx)(C.e,{data:e.values,color:e.curve_color},e.tag_id)})),Object(c.jsx)(C.c,{onBrushEnd:function(e){return d(e)},onDrag:function(e){d({lastDrawLocation:{bottom:o.bottom+(e.top-e.bottom),left:o.left-(e.right-e.left),right:o.right-(e.right-e.left),top:o.top+(e.top-e.bottom)}})}}),m[0]&&m.map((function(e,t){return e?Object(c.jsx)(C.f,{color:e.color,size:"5",data:[e]},t):null})),Object(c.jsx)(C.a,{values:m,style:{line:{backgroundColor:"red"}},children:m[0]&&Object(c.jsx)("div",{className:"rounded p-1 mx-2",style:{background:"rgba(37, 37, 38, 1)"},children:Object(c.jsxs)("table",{className:"table text-light p-0 m-0",children:[Object(c.jsx)("thead",{children:Object(c.jsx)("tr",{children:Object(c.jsx)("td",{colSpan:"3",style:{fontSize:"1.2em",color:"rgb(180, 180, 180)"},className:"border-0 font-weight-bold p-1 m-0 text-center text-nowrap",children:function(e){var t=new Date(e);return new Intl.DateTimeFormat([],{dateStyle:"long",timeStyle:"medium"}).format(t)}(m[0].x)})})}),Object(c.jsx)("tbody",{children:m.map((function(e,t){return e?Object(c.jsxs)("tr",{style:{fontSize:"1.1em",color:"rgb(210, 210, 210)"},children:[Object(c.jsx)("td",{style:{color:e.color,paddingTop:"4px"},className:"text-nowrap border-0 px-1 pb-0 m-0\tfas fa-minus"}),Object(c.jsxs)("td",{className:"text-nowrap border-0 pl-1 pr-2 py-0 m-0",children:[" ",e.title,": "]}),Object(c.jsxs)("td",{className:"text-nowrap border-0 px-1 py-0 m-0 font-weight-bold  text-right",children:[" ",e.y," "]})]},t):null}))})]})})})]})})}):Object(c.jsx)(s.a.Fragment,{children:Object(c.jsx)("div",{className:"graph-container h-100",children:Object(c.jsxs)(C.b,{dontCheckIfEmpty:!0,margin:{left:30,right:0,top:0,bottom:30},children:[Object(c.jsx)(C.d,{style:{stroke:"#444A50"}}),Object(c.jsx)(C.g,{}),Object(c.jsx)(C.h,{}),Object(c.jsx)(C.e,{data:[{x:0,y:0}]})]})})})},T=n(67),I=n.n(T);function D(e){var t=s.a.useState(""),n=Object(i.a)(t,2),a=n[0],r=n[1],l={onClick:e.onClick,items:e.tags.map((function(e){return{title:e.tag_name,color:e.curve_color,tag_id:e.tag_id,disabled:e.disabled}}))};return Object(c.jsx)("div",{className:"d-block text-dark pl-3",children:Object(c.jsx)(I.a,{height:parseInt(e.height.replace("px","")),onSearchChange:function(e){r(e)},searchPlaceholder:"\u041f\u043e\u0438\u0441\u043a...",searchText:a,onItemClick:function(e){l.onClick(e.tag_id)},items:l.items})})}function W(e){var t=Object(a.useState)(!1),n=Object(i.a)(t,2),r=n[0],l=n[1],o=Object(a.useState)([!1,!0,!1,!1,!1,!1,!1,!1]),d=Object(i.a)(o,2),j=d[0],b=d[1],m=e.changeGraphInterval;function u(e){var t=j.map((function(t,n){return n===e}));b(t),l(7===e)}function h(e){return j[e]?" active":""}return Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsxs)("div",{className:"d-flex justify-content-left p-0 pt-2 m-0",children:[Object(c.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-secondary mx-1 "+h(0),onClick:function(){u(0),m("5m","all")},children:"\u043e\u043d\u043b\u0430\u0439\u043d"}),Object(c.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-secondary mx-1 "+h(1),onClick:function(){u(1),m("1h","1m")},children:"1 \u0447\u0430\u0441"}),Object(c.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-secondary mx-1 "+h(2),onClick:function(){u(2),m("6h","5m")},children:"6 \u0447\u0430\u0441\u043e\u0432"}),Object(c.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-secondary mx-1 "+h(3),onClick:function(){u(3),m("12h","10m")},children:"12 \u0447\u0430\u0441\u043e\u0432"}),Object(c.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-secondary mx-1 "+h(4),onClick:function(){u(4),m("1d","30m")},children:"\u0441\u0443\u0442\u043a\u0438"}),Object(c.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-secondary mx-1 "+h(5),onClick:function(){u(5),m("7d","2h")},children:"\u043d\u0435\u0434\u0435\u043b\u044f"}),Object(c.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-secondary mx-1 "+h(6),onClick:function(){u(6),m("30d","12h")},children:"\u043c\u0435\u0441\u044f\u0446"}),Object(c.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-secondary mx-1 "+h(7),onClick:function(){u(7),m("30d","12h")},children:"\u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b"})]}),r?Object(c.jsx)(L,{}):null]})}function L(e){return Object(c.jsx)(s.a.Fragment,{children:Object(c.jsx)("form",{className:"pt-2",children:Object(c.jsxs)("div",{className:"input-group input-group-sm ",children:[Object(c.jsx)("div",{className:"input-group-prepend ",children:Object(c.jsx)("span",{className:"input-group-text bg-secondary text-light border-secondary ml-1",children:"C"})}),Object(c.jsx)("input",{type:"date",className:"form-control bg-dark text-light border-secondary"}),Object(c.jsx)("input",{type:"time",className:"form-control bg-dark text-light border-secondary"}),Object(c.jsx)("div",{className:"input-group-prepend ",children:Object(c.jsx)("span",{className:"input-group-text bg-secondary text-light border-secondary ml-2",children:"\u041f\u043e"})}),Object(c.jsx)("input",{type:"date",className:"form-control bg-dark text-light border-secondary"}),Object(c.jsx)("input",{type:"time",className:"form-control bg-dark text-light border-secondary"}),Object(c.jsx)("button",{type:"button",className:"btn btn-sm btn-secondary ml-2 mr-1",children:"\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c"})," ",Object(c.jsx)("br",{})]})})})}n(125);function P(){return Object(c.jsxs)("div",{className:"lds-ellipsis",children:[Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{})]})}var R=function(e){var t=s.a.useState(!1),n=Object(i.a)(t,2),a=(n[0],n[1]),r=s.a.useState(!1),l=Object(i.a)(r,2),o=l[0],d=l[1],j=s.a.useRef(null),b=s.a.useRef(null),m=s.a.useRef(null),u=s.a.useRef(null),h=s.a.useRef(null),x=s.a.useRef(null),O=e.tagsHistory,p=e.height?e.height:"300px",f=function(){var t=" full-screen-card";j.current.className.includes(t)?(j.current.className=j.current.className.replace(t,""),b.current.style.height=p,b.current.className=b.current.className.replace("col-10","col-8"),e.legend&&(h.current.className=h.current.className.replace("col-2","col-4")),m.current.className=m.current.className.replace("fa-compress","fa-expand"),m.current.className=m.current.className.replace("text-primary","text-light"),a(!1)):(j.current.className+=t,b.current.style.height="calc(100vh - 150px)",b.current.className=b.current.className.replace("col-8","col-10"),e.legend&&(h.current.className=h.current.className.replace("col-4","col-2")),m.current.className=m.current.className.replace("fa-expand","fa-compress"),m.current.className=m.current.className.replace("text-light","text-primary"),a(!0))},g=function(){o?(d(!o),u.current.className=u.current.className.replace("text-primary","text-light")):(d(!o),u.current.className=u.current.className.replace("text-light","text-primary"))};return Object(c.jsx)(s.a.Fragment,{children:Object(c.jsxs)("div",{ref:j,className:"card shadow-sm py-2 bg-dark text-light h-100",children:[Object(c.jsxs)("div",{className:"d-flex mb-1",children:[Object(c.jsx)("h5",{className:"px-3 pt-1 pb-2 m-0",children:e.title}),Object(c.jsx)("span",{className:"ml-auto"}),Object(c.jsx)("button",{type:"button",ref:x,className:"btn btn-link text-primary m-0 p-0 mt-1 mr-2 fas fa-search-minus d-none",style:{width:"28px",height:"28px",fontSize:"1em",textDecoration:"none",outline:"none",boxShadow:"none"},onClick:null}),Object(c.jsx)("button",{type:"button",ref:u,className:"btn btn-link text-light m-0 p-0 mt-1 mr-2 fas fa-ruler-vertical",style:{width:"28px",height:"28px",fontSize:"1em",textDecoration:"none",outline:"none",boxShadow:"none"},onClick:g}),Object(c.jsx)("button",{type:"button",ref:m,className:"btn btn-link text-light m-0 p-0 mt-1 mr-2 fas fa-expand",style:{width:"28px",height:"28px",fontSize:"1em",textDecoration:"none",outline:"none",boxShadow:"none"},onClick:f})]}),e.loading?Object(c.jsx)("div",{className:"d-flex justify-content-center",children:Object(c.jsx)(P,{})}):Object(c.jsxs)("div",{className:"row m-0 px-3 py-0",children:[Object(c.jsx)("div",{ref:b,className:"".concat(e.legend?"col-8":"col-12"," m-0 p-0"),style:{height:p},children:o?Object(c.jsx)(F,{tags:O,resetZoomButton:x}):Object(c.jsx)(E,{tags:O,resetZoomButton:x})}),e.legend&&Object(c.jsx)("div",{ref:h,className:"col-4 m-0 p-0",children:Object(c.jsx)(D,{tags:O,onClick:e.toggleCurveDisplay,height:p})}),e.toolbar&&Object(c.jsx)("div",{className:"col-12 align-self-start m-0 p-0",children:Object(c.jsx)(W,{toggleModal:f,toggleCroshair:g,changeGraphInterval:e.changeGraphInterval})})]})]})})},z=["#f44336","#00BCD4","#FF9800","#E91E63","#009688","#FF5722","#9C27B0","#4CAF50","#795548","#673AB7","#8BC34A","#607D8B","#3F51B5","#CDDC39","#2196F3","#FFEB3B","#03A9F4","#FFC107"];function A(e){var t=z.length;return z[e+1>t?e%t:e]}function B(e){var t=s.a.useState(!0),n=Object(i.a)(t,2),r=n[0],l=n[1],o=s.a.useState({interval:"1h",resolution:"1m",tags:e.widget.tags}),d=Object(i.a)(o,2),b=d[0],m=d[1],u=s.a.useState([]),h=Object(i.a)(u,2),x=h[0],O=h[1],p=e.device_id;function f(){g.get("http://localhost:8000/device/tags/history/",{params:Object(j.a)({id:p},b)}).then((function(e){e&&function(e){var t=e.map((function(e,t){return{tag_id:e.tag_id,tag_code:e.tag_code,tag_name:e.tag_name,disabled:!1,curve_color:A(t),values:e.values.map((function(e){return{x:new Date(e.add_date),y:e.value}}))}}));O((function(e){return t.map((function(t){var n=e.filter((function(e){return e.tag_id===t.tag_id})),c=n.length>0?n[0].disabled:t.disabled;return Object(j.a)(Object(j.a)({},t),{},{disabled:c})}))}))}(e.data)}))}return Object(a.useEffect)((function(){f();var e,t=setTimeout((function(){l(!1)}),1e3),n=setInterval(f,"5m"===(e=b.interval)?2e3:"1h"===e?3e4:"6h"===e?12e4:"12h"===e?3e5:"1d"===e?9e5:"7d"===e?36e5:"30d"===e?216e5:3e5);return function(){clearTimeout(t),clearInterval(n)}}),[b]),Object(c.jsx)(s.a.Fragment,{children:Object(c.jsx)(R,{tagsHistory:x,toggleCurveDisplay:function(e){var t=x.map((function(t){return t.tag_id===e&&(t.disabled=!t.disabled),t}));O(t)},title:e.widget.title,legend:e.widget.legend,loading:r,toolbar:e.widget.toolbar,height:e.widget.height,changeGraphInterval:function(e,t){m((function(n){return Object(j.a)(Object(j.a)({},n),{},{interval:e,resolution:t})}))}})})}var M=function(e){var t=e.tag,n=e.columns,a=e.index;return Object(c.jsxs)("tr",{children:[n.indexOf("#No")>=0?Object(c.jsxs)("td",{className:"border-secondary text-secondary pl-2",children:[" ",a+1," "]}):null,n.indexOf("code")>=0?Object(c.jsxs)("td",{className:"border-secondary",children:[" ",t.code," "]}):null,n.indexOf("name")>=0?Object(c.jsxs)("td",{className:"border-secondary",children:[" ",t.name," "]}):null,n.indexOf("value")>=0?Object(c.jsxs)("td",{className:"border-secondary",children:[" ",t.value," "]}):null]})};var U=function(e){var t=s.a.useState(!1),n=Object(i.a)(t,2),a=(n[0],n[1]),r=s.a.useRef(null),l=s.a.useRef(null);return Object(c.jsxs)("div",{ref:l,className:"card shadow-sm py-2 bg-dark text-light h-100",children:[Object(c.jsxs)("div",{className:"d-flex mb-1",children:[Object(c.jsx)("h5",{className:"px-3 pt-1 pb-0 m-0",children:e.title}),Object(c.jsx)("span",{className:"ml-auto"}),Object(c.jsx)("button",{type:"button",ref:r,className:"btn btn-link text-light m-0 p-0 mt-1 mr-2 fas fa-expand",style:{width:"28px",height:"28px",fontSize:"1em",textDecoration:"none",outline:"none",boxShadow:"none"},onClick:function(){var e=" full-screen-card";l.current.className.includes(e)?(l.current.className=l.current.className.replace(e,""),r.current.className=r.current.className.replace("fa-compress","fa-expand"),r.current.className=r.current.className.replace("text-primary","text-light"),a(!1)):(l.current.className+=e,r.current.className=r.current.className.replace("fa-expand","fa-compress"),r.current.className=r.current.className.replace("text-light","text-primary"),a(!0))}})]}),e.loading?Object(c.jsx)("div",{className:"d-flex justify-content-center",children:Object(c.jsx)(P,{})}):Object(c.jsx)(c.Fragment,{children:e.columns?Object(c.jsx)("div",{className:"table-responsive px-3",children:Object(c.jsxs)("table",{className:"table table-hover table-dark table-sm text-light w-100 mb-0",children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[e.columns.indexOf("#No")>=0?Object(c.jsx)("th",{className:"border-0 text-secondary font-weight-bold pl-2",children:"\u2116"}):null,e.columns.indexOf("code")>=0?Object(c.jsx)("th",{className:"border-0 text-secondary font-weight-bold",children:"\u041a\u043e\u0434 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430"}):null,e.columns.indexOf("name")>=0?Object(c.jsx)("th",{className:"border-0 text-secondary font-weight-bold",children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430"}):null,e.columns.indexOf("value")>=0?Object(c.jsx)("th",{className:"border-0 text-secondary font-weight-bold",children:"\u0422\u0435\u043a\u0443\u0449\u0435\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435"}):null]})}),Object(c.jsx)("tbody",{children:e.tags.map((function(t,n){return Object(c.jsx)(M,{tag:t,columns:e.columns,index:n},t.code)}))})]})}):Object(c.jsx)("i",{className:"text-secondary ml-3",children:"\u0414\u0430\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u043d\u0435 \u0437\u0430\u0434\u0430\u043d\u044b ... "})})]})};function H(e){var t=s.a.useState([]),n=Object(i.a)(t,2),r=n[0],l=n[1],o=s.a.useState(!0),d=Object(i.a)(o,2),j=d[0],b=d[1],m=e.device_id,u=e.widget.tags;function h(){g.get("http://localhost:8000/device/tags/value/",{params:{id:m,tags:u}}).then((function(e){e&&l(e.data)}))}return Object(a.useEffect)((function(){h();var e=setTimeout((function(){b(!1)}),1e3),t=setInterval(h,2e3);return function(){clearTimeout(e),clearInterval(t)}}),[]),Object(c.jsx)(s.a.Fragment,{children:Object(c.jsx)(U,{tags:r,title:e.widget.title,columns:e.widget.columns,loading:j})})}function G(e){var t=e.tag,n=e.addTextRight,a=e.addTextLeft,s="none";return t&&(s=e.precision?t.value.toFixed(e.precision):t.value),Object(c.jsxs)("div",{className:"card shadow-sm py-2 bg-dark text-light h-100",children:[Object(c.jsxs)("div",{className:"d-flex mb-1",children:[Object(c.jsx)("h5",{className:"px-3 pt-1 pb-0 m-0",children:e.title}),Object(c.jsx)("span",{className:"ml-auto"})]}),e.loading?Object(c.jsx)("div",{className:"d-flex justify-content-center",children:Object(c.jsx)(P,{})}):Object(c.jsx)("div",{className:"d-flex justify-content-center align-items-end h-100 px-3",children:t?Object(c.jsxs)("p",{className:"display-4 m-0 p-0",children:[Object(c.jsxs)("span",{children:[a," "]}),s,Object(c.jsxs)("span",{children:[" ",n]})]}):Object(c.jsx)("p",{className:"display-4 text-secondary m-0 p-0",children:"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"})})]})}function q(e){var t=s.a.useState([]),n=Object(i.a)(t,2),r=n[0],l=n[1],o=s.a.useState(!0),d=Object(i.a)(o,2),j=d[0],b=d[1],m=e.device_id,u=e.widget.tags,h=r[0];function x(){g.get("http://localhost:8000/device/tags/value/",{params:{id:m,tags:u}}).then((function(e){e&&l(e.data)}))}return Object(a.useEffect)((function(){x();var e=setTimeout((function(){b(!1)}),1e3),t=setInterval(x,2e3);return function(){clearTimeout(e),clearInterval(t)}}),[]),Object(c.jsx)(s.a.Fragment,{children:Object(c.jsx)(G,{tag:h,title:e.widget.title,precision:e.widget.precision,addTextRight:e.widget.addTextRight,addTextLeft:e.widget.addTextLeft,loading:j})})}function J(e){var t=e.record,n=e.index;return Object(c.jsxs)("tr",{children:[Object(c.jsxs)("td",{className:"border-secondary text-secondary pl-2 d-none d-lg-table-cell",style:{width:"5%"},children:[" ",n+1," "]}),Object(c.jsxs)("td",{className:"border-secondary d-none d-xl-table-cell",style:{width:"15%"},children:[" ",Z(t.date)," "]}),Object(c.jsxs)("td",{className:"border-secondary d-table-cell d-xl-none",style:{width:"15%"},children:[" ",Z(t.date,"short")," "]}),Object(c.jsxs)("td",{className:"border-secondary",style:{width:"10%"},children:[" ",X(t.date)," "]}),Object(c.jsxs)("td",{className:"border-secondary",children:[" ",t.message," "]})]})}function X(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"medium",n=new Date(e),c=new Intl.DateTimeFormat([],{timeStyle:t});return c.format(n)}function Z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"long",n=new Date(e),c=new Intl.DateTimeFormat([],{dateStyle:t});return c.format(n)}function V(e){var t=s.a.useState(!1),n=Object(i.a)(t,2),a=(n[0],n[1]),r=s.a.useRef(null),l=s.a.useRef(null),o=e.toggleCategorySelection,d=e.categories;return Object(c.jsxs)("div",{ref:l,className:"card shadow-sm py-2 bg-dark text-light h-100",children:[Object(c.jsxs)("div",{className:"d-flex mb-1",children:[Object(c.jsx)("h5",{className:"px-3 pt-1 pb-0 m-0",children:e.title}),Object(c.jsx)("span",{className:"ml-auto"}),e.category_selection_panel&&Object(c.jsx)(Y,{toggleCategorySelection:o,categories:d}),Object(c.jsx)("button",{type:"button",ref:r,className:"btn btn-link text-light m-0 p-0 mt-1 mr-2 fas fa-expand",style:{width:"28px",height:"28px",fontSize:"1em",textDecoration:"none",outline:"none",boxShadow:"none"},onClick:function(){var e=" full-screen-card";l.current.className.includes(e)?(l.current.className=l.current.className.replace(e,""),r.current.className=r.current.className.replace("fa-compress","fa-expand"),r.current.className=r.current.className.replace("text-primary","text-light"),a(!1)):(l.current.className+=e,r.current.className=r.current.className.replace("fa-expand","fa-compress"),r.current.className=r.current.className.replace("text-light","text-primary"),a(!0))}})]}),e.loading?Object(c.jsx)("div",{className:"d-flex justify-content-center",children:Object(c.jsx)(P,{})}):Object(c.jsxs)(c.Fragment,{children:[e.records.length>0?Object(c.jsx)(K,{records:e.records}):Object(c.jsx)(Q,{}),Object(c.jsx)(ee,{readNextPage:e.readNextPage,readPreviousPage:e.readPreviousPage,changePage:e.changePage,pagination:e.pagination})]})]})}function K(e){return Object(c.jsx)("div",{className:"table-responsive px-3",children:Object(c.jsxs)("table",{className:"table table-hover table-dark table-sm text-light w-100 mb-0",children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{className:"border-0 text-secondary font-weight-bold pl-2 d-none d-lg-table-cell",style:{width:"5%"},children:"\u2116"}),Object(c.jsx)("th",{className:"border-0 text-secondary font-weight-bold",style:{width:"15%"},children:"\u0414\u0430\u0442\u0430"}),Object(c.jsx)("th",{className:"border-0 text-secondary font-weight-bold",style:{width:"10%"},children:"\u0412\u0440\u0435\u043c\u044f"}),Object(c.jsx)("th",{className:"border-0 text-secondary font-weight-bold",children:"\u0421\u043e\u0431\u044b\u0442\u0438\u0435"})]})}),Object(c.jsx)("tbody",{children:e.records.map((function(e,t){return Object(c.jsx)(J,{record:e,index:t},t)}))})]})})}function Q(){return Object(c.jsx)("i",{className:"text-secondary ml-3",children:"\u0417\u0430\u043f\u0438\u0441\u0438 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442 ..."})}function Y(e){var t=e.toggleCategorySelection,n=e.categories;return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("div",{className:"d-inline mr-3",children:n.map((function(e,n){return Object(c.jsx)($,{selected:e.selected,onClick:function(){t(n)},children:e.name},n)}))})})}function $(e){return Object(c.jsxs)("button",{type:"button",className:"btn btn-link text-light ml-3 p-0 mt-1",style:{boxShadow:"none"},onClick:e.onClick,children:[e.selected?Object(c.jsx)("i",{className:"fas fa-check-square text-success mr-2"}):Object(c.jsx)("i",{className:"far fa-square text-info mr-2"}),e.children]})}function ee(e){var t=Array.apply(null,Array(e.pagination.num_pages));return e.pagination.num_pages<=1?null:Object(c.jsxs)("div",{className:"d-flex justify-content-center p-3",children:[Object(c.jsxs)("button",{type:"button",className:"btn btn-sm btn-outline-info m-1",onClick:e.readPreviousPage,children:[" ","<<"," "]}),t.map((function(t,n){var a=n+1===e.pagination.page_number?" active":"";return Object(c.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-info m-1"+a,style:{minWidth:"35px"},onClick:function(){e.changePage(n+1)},children:n+1},n)})),Object(c.jsxs)("button",{type:"button",className:"btn btn-sm btn-outline-info m-1",onClick:e.readNextPage,children:[" ",">>"," "]})]})}function te(e){var t=s.a.useState([]),n=Object(i.a)(t,2),r=n[0],l=n[1],o=s.a.useState(!0),d=Object(i.a)(o,2),b=d[0],m=d[1],u=s.a.useState([{name:"\u0410\u0432\u0430\u0440\u0438\u0439\u043d\u044b\u0435",code:"Alarm",selected:!0},{name:"\u041f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u044f",code:"Warning",selected:!0},{name:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0435",code:"Info",selected:!0},{name:"\u041e\u0442\u043b\u0430\u0434\u043e\u0447\u043d\u044b\u0435",code:"Debug",selected:!1}]),h=Object(i.a)(u,2),x=h[0],O=h[1],p=e.device_id,f=s.a.useState({next:null,previous:null}),v=Object(i.a)(f,2),N=v[0],y=v[1],w=s.a.useState(1),k=Object(i.a)(w,2),_=k[0],C=k[1];function S(e){var t=x.filter((function(e){return e.selected})).map((function(e){return e.code}));!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};g.get(e,t).then((function(e){e&&l(e.data.results),e&&y({next:e.data.next,previous:e.data.previous,num_pages:e.data.num_pages,page_number:e.data.page_number})}))}("http://localhost:8000/events/log/",{params:{id:p,categories:t,page:e}})}return Object(a.useEffect)((function(){S(_);var e=setTimeout((function(){m(!1)}),500),t=setInterval((function(){return function(e){1===e&&S(1)}(_)}),1e4);return function(){clearTimeout(e),clearInterval(t)}}),[x,_]),Object(c.jsx)(s.a.Fragment,{children:Object(c.jsx)(V,{records:r,title:e.widget.title,categories:x,category_selection_panel:e.widget.category_selection_panel,toggleCategorySelection:function(e){O(x.map((function(t,n){return e===n?Object(j.a)(Object(j.a)({},t),{},{selected:!t.selected}):t})))},readNextPage:function(){N.next&&C(_+1)},readPreviousPage:function(){N.previous&&C(_-1)},changePage:function(e){C(e)},pagination:N,loading:b})})}function ne(e){var t=e.widgetsTemplate,n=e.device_id;return e.widgetsTemplate&&e.widgetsTemplate.widgets?Object(c.jsx)(s.a.Fragment,{children:Object(c.jsx)("div",{className:"container-fluid row equal p-0 m-0",children:t.widgets.map((function(e,t){return Object(c.jsx)(ce,{widget:e,device_id:n},t)}))})}):null}function ce(e){var t=e.widget,n=e.device_id;return"table"===t.type?Object(c.jsx)("div",{className:"col-xl-".concat(3*t.width," col-lg-").concat(Math.min(6*t.width,12)," col-md-12 p-1 m-0"),children:Object(c.jsx)(H,{device_id:n,widget:t})}):"graph"===t.type?Object(c.jsx)("div",{className:"col-xl-".concat(3*t.width," col-lg-").concat(Math.min(6*t.width,12)," col-md-12 p-1 m-0"),children:Object(c.jsx)(B,{device_id:n,widget:t})}):"indicator"===t.type?Object(c.jsx)("div",{className:"col-xl-".concat(3*t.width," col-lg-").concat(Math.min(6*t.width,12)," col-md-12 p-1 m-0"),children:Object(c.jsx)(q,{device_id:n,widget:t})}):"eventslog"===t.type?Object(c.jsx)("div",{className:"col-xl-".concat(3*t.width," col-lg-").concat(Math.min(6*t.width,12)," col-md-12 p-1 m-0"),children:Object(c.jsx)(te,{device_id:n,widget:t})}):void 0}function ae(e){var t=Object(d.h)().device_id,n=e.widgetsTemplate;return Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)(_,{device_id:t}),Object(c.jsx)(ne,{widgetsTemplate:n,device_id:t})]})}function se(){Object(d.h)().device_id;return Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)("h3",{children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430"}),Object(c.jsx)("p",{children:"\u0420\u0430\u0437\u0434\u0435\u043b \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u044c\u0441\u044f \u0432 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435 ... "})]})}var re={widgets:[{type:"eventslog",width:4,title:"\u0416\u0443\u0440\u043d\u0430\u043b \u0441\u043e\u0431\u044b\u0442\u0438\u0439",category_selection_panel:!0}]};function le(e){var t=Object(d.h)().device_id;return Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)(_,{device_id:t}),Object(c.jsx)(ne,{widgetsTemplate:re,device_id:t})]})}var ie={widgets:[{type:"graph",width:4,height:"calc(65vh)",title:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f",tags:null,legend:!0,toolbar:!0}]};function oe(e){var t=Object(d.h)().device_id;return Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)(_,{device_id:t}),Object(c.jsx)(ne,{widgetsTemplate:ie,device_id:t})]})}function de(e,t){fe(xe,"/device/parameters/",null,{id:e},t)}function je(e,t,n){fe(xe,"/device/tags/parameters/",null,{id:e,tags:t},n)}function be(e,t,n,c){fe(Oe,"/device/tags/parameters/",t,{id:e},n,c)}function me(e,t,n){fe(xe,"/events/config/",null,{id:e,events_id:t},n)}function ue(e,t,n,c){fe(Oe,"/events/config/",t,{id:e},n,c)}function he(e,t,n){fe(pe,"/events/config/",null,{id:e,events_id:t},n)}var xe="GET",Oe="POST",pe="DELETE";function fe(e,t,n,c,a){return ge.apply(this,arguments)}function ge(){return(ge=Object(h.a)(u.a.mark((function e(t,n,c,a,s){var r,l,i,o=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=o.length>5&&void 0!==o[5]?o[5]:null,l=null,i="http://localhost:8000",e.t0=t,e.next=e.t0===xe?6:e.t0===Oe?11:e.t0===pe?22:27;break;case 6:return e.next=8,g.get(i+n,{params:a});case 8:return(l=e.sent)&&s(l.data),e.abrupt("break",28);case 11:return e.prev=11,e.next=14,g.post(i+n,c,{params:a});case 14:(l=e.sent)&&s(l.data),e.next=21;break;case 18:e.prev=18,e.t1=e.catch(11),e.t1.response&&r&&r(e.t1.response.data);case 21:return e.abrupt("break",28);case 22:return e.next=24,g.delete(i+n,{params:a});case 24:return(l=e.sent)&&s(l.data),e.abrupt("break",28);case 27:throw"Api method ".concat(t," not supported.");case 28:case"end":return e.stop()}}),e,null,[[11,18]])})))).apply(this,arguments)}function ve(e){return Object(c.jsx)(s.a.Fragment,{children:Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:e.id,className:"text-secondary",children:e.titel}),Object(c.jsx)("input",{type:"text",className:"form-control form-control-sm bg-secondary border-secondary text-light",placeholder:e.placeholder,id:e.id,defaultValue:e.value,onChange:e.onChange}),Object(c.jsxs)(_e,{children:[" ",e.errors," "]}),Object(c.jsxs)(Ce,{children:[" ",e.comment," "]})]})})}function Ne(e){return Object(c.jsx)(s.a.Fragment,{children:Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:e.id,className:"text-secondary",children:e.titel}),Object(c.jsx)("input",{type:"number",className:"form-control form-control-sm bg-secondary border-secondary text-light",placeholder:e.placeholder,id:e.id,defaultValue:e.value,min:e.min,max:e.max,onChange:e.onChange}),Object(c.jsxs)(_e,{children:[" ",e.errors," "]}),Object(c.jsxs)(Ce,{children:[" ",e.comment," "]})]})})}function ye(e){return Object(c.jsx)(s.a.Fragment,{children:Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:e.id,className:"text-secondary",children:e.titel}),Object(c.jsxs)("select",{className:"form-control form-control-sm bg-secondary border-secondary text-light",id:e.id,placeholder:e.placeholder,value:e.value?e.value:"",onChange:e.onChange,children:[Object(c.jsx)("option",{value:"",disabled:!0,hidden:!0,children:"---"}),e.options&&e.options.map((function(e,t){return Object(c.jsx)("option",{value:e.value,children:e.name},t)}))]}),Object(c.jsxs)(_e,{children:[" ",e.errors," "]}),Object(c.jsxs)(Ce,{children:[" ",e.comment," "]})]})})}function we(e){return Object(c.jsx)(s.a.Fragment,{children:Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:e.id,className:"text-secondary",children:e.titel}),Object(c.jsx)("select",{multiple:!0,className:"form-control form-control-sm bg-secondary border-secondary text-light",id:e.id,placeholder:e.placeholder,value:e.value?e.value:[],onChange:e.onChange,children:e.options&&e.options.map((function(e,t){return Object(c.jsx)("option",{value:e.value,children:e.name},t)}))}),Object(c.jsxs)(_e,{children:[" ",e.errors," "]}),Object(c.jsxs)(Ce,{children:[" ",e.comment," "]})]})})}function ke(e){return Object(c.jsx)(s.a.Fragment,{children:Object(c.jsxs)("div",{className:"form-check pb-3",children:[Object(c.jsx)("input",{type:"checkbox",className:"form-check-input",id:e.id,checked:e.checked,onChange:e.onChange}),Object(c.jsx)("span",{children:e.titel}),Object(c.jsxs)(_e,{children:[" ",e.errors," "]}),Object(c.jsxs)(Ce,{children:[" ",e.comment," "]})]})})}function _e(e){return Object(c.jsxs)("div",{className:"text-small text-danger p-0 m-0",children:[" ",e.children," "]})}function Ce(e){return Object(c.jsxs)("div",{className:"text-small text-info p-0 m-0",children:[" ",e.children," "]})}function Se(e){return Object(c.jsxs)("div",{className:"container p-0",style:{maxWidth:"800px"},children:[" ",e.children," "]})}function Ee(e){for(var t=e.target.options,n=[],c=0,a=t.length;c<a;c++)t[c].selected&&n.push(t[c].value);return n}function Fe(){var e=Object(d.h)(),t=e.tag_id,n=e.device_id,r=Object(a.useState)({}),l=Object(i.a)(r,2),o=l[0],j=l[1],b=Object(a.useState)(null),m=Object(i.a)(b,2),u=m[0],h=m[1],x=s.a.useState(!0),O=Object(i.a)(x,2),p=O[0],f=O[1],g=Object(d.g)();Object(a.useEffect)((function(){je(n,[t],(function(e){j(e[0]),f(!1)}))}),[]);return Object(c.jsx)(s.a.Fragment,{children:p?Object(c.jsx)("div",{className:"d-flex justify-content-center",children:Object(c.jsx)(P,{})}):Object(c.jsx)(Se,{children:Object(c.jsx)(Ie,{tagParameters:o,formErrors:u,submitTagParameters:function(e){be(n,[e],(function(e){j(e[0]),h(null),g.push("/device/".concat(n,"/admin/config/"))}),(function(e){h(e[0])}))},cancelChanges:function(){g.push("/device/".concat(n,"/admin/config/"))},deleteTag:function(){!function(e,t,n){fe(pe,"/device/tags/parameters/",null,{id:e,tags:t},n)}(n,[t],(function(){g.push("/device/".concat(n,"/admin/config/"))}))}})})})}function Te(){var e=Object(d.h)().device_id,t=Object(d.g)(),n=Object(a.useState)({}),s=Object(i.a)(n,2),r=s[0],l=s[1];return Object(c.jsx)(Se,{children:Object(c.jsx)(Ie,{tagParameters:{code:"",name:"",data_type:"INT",modbus_parameters:{data_type:"INT",register_address:0,read_function:"3",write_function:"6"}},formErrors:r,submitTagParameters:function(n){be(e,[n],(function(){t.push("/device/".concat(e,"/admin/config/"))}),(function(e){l(e[0])}))},cancelChanges:function(){t.push("/device/".concat(e,"/admin/config/"))}})})}function Ie(e){var t=Object(a.useState)(e.tagParameters),n=Object(i.a)(t,2),r=n[0],l=n[1],o=e.submitTagParameters,d=e.cancelChanges,b=e.deleteTag,m={minWidth:"150px"};return Object(c.jsx)(s.a.Fragment,{children:Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(),o(r)},children:[Object(c.jsx)("h5",{className:"text-info text-center",children:"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0442\u0435\u0433\u0430"}),Object(c.jsx)(ve,{titel:"\u041a\u043e\u0434",id:"code",value:r.code,onChange:function(e){l(Object(j.a)(Object(j.a)({},r),{},{code:e.target.value}))},errors:e.formErrors?e.formErrors.code:null}),Object(c.jsx)(ve,{titel:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",id:"name",value:r.name,onChange:function(e){l(Object(j.a)(Object(j.a)({},r),{},{name:e.target.value}))},errors:e.formErrors?e.formErrors.name:null}),Object(c.jsx)(ye,{titel:"\u0422\u0438\u043f \u0434\u0430\u043d\u043d\u044b\u0445 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435",id:"data_type",value:r.data_type,options:[{value:"INT",name:"INT"},{value:"FLOAT",name:"FLOAT"},{value:"STRING",name:"STRING"},{value:"BOOL",name:"BOOL"}],onChange:function(e){l(Object(j.a)(Object(j.a)({},r),{},{data_type:Ee(e)[0]}))},errors:e.formErrors?e.formErrors.data_type:null}),Object(c.jsx)("h5",{className:"text-info text-center",children:"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b Modbus"}),Object(c.jsx)(ye,{titel:"\u0422\u0438\u043f \u0434\u0430\u043d\u043d\u044b\u0445 \u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0435",id:"modbus_data_type",value:r.modbus_parameters?r.modbus_parameters.data_type:null,options:[{value:"WORD",name:"WORD"},{value:"INT",name:"INT"},{value:"UINT",name:"UINT"},{value:"FLOAT",name:"FLOAT"},{value:"STRING",name:"STRING"},{value:"BOOL",name:"BOOL"}],onChange:function(e){l(Object(j.a)(Object(j.a)({},r),{},{modbus_parameters:Object(j.a)(Object(j.a)({},r.modbus_parameters),{},{data_type:Ee(e)[0]})}))},errors:e.formErrors&&e.formErrors.modbus_parameters?e.formErrors.modbus_parameters.data_type:null}),Object(c.jsx)(Ne,{titel:"\u0410\u0434\u0440\u0435\u0441 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430",id:"modbus_register_address",value:r.modbus_parameters?r.modbus_parameters.register_address:null,onChange:function(e){l(Object(j.a)(Object(j.a)({},r),{},{modbus_parameters:Object(j.a)(Object(j.a)({},r.modbus_parameters),{},{register_address:e.target.value})}))},errors:e.formErrors&&e.formErrors.modbus_parameters?e.formErrors.modbus_parameters.register_address:null}),Object(c.jsx)(ye,{titel:"\u0424\u0443\u043d\u043a\u0438\u0446\u044f \u0447\u0442\u0435\u043d\u0438\u044f",id:"modbus_read_function",value:r.modbus_parameters?r.modbus_parameters.read_function:null,options:[{value:"1",name:"1 - Read Coil"},{value:"2",name:"2 - Read Discrete Input"},{value:"3",name:"3 - Read Holding Registers"},{value:"4",name:"4 - Read Input Registers"}],onChange:function(e){l(Object(j.a)(Object(j.a)({},r),{},{modbus_parameters:Object(j.a)(Object(j.a)({},r.modbus_parameters),{},{read_function:Ee(e)[0]})}))},errors:e.formErrors&&e.formErrors.modbus_parameters?e.formErrors.modbus_parameters.read_function:null}),Object(c.jsx)(ye,{titel:"\u0424\u0443\u043d\u043a\u0438\u0446\u044f \u0437\u0430\u043f\u0438\u0441\u0438",id:"modbus_write_function",value:r.modbus_parameters?r.modbus_parameters.write_function:null,options:[{value:"5",name:"5 - Write Single Coil"},{value:"6",name:"6 - Write Single Holding Register"},{value:"15",name:"15 - Write Multiple Coils"},{value:"16",name:"16 - Write Multiple Holding Registers"}],onChange:function(e){l(Object(j.a)(Object(j.a)({},r),{},{modbus_parameters:Object(j.a)(Object(j.a)({},r.modbus_parameters),{},{write_function:Ee(e)[0]})}))},errors:e.formErrors&&e.formErrors.modbus_parameters?e.formErrors.modbus_parameters.write_function:null}),Object(c.jsx)(_e,{children:e.formErrors&&e.formErrors.non_field_errors?Object(c.jsxs)("div",{className:"card bg-danger text-dark my-3 p-2",children:[" ",e.formErrors.non_field_errors]}):null}),Object(c.jsxs)("div",{className:"d-flex flex-wrap justify-content-center",children:[Object(c.jsx)("button",{type:"submit",className:"btn btn-outline-primary m-2",style:m,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(c.jsx)("button",{type:"button",className:"btn btn-outline-secondary m-2",style:m,onClick:d,children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),e.deleteTag&&Object(c.jsx)("button",{type:"button",className:"btn btn-outline-danger m-2",style:m,onClick:b,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})]})})}function De(){var e=Object(d.h)().device_id,t=Object(a.useState)({}),n=Object(i.a)(t,2),r=n[0],l=n[1],o=Object(a.useState)(null),b=Object(i.a)(o,2),m=b[0],u=b[1],h=Object(a.useState)({}),x=Object(i.a)(h,2),O=x[0],p=x[1],f=Object(a.useState)(null),g=Object(i.a)(f,2),v=g[0],N=g[1],y=Object(a.useState)([]),w=Object(i.a)(y,2),k=w[0],_=w[1],C=s.a.useState(!0),S=Object(i.a)(C,2),E=S[0],F=S[1],T=s.a.useState(!0),I=Object(i.a)(T,2),D=I[0],W=I[1],L=s.a.useState(!0),R=Object(i.a)(L,2),z=R[0],A=R[1];Object(a.useEffect)((function(){de(e,(function(e){l(e),F(!1)})),function(e,t){fe(xe,"/device/modbus/parameters/",null,{id:e},t)}(e,(function(e){p(e),W(!1)})),je(e,[],(function(e){_(e),A(!1)}))}),[]);return Object(c.jsx)(s.a.Fragment,{children:E||D||z?Object(c.jsx)("div",{className:"d-flex justify-content-center",children:Object(c.jsx)(P,{})}):Object(c.jsxs)("div",{className:"row",children:[Object(c.jsxs)("div",{className:"col-12 col-lg-5",children:[Object(c.jsx)(We,{deviceParameters:r,formErrors:m,submitDeviceConfig:function(t){!function(e,t,n,c){var a={id:e},s=Object(j.a)({},t);fe(Oe,"/device/parameters/",s,a,n,c)}(e,t,(function(e){l(e),u(null)}),(function(e){u(e)}))}}),Object(c.jsx)("p",{className:"my-3 border-top border-secondary"}),Object(c.jsx)(Le,{deviceModbusParameters:O,formErrors:v,submitModbusParameters:function(t){!function(e,t,n,c){var a={id:e},s=Object(j.a)({},t);fe(Oe,"/device/modbus/parameters/",s,a,n,c)}(e,t,(function(e){p(e),N(null)}),(function(e){N(e)}))}})]}),Object(c.jsxs)("div",{className:"col-12 col-lg-7 border-left border-secondary",children:[Object(c.jsx)("p",{className:"my-3 d-lg-none border-top border-secondary"}),Object(c.jsx)(Pe,{deviceTagsParameters:k,device_id:e})]})]})})}function We(e){var t=Object(a.useState)(e.deviceParameters),n=Object(i.a)(t,2),r=n[0],l=n[1],o=e.submitDeviceConfig;return Object(c.jsx)(s.a.Fragment,{children:Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(),o(r)},children:[Object(c.jsx)("h5",{className:"text-info",children:"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043f\u0440\u0438\u0431\u043e\u0440\u0430"}),Object(c.jsx)(ve,{titel:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u0438\u0431\u043e\u0440\u0430",id:"name",placeholder:"...",value:r.name,onChange:function(e){l(Object(j.a)(Object(j.a)({},r),{},{name:e.target.value}))},errors:e.formErrors?e.formErrors.name:null}),Object(c.jsx)(Ne,{titel:"\u041f\u0435\u0440\u0438\u043e\u0434 \u043e\u043f\u0440\u043e\u0441\u0430 (\u0441\u0435\u043a)",id:"polling_period",placeholder:"...",value:r.polling_period,min:1,onChange:function(e){l(Object(j.a)(Object(j.a)({},r),{},{polling_period:e.target.value}))},errors:e.formErrors?e.formErrors.polling_period:null}),Object(c.jsx)(Ne,{titel:"\u0422\u0430\u0439\u043c\u0430\u0443\u0442 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f (\u0441\u0435\u043a)",id:"timeout",placeholder:"...",value:r.timeout,onChange:function(e){l(Object(j.a)(Object(j.a)({},r),{},{timeout:e.target.value}))},errors:e.formErrors?e.formErrors.timeout:null}),Object(c.jsx)(_e,{children:e.formErrors&&e.formErrors.non_field_errors?Object(c.jsxs)("div",{className:"card bg-danger text-dark my-3 p-2",children:[" ",e.formErrors.non_field_errors]}):null}),Object(c.jsx)("div",{className:"d-flex justify-content-center",children:Object(c.jsx)("button",{type:"submit",className:"btn btn-outline-primary",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]})})}function Le(e){var t=Object(a.useState)(e.deviceModbusParameters),n=Object(i.a)(t,2),r=n[0],l=n[1],o=e.submitModbusParameters;return Object(c.jsx)(s.a.Fragment,{children:Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(),o(r)},children:[Object(c.jsx)("h5",{className:"text-info",children:"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u0430 Modbus"}),Object(c.jsx)(ye,{titel:"\u041f\u0440\u043e\u0442\u043e\u043a\u043e\u043b",id:"protocol_type",value:r.protocol_type,options:[{value:"RTU",name:"Modbus-RTU"},{value:"ASCII",name:"Modbus-ASCII"},{value:"TCP",name:"Modbus-TCP"}],onChange:function(e){l(Object(j.a)(Object(j.a)({},r),{},{protocol_type:Ee(e)[0]}))},errors:e.formErrors?e.formErrors.protocol_type:null}),Object(c.jsx)(Ne,{titel:"\u0410\u0434\u0440\u0435\u0441 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430",id:"device_address",value:r.device_address,min:1,max:247,onChange:function(e){l(Object(j.a)(Object(j.a)({},r),{},{device_address:e.target.value}))},errors:e.formErrors?e.formErrors.device_address:null}),Object(c.jsx)(ye,{titel:"\u0421\u043a\u043e\u0440\u043e\u0441\u0442\u044c \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0438 \u0434\u0430\u043d\u043d\u044b\u0445",id:"baudrate",value:r.baudrate,options:[{value:300,name:"300"},{value:600,name:"600"},{value:1200,name:"1200"},{value:2400,name:"2400"},{value:4800,name:"4800"},{value:9600,name:"9600"},{value:14400,name:"14400"},{value:19200,name:"19200"},{value:28800,name:"28800"},{value:38400,name:"38400"},{value:57600,name:"57600"},{value:115200,name:"115200"}],onChange:function(e){l(Object(j.a)(Object(j.a)({},r),{},{baudrate:Ee(e)[0]}))},errors:e.formErrors?e.formErrors.baudrate:null}),Object(c.jsx)(ye,{titel:"\u0414\u043b\u0438\u043d\u043d\u0430 \u0430\u0434\u0440\u0435\u0441\u0430",id:"address_size",value:r.address_size,options:[{value:"8",name:"8"}],onChange:function(e){l(Object(j.a)(Object(j.a)({},r),{},{address_size:Ee(e)[0]}))},errors:e.formErrors?e.formErrors.address_size:null}),Object(c.jsx)(ye,{titel:"\u041a\u043e\u043d\u0442\u0440\u043e\u043b\u044c \u0447\u0451\u0442\u043d\u043e\u0441\u0442\u0438",id:"parity",value:r.parity,options:[{value:"none",name:"\u043d\u0435\u0442"},{value:"even",name:"\u0447\u0435\u0442\u043d\u043e\u0441\u0442\u044c"},{value:"odd",name:"\u043d\u0435\u0447\u0435\u0442\u043d\u043e\u0441\u0442\u044c"}],onChange:function(e){l(Object(j.a)(Object(j.a)({},r),{},{parity:Ee(e)[0]}))},errors:e.formErrors?e.formErrors.parity:null}),Object(c.jsx)(ye,{titel:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u0442\u043e\u043f-\u0431\u0438\u0442\u043e\u0432",id:"stopbit",value:r.stopbit,options:[{value:"1",name:"1"},{value:"2",name:"2"}],onChange:function(e){l(Object(j.a)(Object(j.a)({},r),{},{stopbit:Ee(e)[0]}))},errors:e.formErrors?e.formErrors.stopbit:null}),Object(c.jsx)(Ne,{titel:"\u0422\u0430\u0439\u043c\u0430\u0443\u0442 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 (\u043c\u0441)",id:"packet_timout",value:r.packet_timout,onChange:function(e){l(Object(j.a)(Object(j.a)({},r),{},{packet_timout:e.target.value}))},errors:e.formErrors?e.formErrors.packet_timout:null}),Object(c.jsx)(Ne,{titel:"\u0422\u0430\u0439\u043c\u0430\u0443\u0442 \u0431\u0438\u0442\u0430 (\u043c\u0441)",id:"bit_timout",value:r.bit_timout,onChange:function(e){l(Object(j.a)(Object(j.a)({},r),{},{bit_timout:e.target.value}))},errors:e.formErrors?e.formErrors.bit_timout:null}),Object(c.jsx)(ke,{titel:"\u041c\u043b\u0430\u0434\u0448\u0438\u043c \u0431\u0430\u0439\u0442\u043e\u043c \u0432\u043f\u0435\u0440\u0435\u0434",id:"lower_byte_forward",checked:r.lower_byte_forward,onChange:function(e){l(Object(j.a)(Object(j.a)({},r),{},{lower_byte_forward:e.target.checked}))},errors:e.formErrors?e.formErrors.lower_byte_forward:null}),Object(c.jsx)(ke,{titel:"\u041c\u043b\u0430\u0434\u0448\u0438\u043c \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u043e\u043c \u0432\u043f\u0435\u0440\u0435\u0434",id:"lower_register_forward",checked:r.lower_register_forward,onChange:function(e){l(Object(j.a)(Object(j.a)({},r),{},{lower_register_forward:e.target.checked}))},errors:e.formErrors?e.formErrors.lower_register_forward:null}),Object(c.jsx)(ke,{titel:"\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u043e\u0432\u043e\u0435 \u0447\u0442\u0435\u043d\u0438\u0435",id:"allow_group_reading",checked:r.allow_group_reading,onChange:function(e){l(Object(j.a)(Object(j.a)({},r),{},{allow_group_reading:e.target.checked}))},errors:e.formErrors?e.formErrors.allow_group_reading:null}),Object(c.jsx)(_e,{children:e.formErrors&&e.formErrors.non_field_errors?Object(c.jsxs)("div",{className:"card bg-danger text-dark my-3 p-2",children:[" ",e.formErrors.non_field_errors]}):null}),Object(c.jsx)("div",{className:"d-flex justify-content-center",children:Object(c.jsx)("button",{type:"submit",className:"btn btn-outline-primary",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]})})}function Pe(e){var t=e.deviceTagsParameters,n=Object(d.g)();return Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsxs)("div",{className:"d-flex",children:[Object(c.jsx)("h5",{className:"text-info",children:"\u0422\u0435\u0433\u0438 \u043f\u0440\u0438\u0431\u043e\u0440\u0430"}),Object(c.jsxs)("button",{type:"button",className:"btn btn-sm btn-outline-success ml-auto",onClick:function(){n.push("/device/".concat(e.device_id,"/admin/config/tags/create/"))},children:[Object(c.jsx)("i",{className:"fas fa-plus px-1"})," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0442\u0435\u0433"]})]}),t.length>0?Object(c.jsx)("div",{className:"table-responsive",children:Object(c.jsxs)("table",{className:"table table-hover table-dark table-striped table-sm text-light w-100 mb-0",children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{className:"border-0 text-secondary font-weight-bold pl-2",children:"\u2116"}),Object(c.jsx)("th",{className:"border-0 text-secondary font-weight-bold",children:"\u041a\u043e\u0434 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430"}),Object(c.jsx)("th",{className:"border-0 text-secondary font-weight-bold",children:"\u0422\u0438\u043f \u0434\u0430\u043d\u043d\u044b\u0445"}),Object(c.jsx)("th",{className:"border-0 text-secondary font-weight-bold",children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"}),Object(c.jsx)("th",{className:"border-0 text-secondary font-weight-bold",children:"\u0422\u0435\u043a\u0443\u0449\u0435\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435"})]})}),Object(c.jsx)("tbody",{children:t.map((function(t,n){return Object(c.jsx)(Re,{tag:t,index:n,device_id:e.device_id},n)}))})]})}):Object(c.jsx)("i",{className:"text-secondary ml-3",children:"\u0422\u0435\u0433\u0438 \u043d\u0435 \u0437\u0430\u0434\u0430\u043d\u044b ... "})]})}function Re(e){var t=e.tag,n=Object(d.g)();return Object(c.jsxs)("tr",{className:"table-row-like-link",onClick:function(){return c=t.id,void n.push("/device/".concat(e.device_id,"/admin/config/tags/").concat(c,"/detail/"));var c},children:[Object(c.jsxs)("td",{className:"border-0 text-secondary pl-2",children:[" ",e.index+1," "]}),Object(c.jsxs)("td",{className:"border-0",children:[" ",t.code," "]}),Object(c.jsxs)("td",{className:"border-0",children:[" ",t.data_type," "]}),Object(c.jsxs)("td",{className:"border-0",children:[" ",t.name," "]}),Object(c.jsxs)("td",{className:"border-0",children:[" ",t.value," "]})]})}function ze(){return Object(c.jsx)(s.a.Fragment,{children:Object(c.jsx)("div",{className:"bg-color-dark-gray text-secondary content-height",children:Object(c.jsxs)("div",{className:"container mt-5 text-center",children:[Object(c.jsx)("h1",{children:"Error 404"}),Object(c.jsx)("h3",{children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"})]})})})}function Ae(e){var t=e.device_id,n=Object(a.useState)({}),r=Object(i.a)(n,2),l=r[0],o=r[1],d=s.a.useState(!0),j=Object(i.a)(d,2),b=j[0],m=j[1];return Object(a.useEffect)((function(){de(t,(function(e){o(e),m(!1)}))}),[]),Object(c.jsx)(s.a.Fragment,{children:b?Object(c.jsx)("div",{className:"d-flex justify-content-center",children:Object(c.jsx)(P,{})}):Object(c.jsxs)("div",{className:"d-flex border-bottom border-secondary mb-3 pb-2",children:[Object(c.jsxs)("h5",{className:"pt-2 mt-1",children:["\u041f\u0440\u0438\u0431\u043e\u0440: ",Object(c.jsx)("b",{children:l.name})]}),Object(c.jsx)("div",{className:"ml-auto mx-3 px-3 border-x border-secondary",children:l.is_online?Object(c.jsxs)("div",{className:"text-success",children:[Object(c.jsx)("span",{children:"\u041e\u043d\u043b\u0430\u0439\u043d"})," ",Object(c.jsx)("br",{}),Object(c.jsx)("i",{className:"fas fa-check text-center w-100"})]}):Object(c.jsxs)("div",{className:"text-danger",children:[Object(c.jsx)("span",{children:"\u041d\u0435\u0442 \u0441\u0432\u044f\u0437\u0438"})," ",Object(c.jsx)("br",{}),Object(c.jsx)("i",{className:"fas fa-times text-center w-100"})]})}),Object(c.jsx)("div",{children:Object(c.jsxs)("p",{className:"m-0 mr-1 text-right",children:["\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u0441\u0435\u0430\u043d\u0441 \u0441\u0432\u044f\u0437\u0438: ",Object(c.jsx)("br",{})," ",l.verbose_last_update]})})]})})}function Be(){var e=Object(d.h)().device_id;return Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)("h3",{className:"mb-3",children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432 \u043f\u0440\u0438\u0431\u043e\u0440\u0430"}),Object(c.jsxs)("div",{className:"px-3 pb-3 pt-2 mx-1 my-0 bg-dark rounded text-light",style:{minHeight:"calc(100vh - 135px)"},children:[Object(c.jsx)(Ae,{device_id:e}),Object(c.jsxs)(d.d,{children:[Object(c.jsx)(d.b,{exact:!0,path:"/device/:device_id/admin/config/",component:function(){return Object(c.jsx)(De,{})}}),Object(c.jsx)(d.b,{exact:!0,path:"/device/:device_id/admin/config/tags/:tag_id/detail/",component:function(){return Object(c.jsx)(Fe,{})}}),Object(c.jsx)(d.b,{exact:!0,path:"/device/:device_id/admin/config/tags/create/",component:function(){return Object(c.jsx)(Te,{})}}),Object(c.jsx)(d.b,{component:ze})]})]})]})}function Me(e){var t=Object(d.h)().device_id,n=e.updateWidgetsTemplate,r=s.a.useState(w(e.widgetsTemplate)),l=Object(i.a)(r,2),o=l[0],j=l[1],b=s.a.useState(0),m=Object(i.a)(b,2),u=m[0],h=m[1],x=s.a.useState([]),O=Object(i.a)(x,2),p=O[0],f=O[1];Object(a.useEffect)((function(){g.get("http://localhost:8000/device/tags/value/",{params:{id:t}}).then((function(e){e&&f(e.data)}))}),[]);var v=s.a.useState(!1),N=Object(i.a)(v,2),y=N[0],k=N[1],_=function(){k(!1),setTimeout((function(){k(!0)}),0)};Object(a.useEffect)((function(){_()}),[u,p]);var C=function(e){var t=o.widgets.map((function(e){return e}));t.push(e),j({widgets:t})};return o.widgets?Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)("h3",{className:"mb-3",children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0432\u0438\u0434\u0436\u0435\u0442\u043e\u0432"}),Object(c.jsxs)("div",{className:"row equal p-0 m-0",children:[Object(c.jsx)("div",{className:"col-md-6 col-lg-7 col-xl-8 px-1",style:{minHeight:"80vh"},children:Object(c.jsx)("div",{className:"p-0 m-0 bg-dark rounded h-100",children:Object(c.jsx)(Ue,{widgetsTemplate:o,selectedWidget:u,changeSelectedWidget:function(e){h(e)}})})}),Object(c.jsx)("div",{className:"col-md-6 col-lg-5 col-xl-4 px-1",style:{minHeight:"80vh"},children:Object(c.jsxs)("div",{className:"p-0 m-0 bg-dark rounded h-100",children:[Object(c.jsx)(Ge,{addWidget:function(e){"table"===e?C(Qe):"graph"===e?C(Ye):"indicator"===e&&C($e)},saveWidgetsTemplate:function(){n(o)},cancelChanges:function(){j(w(e.widgetsTemplate)),h(0),_()}}),y?Object(c.jsx)(qe,{widget:o.widgets[u],tags:p,updateWidget:function(e){var t=o.widgets.map((function(t,n){return n===u?e:t}));j({widgets:t})},deleteWidget:function(){return function(e){var t=o.widgets.map((function(e){return e}));t.splice(e,1),j({widgets:t}),h(0)}(u)}}):null]})})]})]}):Object(c.jsx)(P,{})}function Ue(e){var t=e.widgetsTemplate,n=e.selectedWidget,a=e.changeSelectedWidget;if(!t.widgets)return Object(c.jsx)(P,{});var s=t.widgets.map((function(e,t){var s=t===n?"border-primary":"";return Object(c.jsx)("div",{className:"col-".concat(3*e.width," p-1 m-0"),children:Object(c.jsx)("button",{className:"btn btn-dark w-100 h-100 text-left p-0 "+s,style:{overflow:"hidden",minHeight:"10vh",boxShadow:"none"},onClick:function(){a(t)},children:Object(c.jsxs)("div",{className:"h-100 p-0 px-2",children:[Object(c.jsx)("span",{className:"small text-nowrap",children:e.title}),Object(c.jsx)(He,{widget:e})]})})},t)}));return Object(c.jsx)("div",{className:"d-flex justify-content-center m-0 p-4",style:{},children:Object(c.jsx)("div",{className:"row equal rounded m-0 p-3",style:{backgroundColor:"#1E1E1E",maxWidth:"800px"},children:s})})}var He=function(e){var t=e.widget,n=e.color?e.color:"secondary";return"table"===t.type?Object(c.jsx)("div",{className:"d-flex justify-content-center",children:Object(c.jsx)("span",{className:"fas fa-table text-".concat(n," m-2"),style:{fontSize:"4em"}})}):"graph"===t.type?Object(c.jsx)("div",{className:"d-flex justify-content-center",children:Object(c.jsx)("span",{className:"fas fa-chart-area text-".concat(n," m-2"),style:{fontSize:"4em"}})}):"indicator"===t.type?Object(c.jsx)("div",{className:"d-flex justify-content-center",children:Object(c.jsxs)("span",{className:"border rounded-sm text-".concat(n," border-").concat(n," text-nowrap m-2 px-2"),style:{fontSize:"1.5em"},children:[t.addTextLeft," XX.X ",t.addTextRight]})}):null};function Ge(e){var t=s.a.useState(!1),n=Object(i.a)(t,2),a=n[0],r=n[1],l=function(){return r(!1)};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"p-2",children:Object(c.jsx)("div",{className:"m-1 pt-2 pb-3 border-bottom border-secondary",children:Object(c.jsxs)("div",{className:"d-flex justify-content-left",children:[Object(c.jsx)("button",{className:"btn btn-outline-info btn-sm mr-3",type:"button",onClick:function(){return r(!0)},children:" \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u0438\u0434\u0436\u0435\u0442"}),Object(c.jsx)("button",{className:"btn btn-outline-success btn-sm mr-3",type:"button",onClick:e.saveWidgetsTemplate,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(c.jsx)("button",{className:"btn btn-outline-danger btn-sm",type:"button",onClick:e.cancelChanges,children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})})}),Object(c.jsx)(Xe,{show:a,handleClose:l,handleAddWidget:function(t){e.addWidget(t),l()}})]})}function qe(e){var t=e.widget,n=e.tags,a=e.updateWidget,s=e.deleteWidget,r={};return t?("table"===t.type&&(r=Object(c.jsx)(Ze,{widget:t,tags:n,updateWidget:a,deleteWidget:s})),"graph"===t.type&&(r=Object(c.jsx)(Ve,{widget:t,tags:n,updateWidget:a,deleteWidget:s})),"indicator"===t.type&&(r=Object(c.jsx)(Ke,{widget:t,tags:n,updateWidget:a,deleteWidget:s})),Object(c.jsx)("div",{className:"p-0 m-0 my-1",children:Object(c.jsxs)(Je,{children:[" ",r," "]})})):null}function Je(e){return Object(c.jsx)("div",{className:"text-light p-2 m-0 mx-1 h-100",children:e.children})}function Xe(e){var t=function(e){return Object(c.jsx)("div",{className:"col-4 p-1 w-100",children:Object(c.jsx)("button",{type:"button",className:"btn btn-primary w-100 h-100",onClick:e.onClick,children:Object(c.jsx)("div",{className:"h-100 p-0 px-2",children:e.children})})})};return e.show?Object(c.jsx)("div",{className:"modal modal-bg d-block",children:Object(c.jsx)("div",{className:"modal-dialog",children:Object(c.jsxs)("div",{className:"modal-content",children:[Object(c.jsxs)("div",{className:"modal-header",children:[Object(c.jsx)("h4",{className:"modal-title",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0432\u0438\u0434\u0436\u0435\u0442"}),Object(c.jsx)("button",{type:"button",className:"close",onClick:e.handleClose,children:"\xd7"})]}),Object(c.jsx)("div",{className:"modal-body",children:Object(c.jsxs)("div",{className:"row equal px-1",children:[Object(c.jsxs)(t,{onClick:function(){return e.handleAddWidget("indicator")},children:[Object(c.jsx)("span",{className:"text-nowrap",children:"\u0418\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440"}),Object(c.jsx)("div",{className:"pt-2"}),Object(c.jsx)(He,{widget:{type:"indicator"},color:"light"})]}),Object(c.jsxs)(t,{onClick:function(){return e.handleAddWidget("table")},children:[Object(c.jsx)("span",{className:"text-nowrap",children:"\u0422\u0430\u0431\u043b\u0438\u0446\u0430"}),Object(c.jsx)(He,{widget:{type:"table"},color:"light"})]}),Object(c.jsxs)(t,{onClick:function(){return e.handleAddWidget("graph")},children:[Object(c.jsx)("span",{className:"text-nowrap",children:"\u0413\u0440\u0430\u0444\u0438\u043a"}),Object(c.jsx)(He,{widget:{type:"graph"},color:"light"})]})]})}),Object(c.jsx)("div",{className:"modal-footer",children:Object(c.jsx)("button",{type:"button",className:"btn btn-danger",onClick:e.handleClose,children:"\u041e\u0442\u043c\u0435\u043d\u0430"})})]})})}):null}function Ze(e){var t=e.widget,n=e.tags,a=e.updateWidget,r=[];n&&(r=n.map((function(e){return{value:e.code,name:e.code+" - "+e.name}})));return Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsxs)("div",{className:"d-flex",children:[Object(c.jsx)("h6",{children:"\u0422\u0430\u0431\u043b\u0438\u0446\u0430"}),Object(c.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-danger ml-auto",onClick:e.deleteWidget,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]}),Object(c.jsxs)("form",{children:[Object(c.jsx)(ve,{titel:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",id:"title",placeholder:"...",value:t.title,onChange:function(e){a(Object(j.a)(Object(j.a)({},t),{},{title:e.target.value}))}}),Object(c.jsx)(Ne,{titel:"\u041f\u043e\u0440\u044f\u0434\u043e\u043a \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f",id:"order",placeholder:"...",value:t.order,onChange:function(e){a(Object(j.a)(Object(j.a)({},t),{},{order:e.target.value}))}}),Object(c.jsx)(Ne,{titel:"\u0428\u0438\u0440\u0438\u043d\u0430",id:"width",placeholder:"...",value:t.width,min:1,max:4,onChange:function(e){a(Object(j.a)(Object(j.a)({},t),{},{width:e.target.value}))}}),Object(c.jsx)(we,{titel:"\u0422\u0435\u0433\u0438",id:"tags",placeholder:"...",value:t.tags,options:r,comment:Object(c.jsxs)("span",{className:"m-0 p-0 d-block mt-1",children:["\u0423\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0439\u0442\u0435 ",Object(c.jsx)("kbd",{className:"text-info",children:"Ctrl"})," \u0434\u043b\u044f \u0432\u044b\u0431\u043e\u0440\u0430 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432"]}),onChange:function(e){a(Object(j.a)(Object(j.a)({},t),{},{tags:Ee(e)}))}}),Object(c.jsx)(we,{titel:"\u041a\u043e\u043b\u043e\u043d\u043a\u0438",id:"columns",placeholder:"...",value:t.columns,options:[{value:"#No",name:"\u2116"},{value:"code",name:"\u041a\u043e\u0434 \u0442\u0435\u0433\u0430"},{value:"name",name:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0442\u0435\u0433\u0430"},{value:"value",name:"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0442\u0435\u0433\u0430"}],comment:Object(c.jsxs)("span",{className:"m-0 p-0 d-block mt-1",children:["\u0423\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0439\u0442\u0435 ",Object(c.jsx)("kbd",{className:"text-info",children:"Ctrl"})," \u0434\u043b\u044f \u0432\u044b\u0431\u043e\u0440\u0430 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432"]}),onChange:function(e){a(Object(j.a)(Object(j.a)({},t),{},{columns:Ee(e)}))}})]})]})}function Ve(e){var t=e.widget,n=e.tags,a=e.updateWidget,r=[];n&&(r=n.map((function(e){return{value:e.code,name:e.code+" - "+e.name}})));return Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsxs)("div",{className:"d-flex",children:[Object(c.jsx)("h6",{children:"\u0413\u0440\u0430\u0444\u0438\u043a"}),Object(c.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-danger ml-auto",onClick:e.deleteWidget,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]}),Object(c.jsxs)("form",{children:[Object(c.jsx)(ve,{titel:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",id:"title",placeholder:"...",value:t.title,onChange:function(e){a(Object(j.a)(Object(j.a)({},t),{},{title:e.target.value}))}}),Object(c.jsx)(Ne,{titel:"\u041f\u043e\u0440\u044f\u0434\u043e\u043a \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f",id:"order",placeholder:"...",value:t.order,onChange:function(e){a(Object(j.a)(Object(j.a)({},t),{},{order:e.target.value}))}}),Object(c.jsx)(Ne,{titel:"\u0428\u0438\u0440\u0438\u043d\u0430",id:"width",placeholder:"...",value:t.width,min:1,max:4,onChange:function(e){a(Object(j.a)(Object(j.a)({},t),{},{width:e.target.value}))}}),Object(c.jsx)(we,{titel:"\u0422\u0435\u0433\u0438",id:"tags",placeholder:"...",value:t.tags,options:r,comment:Object(c.jsxs)("span",{className:"m-0 p-0 d-block mt-1",children:["\u0423\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0439\u0442\u0435 ",Object(c.jsx)("kbd",{className:"text-info",children:"Ctrl"})," \u0434\u043b\u044f \u0432\u044b\u0431\u043e\u0440\u0430 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432"]}),onChange:function(e){a(Object(j.a)(Object(j.a)({},t),{},{tags:Ee(e)}))}}),Object(c.jsx)(ke,{titel:"\u041b\u0435\u0433\u0435\u043d\u0434\u0430",id:"legend",checked:t.legend,onChange:function(e){a(Object(j.a)(Object(j.a)({},t),{},{legend:e.target.checked}))}}),Object(c.jsx)(ke,{titel:"\u041f\u0430\u043d\u0435\u043b\u044c \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u043e\u0432",id:"toolbar",checked:t.toolbar,onChange:function(e){a(Object(j.a)(Object(j.a)({},t),{},{toolbar:e.target.checked}))}})]})]})}function Ke(e){var t=e.widget,n=e.tags,a=e.updateWidget,r=[];n&&(r=n.map((function(e){return{value:e.code,name:e.code+" - "+e.name}})));return Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsxs)("div",{className:"d-flex",children:[Object(c.jsx)("h6",{children:"\u0418\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440"}),Object(c.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-danger ml-auto",onClick:e.deleteWidget,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]}),Object(c.jsxs)("form",{children:[Object(c.jsx)(ve,{titel:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",id:"title",placeholder:"...",value:t.title,onChange:function(e){a(Object(j.a)(Object(j.a)({},t),{},{title:e.target.value}))}}),Object(c.jsx)(Ne,{titel:"\u041f\u043e\u0440\u044f\u0434\u043e\u043a \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f",id:"order",placeholder:"...",value:t.order,onChange:function(e){a(Object(j.a)(Object(j.a)({},t),{},{order:e.target.value}))}}),Object(c.jsx)(Ne,{titel:"\u0428\u0438\u0440\u0438\u043d\u0430",id:"width",placeholder:"...",value:t.width,min:1,max:4,onChange:function(e){a(Object(j.a)(Object(j.a)({},t),{},{width:e.target.value}))}}),Object(c.jsx)(ye,{titel:"\u0422\u0435\u0433",id:"tags",placeholder:"...",value:t.tags[0],options:r,onChange:function(e){a(Object(j.a)(Object(j.a)({},t),{},{tags:Ee(e)}))}}),Object(c.jsx)(Ne,{titel:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u043d\u0430\u043a\u043e\u0432 \u043f\u043e\u0441\u043b\u0435 \u0437\u0430\u043f\u044f\u0442\u043e\u0439",id:"precision",placeholder:"...",value:t.precision,min:0,max:5,onChange:function(e){a(Object(j.a)(Object(j.a)({},t),{},{precision:e.target.value}))}}),Object(c.jsx)(ve,{titel:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0435\u043a\u0441\u0442 \u0441\u043b\u0435\u0432\u0430",id:"addTextLeft",placeholder:"...",value:t.addTextLeft,onChange:function(e){a(Object(j.a)(Object(j.a)({},t),{},{addTextLeft:e.target.value}))}}),Object(c.jsx)(ve,{titel:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0435\u043a\u0441\u0442 \u0441\u043f\u0440\u0430\u0432\u0430",id:"addTextRight",placeholder:"...",value:t.addTextRight,onChange:function(e){a(Object(j.a)(Object(j.a)({},t),{},{addTextRight:e.target.value}))}})]})]})}var Qe={type:"table",width:4,title:"\u041d\u043e\u0432\u0430\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430",tags:[],columns:["#No","code","name","value"]},Ye={type:"graph",width:4,title:"\u041d\u043e\u0432\u044b\u0439 \u0433\u0440\u0430\u0444\u0438\u043a",tags:[],legend:!1,toolbar:!0},$e={type:"indicator",width:1,title:"\u041d\u043e\u0432\u044b\u0439 \u0438\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440",tags:[],precision:1};function et(){var e=Object(d.h)().device_id,t=Object(a.useState)([]),n=Object(i.a)(t,2),r=n[0],l=n[1],b=s.a.useState({}),m=Object(i.a)(b,2),u=m[0],h=m[1],x=s.a.useState(!0),O=Object(i.a)(x,2),p=O[0],f=O[1];return Object(a.useEffect)((function(){me(e,[],(function(e){l(e),f(!1)})),de(e,h)}),[]),Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)("h3",{className:"mb-3",children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0441\u043e\u0431\u044b\u0442\u0438\u0439 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430"}),Object(c.jsx)("div",{className:"p-3 mx-1 my-0 bg-dark rounded text-light",style:{minHeight:"calc(100vh - 135px)"},children:p?Object(c.jsx)("div",{className:"d-flex justify-content-center",children:Object(c.jsx)(P,{})}):Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsxs)("div",{className:"d-flex mb-3 border-bottom border-secondary pb-3",children:[Object(c.jsxs)("h4",{className:"pt-1 text-info",children:['\u0421\u043f\u0438\u0441\u043e\u043a \u0441\u043e\u0431\u044b\u0442\u0438\u0439 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 "',u.name,'"']}),Object(c.jsxs)(o.c,{to:"/device/".concat(e,"/admin/events/create/"),className:"btn btn-outline-info ml-auto",device_id:e,children:["\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u0435 ",Object(c.jsx)("i",{className:""})]})]}),r.length>0?Object(c.jsx)(tt,{events:r,device_id:e,handlEventDelete:function(t){he(e,[t],(function(){l(r.filter((function(e){return t!==e.id})))}))},toggleEventEnable:function(t){var n=[Object(j.a)(Object(j.a)({},t),{},{enable:!t.enable})];ue(e,n,(function(e){var t=r.map((function(t){return e[0].id===t.id?Object(j.a)({},e[0]):t}));l(t)}),(function(e){console.log(e)}))}}):Object(c.jsx)(ct,{})]})})]})}function tt(e){var t=e.events,n=e.device_id,a=e.handlEventDelete,r=e.toggleEventEnable;return Object(c.jsx)(s.a.Fragment,{children:Object(c.jsxs)("table",{className:"table table-dark table-sm table-hover mb-0",children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{className:"text-secondary",children:[Object(c.jsx)("th",{className:"border-0",children:"\u2116"}),Object(c.jsx)("th",{className:"border-0",children:"\u0421\u043e\u0431\u044b\u0442\u0438\u0435"}),Object(c.jsx)("th",{className:"border-0",children:"\u041a\u043e\u043d\u0442\u0440\u043e\u043b\u0438\u0440\u0443\u0435\u0442\u0441\u044f"}),Object(c.jsx)("th",{className:"border-0",children:"\u0421\u0435\u0439\u0447\u0430\u0441 \u0430\u043a\u0442\u0438\u0432\u043d\u044b"}),Object(c.jsx)("th",{className:"border-0",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})}),Object(c.jsx)("tbody",{children:Object(c.jsx)(nt,{events:t,device_id:n,handlEventDelete:a,toggleEventEnable:r})})]})})}function nt(e){var t=e.events,n=e.device_id,a=e.handlEventDelete,r=e.toggleEventEnable;return Object(c.jsx)(s.a.Fragment,{children:t.map((function(e,t){return Object(c.jsx)(s.a.Fragment,{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{className:"text-secondary py-2",children:t+1}),Object(c.jsx)("td",{className:"py-0",children:Object(c.jsx)(o.c,{to:"/device/".concat(n,"/admin/events/").concat(e.id,"/detail/"),className:"btn btn-link w-100 text-left pl-0 py-2 text-light",children:e.raise_message?e.raise_message:Object(c.jsx)("i",{className:"text-secondary",children:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043d\u0435 \u0437\u0430\u0434\u0430\u043d\u043e ..."})})}),Object(c.jsx)("td",{children:e.enable?Object(c.jsx)("button",{className:"btn btn-outline-dark fas fa-check text-success",onClick:function(){return r(e)}}):Object(c.jsx)("button",{className:"btn btn-outline-dark fas fa-times text-secondary",style:{fontSize:"1.3rem"},onClick:function(){return r(e)}})}),Object(c.jsx)("td",{children:e.is_active?Object(c.jsx)("i",{className:"fas fa-exclamation-triangle text-warning ml-3 py-2",style:{fontSize:"1.1rem"}}):""}),Object(c.jsxs)("td",{children:["  ",Object(c.jsx)("button",{className:"btn btn-outline-dark fas fa-times text-danger",style:{fontSize:"1.2rem"},onClick:function(){return a(e.id)}})]})]})},t)}))})}function ct(){return Object(c.jsx)("i",{className:"text-secondary ",children:"\u0421\u043e\u0431\u044b\u0442\u0438\u044f \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442 ..."})}function at(){var e=Object(d.h)(),t=e.event_id,n=e.device_id,r=Object(a.useState)({}),l=Object(i.a)(r,2),o=l[0],j=l[1],b=Object(a.useState)(null),m=Object(i.a)(b,2),u=m[0],h=m[1],x=s.a.useState(!0),O=Object(i.a)(x,2),p=O[0],f=O[1],g=Object(d.g)();return Object(a.useEffect)((function(){me(n,[t],(function(e){j(e[0]),f(!1)}))}),[]),Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)("h3",{className:"mb-3",children:"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0441\u043e\u0431\u044b\u0442\u0438\u044f"}),Object(c.jsx)("div",{className:"p-3 mx-1 my-0 bg-dark rounded text-light",style:{minHeight:"calc(100vh - 135px)"},children:p?Object(c.jsx)("div",{className:"d-flex justify-content-center",children:Object(c.jsx)(P,{})}):Object(c.jsxs)(Se,{children:[Object(c.jsx)("h5",{className:"text-info text-center mb-3",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432 \u0441\u043e\u0431\u044b\u0442\u0438\u044f"}),Object(c.jsx)(rt,{event:o,formErrors:u,onSubmit:function(e){ue(n,[e],(function(){h(null),g.push("/device/".concat(n,"/admin/events/"))}),(function(e){h(e[0])}))},onCancel:function(){g.push("/device/".concat(n,"/admin/events/"))},onDelete:function(){he(n,[t],(function(){g.push("/device/".concat(n,"/admin/events/"))}))}})]})})]})}function st(){var e=Object(d.h)().device_id,t={device:e,enable:!1,category:"Alarm"},n=Object(a.useState)(null),r=Object(i.a)(n,2),l=r[0],o=r[1],j=Object(d.g)();return Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)("h3",{className:"mb-3",children:"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0441\u043e\u0431\u044b\u0442\u0438\u044f"}),Object(c.jsx)("div",{className:"p-3 mx-1 my-0 bg-dark rounded text-light",style:{minHeight:"calc(100vh - 135px)"},children:Object(c.jsxs)(Se,{children:[Object(c.jsx)("h5",{className:"text-info text-center mb-3",children:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043d\u043e\u0432\u043e\u0433\u043e \u0441\u043e\u0431\u044b\u0442\u0438\u044f"}),Object(c.jsx)(rt,{event:t,formErrors:l,onSubmit:function(t){ue(e,[t],(function(){o(null),j.push("/device/".concat(e,"/admin/events/"))}),(function(e){o(e[0])}))},onCancel:function(){j.push("/device/".concat(e,"/admin/events/"))}})]})})]})}function rt(e){var t=Object(a.useState)(e.event),n=Object(i.a)(t,2),r=n[0],l=n[1],o=e.onSubmit,d=e.onCancel,b=e.onDelete,m={minWidth:"150px"};return Object(c.jsx)(s.a.Fragment,{children:Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(),o(r)},children:[Object(c.jsx)(ke,{titel:"\u0410\u043a\u0442\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c \u0441\u043e\u0431\u044b\u0442\u0438\u044f",id:"enable",checked:r.enable,onChange:function(e){l(Object(j.a)(Object(j.a)({},r),{},{enable:e.target.checked}))},errors:e.formErrors?e.formErrors.enable:null}),Object(c.jsx)(ve,{titel:"\u0424\u043e\u0440\u043c\u0443\u043b\u0430",id:"expression",placeholder:"...",value:r.expression,onChange:function(e){l(Object(j.a)(Object(j.a)({},r),{},{expression:e.target.value}))},errors:e.formErrors?e.formErrors.expression:null,comment:Object(c.jsxs)("div",{children:[Object(c.jsxs)("button",{type:"button",className:"mt-3 btn btn-sm btn-outline-info","data-toggle":"collapse","data-target":"#expressions_help",children:["\u0421\u043f\u0440\u0430\u0432\u043a\u0430 ",Object(c.jsx)("i",{className:"far fa-question-circle"})]}),Object(c.jsxs)("p",{id:"expressions_help",className:"collapse mt-3 border-top border-bottom border-info py-3",children:["\u0412 \u0444\u043e\u0440\u043c\u0443\u043b\u0435 \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0445 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0439: ",Object(c.jsx)("br",{}),"- \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0435\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0442\u0435\u0433\u0430 ",Object(c.jsx)("kbd",{className:"ml-2",children:"{{tag_code}}"}),"  ",Object(c.jsx)("br",{}),"- \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u044b \u0441\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u044f",Object(c.jsx)("kbd",{className:"ml-2",title:"\u0420\u0430\u0432\u043d\u043e",children:"=="}),Object(c.jsx)("kbd",{className:"ml-2",title:"\u041d\u0435\u0440\u0430\u0432\u043d\u043e",children:"!="}),Object(c.jsx)("kbd",{className:"ml-2",title:"\u0411\u043e\u043b\u044c\u0448\u0435",children:">"}),Object(c.jsx)("kbd",{className:"ml-2",title:"\u041c\u0435\u043d\u044c\u0448\u0435",children:"<"}),Object(c.jsx)("kbd",{className:"ml-2",title:"\u0411\u043e\u043b\u044c\u0448\u0435 \u0438\u043b\u0438 \u0440\u0430\u0432\u043d\u043e",children:">="}),Object(c.jsx)("kbd",{className:"ml-2",title:"\u041c\u0435\u043d\u044c\u0448\u0435 \u0438\u043b\u0438 \u0440\u0430\u0432\u043d\u043e",children:"<="}),Object(c.jsx)("br",{}),"- \u0430\u0440\u0438\u0444\u043c\u0435\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u044b",Object(c.jsx)("kbd",{className:"ml-2",title:"\u0421\u0443\u043c\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435",children:"+"}),Object(c.jsx)("kbd",{className:"ml-2",title:"\u0412\u044b\u0447\u0438\u0442\u0430\u043d\u0438\u0435",children:"-"}),Object(c.jsx)("kbd",{className:"ml-2",title:"\u0414\u0435\u043b\u0435\u043d\u0438\u0435",children:"/"}),Object(c.jsx)("kbd",{className:"ml-2",title:"\u0414\u0435\u043b\u0435\u043d\u0438\u0435 \u0431\u0435\u0437 \u043e\u0441\u0442\u0430\u0442\u043a\u0430",children:"//"}),Object(c.jsx)("kbd",{className:"ml-2",title:"\u041e\u0441\u0442\u0430\u0442\u043e\u043a \u043e\u0442 \u0434\u0435\u043b\u0435\u043d\u0438\u044f",children:"%"}),Object(c.jsx)("kbd",{className:"ml-2",title:"\u0423\u043c\u043d\u043e\u0436\u0435\u043d\u0438\u0435",children:"*"}),Object(c.jsx)("kbd",{className:"ml-2",title:"\u0412\u043e\u0437\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u0432 \u0441\u0442\u0435\u043f\u0435\u043d\u044c",children:"**"}),Object(c.jsx)("br",{}),"- \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u044b",Object(c.jsx)("kbd",{className:"ml-2",title:"\u041b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0418",children:"and"}),Object(c.jsx)("kbd",{className:"ml-2",title:"\u041b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0418\u041b\u0418",children:"or"}),Object(c.jsx)("kbd",{className:"ml-2",title:"\u041b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0438\u043d\u0432\u0435\u0440\u0441\u0438\u044f",children:"not"}),Object(c.jsx)("br",{}),"- \u0431\u0438\u0442\u043e\u0432\u044b\u0435 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u044b",Object(c.jsx)("kbd",{className:"ml-2",title:"\u0411\u0438\u0442\u043e\u0432\u043e\u0435 \u0418",children:"&"}),Object(c.jsx)("kbd",{className:"ml-2",title:"\u0411\u0438\u0442\u043e\u0432\u043e\u0435 \u0418\u041b\u0418",children:"|"}),Object(c.jsx)("kbd",{className:"ml-2",title:"\u0411\u0438\u0442\u043e\u0432\u043e\u0435 \u0438\u0441\u043a\u043b\u044e\u0447\u0430\u044e\u0449\u0435\u0435 \u0418\u041b\u0418",children:"^"}),Object(c.jsx)("kbd",{className:"ml-2",title:"\u041f\u043e\u0431\u0438\u0442\u043e\u0432\u0430\u044f \u0438\u043d\u0432\u0435\u0440\u0441\u0438\u044f",children:"~"}),Object(c.jsx)("kbd",{className:"ml-2",title:"\u041f\u043e\u0431\u0438\u0442\u043e\u0432\u044b\u0439 \u0441\u0434\u0432\u0438\u0433 \u0432 \u043b\u0435\u0432\u043e",children:"<<"}),Object(c.jsx)("kbd",{className:"ml-2",title:"\u041f\u043e\u0431\u0438\u0442\u043e\u0432\u044b\u0439 \u0441\u0434\u0432\u0438\u0433 \u0432 \u043f\u0440\u0430\u0432\u043e",children:">>"}),Object(c.jsx)("br",{}),"\u041f\u0440\u0438\u043c\u0435\u0440\u044b \u0444\u043e\u0440\u043c\u0443\u043b:  ",Object(c.jsx)("br",{}),"- \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043b\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0442\u0435\u0433\u0430 tag1 \u0431\u043e\u043b\u044c\u0448\u0435 \u0438\u043b\u0438 \u0440\u0430\u0432\u043d\u043e 12.5 ",Object(c.jsx)("kbd",{className:"ml-2",children:"{{tag2}} >= 12.5"})," ",Object(c.jsx)("br",{}),"- \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0431\u0438\u0442\u0430 \u21165 \u0442\u0435\u0433\u0430 tag2 ",Object(c.jsx)("kbd",{className:"ml-2",children:"{{tag2}} >> 5 & 1"}),"  ",Object(c.jsx)("br",{}),"- \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0431\u0438\u0442\u0430 \u21160 \u0442\u0435\u0433\u0430 tag2 \u0438\u043b\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0431\u0438\u0442\u0430 \u211614 \u0442\u0435\u0433\u0430 tag3 ",Object(c.jsx)("kbd",{className:"ml-2",children:"({{tag2}} & 1) or ({{tag3}} >> 14 & 1)"})]})]})}),Object(c.jsx)(ve,{titel:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0441\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u043d\u0438\u044f",id:"raise_message",placeholder:"...",value:r.raise_message,onChange:function(e){l(Object(j.a)(Object(j.a)({},r),{},{raise_message:e.target.value}))},errors:e.formErrors?e.formErrors.raise_message:null}),Object(c.jsx)(ve,{titel:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f",id:"fall_message",placeholder:"...",value:r.fall_message,onChange:function(e){l(Object(j.a)(Object(j.a)({},r),{},{fall_message:e.target.value}))},errors:e.formErrors?e.formErrors.fall_message:null}),Object(c.jsx)(ye,{titel:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",id:"category",placeholder:"...",value:r.category,options:[{value:"Alarm",name:"\u0410\u0432\u0430\u0440\u0439\u043d\u043e\u0435"},{value:"Warning",name:"\u041f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u0435"},{value:"Info",name:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0435"},{value:"Debug",name:"\u041e\u0442\u043b\u0430\u0434\u043e\u0447\u043d\u043e\u0435"}],onChange:function(e){l(Object(j.a)(Object(j.a)({},r),{},{category:Ee(e)[0]}))},errors:e.formErrors?e.formErrors.category:null}),Object(c.jsx)("p",{className:"border-top border-secondary"}),Object(c.jsxs)("div",{className:"row",children:[Object(c.jsxs)("p",{className:"col-md-6",children:[" \u0422\u0435\u043a\u0443\u0449\u0435\u0435 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435:",r.is_active?Object(c.jsx)("span",{className:"text-warning",children:" \u0410\u041a\u0422\u0418\u0412\u041d\u041e "}):Object(c.jsx)("span",{className:"text-light",children:" \u041d\u0415 \u0410\u041a\u0422\u0418\u0412\u041d\u041e "})]}),Object(c.jsxs)("p",{className:"col-md-6",children:[" \u0412\u0440\u0435\u043c\u044f \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0433\u043e \u0441\u0440\u0430\u0431\u0442\u044b\u0432\u0430\u043d\u0438\u044f:",r.raise_time?Object(c.jsxs)("span",{children:[" ",lt(r.raise_time)," "]}):Object(c.jsx)("span",{className:"text-secondary",children:" \u041d\u0438\u043a\u043e\u0433\u0434\u0430 "})]})]}),Object(c.jsx)("p",{className:"border-top border-secondary"}),Object(c.jsxs)("div",{className:"d-flex flex-wrap justify-content-center",children:[Object(c.jsx)("button",{type:"submit",className:"btn btn-outline-primary m-2",style:m,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(c.jsx)("button",{type:"button",className:"btn btn-outline-secondary m-2",style:m,onClick:d,children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),e.onDelete&&Object(c.jsx)("button",{type:"button",className:"btn btn-outline-danger m-2",style:m,onClick:b,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})]})})}function lt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"long",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"medium",c=new Date(e),a=new Intl.DateTimeFormat([],{dateStyle:t,timeStyle:n});return a.format(c)}var it="http://localhost:8000";function ot(){var e=Object(d.h)().id,t=s.a.useState({}),n=Object(i.a)(t,2),r=n[0],l=n[1];function o(t){l(t),function(e,t,n){jt.apply(this,arguments)}(e,t)}return Object(a.useEffect)((function(){!function(e,t){dt.apply(this,arguments)}(e,(function(e){l(w(e.template))}))}),[]),Object(c.jsx)(s.a.Fragment,{children:Object(c.jsx)("div",{className:"bg-color-dark-gray text-secondary h-100",children:Object(c.jsxs)("div",{className:"row m-0 p-0",children:[Object(c.jsx)(k,{deviceId:e}),Object(c.jsx)("div",{className:"col-10 m-0 p-0",children:Object(c.jsx)("div",{className:"content-height p-3",children:Object(c.jsxs)(d.d,{children:[Object(c.jsx)(d.b,{exact:!0,path:"/device/:device_id/overview/",component:function(){return Object(c.jsx)(ae,{widgetsTemplate:r})}}),Object(c.jsx)(d.b,{exact:!0,path:"/device/:device_id/settings/",component:function(){return Object(c.jsx)(se,{})}}),Object(c.jsx)(d.b,{exact:!0,path:"/device/:device_id/events/",component:function(){return Object(c.jsx)(le,{})}}),Object(c.jsx)(d.b,{exact:!0,path:"/device/:device_id/graphs/",component:function(){return Object(c.jsx)(oe,{})}}),Object(c.jsx)(d.b,{path:"/device/:device_id/admin/config/",component:function(){return Object(c.jsx)(Be,{})}}),Object(c.jsx)(d.b,{exact:!0,path:"/device/:device_id/admin/widgets/",component:function(){return Object(c.jsx)(Me,{updateWidgetsTemplate:o,widgetsTemplate:r})}}),Object(c.jsx)(d.b,{exact:!0,path:"/device/:device_id/admin/events/",component:function(){return Object(c.jsx)(et,{})}}),Object(c.jsx)(d.b,{exact:!0,path:"/device/:device_id/admin/events/:event_id/detail/",component:function(){return Object(c.jsx)(at,{})}}),Object(c.jsx)(d.b,{exact:!0,path:"/device/:device_id/admin/events/create/",component:function(){return Object(c.jsx)(st,{})}}),Object(c.jsx)(d.b,{component:ze})]})})})]})})})}function dt(){return(dt=Object(h.a)(u.a.mark((function e(t,n){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.get(it+"/widgets/template/",{params:{id:t}});case 2:c=e.sent,n(Object(j.a)({},c.data));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jt(){return(jt=Object(h.a)(u.a.mark((function e(t,n,c){var a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={template:n},e.next=3,g.post(it+"/widgets/template/",a,{params:{id:t}});case 3:s=e.sent,c&&c(Object(j.a)({},s.data));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bt(){return Object(c.jsx)("div",{className:"col-2 m-0 p-0",children:Object(c.jsx)("div",{className:"bg-dark bg-color-gray p-2 h-100",children:Object(c.jsx)("div",{className:"p-1",children:Object(c.jsxs)("div",{className:"nav flex-column nav-pills",style:{overflow:"hidden"},id:"v-pills-tab",role:"tablist","aria-orientation":"vertical",children:[Object(c.jsx)(o.c,{className:"nav-link text-light btn",style:{outline:"none",boxShadow:"none"},activeClassName:"bg-dark",to:"/company/overview/",children:Object(c.jsxs)("div",{className:"d-inline-flex w-100 justify-content-center justify-content-lg-start",children:[Object(c.jsx)("i",{className:"fas fa-home",style:{fontSize:"1.3em"}}),Object(c.jsx)("span",{className:"pl-3 d-none d-lg-inline",children:"\u041e\u0431\u0437\u043e\u0440"})]})}),Object(c.jsx)(o.c,{className:"nav-link text-light btn",style:{outline:"none",boxShadow:"none"},activeClassName:"bg-dark",to:"/company/map/",children:Object(c.jsxs)("div",{className:"d-inline-flex w-100 justify-content-center justify-content-lg-start",children:[Object(c.jsx)("i",{className:"fas fa-map-marked-alt",style:{fontSize:"1.3em"}}),Object(c.jsx)("span",{className:"pl-3 d-none d-lg-inline",children:"\u041a\u0430\u0440\u0442\u0430"})]})}),Object(c.jsx)(o.c,{className:"nav-link text-light btn",style:{outline:"none",boxShadow:"none"},activeClassName:"bg-dark",to:"/company/employers/",children:Object(c.jsxs)("div",{className:"d-inline-flex w-100 justify-content-center justify-content-lg-start",children:[Object(c.jsx)("i",{className:"fas fa-users",style:{fontSize:"1.3em"}}),Object(c.jsx)("span",{className:"pl-3 d-none d-lg-inline",children:"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0438"})]})}),Object(c.jsx)(o.c,{className:"nav-link text-light btn",style:{outline:"none",boxShadow:"none"},activeClassName:"bg-dark",to:"/company/profile/",children:Object(c.jsxs)("div",{className:"d-inline-flex w-100 justify-content-center justify-content-lg-start",children:[Object(c.jsx)("i",{className:"fas fa-chalkboard-teacher",style:{fontSize:"1.3em"}}),Object(c.jsx)("span",{className:"pl-3 d-none d-lg-inline",children:"\u041a\u0430\u0431\u0438\u043d\u0435\u0442"})]})})]})})})})}function mt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text-light",n=new Date(e),a=new Date;if(n>(a=a.setDate(a.getDate()-1))){var s=new Intl.DateTimeFormat([],{hour:"2-digit",minute:"2-digit"});return Object(c.jsx)("span",{className:t,children:s.format(n)})}var r=new Intl.DateTimeFormat([],{month:"short",day:"numeric"});return Object(c.jsx)("span",{className:t,children:r.format(n)})}var ut=function(e){var t=s.a.useState({}),n=Object(i.a)(t,2),r=n[0],l=n[1],d=e.device;function b(){g.get("http://localhost:8000/device/parameters/",{params:{id:d.id}}).then((function(e){if(e){var t=e.data;l(Object(j.a)({},t))}}))}return Object(a.useEffect)((function(){b();var e=setInterval(b,5e3);return function(){clearInterval(e)}}),[]),Object(c.jsx)(s.a.Fragment,{children:Object(c.jsx)(o.b,{className:"nav-link p-0 m-0",to:"/device/".concat(d.id,"/overview/"),children:Object(c.jsxs)("div",{className:"border border-secondary rounded p-2 h-100 bg-dark text-light card-hover",style:{overflow:"hidden"},children:[Object(c.jsx)("h6",{className:"text-nowrap",children:d.name}),Object(c.jsx)("div",{className:"p-0 m-0 small w-100",children:Object(c.jsx)("table",{className:"table table-sm p-0 m-0 table-dark text-light w-100",children:Object(c.jsxs)("tbody",{children:[Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:" \u0421\u0432\u044f\u0437\u044c: "}),Object(c.jsxs)("td",{className:"text-right",children:[" ",r.is_online?Object(c.jsx)("span",{className:"text-light",children:"\u041e\u041a"}):Object(c.jsx)("span",{className:"badge badge-pill badge-danger text-dark",style:{fontSize:"0.85em"},children:"\u041d\u0415\u0422"})]})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:"  \u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u043e: "}),Object(c.jsxs)("td",{className:"text-right",children:[" ",r.last_update?mt(r.last_update,r.is_online?null:"text-warning"):Object(c.jsx)("span",{className:"text-secondary",children:"\u043d\u0438\u043a\u043e\u0433\u0434\u0430"})]})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:"   \u0410\u0432\u0430\u0440\u0438\u0438: "}),Object(c.jsx)("td",{className:"text-right",children:" \u041d\u0435\u0442  "})]})]})})})]})})})};var ht=function(e){var t,n=e.facilityInfo,a=n.devices;return Object(c.jsx)(s.a.Fragment,{children:Object(c.jsxs)("div",{className:"card bg-dark text-light shadow-sm p-0 m-0",children:[Object(c.jsx)("h6",{className:"px-2 pt-2 pb-0 m-0",children:n.name}),Object(c.jsx)("div",{className:"container-fluid h-100 p-1 m-0 row",children:a.length>0?(t=a,t.map((function(e,t){return Object(c.jsx)("div",{className:"col-lg-4 col-md-6 col-sm-12 p-1 m-0 h-100",children:Object(c.jsx)(ut,{device:e,index:t})},e.id)}))):Object(c.jsx)("p",{className:"text-secondary p-1",children:"\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432 \u043d\u0435\u0442 ..."})})]})})},xt="http://localhost:8000";function Ot(){var e=Object(a.useState)({}),t=Object(i.a)(e,2),n=t[0],r=t[1],l=s.a.useState(!0),o=Object(i.a)(l,2),d=o[0],j=o[1];return Object(a.useEffect)((function(){!function(e){pt.apply(this,arguments)}((function(e){r(e),j(!1)}))}),[]),Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsxs)("h3",{className:"px-3 pt-3 pb-0",children:["\u041f\u0440\u0435\u0434\u043f\u0440\u0438\u044f\u0442\u0438\u0435 ",Object(c.jsx)("b",{children:d?null:n.company.name})]}),Object(c.jsx)("div",{className:"container-fluid py-0 px-2 m-0 row",children:d?Object(c.jsx)(P,{}):Object(c.jsx)(s.a.Fragment,{children:n.facilities.map((function(e,t){return Object(c.jsx)("div",{className:"container-fluid px-2 py-0 mx-0 my-2 col-xl-6",children:Object(c.jsx)(ht,{facilityInfo:e,index:t})},e.id)}))})})]})}function pt(){return(pt=Object(h.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.get(xt+"/company/info/");case 2:n=e.sent,t(Object(j.a)({},n.data));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ft(){return Object(c.jsx)(s.a.Fragment,{children:Object(c.jsxs)("div",{className:"p-3",children:[Object(c.jsx)("h3",{children:"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0438 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438"}),Object(c.jsx)("p",{children:"\u0420\u0430\u0437\u0434\u0435\u043b \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u044c\u0441\u044f \u0432 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435 ... "})]})})}function gt(){return Object(c.jsx)(s.a.Fragment,{children:Object(c.jsxs)("div",{className:"p-3",children:[Object(c.jsx)("h3",{children:"\u041e\u0431\u044a\u0435\u043a\u0442\u044b \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438 \u043d\u0430 \u043a\u0430\u0440\u0442\u0435"}),Object(c.jsx)("p",{children:"\u0420\u0430\u0437\u0434\u0435\u043b \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u044c\u0441\u044f \u0432 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435 ... "})]})})}function vt(){return Object(c.jsx)(s.a.Fragment,{children:Object(c.jsxs)("div",{className:"p-3",children:[Object(c.jsx)("h3",{children:"\u041a\u0430\u0431\u0438\u043d\u0435\u0442"}),Object(c.jsx)("p",{children:"\u0420\u0430\u0437\u0434\u0435\u043b \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u044c\u0441\u044f \u0432 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435 ... "})]})})}function Nt(){return Object(c.jsx)(s.a.Fragment,{children:Object(c.jsx)("div",{className:"bg-color-dark-gray text-secondary h-100",children:Object(c.jsxs)("div",{className:"row m-0 p-0",children:[Object(c.jsx)(bt,{}),Object(c.jsx)("div",{className:"col-10 m-0 p-0",children:Object(c.jsx)("div",{className:"content-height",children:Object(c.jsxs)(d.d,{children:[Object(c.jsx)(d.b,{exact:!0,path:"/company",component:Ot}),Object(c.jsx)(d.b,{exact:!0,path:"/company/overview",component:Ot}),Object(c.jsx)(d.b,{exact:!0,path:"/company/map",component:gt}),Object(c.jsx)(d.b,{exact:!0,path:"/company/employers",component:ft}),Object(c.jsx)(d.b,{exact:!0,path:"/company/profile",component:vt}),Object(c.jsx)(d.b,{component:ze})]})})})]})})})}var yt=n(24),wt=n(16),kt=n(26),_t=n(25),Ct=function(e){Object(kt.a)(n,e);var t=Object(_t.a)(n);function n(e){var c;return Object(x.a)(this,n),(c=t.call(this,e)).state={username:"",password:""},c.handleChange=c.handleChange.bind(Object(wt.a)(c)),c.handleSubmit=c.handleSubmit.bind(Object(wt.a)(c)),c}return Object(O.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(yt.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();v.login(this.state.username,this.state.password,(function(){t.props.history.push("/company/overview/")}))}},{key:"render",value:function(){return Object(c.jsx)("div",{className:"bg-color-dark-gray text-secondary content-height",children:Object(c.jsxs)("div",{className:"container card p-3 mt-5 bg-dark",style:{maxWidth:"500px"},children:[Object(c.jsx)("h2",{children:"\u0412\u0445\u043e\u0434"}),Object(c.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"username",children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c:"}),Object(c.jsx)("input",{name:"username",type:"text",className:"form-control bg-secondary border-secondary text-light",id:"username",value:this.state.username,onChange:this.handleChange})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"pwd",children:"\u041f\u0430\u0440\u043e\u043b\u044c:"}),Object(c.jsx)("input",{name:"password",type:"password",className:"form-control bg-secondary border-secondary text-light",id:"pwd",value:this.state.password,onChange:this.handleChange})]}),Object(c.jsx)("button",{type:"submit",className:"btn btn-outline-primary",children:"\u0412\u043e\u0439\u0442\u0438"}),Object(c.jsxs)("div",{className:"pt-3",children:[Object(c.jsx)("span",{className:"pr-2 text-secondary",children:"\u0415\u0449\u0435 \u043d\u0435 \u0437\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"}),Object(c.jsx)(o.b,{className:"",to:"/user/registration/",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})]})]})]})})}}]),n}(a.Component),St=function(e){Object(kt.a)(n,e);var t=Object(_t.a)(n);function n(e){var c;return Object(x.a)(this,n),(c=t.call(this,e)).state={username:"",password:"",email:"",errors:{username:null,email:null,password:null}},c.handleChange=c.handleChange.bind(Object(wt.a)(c)),c.handleSubmit=c.handleSubmit.bind(Object(wt.a)(c)),c}return Object(O.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(yt.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(){var e=Object(h.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,g.post("/user/create/",{username:this.state.username,email:this.state.email,password:this.state.password});case 4:return n=e.sent,e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0.stack),this.setState({errors:e.t0.response.data});case 12:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(c.jsx)("div",{className:"bg-color-dark-gray text-secondary content-height",children:Object(c.jsxs)("div",{className:"container card p-3 mt-5 bg-dark",style:{maxWidth:"500px"},children:[Object(c.jsx)("h2",{children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(c.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"username",children:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:"}),Object(c.jsx)("input",{name:"username",type:"text",className:"form-control bg-secondary border-secondary text-light",id:"username",value:this.state.username,onChange:this.handleChange}),this.state.errors.username?Object(c.jsx)("span",{className:"text-danger",children:this.state.errors.username}):null]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"mail",children:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430:"}),Object(c.jsx)("input",{name:"email",type:"email",className:"form-control bg-secondary border-secondary text-light",id:"mail",value:this.state.email,onChange:this.handleChange}),this.state.errors.email?Object(c.jsx)("span",{className:"text-danger",children:this.state.errors.email}):null]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"pwd",children:"\u041f\u0430\u0440\u043e\u043b\u044c:"}),Object(c.jsx)("input",{name:"password",type:"password",className:"form-control bg-secondary border-secondary text-light",id:"pwd",value:this.state.password,onChange:this.handleChange}),this.state.errors.password?Object(c.jsx)("span",{className:"text-danger",children:this.state.errors.password}):null]}),Object(c.jsx)("button",{type:"submit",className:"btn btn-outline-primary",children:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c"}),Object(c.jsxs)("div",{className:"pt-3",children:[Object(c.jsx)("span",{className:"pr-2 text-secondary",children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"}),Object(c.jsx)(o.b,{className:"",to:"/user/login/",children:"\u0412\u0445\u043e\u0434"})]})]})]})})}}]),n}(a.Component);function Et(e){return Object(c.jsx)(s.a.Fragment,{children:Object(c.jsx)("div",{className:"bg-color-dark-gray text-secondary content-height",children:Object(c.jsxs)("div",{className:"container card bg-dark shadow-sm my-4 pt-4",children:[Object(c.jsx)("h2",{children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),Object(c.jsx)("div",{className:"row my-3",children:Object(c.jsx)("div",{className:"col-lg-6",children:Object(c.jsx)("table",{className:"table text-light tadle-dark ",children:Object(c.jsxs)("tbody",{children:[Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{className:"border-secondary",children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c:"}),Object(c.jsx)("td",{className:"border-secondary",children:Object(c.jsx)("b",{children:e.userInfo.username})})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{className:"border-secondary",children:"\u0418\u043c\u044f:"}),Object(c.jsx)("td",{className:"border-secondary",children:Object(c.jsx)("b",{children:e.userInfo.first_name})})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{className:"border-secondary",children:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f:"}),Object(c.jsx)("td",{className:"border-secondary",children:Object(c.jsx)("b",{children:e.userInfo.last_name})})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{className:"border-secondary",children:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430:"}),Object(c.jsx)("td",{className:"border-secondary",children:Object(c.jsx)("b",{children:e.userInfo.email})})]})]})})})})]})})})}var Ft=function(e){Object(kt.a)(n,e);var t=Object(_t.a)(n);function n(e){var c;return Object(x.a)(this,n),(c=t.call(this,e)).handleLogout=c.handleLogout.bind(Object(wt.a)(c)),c}return Object(O.a)(n,[{key:"handleLogout",value:function(){var e=this;v.logout((function(){e.props.history.push("/")}))}},{key:"render",value:function(){return Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)(o.b,{className:"nav-link",to:"",onClick:this.handleLogout,children:"\u0412\u044b\u0439\u0442\u0438"})})}}]),n}(a.Component),Tt=Object(d.i)(Ft);function It(e){var t=e.authed,n=e.userInfo;return Object(c.jsxs)("nav",{className:"navbar navbar-expand-sm bg-dark navbar-dark bg-color-indigo header-height p-0 m-0",children:[Object(c.jsx)(o.b,{className:"navbar-brand header-height py-2 pl-3 pr-0 m-0",to:"/",children:"WebArm"}),Object(c.jsx)("button",{className:"navbar-toggler header-height border-0 m-0",style:{outline:"none",boxShadow:"none"},type:"button","data-toggle":"collapse","data-target":"#collapsibleNavbar",children:Object(c.jsx)("span",{className:"navbar-toggler-icon"})}),Object(c.jsxs)("div",{className:"collapse navbar-collapse bg-color-indigo",id:"collapsibleNavbar",style:{zIndex:"1"},children:[Object(c.jsx)("div",{className:"d-md-none border-top border-secondary"}),Object(c.jsx)("ul",{className:"navbar-nav px-3",children:t?Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)(o.b,{className:"nav-link",to:"/company/overview",children:"\u041f\u0440\u0435\u0434\u043f\u0440\u0438\u044f\u0442\u0438\u0435"})}),Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)(o.b,{className:"nav-link",to:"/company/facilities",children:"\u041e\u0431\u044c\u0435\u043a\u0442\u044b"})}),Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)(o.b,{className:"nav-link",to:"/company/profile",children:"\u041a\u0430\u0431\u0438\u043d\u0435\u0442"})})]}):null}),Object(c.jsx)("ul",{className:"navbar-nav ml-auto px-3",children:t?Object(c.jsxs)(s.a.Fragment,{children:[n?Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)(o.b,{className:"nav-link",to:"/user/profile",children:n.username})}),Object(c.jsx)("li",{className:"nav-item border-right border-secondary my-1 d-none d-sm-inline",children:" "})]}):null,Object(c.jsx)(Tt,{})]}):Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)(o.b,{className:"nav-link",to:"/user/login",children:"\u0412\u043e\u0439\u0442\u0438"})})})]})]})}var Dt=function(e){return Object(c.jsx)(s.a.Fragment,{children:Object(c.jsx)("div",{className:"bg-color-dark-gray text-light content-height",children:Object(c.jsxs)("div",{className:"container card mt-5 p-3 w-100",style:{background:"rgba(0,0,0,0.8)"},children:[Object(c.jsx)("div",{className:"text-center pt-4",children:Object(c.jsxs)("h3",{children:["\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c \u043d\u0430 ",Object(c.jsx)("b",{children:"BFCloud"})]})}),Object(c.jsx)("br",{}),Object(c.jsx)("div",{className:"text-center",children:Object(c.jsxs)("h5",{children:["\u0414\u043b\u044f \u043d\u0430\u0447\u0430\u043b\u0430 \u0440\u0430\u0431\u043e\u0442\u044b",Object(c.jsx)(o.b,{className:"px-2",to:"/user/login/",children:"\u0412\u043e\u0439\u0434\u0438\u0442\u0435"}),"\u0438\u043b\u0438",Object(c.jsx)(o.b,{className:"px-2",to:"/user/registration/",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0439\u0442\u0435\u0441\u044c"})]})}),Object(c.jsxs)("div",{className:"card-columns py-5",children:[Object(c.jsx)("div",{className:"card border-secondary",style:{background:"none"},children:Object(c.jsx)("div",{className:"card-body text-center",children:Object(c.jsx)("h6",{children:"\u0423\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0439 \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433\u0430 \u0438 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u043c\u044b\u0448\u043b\u0435\u043d\u043d\u044b\u043c\u0438 \u0438 IoT \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430\u043c\u0438"})})}),Object(c.jsx)("div",{className:"card border-secondary",style:{background:"none"},children:Object(c.jsx)("div",{className:"card-body text-center",children:Object(c.jsx)("h6",{children:"\u041a\u043e\u043d\u0442\u0440\u043e\u043b\u044c \u0430\u0432\u0430\u0440\u0438\u0439\u043d\u044b\u0445 \u0441\u043e\u0431\u044b\u0442\u0438\u0439 \u0438 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0435 \u043e \u0441\u043e\u0431\u044b\u0442\u0438\u044f\u0445 \u043d\u0430 \u043e\u0431\u044a\u0435\u043a\u0442\u0435 "})})}),Object(c.jsx)("div",{className:"card border-secondary",style:{background:"none"},children:Object(c.jsx)("div",{className:"card-body text-center",children:Object(c.jsx)("h6",{children:"\u041f\u0440\u043e\u0441\u0442\u043e\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043e\u043f\u0440\u043e\u0441\u0430 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432"})})}),Object(c.jsx)("div",{className:"card border-secondary",style:{background:"none"},children:Object(c.jsx)("div",{className:"card-body text-center",children:Object(c.jsx)("h6",{children:"\u041e\u0442\u043a\u0440\u044b\u0442\u044b\u0439 API \u0434\u043b\u044f \u0438\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u0438 \u0441 \u0441\u0442\u043e\u0440\u043e\u043d\u043d\u0438\u043c \u041f\u041e \u0438 IoT \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430\u043c\u0438"})})}),Object(c.jsx)("div",{className:"card border-secondary",style:{background:"none"},children:Object(c.jsx)("div",{className:"card-body text-center",children:Object(c.jsx)("h6",{children:"\u0415\u0434\u0438\u043d\u044b\u0439 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 \u0434\u043b\u044f \u041f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0445 \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440\u043e\u0432 \u0438 \u041c\u043e\u0431\u0438\u043b\u044c\u043d\u044b\u0445 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432 "})})}),Object(c.jsx)("div",{className:"card border-secondary",style:{background:"none"},children:Object(c.jsx)("div",{className:"card-body text-center",children:Object(c.jsxs)("h6",{children:[" \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u043e\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0434\u0435\u043c\u043e-\u0432\u0435\u0440\u0441\u0438\u0435\u0439 \u0441\u0435\u0440\u0432\u0438\u0441\u0430",Object(c.jsx)("a",{className:"px-2",href:"#",onClick:function(){v.login("admin","admin",(function(){e.history.push("/company/overview/")}))},children:"\u0414\u0435\u043c\u043e-\u0432\u0435\u0440\u0441\u0438\u044f: \u0411\u0423\u041c\u041f-14"})]})})})]})]})})})};function Wt(){var e=Object(a.useState)(!0),t=Object(i.a)(e,2),n=t[0],r=t[1],l=Object(a.useState)(!0),j=Object(i.a)(l,2),b=j[0],m=j[1],u=Object(a.useState)(!1),h=Object(i.a)(u,2),x=h[0],O=h[1],p=Object(a.useState)({}),f=Object(i.a)(p,2),g=f[0],w=f[1],k=Object(y.b)();return Object(a.useEffect)((function(){v.checkAuthentication((function(){r(!1)})),v.onLogin=function(){O(!0)},v.onLogout=function(){O(!1)},v.onUserInfoReaded=function(e){w(e),m(!1)}}),[]),n||b?null:Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)("button",{className:"full-screen-button fas fa-expand ",onClick:k.enter}),Object(c.jsx)(y.a,{handle:k,children:Object(c.jsxs)(o.a,{children:[Object(c.jsx)(d.b,{exact:!0,path:"/",component:function(){return Object(c.jsx)("video",{autoplay:"autoplay",muted:!0,loop:"loop",id:"myVideo",children:Object(c.jsx)("source",{src:"Earth13426.mp4",type:"video/mp4"})})}}),Object(c.jsx)(It,{authed:x,userInfo:g}),Object(c.jsxs)(d.d,{children:[Object(c.jsx)(d.b,{exact:!0,path:"/",component:Dt}),Object(c.jsx)(d.b,{exact:!0,path:"/user/login",component:Ct}),Object(c.jsx)(d.b,{exact:!0,path:"/user/registration",component:St}),Object(c.jsx)(N,{exact:!0,path:"/user/profile",component:function(){return Object(c.jsx)(Et,{userInfo:g})}}),Object(c.jsx)(N,{path:"/company",component:Nt}),Object(c.jsx)(N,{path:"/device/:id",component:ot}),Object(c.jsx)(d.b,{component:ze})]})]})})]})}var Lt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,128)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),s(e),r(e)}))};l.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(Wt,{})}),document.getElementById("root")),Lt()},76:function(e,t,n){},77:function(e,t,n){}},[[126,1,2]]]);
//# sourceMappingURL=main.d7a010d3.chunk.js.map