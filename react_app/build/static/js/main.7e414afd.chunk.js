(this.webpackJsonpreact_app=this.webpackJsonpreact_app||[]).push([[0],{47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a(1),s=a.n(c),i=a(33),l=a.n(i),r=(a(47),a(23)),d=a(7);a(48);function j(){return Object(n.jsxs)("nav",{className:"navbar navbar-expand-sm bg-dark navbar-dark bg-color-indigo header-height m-0",children:[Object(n.jsx)("a",{className:"navbar-brand",href:"#",children:"WebArm"}),Object(n.jsxs)("ul",{className:"navbar-nav",children:[Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)("a",{className:"nav-link",href:"#",children:"\u041f\u0440\u0435\u0434\u043f\u0440\u0438\u044f\u0442\u0438\u0435"})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)("a",{className:"nav-link",href:"#",children:"\u041e\u0431\u044c\u0435\u043a\u0442\u044b"})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)("a",{className:"nav-link",href:"#",children:"\u041a\u0430\u0431\u0438\u043d\u0435\u0442"})})]}),Object(n.jsx)("ul",{className:"navbar-nav ml-auto",children:Object(n.jsx)("li",{className:"nav-item ml-auto",children:Object(n.jsx)("a",{className:"nav-link",href:"#",children:"\u0412\u043e\u0439\u0442\u0438"})})})]})}function o(){return Object(n.jsx)("div",{className:"col-2 m-0 p-0",children:Object(n.jsx)("div",{className:"bg-dark bg-color-pale-indigo p-3 h-100",children:Object(n.jsxs)("div",{className:"nav flex-column nav-pills ",id:"v-pills-tab",role:"tablist","aria-orientation":"vertical",children:[Object(n.jsx)("a",{className:"nav-link active",id:"v-pills-home-tab","data-toggle":"pill",href:"#v-pills-home",role:"tab","aria-controls":"v-pills-home","aria-selected":"true",children:"\u041e\u0431\u0437\u043e\u0440"}),Object(n.jsx)("a",{className:"nav-link",id:"v-pills-profile-tab","data-toggle":"pill",href:"#v-pills-profile",role:"tab","aria-controls":"v-pills-profile","aria-selected":"false",children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"}),Object(n.jsx)("a",{className:"nav-link",id:"v-pills-messages-tab","data-toggle":"pill",href:"#v-pills-messages",role:"tab","aria-controls":"v-pills-messages","aria-selected":"false",children:"\u0413\u0440\u0430\u0444\u0438\u043a\u0438"}),Object(n.jsx)("a",{className:"nav-link",id:"v-pills-settings-tab","data-toggle":"pill",href:"#v-pills-settings",role:"tab","aria-controls":"v-pills-settings","aria-selected":"false",children:"\u0416\u0443\u0440\u043d\u0430\u043b"})]})})})}a(49);function b(){return Object(n.jsxs)("div",{className:"lds-ellipsis",children:[Object(n.jsx)("div",{}),Object(n.jsx)("div",{}),Object(n.jsx)("div",{}),Object(n.jsx)("div",{})]})}var h=function(e){var t=e.tag,a=e.index;return Object(n.jsxs)("tr",{children:[Object(n.jsxs)("td",{children:[" ",a+1," "]}),Object(n.jsxs)("td",{children:[" ",t.code," "]}),Object(n.jsxs)("td",{children:[" ",t.name," "]}),Object(n.jsxs)("td",{children:[" ",t.value," "]})]})};var u=function(e){return Object(n.jsx)("div",{children:Object(n.jsx)("div",{className:"table-responsive",children:Object(n.jsxs)("table",{className:"table table-striped table-sm",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:"\u2116"}),Object(n.jsx)("td",{children:"\u041a\u043e\u0434 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430"}),Object(n.jsx)("td",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430"}),Object(n.jsx)("td",{children:"\u0422\u0435\u043a\u0443\u0449\u0435\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435"})]})}),Object(n.jsx)("tbody",{children:e.tags.map((function(e,t){return Object(n.jsx)(h,{tag:e,index:t},e.code)}))})]})})})},v=(a(50),a(3));var m=function(e){var t=this,a=e.tags,c=s.a.useState(null),i=Object(d.a)(c,2),l=i[0],r=i[1],j=Object(n.jsx)("button",{className:"btn btn-secondary m-3 btn-graph",onClick:function(){return r(null)},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043c\u0430\u0441\u0448\u0442\u0430\u0431"});return a.filter((function(e){return!1===e.disabled})).length>0?Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsx)("div",{className:"graph-container",children:Object(n.jsxs)(v.e,{height:400,width:1e3,margin:{left:30,right:0,top:0,bottom:30},xType:"time",animation:!0,xDomain:l&&[l.left,l.right],yDomain:l&&[l.bottom,l.top],children:[Object(n.jsx)(v.b,{}),Object(n.jsx)(v.d,{tickTotal:20}),Object(n.jsx)(v.f,{}),a.map((function(e){return e.disabled?null:Object(n.jsx)(v.c,{data:e.values,color:e.curve_color},e.tag_id)})),Object(n.jsx)(v.a,{onBrushEnd:function(e){return r(e)},onDrag:function(e){t.setState({lastDrawLocation:{bottom:l.bottom+(e.top-e.bottom),left:l.left-(e.right-e.left),right:l.right-(e.right-e.left),top:l.top+(e.top-e.bottom)}})}})]})}),l?j:null]}):Object(n.jsx)(s.a.Fragment,{children:Object(n.jsx)("div",{className:"graph-container",children:Object(n.jsxs)(v.e,{height:400,width:1e3,dontCheckIfEmpty:!0,margin:{left:30,right:0,top:0,bottom:30},children:[Object(n.jsx)(v.b,{}),Object(n.jsx)(v.d,{}),Object(n.jsx)(v.f,{}),Object(n.jsx)(v.c,{data:[{x:0,y:0}]})]})})})},x=a(35),O=a(36),g=a(39),f=a(38),p=a(37),N=a.n(p),k=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(x.a)(this,a),(n=t.call(this,e))._clickHandler=function(e){var t=n.state.items;e.disabled=!e.disabled,n.state.onClick(e.tag_id),n.setState({items:t})},n._searchChangeHandler=function(e){n.setState({searchText:e})},n.state={items:[],searchText:"",onClick:e.onClick},n.state.items=n.props.tags.map((function(e){return{title:e.tag_name,color:e.curve_color,tag_id:e.tag_id,disabled:e.disabled}})),n}return Object(O.a)(a,[{key:"render",value:function(){var e=this.state,t=e.items,a=e.searchText;return Object(n.jsx)("div",{className:"d-block pl-3",children:Object(n.jsx)(N.a,{height:400,onSearchChange:this._searchChangeHandler,searchText:a,onItemClick:this._clickHandler,items:t})})}}]),a}(s.a.Component);var C=function(e){var t=e.tagsHistory;return Object(n.jsx)(s.a.Fragment,{children:Object(n.jsxs)("div",{className:"row m-0 p-3",children:[Object(n.jsx)("div",{className:"col-8 m-0 p-0",children:Object(n.jsx)(m,{tags:t,disabledGraphs:e.disabledGraphs})}),Object(n.jsx)("div",{className:"col-4 m-0 p-0",children:Object(n.jsx)(k,{tags:t,disabledGraphs:e.disabledGraphs,onClick:e.toggleCurveDisplay})})]})})},_=["#19CDD7","#DDB27C","#88572C","#FF991F","#F15C17","#223F9A","#DA70BF","#125C77","#4DC19C","#776E57","#12939A","#17B8BE","#F6D18A","#B7885E","#FFCB99","#F89570","#829AE3","#E79FD5","#1E96BE","#89DAC1","#B3AD9E"];function F(e){var t=_.length;return _[e+1>t?e%t:e]}var D="http://bfcloud.space/";var y=function(){var e=s.a.useState([]),t=Object(d.a)(e,2),a=t[0],i=t[1],l=s.a.useState(""),h=Object(d.a)(l,2),v=h[0],m=h[1],x=s.a.useState(!0),O=Object(d.a)(x,2),g=O[0],f=O[1],p=s.a.useState([]),N=Object(d.a)(p,2),k=N[0],_=N[1];function y(){fetch(D+"api/v1/device/current-values").then((function(e){return e.json()})).then((function(e){return i(e)}))}function E(){fetch(D+"api/v1/device/tags/history").then((function(e){return e.json()})).then((function(e){var t=e.map((function(e,t){return{tag_id:e.tag_id,tag_code:e.tag_code,tag_name:e.tag_name,curve_color:F(t),values:e.values.map((function(e){return{x:new Date(e.add_date),y:e.value}}))}}));_((function(e){return t.map((function(t){var a=e.filter((function(e){return e.tag_id===t.tag_id})),n=a.length>0&&a[0].disabled;return Object(r.a)(Object(r.a)({},t),{},{disabled:n})}))}))}))}return Object(c.useEffect)((function(){fetch(D+"api/v1/device").then((function(e){return e.json()})).then((function(e){m(e.name)})),y(),E(),setTimeout((function(){f(!1)}),2e3);var e=setInterval(y,2e3),t=setInterval(E,1e4);return function(){clearInterval(e),clearInterval(t)}}),[]),Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsx)(j,{}),Object(n.jsxs)("div",{className:"row m-0 p-0",children:[Object(n.jsx)(o,{}),Object(n.jsx)("div",{className:"col-10 m-0 p-0",children:Object(n.jsxs)("div",{className:"content-height",children:[Object(n.jsxs)("div",{className:"p-3",children:[Object(n.jsxs)("p",{children:["\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e: ",Object(n.jsx)("b",{children:v})]}),g?Object(n.jsx)(b,{}):Object(n.jsx)(u,{tags:a})]}),g?null:Object(n.jsx)(C,{tagsHistory:k,toggleCurveDisplay:function(e){var t=k.map((function(t){return t.tag_id===e&&(t.disabled=!t.disabled),t}));_(t)}})]})})]})]})},E=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,80)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,i=t.getTTFB;a(e),n(e),c(e),s(e),i(e)}))};l.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(y,{})}),document.getElementById("root")),E()}},[[78,1,2]]]);
//# sourceMappingURL=main.7e414afd.chunk.js.map