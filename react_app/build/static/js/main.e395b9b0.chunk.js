(this.webpackJsonpreact_app=this.webpackJsonpreact_app||[]).push([[0],{59:function(e,t,c){},60:function(e,t,c){},66:function(e,t,c){},92:function(e,t,c){"use strict";c.r(t);var n=c(2),a=c(1),s=c.n(a),i=c(44),r=c.n(i),l=(c(59),c(60),c(61),c(5)),j=c(3);function d(){return Object(n.jsxs)("nav",{className:"navbar navbar-expand-sm bg-dark navbar-dark bg-color-indigo header-height m-0",children:[Object(n.jsx)(l.b,{className:"navbar-brand",to:"/",children:"WebArm"}),Object(n.jsxs)("ul",{className:"navbar-nav",children:[Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)("a",{className:"nav-link",href:"#",children:"\u041f\u0440\u0435\u0434\u043f\u0440\u0438\u044f\u0442\u0438\u0435"})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)("a",{className:"nav-link",href:"#",children:"\u041e\u0431\u044c\u0435\u043a\u0442\u044b"})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)("a",{className:"nav-link",href:"#",children:"\u041a\u0430\u0431\u0438\u043d\u0435\u0442"})})]}),Object(n.jsx)("ul",{className:"navbar-nav ml-auto",children:Object(n.jsx)("li",{className:"nav-item ml-auto",children:Object(n.jsx)("a",{className:"nav-link",href:"#",children:"\u0412\u043e\u0439\u0442\u0438"})})})]})}function o(){return Object(n.jsx)("div",{className:"col-2 m-0 p-0",children:Object(n.jsx)("div",{className:"bg-dark bg-color-pale-indigo p-3 h-100",children:Object(n.jsxs)("div",{className:"nav flex-column nav-pills ",id:"v-pills-tab",role:"tablist","aria-orientation":"vertical",children:[Object(n.jsx)(l.c,{className:"nav-link",activeClassName:"active",to:"/device/overview",children:"\u041e\u0431\u0437\u043e\u0440"}),Object(n.jsx)(l.c,{className:"nav-link",activeClassName:"active",to:"/device/settings",children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"}),Object(n.jsx)(l.c,{className:"nav-link",activeClassName:"active",to:"/device/graphs",children:"\u0413\u0440\u0430\u0444\u0438\u043a\u0438"}),Object(n.jsx)(l.c,{className:"nav-link",activeClassName:"active",to:"/device/events",children:"\u0416\u0443\u0440\u043d\u0430\u043b"})]})})})}var b=c(16),h=c(10);c(66);function u(){return Object(n.jsxs)("div",{className:"lds-ellipsis",children:[Object(n.jsx)("div",{}),Object(n.jsx)("div",{}),Object(n.jsx)("div",{}),Object(n.jsx)("div",{})]})}var x=function(e){var t=e.tag,c=e.index;return Object(n.jsxs)("tr",{children:[Object(n.jsxs)("td",{children:[" ",c+1," "]}),Object(n.jsxs)("td",{children:[" ",t.code," "]}),Object(n.jsxs)("td",{children:[" ",t.name," "]}),Object(n.jsxs)("td",{children:[" ",t.value," "]})]})};var v=function(e){return Object(n.jsx)("div",{children:Object(n.jsx)("div",{className:"table-responsive",children:Object(n.jsxs)("table",{className:"table table-striped table-sm",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:"\u2116"}),Object(n.jsx)("td",{children:"\u041a\u043e\u0434 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430"}),Object(n.jsx)("td",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430"}),Object(n.jsx)("td",{children:"\u0422\u0435\u043a\u0443\u0449\u0435\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435"})]})}),Object(n.jsx)("tbody",{children:e.tags.map((function(e,t){return Object(n.jsx)(x,{tag:e,index:t},e.code)}))})]})})})},O=c(9);var m=function(e){var t=this,c=e.tags,a=s.a.useState(null),i=Object(h.a)(a,2),r=i[0],l=i[1],j=Object(n.jsx)("button",{className:"btn btn-secondary m-3 btn-graph",onClick:function(){return l(null)},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043c\u0430\u0441\u0448\u0442\u0430\u0431"});return c.filter((function(e){return!1===e.disabled})).length>0?Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsx)("div",{className:"graph-container",children:Object(n.jsxs)(O.e,{height:400,width:1e3,margin:{left:40,right:0,top:0,bottom:30},xType:"time",animation:!0,xDomain:r&&[r.left,r.right],yDomain:r&&[r.bottom,r.top],children:[Object(n.jsx)(O.b,{}),Object(n.jsx)(O.d,{tickTotal:15}),Object(n.jsx)(O.f,{}),c.map((function(e){return e.disabled?null:Object(n.jsx)(O.c,{data:e.values,color:e.curve_color},e.tag_id)})),Object(n.jsx)(O.a,{onBrushEnd:function(e){return l(e)},onDrag:function(e){t.setState({lastDrawLocation:{bottom:r.bottom+(e.top-e.bottom),left:r.left-(e.right-e.left),right:r.right-(e.right-e.left),top:r.top+(e.top-e.bottom)}})}})]})}),r?j:null]}):Object(n.jsx)(s.a.Fragment,{children:Object(n.jsx)("div",{className:"graph-container",children:Object(n.jsxs)(O.e,{height:400,width:1e3,dontCheckIfEmpty:!0,margin:{left:30,right:0,top:0,bottom:30},children:[Object(n.jsx)(O.b,{}),Object(n.jsx)(O.d,{}),Object(n.jsx)(O.f,{}),Object(n.jsx)(O.c,{data:[{x:0,y:0}]})]})})})},f=c(47),g=c(48),p=c(51),N=c(50),_=c(49),C=c.n(_),F=function(e){Object(p.a)(c,e);var t=Object(N.a)(c);function c(e){var n;return Object(f.a)(this,c),(n=t.call(this,e))._clickHandler=function(e){var t=n.state.items;e.disabled=!e.disabled,n.state.onClick(e.tag_id),n.setState({items:t})},n._searchChangeHandler=function(e){n.setState({searchText:e})},n.state={items:[],searchText:"",onClick:e.onClick},n.state.items=n.props.tags.map((function(e){return{title:e.tag_name,color:e.curve_color,tag_id:e.tag_id,disabled:e.disabled}})),n}return Object(g.a)(c,[{key:"render",value:function(){var e=this.state,t=e.items,c=e.searchText;return Object(n.jsx)("div",{className:"d-block pl-3",children:Object(n.jsx)(C.a,{height:400,onSearchChange:this._searchChangeHandler,searchText:c,onItemClick:this._clickHandler,items:t})})}}]),c}(s.a.Component);var k=function(e){var t=e.tagsHistory;return Object(n.jsx)(s.a.Fragment,{children:Object(n.jsxs)("div",{className:"row m-0 p-0",children:[Object(n.jsx)("div",{className:"col-8 m-0 p-0",children:Object(n.jsx)(m,{tags:t,disabledGraphs:e.disabledGraphs})}),Object(n.jsx)("div",{className:"col-4 m-0 p-0",children:Object(n.jsx)(F,{tags:t,disabledGraphs:e.disabledGraphs,onClick:e.toggleCurveDisplay})})]})})},y=["#19CDD7","#DDB27C","#88572C","#FF991F","#F15C17","#223F9A","#DA70BF","#125C77","#4DC19C","#776E57","#12939A","#17B8BE","#F6D18A","#B7885E","#FFCB99","#F89570","#829AE3","#E79FD5","#1E96BE","#89DAC1","#B3AD9E"];function D(e){var t=y.length;return y[e+1>t?e%t:e]}var E="http://bfcloud.space/";function S(){var e=s.a.useState([]),t=Object(h.a)(e,2),c=t[0],i=t[1],r=s.a.useState(""),l=Object(h.a)(r,2),j=l[0],d=l[1],o=s.a.useState(!0),x=Object(h.a)(o,2),O=x[0],m=x[1],f=s.a.useState([]),g=Object(h.a)(f,2),p=g[0],N=g[1];function _(){fetch(E+"api/v1/device/current-values").then((function(e){return e.json()})).then((function(e){return i(e)}))}function C(){fetch(E+"api/v1/device/tags/history").then((function(e){return e.json()})).then((function(e){var t=e.map((function(e,t){return{tag_id:e.tag_id,tag_code:e.tag_code,tag_name:e.tag_name,disabled:!e.gisplay_on_garaph,curve_color:D(t),values:e.values.map((function(e){return{x:new Date(e.add_date),y:e.value}}))}}));N((function(e){return t.map((function(t){var c=e.filter((function(e){return e.tag_id===t.tag_id})),n=c.length>0?c[0].disabled:t.disabled;return Object(b.a)(Object(b.a)({},t),{},{disabled:n})}))}))}))}return Object(a.useEffect)((function(){fetch(E+"api/v1/device").then((function(e){return e.json()})).then((function(e){d(e.name)})),_(),C(),setTimeout((function(){m(!1)}),1e3);var e=setInterval(_,2e3),t=setInterval(C,6e4);return function(){clearInterval(e),clearInterval(t)}}),[]),Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsxs)("p",{children:["\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e: ",Object(n.jsx)("b",{children:j})]}),O?Object(n.jsx)(u,{}):Object(n.jsx)(v,{tags:c}),O?null:Object(n.jsx)(k,{tagsHistory:p,toggleCurveDisplay:function(e){var t=p.map((function(t){return t.tag_id===e&&(t.disabled=!t.disabled),t}));N(t)}})]})}function w(){return Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsx)("h3",{children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430"}),Object(n.jsx)("p",{children:"\u0420\u0430\u0437\u0434\u0435\u043b \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u044c\u0441\u044f \u0432 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435 ... "})]})}function B(){return Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsx)("h3",{children:"\u0416\u0443\u0440\u043d\u0430\u043b \u0441\u043e\u0431\u044b\u0442\u0438\u0439 \u043e\u0431\u044c\u0435\u043a\u0442\u0430"}),Object(n.jsx)("p",{children:"\u0420\u0430\u0437\u0434\u0435\u043b \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u044c\u0441\u044f \u0432 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435 ... "})]})}var I="http://bfcloud.space/";function T(){var e=s.a.useState(""),t=Object(h.a)(e,2),c=t[0],i=t[1],r=s.a.useState(!0),l=Object(h.a)(r,2),j=l[0],d=l[1],o=s.a.useState([]),x=Object(h.a)(o,2),v=x[0],O=x[1];function m(){fetch(I+"api/v1/device/tags/history").then((function(e){return e.json()})).then((function(e){var t=e.map((function(e,t){return{tag_id:e.tag_id,tag_code:e.tag_code,tag_name:e.tag_name,disabled:!e.display_on_garaph,curve_color:D(t),values:e.values.map((function(e){return{x:new Date(e.add_date),y:e.value}}))}}));O((function(e){return t.map((function(t){var c=e.filter((function(e){return e.tag_id===t.tag_id})),n=c.length>0?c[0].disabled:t.disabled;return Object(b.a)(Object(b.a)({},t),{},{disabled:n})}))}))}))}return Object(a.useEffect)((function(){fetch(I+"api/v1/device").then((function(e){return e.json()})).then((function(e){i(e.name)})),m(),setTimeout((function(){d(!1)}),1e3);var e=setInterval(m,1e4);return function(){clearInterval(e)}}),[]),Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsxs)("p",{children:["\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e: ",Object(n.jsx)("b",{children:c})]}),j?Object(n.jsx)(u,{}):null,j?null:Object(n.jsx)(k,{tagsHistory:v,toggleCurveDisplay:function(e){var t=v.map((function(t){return t.tag_id===e&&(t.disabled=!t.disabled),t}));O(t)}})]})}function A(){return Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsx)("h1",{children:"Error 404"}),Object(n.jsx)("p",{children:"Page not found"})]})}function H(){return Object(n.jsx)(s.a.Fragment,{children:Object(n.jsx)(l.a,{children:Object(n.jsxs)("div",{className:"row m-0 p-0",children:[Object(n.jsx)(o,{}),Object(n.jsx)("div",{className:"col-10 m-0 p-0",children:Object(n.jsx)("div",{className:"content-height p-3",children:Object(n.jsxs)(j.c,{children:[Object(n.jsx)(j.a,{exact:!0,path:"/device",component:S}),Object(n.jsx)(j.a,{exact:!0,path:"/device/overview",component:S}),Object(n.jsx)(j.a,{exact:!0,path:"/device/settings",component:w}),Object(n.jsx)(j.a,{exact:!0,path:"/device/events",component:B}),Object(n.jsx)(j.a,{exact:!0,path:"/device/graphs",component:T}),Object(n.jsx)(j.a,{component:A})]})})})]})})})}function G(){return Object(n.jsx)(s.a.Fragment,{children:Object(n.jsxs)("div",{className:"p-3 w-100",children:[Object(n.jsx)("div",{className:"container text-center",children:Object(n.jsxs)("h3",{className:"text-muted",children:["\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c \u043d\u0430 ",Object(n.jsx)("b",{children:"BFCloud"})]})}),Object(n.jsx)("br",{}),Object(n.jsxs)("div",{className:"container text-center",children:[Object(n.jsx)("p",{children:"\u0427\u0442\u043e\u0431 \u043f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u043e\u0431\u0437\u043e\u0440\u0443 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u043d\u044b\u0445 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432, \u043a\u043b\u0438\u043a\u043d\u0438\u0442\u0435 \u043f\u043e \u0441\u0441\u044b\u043b\u043a\u0435 \u043d\u0438\u0436\u0435:"}),Object(n.jsx)(l.b,{to:"/device/overview",children:"\u041e\u0431\u0437\u043e\u0440 \u0411\u0423\u041c-14"})]})]})})}var L=function(){return Object(n.jsx)(s.a.Fragment,{children:Object(n.jsxs)(l.a,{children:[Object(n.jsx)(d,{}),Object(n.jsxs)(j.c,{children:[Object(n.jsx)(j.a,{exact:!0,path:"/",component:G}),Object(n.jsx)(j.a,{path:"/device",component:H}),Object(n.jsx)(j.a,{component:A})]})]})})},P=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,94)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;c(e),n(e),a(e),s(e),i(e)}))};r.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(L,{})}),document.getElementById("root")),P()}},[[92,1,2]]]);
//# sourceMappingURL=main.e395b9b0.chunk.js.map