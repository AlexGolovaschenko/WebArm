{"version":3,"sources":["utils/axiosApi.js","utils/localSettings.js","utils/auth.js","utils/protectedRoute.js","components/BaseParts/LogoutBtn.js","components/BaseParts/Navbar.js","components/BaseParts/DeviceSidebar.js","components/BaseParts/Loader.js","components/TagsList/TagsCurrentValueRow.js","components/TagsList/TagsCurrentValueList.js","components/TagsGraph/Graph.js","components/TagsGraph/Legend.js","components/TagsGraph/TagsHistoricalGraph.js","components/TagsGraph/GraphColors.js","pages/device/overview.js","pages/device/settings.js","pages/device/eventsLog.js","pages/device/graphs.js","pages/pageNotFound.js","pages/device/deviceApp.js","components/BaseParts/CompanySidebar.js","components/CompanyOverview/DeviceCard.js","components/CompanyOverview/FacilityCard.js","pages/company/overview.js","pages/company/employers.js","pages/company/facilities.js","pages/company/profile.js","pages/company/companyApp.js","pages/welcome.js","pages/users/login.js","pages/users/registration.js","pages/users/profile.js","App.js","reportWebVitals.js","index.js"],"names":["axiosInstance","axios","create","baseURL","timeout","headers","localStorage","getItem","interceptors","response","use","error","originalRequest","config","status","url","Promise","reject","data","code","statusText","refreshToken","tokenParts","JSON","parse","atob","split","now","Math","ceil","Date","console","log","exp","post","refresh","then","setItem","access","defaults","catch","err","this","authenticated","onLogin","onLogout","onUserInfoReaded","cb","get","_onLogin","_onLogout","username","password","removeItem","request","userInfo","readUserInfo","clearUserInfo","ProtectedRoute","Component","component","rest","render","props","auth","isAuthenticated","to","pathname","state","from","location","LogoutBtn","handleLogout","bind","logout","history","push","className","onClick","withRouter","Navbar","authed","Fragment","Sidebar","deviceId","id","role","aria-orientation","activeClassName","Loader","TagsCurrentValueRow","tag","index","name","value","TagsCurrentValueList","tags","map","Graph","React","useState","lastDrawLocation","setLastDrawLocation","resetZoomBtn","filter","disabled","length","height","margin","left","right","top","bottom","xType","animation","xDomain","yDomain","style","stroke","tickTotal","values","color","curve_color","tag_id","onBrushEnd","area","onDrag","setState","dontCheckIfEmpty","x","y","Legend","searchText","setSearchText","items","title","tag_name","onSearchChange","searchPlaceholder","onItemClick","item","TagsHistoricalGraph","tagsHistory","disabledGraphs","toggleCurveDisplay","colors","getColor","clorsNumber","BASE_URL","DeviceOverviewPage","setTags","deviceName","setDeviceName","loading","setLoading","setTagsHistory","device_id","readDeviceTags","params","responce","readTagsHistory","prepared_tags","tag_code","display_on_garaph","add_date","prev","fltr","entry","useEffect","deviceParameters","setTimeout","tagsUpdateInterval","setInterval","graphUpdateInterval","clearInterval","n","DeviceSettingsPage","DeviceEventsLogPage","Page404","DeviceApp","useParams","exact","path","DeviceCard","device","FacilityCard","ds","facilityInfo","devices","CompanyOverviewPage","companyInfo","setCompanyInfo","readCompanyInfo","inf","facilities","facility","a","EmployersPage","FacilitiesPage","CompanyProfilePage","CompanyApp","WelcomePage","background","href","login","Login","handleChange","handleSubmit","event","target","preventDefault","maxWidth","onSubmit","htmlFor","type","onChange","Signup","email","errors","stack","ProfilePage","first_name","last_name","App","setAuthed","setUserInfo","checkAuthentication","ui","autoplay","muted","loop","src","Registration","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c52e1e27.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\nimport getBaseUrl from './localSettings'\r\nconst baseURL = getBaseUrl();\r\n\r\nconst axiosInstance = axios.create({\r\n    baseURL: baseURL,\r\n    timeout: 5000,\r\n    headers: {\r\n        'Authorization': \"JWT \" + localStorage.getItem('access_token'),\r\n        'Content-Type': 'application/json',\r\n        'accept': 'application/json'\r\n    }\r\n});\r\n\r\n\r\naxiosInstance.interceptors.response.use(\r\n    response => response,\r\n    error => {\r\n        const originalRequest = error.config;\r\n\r\n        // Prevent infinite loops\r\n        if (error.response.status === 401 && originalRequest.url === '/user/token/refresh/') {\r\n            // window.location.href = '/user/login/';                  \r\n            return Promise.reject(error);\r\n        }\r\n\r\n        if (error.response.data.code === \"token_not_valid\" &&\r\n            error.response.status === 401 && \r\n            error.response.statusText === \"Unauthorized\") \r\n            {\r\n                const refreshToken = localStorage.getItem('refresh_token');\r\n\r\n                if (refreshToken){\r\n                    const tokenParts = JSON.parse(atob(refreshToken.split('.')[1]));\r\n\r\n                    // exp date in token is expressed in seconds, while now() returns milliseconds:\r\n                    const now = Math.ceil(Date.now() / 1000);\r\n                    console.log(tokenParts.exp);\r\n\r\n                    if (tokenParts.exp > now) {\r\n                        return axiosInstance\r\n                        .post('/user/token/refresh/', {refresh: refreshToken})\r\n                        .then((response) => {\r\n            \r\n                            localStorage.setItem('access_token', response.data.access);\r\n                            localStorage.setItem('refresh_token', response.data.refresh);\r\n            \r\n                            axiosInstance.defaults.headers['Authorization'] = \"JWT \" + response.data.access;\r\n                            originalRequest.headers['Authorization'] = \"JWT \" + response.data.access;\r\n            \r\n                            return axiosInstance(originalRequest);\r\n                        })\r\n                        .catch(err => {\r\n                            console.log(err)\r\n                        });\r\n                    }else{\r\n                        console.log(\"Refresh token is expired\", tokenParts.exp, now);\r\n                        // window.location.href = 'user/login/';\r\n                    }\r\n                }else{\r\n                    console.log(\"Refresh token not available.\")\r\n                    // window.location.href = 'user/login/';\r\n                }\r\n        }\r\n      \r\n     \r\n      // specific error handling done elsewhere\r\n      return Promise.reject(error);\r\n  }\r\n);\r\n\r\n\r\nexport default axiosInstance","\r\n\r\nexport default function getBaseUrl(){\r\n    return \"http://bfcloud.space\"\r\n    // return \"http://localhost:8000\"\r\n}","import axiosInstance from \"./axiosApi\";\r\n\r\nclass Auth{\r\n    constructor() {\r\n        this.authenticated = false;\r\n        this.onLogin = ()=>{};\r\n        this.onLogout = ()=>{};\r\n        this.onUserInfoReaded = ()=>{};\r\n    }\r\n\r\n    async checkAuthentication (cb) {\r\n        try {\r\n            const response = await axiosInstance.get('/user/token/check/')\r\n            if (response) {\r\n                this._onLogin();\r\n            } else {\r\n                this._onLogout();\r\n            }\r\n        } catch (error) {\r\n            this._onLogout();\r\n        }    \r\n        cb();         \r\n    }\r\n\r\n    async login(username, password, cb) {\r\n        try {\r\n            const response = await axiosInstance.post('/user/token/obtain/', {\r\n              username: username,\r\n              password: password\r\n            });\r\n            axiosInstance.defaults.headers['Authorization'] = \"JWT \" + response.data.access;\r\n            localStorage.setItem('access_token', response.data.access);\r\n            localStorage.setItem('refresh_token', response.data.refresh);\r\n            this._onLogin();\r\n            cb();\r\n        } catch (error) {\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    async logout(cb) {\r\n        try {\r\n            await axiosInstance.post('user/token/blacklist/', {\r\n                \"refresh_token\": localStorage.getItem(\"refresh_token\")\r\n            });\r\n            localStorage.removeItem('access_token');\r\n            localStorage.removeItem('refresh_token');\r\n            axiosInstance.defaults.headers['Authorization'] = null;\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n        this._onLogout();\r\n        cb();        \r\n    }\r\n\r\n    isAuthenticated() {\r\n        return this.authenticated;\r\n    }\r\n\r\n    async readUserInfo(){\r\n        const request = await axiosInstance.get('/user/info/')\r\n        this.onUserInfoReaded( { ...request.data } )\r\n    }\r\n\r\n    clearUserInfo(){\r\n        this.userInfo = {}\r\n    }\r\n\r\n    _onLogin () {\r\n        this.authenticated = true;\r\n        this.onLogin();\r\n        this.readUserInfo();\r\n    }\r\n    _onLogout () {\r\n        this.authenticated = false;\r\n        this.onLogout();\r\n        this.clearUserInfo();        \r\n    }\r\n}\r\n\r\nexport default new Auth()","import React from 'react' \r\nimport {Route, Redirect} from 'react-router-dom'\r\n\r\nimport auth from './auth' \r\n\r\n\r\n\r\nexport const ProtectedRoute = ({component: Component, ...rest}) => {\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) => {\r\n        if (auth.isAuthenticated()) {\r\n          return <Component {...props} />\r\n        } else {\r\n          return <Redirect to={{pathname: '/user/login', state: {from: props.location}}} />\r\n        }\r\n      }}\r\n    />\r\n  )\r\n}","import React, { Component } from \"react\";\r\nimport {Link, withRouter} from 'react-router-dom'\r\n\r\nimport auth from '../../utils/auth' \r\n\r\nclass LogoutBtn extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleLogout = this.handleLogout.bind(this);\r\n    }\r\n\r\n    handleLogout() {\r\n        auth.logout(()=>{\r\n            this.props.history.push('/')\r\n        });\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <li className=\"nav-item\" >\r\n                <Link className=\"nav-link\" to=\"\" onClick={this.handleLogout}>Выйти</Link>\r\n            </li>\r\n        )\r\n    };\r\n};         \r\n\r\nexport default withRouter(LogoutBtn)","import React from 'react'\r\nimport {Link} from 'react-router-dom'\r\n\r\nimport LogoutBtn from './LogoutBtn'\r\n\r\nexport default function Navbar(props) {\r\n    const authed = props.authed\r\n    const userInfo = props.userInfo\r\n    return (\r\n        <nav className=\"navbar navbar-expand-sm bg-dark navbar-dark bg-color-indigo header-height m-0\">\r\n            <Link className=\"navbar-brand\" to=\"/\">WebArm</Link>\r\n\r\n            <ul className=\"navbar-nav\">\r\n                {authed ? (\r\n                    <React.Fragment>\r\n                        <li className=\"nav-item\">\r\n                            <Link className=\"nav-link\" to=\"/company/overview\">Предприятие</Link>\r\n                        </li>\r\n                        <li className=\"nav-item\">\r\n                            <Link className=\"nav-link\" to=\"/company/facilities\">Обьекты</Link>\r\n                        </li>\r\n                        <li className=\"nav-item\">\r\n                            <Link className=\"nav-link\" to=\"/company/profile\">Кабинет</Link>\r\n                        </li>\r\n                    </React.Fragment>\r\n                ) : null }\r\n            </ul>  \r\n    \r\n            <ul className=\"navbar-nav ml-auto\">\r\n                {authed ? (\r\n                    <React.Fragment>\r\n                        { userInfo ?\r\n                            <React.Fragment> \r\n                                <li className=\"nav-item\">\r\n                                    <Link className=\"nav-link\" to=\"/user/profile\">{userInfo.username}</Link>\r\n                                </li>\r\n                                <li className=\"nav-item border-right border-secondary my-1\"> </li>\r\n                            </React.Fragment>                        \r\n                        : null }\r\n                        <LogoutBtn />\r\n                    </React.Fragment>\r\n                ) : (\r\n                    <li className=\"nav-item\">\r\n                        <Link className=\"nav-link\" to=\"/user/login\">Войти</Link>\r\n                    </li>\r\n                )}\r\n            </ul> \r\n        </nav>       \r\n    );\r\n}","import React from 'react'\r\nimport {NavLink} from 'react-router-dom'\r\n\r\nexport default function Sidebar(props) {\r\n    const {deviceId} = props\r\n\r\n    return (\r\n        <div className=\"col-2 m-0 p-0\">\r\n        <div className=\"bg-dark bg-color-gray p-3 h-100\">\r\n\r\n            <div className=\"nav flex-column nav-pills \" id=\"v-pills-tab\" role=\"tablist\" aria-orientation=\"vertical\">\r\n                <NavLink className=\"nav-link text-light\" activeClassName=\"bg-dark\" to={`/device/${deviceId}/overview/`}>Обзор</NavLink>\r\n                <NavLink className=\"nav-link text-light\" activeClassName=\"bg-dark\" to={`/device/${deviceId}/settings/`}>Настройки</NavLink>\r\n                <NavLink className=\"nav-link text-light\" activeClassName=\"bg-dark\" to={`/device/${deviceId}/graphs/`}>Графики</NavLink>\r\n                <NavLink className=\"nav-link text-light\" activeClassName=\"bg-dark\" to={`/device/${deviceId}/events/`}>Журнал</NavLink>\r\n            </div>\r\n\r\n        </div>\r\n        </div>\r\n    )\r\n}","import React from 'react'\r\nimport './Loader.css'\r\n\r\nexport default function Loader() {\r\n    return(\r\n        <div className=\"lds-ellipsis\"><div></div><div></div><div></div><div></div></div>\r\n    )\r\n}","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\n\r\nfunction TagsCurrentValueRow({tag, index}) {\r\n    return (\r\n        <tr>\r\n            <td className='border-secondary text-secondary pl-2'> {index + 1} </td>   \r\n            <td className='border-secondary'> {tag.code} </td>\r\n            <td className='border-secondary'> {tag.name} </td>\r\n            <td className='border-secondary'> {tag.value} </td>\r\n        </tr>\r\n    )\r\n}\r\n\r\n\r\n\r\nTagsCurrentValueRow.propTypes = {\r\n    tag: PropTypes.object.isRequired,\r\n    index: PropTypes.number.isRequired,\r\n}\r\n\r\nexport default TagsCurrentValueRow","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport TagsCurrentValueRow from './TagsCurrentValueRow'\r\n\r\nfunction TagsCurrentValueList(props) {\r\n    return (\r\n        <div className='card shadow-sm p-3 bg-dark text-light'>     \r\n            <div className=\"table-responsive\">\r\n\r\n            <table className=\"table table-sm text-light tadle-dark w-100 mb-0\">\r\n                <thead> \r\n                <tr>\r\n                    <td className='border-0 text-secondary font-weight-bold pl-2'>№</td>\r\n                    <td className='border-0 text-secondary font-weight-bold'>Код параметра</td>\r\n                    <td className='border-0 text-secondary font-weight-bold'>Наименование параметра</td>\r\n                    <td className='border-0 text-secondary font-weight-bold'>Текущее значение</td>\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                    { props.tags.map((tag, index) => {\r\n                        return (\r\n                            <TagsCurrentValueRow tag={tag} key={tag.code} index={index} />\r\n                        )\r\n                    }) }\r\n                </tbody>\r\n            </table>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nTagsCurrentValueList.propTypes = {\r\n    tags: PropTypes.arrayOf(PropTypes.object).isRequired\r\n}\r\n\r\nexport default TagsCurrentValueList","import React from 'react';\r\nimport PropTypes from 'prop-types'\r\nimport {\r\n    FlexibleWidthXYPlot, \r\n    XAxis, \r\n    YAxis, \r\n    LineSeries,\r\n    // VerticalGridLines, \r\n    HorizontalGridLines, \r\n    Highlight} from 'react-vis';\r\n\r\n\r\n\r\nfunction Graph(props) {\r\n    const tags = props.tags   \r\n    const [lastDrawLocation, setLastDrawLocation] = React.useState(null)\r\n\r\n    const resetZoomBtn = (\r\n        <button\r\n            className=\"btn btn-secondary m-3 btn-graph\"\r\n            onClick={() => setLastDrawLocation(null)}\r\n            >\r\n            Вернуть масштаб\r\n        </button>)\r\n\r\n    const hasDisplay = tags.filter( tag => tag.disabled === false ).length > 0\r\n    if (hasDisplay) {\r\n        return (\r\n            <React.Fragment>\r\n                <div className='graph-container'>\r\n                    <FlexibleWidthXYPlot \r\n                        height={400} \r\n                        \r\n                        margin={{left: 40, right: 0, top: 0, bottom: 30}} \r\n                        xType=\"time\"\r\n                        animation\r\n                        xDomain={\r\n                            lastDrawLocation && [\r\n                                lastDrawLocation.left,\r\n                                lastDrawLocation.right\r\n                            ]\r\n                        }\r\n                        yDomain={\r\n                            lastDrawLocation && [\r\n                                lastDrawLocation.bottom,\r\n                                lastDrawLocation.top\r\n                            ]\r\n                        }       \r\n                    >\r\n                        <HorizontalGridLines style={{stroke: '#444A50'}} />\r\n                        <XAxis tickTotal={15} />\r\n                        <YAxis />\r\n                        { tags.map((tag)=>{ \r\n                            return !tag.disabled ? <LineSeries data={tag.values} color={tag.curve_color} key={tag.tag_id} /> : null\r\n                        }) }\r\n    \r\n                        <Highlight\r\n                            onBrushEnd={area => setLastDrawLocation(area)}\r\n                            onDrag={area => {\r\n                                this.setState({\r\n                                    lastDrawLocation: {\r\n                                        bottom: lastDrawLocation.bottom + (area.top - area.bottom),\r\n                                        left: lastDrawLocation.left - (area.right - area.left),\r\n                                        right: lastDrawLocation.right - (area.right - area.left),\r\n                                        top: lastDrawLocation.top + (area.top - area.bottom)\r\n                                    }\r\n                                });\r\n                            }}\r\n                        />\r\n                    </FlexibleWidthXYPlot>\r\n                </div>\r\n                {lastDrawLocation ? resetZoomBtn : null}\r\n            </ React.Fragment>\r\n        );\r\n    } else {\r\n        return (\r\n            <React.Fragment>\r\n            <div className='graph-container'>\r\n                <FlexibleWidthXYPlot \r\n                    height={400} \r\n                    \r\n                    dontCheckIfEmpty\r\n                    margin={{left: 30, right: 0, top: 0, bottom: 30}}      \r\n                >\r\n                    <HorizontalGridLines style={{stroke: '#444A50'}} />\r\n                    <XAxis />\r\n                    <YAxis />\r\n                    <LineSeries data={[{x:0, y:0}]} /> \r\n                </FlexibleWidthXYPlot>\r\n            </div>\r\n            </ React.Fragment> \r\n        )                   \r\n    }\r\n\r\n\r\n}\r\n\r\n\r\nGraph.propTypes = {\r\n    tags: PropTypes.arrayOf(PropTypes.object).isRequired\r\n}\r\n\r\nexport default Graph","import React from 'react' \r\nimport SearchableDiscreteColorLegend from 'react-vis/dist/legends/searchable-discrete-color-legend';\r\n\r\n\r\n\r\n\r\nexport default function Legend(props) { \r\n  var [searchText, setSearchText] = React.useState('')\r\n\r\n  var state = {\r\n    onClick: props.onClick,\r\n    items: props.tags.map((tag) => {\r\n      return {title: tag.tag_name, color: tag.curve_color, tag_id:tag.tag_id, disabled:tag.disabled}\r\n    })\r\n  }\r\n\r\n  function _clickHandler (item) {\r\n    state.onClick(item.tag_id);    \r\n  };\r\n\r\n  function _searchChangeHandler (searchText) {\r\n    setSearchText(searchText)\r\n  };\r\n\r\n  return (\r\n    <div className='d-block text-dark pl-3'>\r\n      <SearchableDiscreteColorLegend\r\n        height={400}\r\n        // width={300}\r\n        onSearchChange={_searchChangeHandler}\r\n        searchPlaceholder={'Поиск...'}\r\n        searchText={searchText}\r\n        onItemClick={_clickHandler}\r\n        items={state.items}\r\n      />\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\nimport PropTypes from 'prop-types'\r\nimport Graph from './Graph'\r\nimport Legend from './Legend'\r\n\r\n\r\nfunction TagsHistoricalGraph(props) {\r\n    const tags = props.tagsHistory  \r\n \r\n    return (\r\n        <React.Fragment>\r\n        <div className='card shadow-sm p-3 bg-dark text-light mt-3'>\r\n            <div className=\"row m-0 p-0\">\r\n                <div className=\"col-8 m-0 p-0\">\r\n                    <Graph tags={tags} disabledGraphs={props.disabledGraphs} />\r\n                </div>\r\n                <div className=\"col-4 m-0 p-0\">\r\n                    <Legend tags={tags} disabledGraphs={props.disabledGraphs} onClick={props.toggleCurveDisplay} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n        </ React.Fragment>\r\n    );\r\n}\r\n\r\n\r\nTagsHistoricalGraph.propTypes = {\r\n    tagsHistory: PropTypes.arrayOf(PropTypes.object).isRequired\r\n}\r\n\r\nexport default TagsHistoricalGraph","// const colors = [\r\n//     '#19CDD7', '#DDB27C', '#88572C', \r\n//     '#FF991F', '#F15C17', '#223F9A', \r\n//     '#DA70BF', '#125C77', '#4DC19C', \r\n//     '#776E57', '#12939A', '#17B8BE', \r\n//     '#F6D18A', '#B7885E', '#FFCB99', \r\n//     '#F89570', '#829AE3', '#E79FD5', \r\n//     '#1E96BE', '#89DAC1', '#B3AD9E'\r\n// ]\r\n\r\nconst colors = [\r\n    '#f44336', '#00BCD4', '#FF9800', \r\n    '#E91E63', '#009688', '#FF5722', \r\n    '#9C27B0', '#4CAF50', '#795548', \r\n    '#673AB7', '#8BC34A', '#607D8B', \r\n    '#3F51B5', '#CDDC39', \r\n    '#2196F3', '#FFEB3B', \r\n    '#03A9F4', '#FFC107', \r\n]\r\n\r\n\r\nexport default function getColor(index) {\r\n    const clorsNumber = colors.length\r\n    var ind\r\n    if (index+1 > clorsNumber) {\r\n        ind = index % clorsNumber\r\n    }\r\n    else {\r\n        ind = index\r\n    }\r\n    return colors[ind]\r\n}","import React, { useEffect } from 'react' \r\n\r\nimport Loader from '../../components/BaseParts/Loader'\r\nimport TagsCurrentValueList from '../../components/TagsList/TagsCurrentValueList'\r\nimport TagsHistoricalGraph from '../../components/TagsGraph/TagsHistoricalGraph'\r\nimport axiosInstance from \"../../utils/axiosApi\";\r\nimport getColor from '../../components/TagsGraph/GraphColors'\r\nimport getBaseUrl from '../../utils/localSettings'\r\nconst BASE_URL = getBaseUrl()\r\n\r\nexport default function DeviceOverviewPage(props) {\r\n  const [tags, setTags] = React.useState([])\r\n  const [deviceName, setDeviceName] = React.useState('')\r\n  const [loading, setLoading] = React.useState(true)\r\n  const [tagsHistory, setTagsHistory] = React.useState([])\r\n\r\n  const device_id = props.device_id;\r\n\r\n  function readDeviceParameters() {\r\n    axiosInstance.get(BASE_URL + \"/device/parameters/\", { params: { id: device_id }} )\r\n      .then(responce => responce.data)\r\n      .then(deviceParameters => { setDeviceName(deviceParameters.name) }) \r\n  }\r\n\r\n  function readDeviceTags() {\r\n    axiosInstance.get(BASE_URL + \"/device/tags/value/\", { params: { id: device_id }} )\r\n    .then(responce => responce.data)\r\n    .then(tags => setTags(tags) )  \r\n  }\r\n\r\n  function readTagsHistory() {\r\n    axiosInstance.get(BASE_URL + \"/device/tags/history/\", { params: { id: device_id }} )\r\n    .then(responce => responce.data)\r\n    .then(tags => {\r\n      const prepared_tags = tags.map( (tag, index) => {\r\n        return ({\r\n          tag_id: tag.tag_id,\r\n          tag_code: tag.tag_code,\r\n          tag_name: tag.tag_name,\r\n          disabled: !tag.display_on_garaph,\r\n          curve_color : getColor(index),\r\n          values: tag.values.map( (value) => {\r\n            return {x: new Date(value.add_date), y: value.value}\r\n          })\r\n        })\r\n      })  \r\n      setTagsHistory( (prev) => {\r\n        return prepared_tags.map( (tag)=> {\r\n          const fltr = prev.filter( entry=>entry.tag_id === tag.tag_id )\r\n          var disabled = (fltr.length > 0) ? fltr[0].disabled : tag.disabled\r\n          return {...tag, disabled: disabled}\r\n        })\r\n      })\r\n    })  \r\n  }\r\n\r\n  // read parameters\r\n  useEffect(() => {\r\n    readDeviceParameters();\r\n    readDeviceTags();\r\n    readTagsHistory();\r\n    setTimeout( () => { setLoading(false) }, 1000);\r\n\r\n    // set update interval\r\n    const tagsUpdateInterval = setInterval(readDeviceTags, 2000);\r\n    const graphUpdateInterval = setInterval( readTagsHistory, 60000)\r\n    return () => {\r\n      clearInterval(tagsUpdateInterval);\r\n      clearInterval(graphUpdateInterval);\r\n    };\r\n  }, [])\r\n\r\n  // toggle curve display\r\n  function toggleCurveDisplay(tag_id){\r\n    const n = tagsHistory.map( entry => { \r\n      if (entry.tag_id===tag_id) { entry.disabled = !entry.disabled } \r\n      return entry\r\n    })\r\n    setTagsHistory(n)\r\n  }\r\n\r\n  // render the page\r\n  return (\r\n    <React.Fragment>\r\n        <h3 className='pb-2'>Устройство: <b>{deviceName}</b></h3>\r\n        {loading ? <Loader /> : <TagsCurrentValueList tags={tags} />}\r\n        {loading ? null : <TagsHistoricalGraph tagsHistory={tagsHistory} toggleCurveDisplay={toggleCurveDisplay}/> }\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n","import React from 'react' \r\n\r\n\r\nexport default function DeviceSettingsPage() {\r\n\r\n  return (\r\n    <React.Fragment>\r\n        <h3>Настройки устройства</h3>\r\n        <p>Раздел находиться в разработке ... </p>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n ","import React from 'react' \r\n\r\n\r\nexport default function DeviceEventsLogPage() {\r\n\r\n  return (\r\n    <React.Fragment>\r\n        <h3>Журнал событий обьекта</h3>\r\n        <p>Раздел находиться в разработке ... </p>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n ","import React, { useEffect } from 'react' \r\nimport Loader from '../../components/BaseParts/Loader'\r\n\r\nimport TagsHistoricalGraph from '../../components/TagsGraph/TagsHistoricalGraph'\r\nimport getColor from '../../components/TagsGraph/GraphColors'\r\nimport axiosInstance from \"../../utils/axiosApi\";\r\nimport getBaseUrl from '../../utils/localSettings'\r\nconst BASE_URL = getBaseUrl()\r\n\r\nexport default function DeviceOverviewPage(props) {\r\n  const [deviceName, setDeviceName] = React.useState('')\r\n  const [loading, setLoading] = React.useState(true)\r\n  const [tagsHistory, setTagsHistory] = React.useState([])\r\n\r\n  const device_id = props.device_id;\r\n\r\n  function readDeviceParameters() {\r\n    axiosInstance.get(BASE_URL + \"/device/parameters/\", { params: { id: device_id }} )\r\n      .then(responce => responce.data)\r\n      .then(deviceParameters => { setDeviceName(deviceParameters.name) }) \r\n  }\r\n\r\n  function readTagsHistory() {\r\n    axiosInstance.get(BASE_URL + \"/device/tags/history/\", { params: { id: device_id }} )\r\n    .then(responce => responce.data)\r\n    .then(tags => {\r\n      const prepared_tags = tags.map( (tag, index) => {\r\n        return ({\r\n          tag_id: tag.tag_id,\r\n          tag_code: tag.tag_code,\r\n          tag_name: tag.tag_name,\r\n          disabled: !tag.display_on_garaph,\r\n          curve_color : getColor(index),\r\n          values: tag.values.map( (value) => {\r\n            return {x: new Date(value.add_date), y: value.value}\r\n          })\r\n        })\r\n      })  \r\n      setTagsHistory( (prev) => {\r\n        return prepared_tags.map( (tag)=> {\r\n          const fltr = prev.filter( entry=>entry.tag_id === tag.tag_id )\r\n          var disabled = (fltr.length > 0) ? fltr[0].disabled : tag.disabled\r\n          return {...tag, disabled: disabled}\r\n        })\r\n      })\r\n    })  \r\n  }\r\n\r\n  // read parameters\r\n  useEffect(() => {\r\n    readDeviceParameters();\r\n    readTagsHistory();\r\n    setTimeout( () => { setLoading(false) }, 1000);\r\n\r\n    // set update interval\r\n    const graphUpdateInterval = setInterval( readTagsHistory, 10000)\r\n    return () => {\r\n      clearInterval(graphUpdateInterval);\r\n    };\r\n  }, [])\r\n\r\n  // toggle curve display\r\n  function toggleCurveDisplay(tag_id){\r\n    const n = tagsHistory.map( entry => { \r\n      if (entry.tag_id===tag_id) { entry.disabled = !entry.disabled } \r\n      return entry\r\n    })\r\n    setTagsHistory(n)\r\n  }\r\n\r\n  // render the page\r\n  return (\r\n    <React.Fragment>\r\n        <p>Устройство: <b>{deviceName}</b></p>\r\n        {loading ? <Loader /> : null }\r\n        {loading ? null : <TagsHistoricalGraph tagsHistory={tagsHistory} toggleCurveDisplay={toggleCurveDisplay}/> }\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n","import React from 'react' \r\n\r\n\r\nexport default function Page404() {\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className='bg-color-dark-gray text-secondary content-height'>\r\n        <div className='container mt-5 text-center'>\r\n          <h1>Error 404</h1>\r\n          <h3>Страница не найдена</h3>\r\n        </div>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n ","import React from 'react' \r\nimport {Switch, Route, useParams} from 'react-router-dom'\r\n\r\nimport Sidebar from '../../components/BaseParts/DeviceSidebar'\r\nimport DeviceOverviewPage from './overview'\r\nimport DeviceSettingsPage from './settings'\r\nimport DeviceEventsLogPage from './eventsLog'\r\nimport DeviceGraphsPage from './graphs'\r\nimport Page404 from '../pageNotFound'\r\n\r\nexport default function DeviceApp() { \r\n  let { id } = useParams();\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className='bg-color-dark-gray text-secondary h-100'>\r\n      <div className=\"row m-0 p-0\">\r\n        <Sidebar deviceId={id}/>\r\n        <div className=\"col-10 m-0 p-0\">\r\n          <div className=\"content-height p-3\">\r\n            <Switch>\r\n              <Route exact path={`/device/${id}/overview/`} component={()=><DeviceOverviewPage device_id={id}/>} />\r\n              <Route exact path={`/device/${id}/settings/`} component={()=><DeviceSettingsPage device_id={id}/>} />\r\n              <Route exact path={`/device/${id}/events/`} component={()=><DeviceEventsLogPage device_id={id}/>} />\r\n              <Route exact path={`/device/${id}/graphs/`} component={()=><DeviceGraphsPage device_id={id}/>} />\r\n              <Route component={Page404} />\r\n            </Switch>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n","import React from 'react'\r\nimport {NavLink} from 'react-router-dom'\r\n\r\nexport default function Sidebar() {\r\n    return (\r\n        <div className=\"col-2 m-0 p-0\">\r\n        <div className=\"bg-dark bg-color-gray p-3 h-100\">\r\n\r\n            <div className=\"nav flex-column nav-pills \" id=\"v-pills-tab\" role=\"tablist\" aria-orientation=\"vertical\">\r\n                <NavLink className=\"nav-link text-light\" activeClassName=\"bg-dark\" to=\"/company/overview/\">Обзор</NavLink>\r\n                <NavLink className=\"nav-link text-light\" activeClassName=\"bg-dark\" to=\"/company/facilities/\">Объекты</NavLink>\r\n                <NavLink className=\"nav-link text-light\" activeClassName=\"bg-dark\" to=\"/company/employers/\">Сотрудники</NavLink>\r\n                <NavLink className=\"nav-link text-light\" activeClassName=\"bg-dark\" to=\"/company/profile/\">Кабинет</NavLink>\r\n            </div>\r\n\r\n        </div>\r\n        </div>\r\n    )\r\n}","import React from 'react';\r\nimport {Link} from 'react-router-dom'\r\n\r\n\r\nfunction DeviceCard(props) {\r\n    const device = props.device   \r\n\r\n    return (\r\n        <React.Fragment>\r\n        <Link className=\"nav-link p-0 m-0\" to={`/device/${device.id}/overview/`}>\r\n            <div className='border border-secondary rounded p-2 h-100 bg-dark text-light card-hover' >\r\n                <h6 className=''>{device.name}</h6>\r\n                <div className='p-0 m-0 small w-100'>\r\n                    <table className=\"table table-sm p-0 m-0 table-dark text-light w-100\">\r\n                        <tbody>\r\n                            <tr>\r\n                                <td> Связь: </td>   \r\n                                <td className='text-right'> ОК </td>\r\n                            </tr> \r\n                            <tr>\r\n                                <td>  Обновлено: </td>   \r\n                                <td className='text-right'> 16:08 </td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>   Аварии: </td>   \r\n                                <td className='text-right'> Нет  </td>\r\n                            </tr>                                                         \r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </Link>    \r\n        </ React.Fragment> \r\n    )                   \r\n}\r\n\r\nexport default DeviceCard","import React from 'react';\r\n\r\nimport DeviceCard from './DeviceCard'\r\n\r\nfunction FacilityCard(props) {\r\n  const facilityInfo = props.facilityInfo   \r\n  const devices = facilityInfo.devices\r\n\r\n  const mapDeviceCards = (ds) => {\r\n    return ds.map((device, index) => {\r\n      return (\r\n        <div key={device.id} className='col-xl-3 col-lg-4 col-md-6 p-1 m-0'>\r\n          <DeviceCard device={device} index={index}/>\r\n        </div>\r\n      )\r\n    })\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n    <div className='card bg-dark text-light shadow-sm p-0 m-0'>\r\n      <h6 className='px-2 pt-2 pb-0 m-0'>{facilityInfo.name}</h6>\r\n      <div className='container-fluid h-100 p-1 m-0 row'>\r\n          {devices.length > 0 ? mapDeviceCards(devices) : <p className='text-secondary p-1'>Устройств нет ...</p> }       \r\n      </div>\r\n    </div>    \r\n    </ React.Fragment> \r\n  )                   \r\n}\r\n\r\nexport default FacilityCard","import React, { useEffect, useState } from 'react' \r\n\r\nimport Loader from '../../components/BaseParts/Loader'\r\nimport FacilityCard from '../../components/CompanyOverview/FacilityCard'\r\nimport axiosInstance from \"../../utils/axiosApi\";\r\nimport getBaseUrl from '../../utils/localSettings'\r\nconst BASE_URL = getBaseUrl()\r\n\r\n\r\nexport default function CompanyOverviewPage() {\r\n  const [companyInfo, setCompanyInfo] = useState({})\r\n  const [loading, setLoading] = React.useState(true)\r\n\r\n  useEffect(() => {\r\n    readCompanyInfo( (inf)=> {\r\n      setCompanyInfo(inf);\r\n      setLoading(false);\r\n    });   \r\n  }, [])  \r\n\r\n  return (\r\n    <React.Fragment>\r\n      <h3 className='px-3 pt-3 pb-0'>Обзор компании</h3>\r\n\r\n      <div className='container-fluid py-0 px-2 m-0 row'>\r\n        {loading ? <Loader /> : \r\n          <React.Fragment>\r\n            { companyInfo.facilities.map((facility, index) => {\r\n                return (\r\n                  <div key={facility.id} className='container-fluid px-2 py-0 mx-0 my-2 col-lg-6'>\r\n                    <FacilityCard facilityInfo={facility} index={index}/>\r\n                  </div>\r\n                )\r\n            }) }       \r\n          </React.Fragment>\r\n        }\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n\r\nasync function readCompanyInfo(cb) {\r\n  const request = await axiosInstance.get(BASE_URL + \"/company/info/\")\r\n  cb({...request.data});\r\n}\r\n ","import React from 'react' \r\n\r\n\r\nexport default function EmployersPage() {\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className='p-3'>\r\n        <h3>Сотрудники компании</h3>\r\n        <p>Раздел находиться в разработке ... </p>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n","import React from 'react' \r\n\r\n\r\nexport default function FacilitiesPage() {\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className='p-3'>   \r\n        <h3>Обзор объектов компании</h3>\r\n        <p>Раздел находиться в разработке ... </p>\r\n      </div> \r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n ","import React from 'react' \r\n\r\n\r\nexport default function CompanyProfilePage() {\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className='p-3'> \r\n        <h3>Кабинет</h3>\r\n        <p>Раздел находиться в разработке ... </p>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n ","import React from 'react' \r\nimport {Switch, Route} from 'react-router-dom'\r\n\r\nimport Sidebar from '../../components/BaseParts/CompanySidebar'\r\nimport CompanyOverviewPage from './overview'\r\nimport EmployersPage from './employers'\r\nimport FacilitiesPage from './facilities'\r\nimport CompanyProfilePage from './profile'\r\nimport Page404 from '../pageNotFound'\r\n\r\nexport default function CompanyApp() { \r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className='bg-color-dark-gray text-secondary h-100'>\r\n      <div className=\"row m-0 p-0\">\r\n        <Sidebar />\r\n        <div className=\"col-10 m-0 p-0\">\r\n          <div className=\"content-height\">\r\n            <Switch>\r\n              <Route exact path='/company' component={CompanyOverviewPage} />\r\n              <Route exact path='/company/overview' component={CompanyOverviewPage} />\r\n              <Route exact path='/company/facilities' component={FacilitiesPage} />\r\n              <Route exact path='/company/employers' component={EmployersPage} />\r\n              <Route exact path='/company/profile' component={CompanyProfilePage} />\r\n              <Route component={Page404} />\r\n            </Switch>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n","import React from 'react' \r\nimport {Link} from 'react-router-dom'\r\n\r\nimport auth from '../utils/auth' \r\n\r\n\r\nfunction WelcomePage(props) {\r\n  // const backgroundStyle = {\r\n  //   backgroundImage: 'url(\"./img/grid.png\")',\r\n  //   backgroundRepeat: 'repeat-x',\r\n  //   backgroundAttachment: 'fixed'\r\n  // }\r\n\r\n\r\n  function loginDemoUser() {\r\n    const cb = ()=>{ props.history.push('/company/overview/') }\r\n    auth.login('admin', 'admin', cb );\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className='bg-color-dark-gray text-light content-height'>\r\n        <div className='container card mt-5 p-3 w-100' style={{background:'rgba(0,0,0,0.8)'}}>\r\n            <div className='text-center pt-4'>\r\n                <h3>Добро пожаловать на <b>BFCloud</b></h3>\r\n            </div>\r\n            <br/>\r\n            <div className='text-center'>\r\n                <h5>Для начала работы\r\n                  <Link className='px-2' to=\"/user/login/\">Войдите</Link>\r\n                  или\r\n                  <Link className='px-2' to=\"/user/registration/\">Зарегистрируйтесь</Link>\r\n                </h5>\r\n            </div>\r\n\r\n            <div className=\"card-columns py-5\">\r\n              <div className=\"card border-secondary\" style={{background:'none'}}>\r\n                <div className=\"card-body text-center\">\r\n                  <h6>Удаленный мониторинга и управления промышленными и IoT устройствами</h6>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"card border-secondary\" style={{background:'none'}}>\r\n                <div className=\"card-body text-center\">\r\n                  <h6>Контроль аварийных событий и уведомление о событиях на объекте </h6>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"card border-secondary\" style={{background:'none'}}>\r\n                <div className=\"card-body text-center\">\r\n                  <h6>Простое подключение и настройка опроса устройств</h6>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"card border-secondary\" style={{background:'none'}}>\r\n                <div className=\"card-body text-center\">\r\n                  <h6>Открытый API для интеграции с сторонним ПО и \r\n                    IoT устройствами \r\n                  </h6>\r\n                </div>\r\n              </div>  \r\n\r\n              <div className=\"card border-secondary\" style={{background:'none'}}>\r\n                <div className=\"card-body text-center\">\r\n                  <h6>Единый интерфейс для Персональных компьютеров и Мобильных устройств </h6>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"card border-secondary\" style={{background:'none'}}>\r\n                <div className=\"card-body text-center\">\r\n                  <h6> Вы можете воспользоваться демо-версией сервиса \r\n                    <a className=\"px-2\" href='#' onClick={loginDemoUser}>Демо-версия: БУМП-14</a>\r\n                  </h6> \r\n                </div>\r\n              </div>\r\n            </div>            \r\n        </div>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default WelcomePage","import React, { Component } from \"react\";\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport auth from '../../utils/auth' \r\n\r\n\r\nclass Login extends Component {\r\n  constructor(props) {\r\n      super(props);\r\n      this.state = {username: \"\", password: \"\"};\r\n\r\n      this.handleChange = this.handleChange.bind(this);\r\n      this.handleSubmit = this.handleSubmit.bind(this);\r\n  }\r\n\r\n  handleChange(event) {\r\n      this.setState({[event.target.name]: event.target.value});\r\n  }\r\n\r\n  handleSubmit(event) {\r\n    event.preventDefault();\r\n    const cb = ()=>{ this.props.history.push('/company/overview/') }\r\n    auth.login(this.state.username, this.state.password, cb );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n    <div className='bg-color-dark-gray text-secondary content-height'>  \r\n      <div className='container card p-3 mt-5 bg-dark' style={{maxWidth: '500px'}}>\r\n        <h2>Вход</h2>\r\n        <form onSubmit={this.handleSubmit}>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"username\">Пользователь:</label>\r\n            <input name=\"username\" type=\"text\" className=\"form-control bg-secondary border-secondary text-light\" id=\"username\" value={this.state.username} onChange={this.handleChange}/>\r\n          </div> \r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"pwd\">Пароль:</label> \r\n            <input name=\"password\" type=\"password\" className=\"form-control bg-secondary border-secondary text-light\" id=\"pwd\" value={this.state.password} onChange={this.handleChange}/>\r\n          </div> \r\n          <button type=\"submit\" className=\"btn btn-outline-primary\">Войти</button>\r\n          <div className=\"pt-3\">\r\n            <span className=\"pr-2 text-secondary\">Еще не зарегестрированы?</span>\r\n            <Link className=\"\" to=\"/user/registration/\">Регистрация</Link>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n    )\r\n  }\r\n}\r\nexport default Login;","import React, { Component } from \"react\";\r\nimport {Link} from 'react-router-dom'\r\n\r\nimport axiosInstance from \"../../utils/axiosApi\";\r\n\r\nclass Signup extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            username: \"\",\r\n            password: \"\",\r\n            email:\"\",\r\n            errors:{username:null, email:null, password:null}\r\n        };\r\n\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n    }\r\n\r\n    handleChange(event) {\r\n        this.setState({[event.target.name]: event.target.value});\r\n    }\r\n\r\n    async handleSubmit(event) {\r\n      event.preventDefault();\r\n      try {\r\n          const response = await axiosInstance.post('/user/create/', {\r\n              username: this.state.username,\r\n              email: this.state.email,\r\n              password: this.state.password\r\n          });\r\n          return response;\r\n      } catch (error) {\r\n          console.log(error.stack);\r\n          this.setState({\r\n            errors:error.response.data\r\n          });           \r\n      }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n          <div className='bg-color-dark-gray text-secondary content-height'>  \r\n            <div className='container card p-3 mt-5 bg-dark' style={{maxWidth: '500px'}}>\r\n                <h2>Регистрация</h2>              \r\n                <form onSubmit={this.handleSubmit}>\r\n                  <div className=\"form-group\">\r\n                    <label htmlFor=\"username\">Имя пользователя:</label>\r\n                    <input name=\"username\" type=\"text\" className=\"form-control bg-secondary border-secondary text-light\" id=\"username\" value={this.state.username} onChange={this.handleChange}/>\r\n                    { this.state.errors.username ? <span className='text-danger'>{this.state.errors.username}</span> : null}\r\n                  </div> \r\n                  <div className=\"form-group\">\r\n                    <label htmlFor=\"mail\">Электронная почта:</label>\r\n                    <input name=\"email\" type=\"email\" className=\"form-control bg-secondary border-secondary text-light\" id=\"mail\" value={this.state.email} onChange={this.handleChange}/>\r\n                    { this.state.errors.email ? <span className='text-danger'>{this.state.errors.email}</span> : null}\r\n                  </div> \r\n                  <div className=\"form-group\">\r\n                    <label htmlFor=\"pwd\">Пароль:</label> \r\n                    <input name=\"password\" type=\"password\" className=\"form-control bg-secondary border-secondary text-light\" id=\"pwd\" value={this.state.password} onChange={this.handleChange}/>\r\n                    { this.state.errors.password ? <span className='text-danger'>{this.state.errors.password}</span> : null}\r\n                  </div> \r\n                  <button type=\"submit\" className=\"btn btn-outline-primary\">Подтвердить</button>\r\n                  <div className=\"pt-3\">\r\n                    <span className=\"pr-2 text-secondary\">Уже зарегестрированы?</span>\r\n                    <Link className=\"\" to=\"/user/login/\">Вход</Link>\r\n                  </div>\r\n                </form>\r\n            </div>\r\n          </div>\r\n        )\r\n    }\r\n}\r\nexport default Signup;","import React from 'react' \r\n\r\n\r\nexport default function ProfilePage(props) {\r\n  return (\r\n    <React.Fragment>\r\n    <div className='bg-color-dark-gray text-secondary content-height'> \r\n      <div className='container card bg-dark shadow-sm my-4 pt-4'>\r\n        <h2>Профиль пользователя</h2>\r\n\r\n        <div className='row my-3'>\r\n          <div className='col-lg-6'>\r\n            <table className=\"table text-light tadle-dark \">\r\n              <tbody>\r\n                <tr>\r\n                  <td className='border-secondary'>Пользователь:</td> \r\n                  <td className='border-secondary'><b>{props.userInfo.username}</b></td>\r\n                </tr>\r\n                <tr>\r\n                  <td className='border-secondary'>Имя:</td> \r\n                  <td className='border-secondary'><b>{props.userInfo.first_name}</b></td>\r\n                </tr>\r\n                <tr>\r\n                  <td className='border-secondary'>Фамилия:</td> \r\n                  <td className='border-secondary'><b>{props.userInfo.last_name}</b></td>\r\n                </tr>\r\n                <tr>\r\n                  <td className='border-secondary'>Электронная почта:</td> \r\n                  <td className='border-secondary'><b>{props.userInfo.email}</b></td>\r\n                </tr>            \r\n              </tbody>\r\n            </table>\r\n          </div> \r\n        </div> \r\n      </div>  \r\n    </div>\r\n    </React.Fragment>\r\n);\r\n}\r\n","import './App.css'\r\nimport '../node_modules/react-vis/dist/style.css'\r\n\r\nimport React, { useEffect } from 'react' \r\nimport {\r\n  BrowserRouter as Router, \r\n  Switch, \r\n  Route,\r\n} from 'react-router-dom'\r\n\r\nimport {ProtectedRoute} from './utils/protectedRoute'\r\n\r\nimport Navbar from './components/BaseParts/Navbar'\r\nimport DeviceApp from './pages/device/deviceApp'\r\nimport CompanyApp from './pages/company/companyApp'\r\nimport WelcomePage from './pages/welcome'\r\nimport Login from './pages/users/login'\r\nimport Registration from './pages/users/registration'\r\nimport ProfilePage from './pages/users/profile'\r\nimport Page404 from './pages/pageNotFound'\r\n\r\nimport auth from './utils/auth'\r\n\r\nexport default function App() {\r\n  const [loading, setLoading] = React.useState(true)\r\n  const [authed, setAuthed] = React.useState(false)\r\n  const [userInfo, setUserInfo] = React.useState({})\r\n\r\n  useEffect(() => {\r\n    auth.checkAuthentication(() => { setLoading(false) })\r\n    auth.onLogin = () => {setAuthed(true)}    \r\n    auth.onLogout = () => {setAuthed(false)}    \r\n    auth.onUserInfoReaded = (ui) => {setUserInfo(ui)}   \r\n  }, [])\r\n\r\n  if (loading) { \r\n    return null \r\n  } else { \r\n    return (\r\n      <React.Fragment>\r\n        <Router>        \r\n          <Route exact path='/' component={()=>{\r\n            return (\r\n            <video autoplay=\"autoplay\" muted loop=\"loop\" id=\"myVideo\">\r\n              <source src=\"Earth13426.mp4\" type=\"video/mp4\" />\r\n            </video>\r\n            )}\r\n          }/>\r\n\r\n          <Navbar authed={authed} userInfo = {userInfo} />\r\n          <Switch>\r\n            <Route exact path='/' component={WelcomePage} />\r\n            <Route exact path='/user/login' component={Login}  />\r\n            <Route exact path='/user/registration' component={Registration} />\r\n            <ProtectedRoute exact path='/user/profile' component={ ()=> <ProfilePage userInfo = {userInfo} /> } />\r\n            <ProtectedRoute path='/company' component={CompanyApp} />                   \r\n            <ProtectedRoute path='/device/:id' component={DeviceApp} />\r\n            <Route component={Page404} />\r\n          </Switch>\r\n        </Router>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\n\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}