(this.webpackJsonpreact_app=this.webpackJsonpreact_app||[]).push([[0],{125:function(e,t,c){},126:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c(2),s=c.n(a),r=c(63),l=c.n(r),i=(c(76),c(4)),o=(c(77),c(78),c(5)),d=c(7),j=c(3),b=c(68),h=c(8),u=c.n(h),m=c(13),x=c(19),p=c(20),O=c(64);var g=c.n(O).a.create({baseURL:"http://bfcloud.space",timeout:6e4,headers:{Authorization:"JWT "+localStorage.getItem("access_token"),"Content-Type":"application/json",accept:"application/json"}});g.interceptors.response.use((function(e){return e}),(function(e){var t=e.config;if(401===e.response.status&&"/user/token/refresh/"===t.url)return Promise.reject(e);if("token_not_valid"===e.response.data.code&&401===e.response.status&&"Unauthorized"===e.response.statusText){var c=localStorage.getItem("refresh_token");if(c){var n=JSON.parse(atob(c.split(".")[1])),a=Math.ceil(Date.now()/1e3);if(console.log(n.exp),n.exp>a)return g.post("/user/token/refresh/",{refresh:c}).then((function(e){return localStorage.setItem("access_token",e.data.access),localStorage.setItem("refresh_token",e.data.refresh),g.defaults.headers.Authorization="JWT "+e.data.access,t.headers.Authorization="JWT "+e.data.access,g(t)})).catch((function(e){console.log(e)}));console.log("Refresh token is expired",n.exp,a)}else console.log("Refresh token not available.")}return Promise.reject(e)}));var f=g,v=new(function(){function e(){Object(x.a)(this,e),this.authenticated=!1,this.onLogin=function(){},this.onLogout=function(){},this.onUserInfoReaded=function(){}}return Object(p.a)(e,[{key:"checkAuthentication",value:function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.get("/user/token/check/");case 3:e.sent?this._onLogin():this._onLogout(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this._onLogout();case 10:t();case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(m.a)(u.a.mark((function e(t,c,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.post("/user/token/obtain/",{username:t,password:c});case 3:a=e.sent,f.defaults.headers.Authorization="JWT "+a.data.access,localStorage.setItem("access_token",a.data.access),localStorage.setItem("refresh_token",a.data.refresh),this._onLogin(),n(),e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(0),e.t0;case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(t,c,n){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.post("user/token/blacklist/",{refresh_token:localStorage.getItem("refresh_token")});case 3:localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),f.defaults.headers.Authorization=null,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:this._onLogout(),t();case 13:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isAuthenticated",value:function(){return this.authenticated}},{key:"readUserInfo",value:function(){var e=Object(m.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.get("/user/info/");case 2:t=e.sent,this.onUserInfoReaded(Object(j.a)({},t.data));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"clearUserInfo",value:function(){this.userInfo={},this.onUserInfoReaded({})}},{key:"_onLogin",value:function(){this.authenticated=!0,this.onLogin(),this.readUserInfo()}},{key:"_onLogout",value:function(){this.authenticated=!1,this.onLogout(),this.clearUserInfo()}}]),e}()),N=function(e){var t=e.component,c=Object(b.a)(e,["component"]);return Object(n.jsx)(d.b,Object(j.a)(Object(j.a)({},c),{},{render:function(e){return v.isAuthenticated()?Object(n.jsx)(t,Object(j.a)({},e)):Object(n.jsx)(d.a,{to:{pathname:"/user/login",state:{from:e.location}}})}}))},y=c(45);function w(e){var t=e.widgets;return t?(t.sort((function(e,t){return e.order<t.order?-1:e.order>t.order?1:0})),{widgets:t}):{widgets:[]}}function k(e){var t=s.a.useState(!1),c=Object(i.a)(t,2),a=c[0],r=c[1],l=e.deviceId,d={outline:"none",boxShadow:"none"};return Object(n.jsx)("div",{className:"col-2 m-0 p-0",children:Object(n.jsx)("div",{className:"bg-dark bg-color-gray p-2 h-100",children:Object(n.jsxs)("div",{className:"p-1",children:[Object(n.jsxs)("div",{className:"nav flex-column nav-pills",style:{overflow:"hidden"},id:"v-pills-tab",role:"tablist","aria-orientation":"vertical",children:[Object(n.jsx)(o.c,{className:"nav-link text-light btn",style:d,activeClassName:"bg-dark",to:"/device/".concat(l,"/overview/"),children:Object(n.jsxs)("div",{className:"d-inline-flex w-100 justify-content-center justify-content-lg-start",children:[Object(n.jsx)("i",{className:"fas fa-home",style:{fontSize:"1.3em"}}),Object(n.jsx)("span",{className:"pl-3 d-none d-lg-inline text-left",children:"\u041e\u0431\u0437\u043e\u0440"})]})}),Object(n.jsx)(o.c,{className:"nav-link text-light btn",style:d,activeClassName:"bg-dark",to:"/device/".concat(l,"/settings/"),children:Object(n.jsxs)("div",{className:"d-inline-flex w-100 justify-content-center justify-content-lg-start ",children:[Object(n.jsx)("i",{className:"far fa-edit",style:{fontSize:"1.3em"}}),Object(n.jsx)("span",{className:"pl-3 d-none d-lg-inline text-left",children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"})]})}),Object(n.jsx)(o.c,{className:"nav-link text-light btn",style:d,activeClassName:"bg-dark",to:"/device/".concat(l,"/graphs/"),children:Object(n.jsxs)("div",{className:"d-inline-flex w-100 justify-content-center justify-content-lg-start",children:[Object(n.jsx)("i",{className:"far fa-chart-bar",style:{fontSize:"1.3em"}}),Object(n.jsx)("span",{className:"pl-3 d-none d-lg-inline text-left",children:"\u0413\u0440\u0430\u0444\u0438\u043a\u0438"})]})}),Object(n.jsx)(o.c,{className:"nav-link text-light btn",style:d,activeClassName:"bg-dark",to:"/device/".concat(l,"/events/"),children:Object(n.jsxs)("div",{className:"d-inline-flex w-100 justify-content-center justify-content-lg-start",children:[Object(n.jsx)("i",{className:"far fa-bell",style:{fontSize:"1.3em"}}),Object(n.jsx)("span",{className:"pl-3 d-none d-lg-inline text-left",children:"\u0416\u0443\u0440\u043d\u0430\u043b"})]})})]}),Object(n.jsxs)("div",{className:"nav flex-column nav-pills",style:{overflow:"hidden"},children:[Object(n.jsx)("div",{className:"border-top mt-3 pt-3 border-secondary"}),Object(n.jsx)("button",{className:"nav-link text-light btn",style:d,onClick:function(){r(!a)},children:Object(n.jsxs)("div",{className:"d-inline-flex w-100 justify-content-center justify-content-lg-start",children:[Object(n.jsx)("i",{className:"\tfas fa-list py-1",style:{fontSize:"1.3em"}}),Object(n.jsx)("span",{className:"pl-3 d-none d-lg-inline text-left",children:"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"}),Object(n.jsx)("i",{className:"fas fa-caret-down py-1 pl-1 ml-auto d-none d-lg-inline"})]})}),a&&Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsx)(o.c,{className:"nav-link text-light btn",style:d,activeClassName:"bg-dark",to:"/device/".concat(l,"/admin/config/"),children:Object(n.jsxs)("div",{className:"d-inline-flex w-100 justify-content-center justify-content-lg-start",children:[Object(n.jsx)("i",{className:"fas fa-circle px-1 pt-2",style:{fontSize:"0.6em"}}),Object(n.jsx)("span",{className:"pl-3 d-none d-lg-inline text-left",children:"\u041f\u0440\u0438\u0431\u043e\u0440"})]})}),Object(n.jsx)(o.c,{className:"nav-link text-light btn",style:d,activeClassName:"bg-dark",to:"/device/".concat(l,"/admin/widgets/"),children:Object(n.jsxs)("div",{className:"d-inline-flex w-100 justify-content-center justify-content-lg-start",children:[Object(n.jsx)("i",{className:"fas fa-circle px-1 pt-2",style:{fontSize:"0.6em"}}),Object(n.jsx)("span",{className:"pl-3 d-none d-lg-inline text-left",children:"\u0412\u0438\u0434\u0436\u0435\u0442\u044b"})]})})]})]})]})})})}function C(e){var t=s.a.useState({}),c=Object(i.a)(t,2),r=c[0],l=c[1],o=e.device_id;function d(){f.get("http://bfcloud.space/device/parameters/",{params:{id:o}}).then((function(e){e&&l(Object(j.a)({},e.data))}))}return Object(a.useEffect)((function(){d();var e=setInterval(d,5e3);return function(){clearInterval(e)}}),[]),Object(n.jsx)(s.a.Fragment,{children:Object(n.jsxs)("div",{className:"d-flex border rounded border-dark px-3 mb-1 mx-1",children:[Object(n.jsxs)("h3",{className:"pt-1",children:["\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e: ",Object(n.jsx)("b",{children:r.name})]}),Object(n.jsx)("div",{className:"ml-auto mx-3 px-3 border-x border-dark",children:r.is_online?Object(n.jsxs)("div",{className:"text-success",children:[Object(n.jsx)("span",{children:"\u041e\u043d\u043b\u0430\u0439\u043d"})," ",Object(n.jsx)("br",{}),Object(n.jsx)("i",{className:"fas fa-check text-center w-100"})]}):Object(n.jsxs)("div",{className:"text-danger",children:[Object(n.jsx)("span",{children:"\u041d\u0435\u0442 \u0441\u0432\u044f\u0437\u0438"})," ",Object(n.jsx)("br",{}),Object(n.jsx)("i",{className:"fas fa-times text-center w-100"})]})}),Object(n.jsx)("div",{children:Object(n.jsxs)("p",{className:"m-0 mr-1 text-right",children:["\u0414\u0430\u043d\u043d\u044b\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b: ",Object(n.jsx)("br",{})," ",r.verbose_last_update]})})]})})}var S=c(6),_=function(e,t){var c=function(c){e.current&&e.current.contains(c.target)&&t()};Object(a.useEffect)((function(){return document.addEventListener("click",c),function(){document.removeEventListener("click",c)}}))};var F=function(e){var t=this,c=e.tags.filter((function(e){return!1===e.disabled})),r=e.resetZoomButton,l=s.a.useState(null),o=Object(i.a)(l,2),d=o[0],j=o[1];_(r,(function(){console.log("seted onclick"),j(null)})),Object(a.useEffect)((function(){r.current.className=d?r.current.className.replace("d-none","d-block"):r.current.className.replace("d-block","d-none")}),[d]);var b=!1;return c.map((function(e){e.values.length>0&&(b=!0)})),b?Object(n.jsx)(s.a.Fragment,{children:Object(n.jsx)("div",{className:"graph-container h-100",style:{overflow:"hidden"},children:Object(n.jsxs)(S.b,{margin:{left:40,right:0,top:0,bottom:30},xType:"time",animation:!0,xDomain:d&&[d.left,d.right],yDomain:d&&[d.bottom,d.top],yPadding:10,children:[Object(n.jsx)(S.d,{style:{stroke:"#444A50"}}),Object(n.jsx)(S.g,{style:{line:{stroke:"#6c757d"}},tickTotal:15}),Object(n.jsx)(S.h,{style:{line:{stroke:"#6c757d"}}}),c.map((function(e){return Object(n.jsx)(S.e,{data:e.values,color:e.curve_color},e.tag_id)})),Object(n.jsx)(S.c,{onBrushEnd:function(e){return j(e)},onDrag:function(e){t.setState({lastDrawLocation:{bottom:d.bottom+(e.top-e.bottom),left:d.left-(e.right-e.left),right:d.right-(e.right-e.left),top:d.top+(e.top-e.bottom)}})}})]})})}):Object(n.jsx)(s.a.Fragment,{children:Object(n.jsx)("div",{className:"graph-container h-100",children:Object(n.jsxs)(S.b,{dontCheckIfEmpty:!0,margin:{left:30,right:0,top:0,bottom:30},children:[Object(n.jsx)(S.d,{style:{stroke:"#444A50"}}),Object(n.jsx)(S.g,{}),Object(n.jsx)(S.h,{}),Object(n.jsx)(S.e,{data:[{x:0,y:0}]})]})})})};var I=function(e){var t=e.tags.filter((function(e){return!1===e.disabled})),c=e.resetZoomButton,r=s.a.useState(null),l=Object(i.a)(r,2),o=l[0],d=l[1],j=s.a.useState([]),b=Object(i.a)(j,2),h=b[0],u=b[1];_(c,(function(){console.log("seted onclick"),d(null)})),Object(a.useEffect)((function(){c.current.className=o?c.current.className.replace("d-none","d-block"):c.current.className.replace("d-block","d-none")}),[o]);var m=t.map((function(e){return e.values.map((function(t){return t.title=e.tag_name,t.color=e.curve_color,t}))})),x=function(e,t){var c=t.index;u(m.map((function(e){return e[c]})))},p=!1;return t.map((function(e){e.values.length>0&&(p=!0)})),p?Object(n.jsx)(s.a.Fragment,{children:Object(n.jsx)("div",{className:"graph-container  h-100",style:{overflow:"hidden"},children:Object(n.jsxs)(S.b,{margin:{left:40,right:0,top:0,bottom:30},xType:"time",animation:!0,xDomain:o&&[o.left,o.right],yDomain:o&&[o.bottom,o.top],yPadding:10,onMouseLeave:function(){u([])},children:[Object(n.jsx)(S.d,{style:{stroke:"#444A50"}}),Object(n.jsx)(S.g,{style:{line:{stroke:"#6c757d"}},tickTotal:15}),Object(n.jsx)(S.h,{style:{line:{stroke:"#6c757d"}}}),t.map((function(e,t){return 0===t?Object(n.jsx)(S.e,{onNearestX:x,data:e.values,color:e.curve_color},e.tag_id):Object(n.jsx)(S.e,{data:e.values,color:e.curve_color},e.tag_id)})),Object(n.jsx)(S.c,{onBrushEnd:function(e){return d(e)},onDrag:function(e){d({lastDrawLocation:{bottom:o.bottom+(e.top-e.bottom),left:o.left-(e.right-e.left),right:o.right-(e.right-e.left),top:o.top+(e.top-e.bottom)}})}}),h[0]&&h.map((function(e,t){return e?Object(n.jsx)(S.f,{color:e.color,size:"5",data:[e]},t):null})),Object(n.jsx)(S.a,{values:h,style:{line:{backgroundColor:"red"}},children:h[0]&&Object(n.jsx)("div",{className:"rounded p-1 mx-2",style:{background:"rgba(37, 37, 38, 1)"},children:Object(n.jsxs)("table",{className:"table text-light p-0 m-0",children:[Object(n.jsx)("thead",{children:Object(n.jsx)("tr",{children:Object(n.jsx)("td",{colSpan:"3",style:{fontSize:"1.2em",color:"rgb(180, 180, 180)"},className:"border-0 font-weight-bold p-1 m-0 text-center text-nowrap",children:function(e){var t=new Date(e);return new Intl.DateTimeFormat([],{dateStyle:"long",timeStyle:"medium"}).format(t)}(h[0].x)})})}),Object(n.jsx)("tbody",{children:h.map((function(e,t){return e?Object(n.jsxs)("tr",{style:{fontSize:"1.1em",color:"rgb(210, 210, 210)"},children:[Object(n.jsx)("td",{style:{color:e.color,paddingTop:"4px"},className:"text-nowrap border-0 px-1 pb-0 m-0\tfas fa-minus"}),Object(n.jsxs)("td",{className:"text-nowrap border-0 pl-1 pr-2 py-0 m-0",children:[" ",e.title,": "]}),Object(n.jsxs)("td",{className:"text-nowrap border-0 px-1 py-0 m-0 font-weight-bold  text-right",children:[" ",e.y," "]})]},t):null}))})]})})})]})})}):Object(n.jsx)(s.a.Fragment,{children:Object(n.jsx)("div",{className:"graph-container h-100",children:Object(n.jsxs)(S.b,{dontCheckIfEmpty:!0,margin:{left:30,right:0,top:0,bottom:30},children:[Object(n.jsx)(S.d,{style:{stroke:"#444A50"}}),Object(n.jsx)(S.g,{}),Object(n.jsx)(S.h,{}),Object(n.jsx)(S.e,{data:[{x:0,y:0}]})]})})})},T=c(67),W=c.n(T);function L(e){var t=s.a.useState(""),c=Object(i.a)(t,2),a=c[0],r=c[1],l={onClick:e.onClick,items:e.tags.map((function(e){return{title:e.tag_name,color:e.curve_color,tag_id:e.tag_id,disabled:e.disabled}}))};return Object(n.jsx)("div",{className:"d-block text-dark pl-3",children:Object(n.jsx)(W.a,{height:parseInt(e.height.replace("px","")),onSearchChange:function(e){r(e)},searchPlaceholder:"\u041f\u043e\u0438\u0441\u043a...",searchText:a,onItemClick:function(e){l.onClick(e.tag_id)},items:l.items})})}function D(e){var t=Object(a.useState)(!1),c=Object(i.a)(t,2),r=c[0],l=c[1],o=Object(a.useState)([!1,!0,!1,!1,!1,!1,!1,!1]),d=Object(i.a)(o,2),j=d[0],b=d[1],h=e.changeGraphInterval;function u(e){var t=j.map((function(t,c){return c===e}));b(t),l(7===e)}function m(e){return j[e]?" active":""}return Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsxs)("div",{className:"d-flex justify-content-left p-0 pt-2 m-0",children:[Object(n.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-secondary mx-1 "+m(0),onClick:function(){u(0),h("5m","all")},children:"\u043e\u043d\u043b\u0430\u0439\u043d"}),Object(n.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-secondary mx-1 "+m(1),onClick:function(){u(1),h("1h","1m")},children:"1 \u0447\u0430\u0441"}),Object(n.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-secondary mx-1 "+m(2),onClick:function(){u(2),h("6h","5m")},children:"6 \u0447\u0430\u0441\u043e\u0432"}),Object(n.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-secondary mx-1 "+m(3),onClick:function(){u(3),h("12h","10m")},children:"12 \u0447\u0430\u0441\u043e\u0432"}),Object(n.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-secondary mx-1 "+m(4),onClick:function(){u(4),h("1d","30m")},children:"\u0441\u0443\u0442\u043a\u0438"}),Object(n.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-secondary mx-1 "+m(5),onClick:function(){u(5),h("7d","2h")},children:"\u043d\u0435\u0434\u0435\u043b\u044f"}),Object(n.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-secondary mx-1 "+m(6),onClick:function(){u(6),h("30d","12h")},children:"\u043c\u0435\u0441\u044f\u0446"}),Object(n.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-secondary mx-1 "+m(7),onClick:function(){u(7),h("30d","12h")},children:"\u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b"})]}),r?Object(n.jsx)(z,{}):null]})}function z(e){return Object(n.jsx)(s.a.Fragment,{children:Object(n.jsx)("form",{className:"pt-2",children:Object(n.jsxs)("div",{className:"input-group input-group-sm ",children:[Object(n.jsx)("div",{className:"input-group-prepend ",children:Object(n.jsx)("span",{className:"input-group-text bg-secondary text-light border-secondary ml-1",children:"C"})}),Object(n.jsx)("input",{type:"date",className:"form-control bg-dark text-light border-secondary"}),Object(n.jsx)("input",{type:"time",className:"form-control bg-dark text-light border-secondary"}),Object(n.jsx)("div",{className:"input-group-prepend ",children:Object(n.jsx)("span",{className:"input-group-text bg-secondary text-light border-secondary ml-2",children:"\u041f\u043e"})}),Object(n.jsx)("input",{type:"date",className:"form-control bg-dark text-light border-secondary"}),Object(n.jsx)("input",{type:"time",className:"form-control bg-dark text-light border-secondary"}),Object(n.jsx)("button",{type:"button",className:"btn btn-sm btn-secondary ml-2 mr-1",children:"\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c"})," ",Object(n.jsx)("br",{})]})})})}c(125);function E(){return Object(n.jsxs)("div",{className:"lds-ellipsis",children:[Object(n.jsx)("div",{}),Object(n.jsx)("div",{}),Object(n.jsx)("div",{}),Object(n.jsx)("div",{})]})}var A=function(e){var t=s.a.useState(!1),c=Object(i.a)(t,2),a=(c[0],c[1]),r=s.a.useState(!1),l=Object(i.a)(r,2),o=l[0],d=l[1],j=s.a.useRef(null),b=s.a.useRef(null),h=s.a.useRef(null),u=s.a.useRef(null),m=s.a.useRef(null),x=s.a.useRef(null),p=e.tagsHistory,O=e.height?e.height:"300px",g=function(){var t=" full-screen-card";j.current.className.includes(t)?(j.current.className=j.current.className.replace(t,""),b.current.style.height=O,b.current.className=b.current.className.replace("col-10","col-8"),e.legend&&(m.current.className=m.current.className.replace("col-2","col-4")),h.current.className=h.current.className.replace("fa-compress","fa-expand"),h.current.className=h.current.className.replace("text-primary","text-light"),a(!1)):(j.current.className+=t,b.current.style.height="calc(100vh - 150px)",b.current.className=b.current.className.replace("col-8","col-10"),e.legend&&(m.current.className=m.current.className.replace("col-4","col-2")),h.current.className=h.current.className.replace("fa-expand","fa-compress"),h.current.className=h.current.className.replace("text-light","text-primary"),a(!0))},f=function(){o?(d(!o),u.current.className=u.current.className.replace("text-primary","text-light")):(d(!o),u.current.className=u.current.className.replace("text-light","text-primary"))};return Object(n.jsx)(s.a.Fragment,{children:Object(n.jsxs)("div",{ref:j,className:"card shadow-sm py-2 bg-dark text-light h-100",children:[Object(n.jsxs)("div",{className:"d-flex mb-1",children:[Object(n.jsx)("h5",{className:"px-3 pt-1 pb-2 m-0",children:e.title}),Object(n.jsx)("span",{className:"ml-auto"}),Object(n.jsx)("button",{type:"button",ref:x,className:"btn btn-link text-primary m-0 p-0 mt-1 mr-2 fas fa-search-minus d-none",style:{width:"28px",height:"28px",fontSize:"1em",textDecoration:"none",outline:"none",boxShadow:"none"},onClick:null}),Object(n.jsx)("button",{type:"button",ref:u,className:"btn btn-link text-light m-0 p-0 mt-1 mr-2 fas fa-ruler-vertical",style:{width:"28px",height:"28px",fontSize:"1em",textDecoration:"none",outline:"none",boxShadow:"none"},onClick:f}),Object(n.jsx)("button",{type:"button",ref:h,className:"btn btn-link text-light m-0 p-0 mt-1 mr-2 fas fa-expand",style:{width:"28px",height:"28px",fontSize:"1em",textDecoration:"none",outline:"none",boxShadow:"none"},onClick:g})]}),e.loading?Object(n.jsx)("div",{className:"d-flex justify-content-center",children:Object(n.jsx)(E,{})}):Object(n.jsxs)("div",{className:"row m-0 px-3 py-0",children:[Object(n.jsx)("div",{ref:b,className:"".concat(e.legend?"col-8":"col-12"," m-0 p-0"),style:{height:O},children:o?Object(n.jsx)(I,{tags:p,resetZoomButton:x}):Object(n.jsx)(F,{tags:p,resetZoomButton:x})}),e.legend&&Object(n.jsx)("div",{ref:m,className:"col-4 m-0 p-0",children:Object(n.jsx)(L,{tags:p,onClick:e.toggleCurveDisplay,height:O})}),e.toolbar&&Object(n.jsx)("div",{className:"col-12 align-self-start m-0 p-0",children:Object(n.jsx)(D,{toggleModal:g,toggleCroshair:f,changeGraphInterval:e.changeGraphInterval})})]})]})})},R=["#f44336","#00BCD4","#FF9800","#E91E63","#009688","#FF5722","#9C27B0","#4CAF50","#795548","#673AB7","#8BC34A","#607D8B","#3F51B5","#CDDC39","#2196F3","#FFEB3B","#03A9F4","#FFC107"];function B(e){var t=R.length;return R[e+1>t?e%t:e]}function U(e){var t=s.a.useState(!0),c=Object(i.a)(t,2),r=c[0],l=c[1],o=s.a.useState({interval:"1h",resolution:"1m",tags:e.widget.tags}),d=Object(i.a)(o,2),b=d[0],h=d[1],u=s.a.useState([]),m=Object(i.a)(u,2),x=m[0],p=m[1],O=e.device_id;function g(){f.get("http://bfcloud.space/device/tags/history/",{params:Object(j.a)({id:O},b)}).then((function(e){e&&function(e){var t=e.map((function(e,t){return{tag_id:e.tag_id,tag_code:e.tag_code,tag_name:e.tag_name,disabled:!1,curve_color:B(t),values:e.values.map((function(e){return{x:new Date(e.add_date),y:e.value}}))}}));p((function(e){return t.map((function(t){var c=e.filter((function(e){return e.tag_id===t.tag_id})),n=c.length>0?c[0].disabled:t.disabled;return Object(j.a)(Object(j.a)({},t),{},{disabled:n})}))}))}(e.data)}))}return Object(a.useEffect)((function(){g();var e,t=setTimeout((function(){l(!1)}),1e3),c=setInterval(g,"5m"===(e=b.interval)?2e3:"1h"===e?3e4:"6h"===e?12e4:"12h"===e?3e5:"1d"===e?9e5:"7d"===e?36e5:"30d"===e?216e5:3e5);return function(){clearTimeout(t),clearInterval(c)}}),[b]),Object(n.jsx)(s.a.Fragment,{children:Object(n.jsx)(A,{tagsHistory:x,toggleCurveDisplay:function(e){var t=x.map((function(t){return t.tag_id===e&&(t.disabled=!t.disabled),t}));p(t)},title:e.widget.title,legend:e.widget.legend,loading:r,toolbar:e.widget.toolbar,height:e.widget.height,changeGraphInterval:function(e,t){h((function(c){return Object(j.a)(Object(j.a)({},c),{},{interval:e,resolution:t})}))}})})}var P=function(e){var t=e.tag,c=e.index;return Object(n.jsxs)("tr",{children:[Object(n.jsxs)("td",{className:"border-secondary text-secondary pl-2",children:[" ",c+1," "]}),Object(n.jsxs)("td",{className:"border-secondary",children:[" ",t.code," "]}),Object(n.jsxs)("td",{className:"border-secondary",children:[" ",t.name," "]}),Object(n.jsxs)("td",{className:"border-secondary",children:[" ",t.value," "]})]})};var J=function(e){var t=s.a.useState(!1),c=Object(i.a)(t,2),a=(c[0],c[1]),r=s.a.useRef(null),l=s.a.useRef(null);return Object(n.jsxs)("div",{ref:l,className:"card shadow-sm py-2 bg-dark text-light h-100",children:[Object(n.jsxs)("div",{className:"d-flex mb-1",children:[Object(n.jsx)("h5",{className:"px-3 pt-1 pb-0 m-0",children:e.title}),Object(n.jsx)("span",{className:"ml-auto"}),Object(n.jsx)("button",{type:"button",ref:r,className:"btn btn-link text-light m-0 p-0 mt-1 mr-2 fas fa-expand",style:{width:"28px",height:"28px",fontSize:"1em",textDecoration:"none",outline:"none",boxShadow:"none"},onClick:function(){var e=" full-screen-card";l.current.className.includes(e)?(l.current.className=l.current.className.replace(e,""),r.current.className=r.current.className.replace("fa-compress","fa-expand"),r.current.className=r.current.className.replace("text-primary","text-light"),a(!1)):(l.current.className+=e,r.current.className=r.current.className.replace("fa-expand","fa-compress"),r.current.className=r.current.className.replace("text-light","text-primary"),a(!0))}})]}),e.loading?Object(n.jsx)("div",{className:"d-flex justify-content-center",children:Object(n.jsx)(E,{})}):Object(n.jsx)("div",{className:"table-responsive px-3",children:Object(n.jsxs)("table",{className:"table table-sm text-light tadle-dark w-100 mb-0",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:"border-0 text-secondary font-weight-bold pl-2",children:"\u2116"}),Object(n.jsx)("td",{className:"border-0 text-secondary font-weight-bold",children:"\u041a\u043e\u0434 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430"}),Object(n.jsx)("td",{className:"border-0 text-secondary font-weight-bold",children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430"}),Object(n.jsx)("td",{className:"border-0 text-secondary font-weight-bold",children:"\u0422\u0435\u043a\u0443\u0449\u0435\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435"})]})}),Object(n.jsx)("tbody",{children:e.tags.map((function(e,t){return Object(n.jsx)(P,{tag:e,index:t},e.code)}))})]})})]})};function M(e){var t=s.a.useState([]),c=Object(i.a)(t,2),r=c[0],l=c[1],o=s.a.useState(!0),d=Object(i.a)(o,2),j=d[0],b=d[1],h=e.device_id,u=e.widget.tags;function m(){f.get("http://bfcloud.space/device/tags/value/",{params:{id:h,tags:u}}).then((function(e){e&&l(e.data)}))}return Object(a.useEffect)((function(){m();var e=setTimeout((function(){b(!1)}),1e3),t=setInterval(m,2e3);return function(){clearTimeout(e),clearInterval(t)}}),[]),Object(n.jsx)(s.a.Fragment,{children:Object(n.jsx)(J,{tags:r,title:e.widget.title,loading:j})})}function H(e){var t=e.tag,c=e.addTextRight,a=e.addTextLeft;return Object(n.jsxs)("div",{className:"card shadow-sm py-2 bg-dark text-light h-100",children:[Object(n.jsxs)("div",{className:"d-flex mb-1",children:[Object(n.jsx)("h5",{className:"px-3 pt-1 pb-0 m-0",children:e.title}),Object(n.jsx)("span",{className:"ml-auto"})]}),e.loading?Object(n.jsx)("div",{className:"d-flex justify-content-center",children:Object(n.jsx)(E,{})}):Object(n.jsx)("div",{className:"d-flex justify-content-center align-items-end h-100 px-3",children:t?Object(n.jsxs)("p",{className:"display-4 m-0 p-0",children:[Object(n.jsxs)("span",{children:[a," "]}),t.value,Object(n.jsxs)("span",{children:[" ",c]})]}):Object(n.jsx)("p",{className:"display-4 text-secondary m-0 p-0",children:"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"})})]})}function V(e){var t=s.a.useState([]),c=Object(i.a)(t,2),r=c[0],l=c[1],o=s.a.useState(!0),d=Object(i.a)(o,2),j=d[0],b=d[1],h=e.device_id,u=e.widget.tags,m=r[0];function x(){f.get("http://bfcloud.space/device/tags/value/",{params:{id:h,tags:u}}).then((function(e){e&&l(e.data)}))}return Object(a.useEffect)((function(){x();var e=setTimeout((function(){b(!1)}),1e3),t=setInterval(x,2e3);return function(){clearTimeout(e),clearInterval(t)}}),[]),Object(n.jsx)(s.a.Fragment,{children:Object(n.jsx)(H,{tag:m,title:e.widget.title,addTextRight:e.widget.addTextRight,addTextLeft:e.widget.addTextLeft,loading:j})})}function q(e){var t=e.widgetsTemplate,c=e.device_id;return e.widgetsTemplate&&e.widgetsTemplate.widgets?Object(n.jsx)(s.a.Fragment,{children:Object(n.jsx)("div",{className:"container-fluid row equal p-0 m-0",children:t.widgets.map((function(e,t){return Object(n.jsx)(G,{widget:e,device_id:c},t)}))})}):null}function G(e){var t=e.widget,c=e.device_id;return"table"===t.type?Object(n.jsx)("div",{className:"col-xl-".concat(3*t.width," col-lg-").concat(Math.min(6*t.width,12)," col-md-12 p-1 m-0"),children:Object(n.jsx)(M,{device_id:c,widget:t})}):"graph"===t.type?Object(n.jsx)("div",{className:"col-xl-".concat(3*t.width," col-lg-").concat(Math.min(6*t.width,12)," col-md-12 p-1 m-0"),children:Object(n.jsx)(U,{device_id:c,widget:t})}):"indicator"===t.type?Object(n.jsx)("div",{className:"col-xl-".concat(3*t.width," col-lg-").concat(Math.min(6*t.width,12)," col-md-12 p-1 m-0"),children:Object(n.jsx)(V,{device_id:c,widget:t})}):void 0}function X(e){var t=e.device_id,c=e.widgetsTemplate;return Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsx)(C,{device_id:t}),Object(n.jsx)(q,{widgetsTemplate:c,device_id:t})]})}function Z(){return Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsx)("h3",{children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430"}),Object(n.jsx)("p",{children:"\u0420\u0430\u0437\u0434\u0435\u043b \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u044c\u0441\u044f \u0432 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435 ... "})]})}function K(){return Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsx)("h3",{children:"\u0416\u0443\u0440\u043d\u0430\u043b \u0441\u043e\u0431\u044b\u0442\u0438\u0439 \u043e\u0431\u044c\u0435\u043a\u0442\u0430"}),Object(n.jsx)("p",{children:"\u0420\u0430\u0437\u0434\u0435\u043b \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u044c\u0441\u044f \u0432 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435 ... "})]})}var Q={widgets:[{type:"graph",width:4,height:"calc(65vh)",title:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f",tags:null,legend:!0,toolbar:!0}]};function Y(e){var t=e.device_id;return Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsx)(C,{device_id:t}),Object(n.jsx)(q,{widgetsTemplate:Q,device_id:t})]})}function $(){return Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsx)("h3",{children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432 \u043f\u0440\u0438\u0431\u043e\u0440\u0430"}),Object(n.jsx)("p",{children:"\u0420\u0430\u0437\u0434\u0435\u043b \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u044c\u0441\u044f \u0432 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435 ... "})]})}function ee(e){return Object(n.jsx)(s.a.Fragment,{children:Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:e.id,className:"text-secondary",children:e.titel}),Object(n.jsx)("input",{type:"text",className:"form-control form-control-sm bg-secondary border-secondary text-light",placeholder:e.placeholder,id:e.id,defaultValue:e.value,onChange:e.onChange}),Object(n.jsx)("p",{className:"text-small text-info p-0 m-0",children:e.comment})]})})}function te(e){return Object(n.jsx)(s.a.Fragment,{children:Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:e.id,className:"text-secondary",children:e.titel}),Object(n.jsx)("input",{type:"number",className:"form-control form-control-sm bg-secondary border-secondary text-light",placeholder:e.placeholder,id:e.id,defaultValue:e.value,min:e.min,max:e.max,onChange:e.onChange}),Object(n.jsx)("p",{className:"text-small text-info p-0 pt-1 m-0",children:e.comment})]})})}function ce(e){return Object(n.jsx)(s.a.Fragment,{children:Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:e.id,className:"text-secondary",children:e.titel}),Object(n.jsxs)("select",{className:"form-control form-control-sm bg-secondary border-secondary text-light",id:e.id,placeholder:e.placeholder,defaultValue:e.value,onChange:e.onChange,children:[Object(n.jsx)("option",{value:"",disabled:!0,selected:!0,hidden:!0,children:"---"}),e.options&&e.options.map((function(e,t){return Object(n.jsx)("option",{children:e},t)}))]}),Object(n.jsx)("p",{className:"text-small text-info p-0 m-0",children:e.comment})]})})}function ne(e){return Object(n.jsx)(s.a.Fragment,{children:Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:e.id,className:"text-secondary",children:e.titel}),Object(n.jsx)("select",{multiple:!0,className:"form-control form-control-sm bg-secondary border-secondary text-light",id:e.id,placeholder:e.placeholder,defaultValue:e.value,onChange:e.onChange,children:e.options&&e.options.map((function(e,t){return Object(n.jsx)("option",{children:e},t)}))}),Object(n.jsx)("p",{className:"text-small text-info p-0 m-0",children:e.comment})]})})}function ae(e){return Object(n.jsx)(s.a.Fragment,{children:Object(n.jsxs)("div",{className:"form-check pb-3",children:[Object(n.jsx)("input",{type:"checkbox",className:"form-check-input",id:e.id,checked:e.checked,onChange:e.onChange}),Object(n.jsx)("span",{children:e.titel}),Object(n.jsx)("p",{className:"text-small text-info p-0 m-0",children:e.comment})]})})}function se(e){var t=e.device_id,c=e.updateWidgetsTemplate,r=s.a.useState(w(e.widgetsTemplate)),l=Object(i.a)(r,2),o=l[0],d=l[1],j=s.a.useState(0),b=Object(i.a)(j,2),h=b[0],u=b[1],m=s.a.useState([]),x=Object(i.a)(m,2),p=x[0],O=x[1];Object(a.useEffect)((function(){f.get("http://bfcloud.space/device/tags/value/",{params:{id:t}}).then((function(e){e&&O(e.data)}))}),[]);var g=s.a.useState(!1),v=Object(i.a)(g,2),N=v[0],y=v[1],k=function(){y(!1),setTimeout((function(){y(!0)}),0)};Object(a.useEffect)((function(){k()}),[h,p]);var C=function(e){var t=o.widgets.map((function(e){return e}));t.push(e),d({widgets:t})};return o.widgets?Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsx)("h3",{className:"mb-3",children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0432\u0438\u0434\u0436\u0435\u0442\u043e\u0432"}),Object(n.jsxs)("div",{className:"row equal p-0 m-0",children:[Object(n.jsx)("div",{className:"col-md-6 col-lg-7 col-xl-8 px-1",style:{minHeight:"80vh"},children:Object(n.jsx)("div",{className:"p-0 m-0 bg-dark rounded h-100",children:Object(n.jsx)(re,{widgetsTemplate:o,selectedWidget:h,changeSelectedWidget:function(e){u(e)}})})}),Object(n.jsx)("div",{className:"col-md-6 col-lg-5 col-xl-4 px-1",style:{minHeight:"80vh"},children:Object(n.jsxs)("div",{className:"p-0 m-0 bg-dark rounded h-100",children:[Object(n.jsx)(ie,{addWidget:function(e){"table"===e?C(xe):"graph"===e?C(pe):"indicator"===e&&C(Oe)},saveWidgetsTemplate:function(){c(o)},cancelChanges:function(){d(e.widgetsTemplate),u(0),k()}}),N?Object(n.jsx)(oe,{widget:o.widgets[h],tags:p,updateWidget:function(e){var t=o.widgets.map((function(t,c){return c===h?e:t}));d({widgets:t})},deleteWidget:function(){return function(e){var t=o.widgets.map((function(e){return e}));t.splice(e,1),d({widgets:t}),u(0)}(h)}}):null]})})]})]}):Object(n.jsx)(E,{})}function re(e){var t=e.widgetsTemplate,c=e.selectedWidget,a=e.changeSelectedWidget;if(!t.widgets)return Object(n.jsx)(E,{});var s=t.widgets.map((function(e,t){var s=t===c?"border-primary":"";return Object(n.jsx)("div",{className:"col-".concat(3*e.width," p-1 m-0"),children:Object(n.jsx)("button",{className:"btn btn-dark w-100 h-100 text-left p-0 "+s,style:{overflow:"hidden",minHeight:"10vh",boxShadow:"none"},onClick:function(){a(t)},children:Object(n.jsxs)("div",{className:"h-100 p-0 px-2",children:[Object(n.jsx)("span",{className:"small text-nowrap",children:e.title}),Object(n.jsx)(le,{widget:e})]})})},t)}));return Object(n.jsx)("div",{className:"d-flex justify-content-center m-0 p-4",style:{},children:Object(n.jsx)("div",{className:"row equal rounded m-0 p-3",style:{backgroundColor:"#1E1E1E",maxWidth:"800px"},children:s})})}var le=function(e){var t=e.widget,c=e.color?e.color:"secondary";return"table"===t.type?Object(n.jsx)("div",{className:"d-flex justify-content-center",children:Object(n.jsx)("span",{className:"fas fa-table text-".concat(c," m-2"),style:{fontSize:"4em"}})}):"graph"===t.type?Object(n.jsx)("div",{className:"d-flex justify-content-center",children:Object(n.jsx)("span",{className:"fas fa-chart-area text-".concat(c," m-2"),style:{fontSize:"4em"}})}):"indicator"===t.type?Object(n.jsx)("div",{className:"d-flex justify-content-center",children:Object(n.jsxs)("span",{className:"border rounded-sm text-".concat(c," border-").concat(c," text-nowrap m-2 px-2"),style:{fontSize:"1.5em"},children:[t.addTextLeft," XX.X ",t.addTextRight]})}):null};function ie(e){var t=s.a.useState(!1),c=Object(i.a)(t,2),a=c[0],r=c[1],l=function(){return r(!1)};return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"p-2",children:Object(n.jsx)("div",{className:"m-1 pt-2 pb-3 border-bottom border-secondary",children:Object(n.jsxs)("div",{className:"d-flex justify-content-left",children:[Object(n.jsx)("button",{className:"btn btn-outline-info btn-sm mr-3",type:"button",onClick:function(){return r(!0)},children:" \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u0438\u0434\u0436\u0435\u0442"}),Object(n.jsx)("button",{className:"btn btn-outline-success btn-sm mr-3",type:"button",onClick:e.saveWidgetsTemplate,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(n.jsx)("button",{className:"btn btn-outline-danger btn-sm",type:"button",onClick:e.cancelChanges,children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})})}),Object(n.jsx)(je,{show:a,handleClose:l,handleAddWidget:function(t){e.addWidget(t),l()}})]})}function oe(e){var t=e.widget,c=e.tags,a=e.updateWidget,s=e.deleteWidget,r={};return t?("table"===t.type&&(r=Object(n.jsx)(be,{widget:t,tags:c,updateWidget:a,deleteWidget:s})),"graph"===t.type&&(r=Object(n.jsx)(he,{widget:t,tags:c,updateWidget:a,deleteWidget:s})),"indicator"===t.type&&(r=Object(n.jsx)(ue,{widget:t,tags:c,updateWidget:a,deleteWidget:s})),Object(n.jsx)("div",{className:"p-0 m-0 my-1",children:Object(n.jsxs)(de,{children:[" ",r," "]})})):null}function de(e){return Object(n.jsx)("div",{className:"text-light p-2 m-0 mx-1 h-100",children:e.children})}function je(e){var t=function(e){return Object(n.jsx)("div",{className:"col-4 p-1 w-100",children:Object(n.jsx)("button",{type:"button",className:"btn btn-primary w-100 h-100",onClick:e.onClick,children:Object(n.jsx)("div",{className:"h-100 p-0 px-2",children:e.children})})})};return e.show?Object(n.jsx)("div",{className:"modal modal-bg d-block",children:Object(n.jsx)("div",{className:"modal-dialog",children:Object(n.jsxs)("div",{className:"modal-content",children:[Object(n.jsxs)("div",{className:"modal-header",children:[Object(n.jsx)("h4",{className:"modal-title",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0432\u0438\u0434\u0436\u0435\u0442"}),Object(n.jsx)("button",{type:"button",className:"close",onClick:e.handleClose,children:"\xd7"})]}),Object(n.jsx)("div",{className:"modal-body",children:Object(n.jsxs)("div",{className:"row equal px-1",children:[Object(n.jsxs)(t,{onClick:function(){return e.handleAddWidget("indicator")},children:[Object(n.jsx)("span",{className:"text-nowrap",children:"\u0418\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440"}),Object(n.jsx)("div",{className:"pt-2"}),Object(n.jsx)(le,{widget:{type:"indicator"},color:"light"})]}),Object(n.jsxs)(t,{onClick:function(){return e.handleAddWidget("table")},children:[Object(n.jsx)("span",{className:"text-nowrap",children:"\u0422\u0430\u0431\u043b\u0438\u0446\u0430"}),Object(n.jsx)(le,{widget:{type:"table"},color:"light"})]}),Object(n.jsxs)(t,{onClick:function(){return e.handleAddWidget("graph")},children:[Object(n.jsx)("span",{className:"text-nowrap",children:"\u0413\u0440\u0430\u0444\u0438\u043a"}),Object(n.jsx)(le,{widget:{type:"graph"},color:"light"})]})]})}),Object(n.jsx)("div",{className:"modal-footer",children:Object(n.jsx)("button",{type:"button",className:"btn btn-danger",onClick:e.handleClose,children:"\u041e\u0442\u043c\u0435\u043d\u0430"})})]})})}):null}function be(e){var t=e.widget,c=e.tags,a=e.updateWidget,r=[];c&&(r=c.map((function(e){return e.code})));return Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsxs)("div",{className:"d-flex",children:[Object(n.jsx)("h6",{children:"\u0422\u0430\u0431\u043b\u0438\u0446\u0430"}),Object(n.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-danger ml-auto",onClick:e.deleteWidget,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]}),Object(n.jsxs)("form",{children:[Object(n.jsx)(ee,{titel:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",id:"title",placeholder:"...",value:t.title,onChange:function(e){a(Object(j.a)(Object(j.a)({},t),{},{title:e.target.value}))}}),Object(n.jsx)(te,{titel:"\u041f\u043e\u0440\u044f\u0434\u043e\u043a \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f",id:"order",placeholder:"...",value:t.order,onChange:function(e){a(Object(j.a)(Object(j.a)({},t),{},{order:e.target.value}))}}),Object(n.jsx)(te,{titel:"\u0428\u0438\u0440\u0438\u043d\u0430",id:"width",placeholder:"...",value:t.width,min:1,max:4,onChange:function(e){a(Object(j.a)(Object(j.a)({},t),{},{width:e.target.value}))}}),Object(n.jsx)(ne,{titel:"\u0422\u0435\u0433\u0438",id:"tags",placeholder:"...",value:t.tags,options:r,comment:Object(n.jsxs)("span",{className:"m-0 p-0 d-block mt-1",children:["\u0423\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0439\u0442\u0435 ",Object(n.jsx)("kbd",{className:"text-info",children:"Ctrl"})," \u0434\u043b\u044f \u0432\u044b\u0431\u043e\u0440\u0430 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432"]}),onChange:function(e){a(Object(j.a)(Object(j.a)({},t),{},{tags:me(e)}))}}),Object(n.jsx)(ne,{titel:"\u041a\u043e\u043b\u043e\u043d\u043a\u0438",id:"fields",placeholder:"...",value:t.fields,options:["#No","code","name","value"],comment:Object(n.jsxs)("span",{className:"m-0 p-0 d-block mt-1",children:["\u0423\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0439\u0442\u0435 ",Object(n.jsx)("kbd",{className:"text-info",children:"Ctrl"})," \u0434\u043b\u044f \u0432\u044b\u0431\u043e\u0440\u0430 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432"]}),onChange:function(e){a(Object(j.a)(Object(j.a)({},t),{},{fields:me(e)}))}})]})]})}function he(e){var t=e.widget,c=e.tags,a=e.updateWidget,r=[];c&&(r=c.map((function(e){return e.code})));return Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsxs)("div",{className:"d-flex",children:[Object(n.jsx)("h6",{children:"\u0413\u0440\u0430\u0444\u0438\u043a"}),Object(n.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-danger ml-auto",onClick:e.deleteWidget,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]}),Object(n.jsxs)("form",{children:[Object(n.jsx)(ee,{titel:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",id:"title",placeholder:"...",value:t.title,onChange:function(e){a(Object(j.a)(Object(j.a)({},t),{},{title:e.target.value}))}}),Object(n.jsx)(te,{titel:"\u041f\u043e\u0440\u044f\u0434\u043e\u043a \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f",id:"order",placeholder:"...",value:t.order,onChange:function(e){a(Object(j.a)(Object(j.a)({},t),{},{order:e.target.value}))}}),Object(n.jsx)(te,{titel:"\u0428\u0438\u0440\u0438\u043d\u0430",id:"width",placeholder:"...",value:t.width,min:1,max:4,onChange:function(e){a(Object(j.a)(Object(j.a)({},t),{},{width:e.target.value}))}}),Object(n.jsx)(ne,{titel:"\u0422\u0435\u0433\u0438",id:"tags",placeholder:"...",value:t.tags,options:r,comment:Object(n.jsxs)("span",{className:"m-0 p-0 d-block mt-1",children:["\u0423\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0439\u0442\u0435 ",Object(n.jsx)("kbd",{className:"text-info",children:"Ctrl"})," \u0434\u043b\u044f \u0432\u044b\u0431\u043e\u0440\u0430 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432"]}),onChange:function(e){a(Object(j.a)(Object(j.a)({},t),{},{tags:me(e)}))}}),Object(n.jsx)(ae,{titel:"\u041b\u0435\u0433\u0435\u043d\u0434\u0430",id:"legend",checked:t.legend,onChange:function(e){a(Object(j.a)(Object(j.a)({},t),{},{legend:e.target.checked}))}}),Object(n.jsx)(ae,{titel:"\u041f\u0430\u043d\u0435\u043b\u044c \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u043e\u0432",id:"toolbar",checked:t.toolbar,onChange:function(e){a(Object(j.a)(Object(j.a)({},t),{},{toolbar:e.target.checked}))}})]})]})}function ue(e){var t=e.widget,c=e.tags,a=e.updateWidget,r=[];c&&(r=c.map((function(e){return e.code})));return Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsxs)("div",{className:"d-flex",children:[Object(n.jsx)("h6",{children:"\u0418\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440"}),Object(n.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-danger ml-auto",onClick:e.deleteWidget,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]}),Object(n.jsxs)("form",{children:[Object(n.jsx)(ee,{titel:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",id:"title",placeholder:"...",value:t.title,onChange:function(e){a(Object(j.a)(Object(j.a)({},t),{},{title:e.target.value}))}}),Object(n.jsx)(te,{titel:"\u041f\u043e\u0440\u044f\u0434\u043e\u043a \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f",id:"order",placeholder:"...",value:t.order,onChange:function(e){a(Object(j.a)(Object(j.a)({},t),{},{order:e.target.value}))}}),Object(n.jsx)(te,{titel:"\u0428\u0438\u0440\u0438\u043d\u0430",id:"width",placeholder:"...",value:t.width,min:1,max:4,onChange:function(e){a(Object(j.a)(Object(j.a)({},t),{},{width:e.target.value}))}}),Object(n.jsx)(ce,{titel:"\u0422\u0435\u0433",id:"tags",placeholder:"...",value:t.tags[0],options:r,onChange:function(e){a(Object(j.a)(Object(j.a)({},t),{},{tags:me(e)}))}}),Object(n.jsx)(ee,{titel:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0435\u043a\u0441\u0442 \u0441\u043b\u0435\u0432\u0430",id:"addTextLeft",placeholder:"...",value:t.addTextLeft,onChange:function(e){a(Object(j.a)(Object(j.a)({},t),{},{addTextLeft:e.target.value}))}}),Object(n.jsx)(ee,{titel:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0435\u043a\u0441\u0442 \u0441\u043f\u0440\u0430\u0432\u0430",id:"addTextRight",placeholder:"...",value:t.addTextRight,onChange:function(e){a(Object(j.a)(Object(j.a)({},t),{},{addTextRight:e.target.value}))}})]})]})}function me(e){for(var t=e.target.options,c=[],n=0,a=t.length;n<a;n++)t[n].selected&&c.push(t[n].value);return c}var xe={type:"table",width:4,title:"\u041d\u043e\u0432\u0430\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430",tags:[],fields:[]},pe={type:"graph",width:4,title:"\u041d\u043e\u0432\u044b\u0439 \u0433\u0440\u0430\u0444\u0438\u043a",tags:[],legend:!1,toolbar:!0},Oe={type:"indicator",width:1,title:"\u041d\u043e\u0432\u044b\u0439 \u0438\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440",tags:[]};function ge(){return Object(n.jsx)(s.a.Fragment,{children:Object(n.jsx)("div",{className:"bg-color-dark-gray text-secondary content-height",children:Object(n.jsxs)("div",{className:"container mt-5 text-center",children:[Object(n.jsx)("h1",{children:"Error 404"}),Object(n.jsx)("h3",{children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"})]})})})}var fe="http://bfcloud.space";function ve(){var e=Object(d.g)().id,t=s.a.useState({}),c=Object(i.a)(t,2),r=c[0],l=c[1];function o(t){l(t),function(e,t,c){ye.apply(this,arguments)}(e,t)}return Object(a.useEffect)((function(){!function(e,t){Ne.apply(this,arguments)}(e,(function(e){l(w(e.template))}))}),[]),Object(n.jsx)(s.a.Fragment,{children:Object(n.jsx)("div",{className:"bg-color-dark-gray text-secondary h-100",children:Object(n.jsxs)("div",{className:"row m-0 p-0",children:[Object(n.jsx)(k,{deviceId:e}),Object(n.jsx)("div",{className:"col-10 m-0 p-0",children:Object(n.jsx)("div",{className:"content-height p-3",children:Object(n.jsxs)(d.d,{children:[Object(n.jsx)(d.b,{exact:!0,path:"/device/".concat(e,"/overview/"),component:function(){return Object(n.jsx)(X,{device_id:e,widgetsTemplate:r})}}),Object(n.jsx)(d.b,{exact:!0,path:"/device/".concat(e,"/settings/"),component:function(){return Object(n.jsx)(Z,{device_id:e})}}),Object(n.jsx)(d.b,{exact:!0,path:"/device/".concat(e,"/events/"),component:function(){return Object(n.jsx)(K,{device_id:e})}}),Object(n.jsx)(d.b,{exact:!0,path:"/device/".concat(e,"/graphs/"),component:function(){return Object(n.jsx)(Y,{device_id:e})}}),Object(n.jsx)(d.b,{exact:!0,path:"/device/".concat(e,"/admin/config/"),component:function(){return Object(n.jsx)($,{device_id:e})}}),Object(n.jsx)(d.b,{exact:!0,path:"/device/".concat(e,"/admin/widgets/"),component:function(){return Object(n.jsx)(se,{device_id:e,updateWidgetsTemplate:o,widgetsTemplate:r})}}),Object(n.jsx)(d.b,{component:ge})]})})})]})})})}function Ne(){return(Ne=Object(m.a)(u.a.mark((function e(t,c){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.get(fe+"/widgets/template/",{params:{id:t}});case 2:n=e.sent,c(Object(j.a)({},n.data));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ye(){return(ye=Object(m.a)(u.a.mark((function e(t,c,n){var a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={template:c},e.next=3,f.post(fe+"/widgets/template/",a,{params:{id:t}});case 3:s=e.sent,n&&n(Object(j.a)({},s.data));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(){return Object(n.jsx)("div",{className:"col-2 m-0 p-0",children:Object(n.jsx)("div",{className:"bg-dark bg-color-gray p-2 h-100",children:Object(n.jsx)("div",{className:"p-1",children:Object(n.jsxs)("div",{className:"nav flex-column nav-pills",style:{overflow:"hidden"},id:"v-pills-tab",role:"tablist","aria-orientation":"vertical",children:[Object(n.jsx)(o.c,{className:"nav-link text-light btn",style:{outline:"none",boxShadow:"none"},activeClassName:"bg-dark",to:"/company/overview/",children:Object(n.jsxs)("div",{className:"d-inline-flex w-100 justify-content-center justify-content-lg-start",children:[Object(n.jsx)("i",{className:"fas fa-home",style:{fontSize:"1.3em"}}),Object(n.jsx)("span",{className:"pl-3 d-none d-lg-inline",children:"\u041e\u0431\u0437\u043e\u0440"})]})}),Object(n.jsx)(o.c,{className:"nav-link text-light btn",style:{outline:"none",boxShadow:"none"},activeClassName:"bg-dark",to:"/company/facilities/",children:Object(n.jsxs)("div",{className:"d-inline-flex w-100 justify-content-center justify-content-lg-start",children:[Object(n.jsx)("i",{className:"fas fa-city",style:{fontSize:"1.3em"}}),Object(n.jsx)("span",{className:"pl-3 d-none d-lg-inline",children:"\u041e\u0431\u044a\u0435\u043a\u0442\u044b"})]})}),Object(n.jsx)(o.c,{className:"nav-link text-light btn",style:{outline:"none",boxShadow:"none"},activeClassName:"bg-dark",to:"/company/employers/",children:Object(n.jsxs)("div",{className:"d-inline-flex w-100 justify-content-center justify-content-lg-start",children:[Object(n.jsx)("i",{className:"fas fa-users",style:{fontSize:"1.3em"}}),Object(n.jsx)("span",{className:"pl-3 d-none d-lg-inline",children:"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0438"})]})}),Object(n.jsx)(o.c,{className:"nav-link text-light btn",style:{outline:"none",boxShadow:"none"},activeClassName:"bg-dark",to:"/company/profile/",children:Object(n.jsxs)("div",{className:"d-inline-flex w-100 justify-content-center justify-content-lg-start",children:[Object(n.jsx)("i",{className:"fas fa-chalkboard-teacher",style:{fontSize:"1.3em"}}),Object(n.jsx)("span",{className:"pl-3 d-none d-lg-inline",children:"\u041a\u0430\u0431\u0438\u043d\u0435\u0442"})]})})]})})})})}function ke(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text-light",c=new Date(e),a=new Date;if(c>(a=a.setDate(a.getDate()-1))){var s=new Intl.DateTimeFormat([],{hour:"2-digit",minute:"2-digit"});return Object(n.jsx)("span",{className:t,children:s.format(c)})}var r=new Intl.DateTimeFormat([],{month:"short",day:"numeric"});return Object(n.jsx)("span",{className:t,children:r.format(c)})}var Ce=function(e){var t=s.a.useState({}),c=Object(i.a)(t,2),r=c[0],l=c[1],d=e.device;function b(){f.get("http://bfcloud.space/device/parameters/",{params:{id:d.id}}).then((function(e){if(e){var t=e.data;l(Object(j.a)({},t))}}))}return Object(a.useEffect)((function(){b();var e=setInterval(b,5e3);return function(){clearInterval(e)}}),[]),Object(n.jsx)(s.a.Fragment,{children:Object(n.jsx)(o.b,{className:"nav-link p-0 m-0",to:"/device/".concat(d.id,"/overview/"),children:Object(n.jsxs)("div",{className:"border border-secondary rounded p-2 h-100 bg-dark text-light card-hover",style:{overflow:"hidden"},children:[Object(n.jsx)("h6",{className:"text-nowrap",children:d.name}),Object(n.jsx)("div",{className:"p-0 m-0 small w-100",children:Object(n.jsx)("table",{className:"table table-sm p-0 m-0 table-dark text-light w-100",children:Object(n.jsxs)("tbody",{children:[Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:" \u0421\u0432\u044f\u0437\u044c: "}),Object(n.jsxs)("td",{className:"text-right",children:[" ",r.is_online?Object(n.jsx)("span",{className:"text-light",children:"\u041e\u041a"}):Object(n.jsx)("span",{className:"badge badge-pill badge-danger text-dark",style:{fontSize:"0.85em"},children:"\u041d\u0415\u0422"})]})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:"  \u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u043e: "}),Object(n.jsxs)("td",{className:"text-right",children:[" ",r.last_update?ke(r.last_update,r.is_online?null:"text-warning"):Object(n.jsx)("span",{className:"text-secondary",children:"\u043d\u0438\u043a\u043e\u0433\u0434\u0430"})]})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:"   \u0410\u0432\u0430\u0440\u0438\u0438: "}),Object(n.jsx)("td",{className:"text-right",children:" \u041d\u0435\u0442  "})]})]})})})]})})})};var Se=function(e){var t,c=e.facilityInfo,a=c.devices;return Object(n.jsx)(s.a.Fragment,{children:Object(n.jsxs)("div",{className:"card bg-dark text-light shadow-sm p-0 m-0",children:[Object(n.jsx)("h6",{className:"px-2 pt-2 pb-0 m-0",children:c.name}),Object(n.jsx)("div",{className:"container-fluid h-100 p-1 m-0 row",children:a.length>0?(t=a,t.map((function(e,t){return Object(n.jsx)("div",{className:"col-lg-4 col-md-6 col-sm-12 p-1 m-0 h-100",children:Object(n.jsx)(Ce,{device:e,index:t})},e.id)}))):Object(n.jsx)("p",{className:"text-secondary p-1",children:"\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432 \u043d\u0435\u0442 ..."})})]})})},_e="http://bfcloud.space";function Fe(){var e=Object(a.useState)({}),t=Object(i.a)(e,2),c=t[0],r=t[1],l=s.a.useState(!0),o=Object(i.a)(l,2),d=o[0],j=o[1];return Object(a.useEffect)((function(){!function(e){Ie.apply(this,arguments)}((function(e){r(e),j(!1)}))}),[]),Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsxs)("h3",{className:"px-3 pt-3 pb-0",children:["\u041f\u0440\u0435\u0434\u043f\u0440\u0438\u044f\u0442\u0438\u0435 ",Object(n.jsx)("b",{children:d?null:c.company.name})]}),Object(n.jsx)("div",{className:"container-fluid py-0 px-2 m-0 row",children:d?Object(n.jsx)(E,{}):Object(n.jsx)(s.a.Fragment,{children:c.facilities.map((function(e,t){return Object(n.jsx)("div",{className:"container-fluid px-2 py-0 mx-0 my-2 col-xl-6",children:Object(n.jsx)(Se,{facilityInfo:e,index:t})},e.id)}))})})]})}function Ie(){return(Ie=Object(m.a)(u.a.mark((function e(t){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.get(_e+"/company/info/");case 2:c=e.sent,t(Object(j.a)({},c.data));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Te(){return Object(n.jsx)(s.a.Fragment,{children:Object(n.jsxs)("div",{className:"p-3",children:[Object(n.jsx)("h3",{children:"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0438 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438"}),Object(n.jsx)("p",{children:"\u0420\u0430\u0437\u0434\u0435\u043b \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u044c\u0441\u044f \u0432 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435 ... "})]})})}function We(){return Object(n.jsx)(s.a.Fragment,{children:Object(n.jsxs)("div",{className:"p-3",children:[Object(n.jsx)("h3",{children:"\u041e\u0431\u0437\u043e\u0440 \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438"}),Object(n.jsx)("p",{children:"\u0420\u0430\u0437\u0434\u0435\u043b \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u044c\u0441\u044f \u0432 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435 ... "})]})})}function Le(){return Object(n.jsx)(s.a.Fragment,{children:Object(n.jsxs)("div",{className:"p-3",children:[Object(n.jsx)("h3",{children:"\u041a\u0430\u0431\u0438\u043d\u0435\u0442"}),Object(n.jsx)("p",{children:"\u0420\u0430\u0437\u0434\u0435\u043b \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u044c\u0441\u044f \u0432 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435 ... "})]})})}function De(){return Object(n.jsx)(s.a.Fragment,{children:Object(n.jsx)("div",{className:"bg-color-dark-gray text-secondary h-100",children:Object(n.jsxs)("div",{className:"row m-0 p-0",children:[Object(n.jsx)(we,{}),Object(n.jsx)("div",{className:"col-10 m-0 p-0",children:Object(n.jsx)("div",{className:"content-height",children:Object(n.jsxs)(d.d,{children:[Object(n.jsx)(d.b,{exact:!0,path:"/company",component:Fe}),Object(n.jsx)(d.b,{exact:!0,path:"/company/overview",component:Fe}),Object(n.jsx)(d.b,{exact:!0,path:"/company/facilities",component:We}),Object(n.jsx)(d.b,{exact:!0,path:"/company/employers",component:Te}),Object(n.jsx)(d.b,{exact:!0,path:"/company/profile",component:Le}),Object(n.jsx)(d.b,{component:ge})]})})})]})})})}var ze=c(24),Ee=c(16),Ae=c(26),Re=c(25),Be=function(e){Object(Ae.a)(c,e);var t=Object(Re.a)(c);function c(e){var n;return Object(x.a)(this,c),(n=t.call(this,e)).state={username:"",password:""},n.handleChange=n.handleChange.bind(Object(Ee.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(Ee.a)(n)),n}return Object(p.a)(c,[{key:"handleChange",value:function(e){this.setState(Object(ze.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();v.login(this.state.username,this.state.password,(function(){t.props.history.push("/company/overview/")}))}},{key:"render",value:function(){return Object(n.jsx)("div",{className:"bg-color-dark-gray text-secondary content-height",children:Object(n.jsxs)("div",{className:"container card p-3 mt-5 bg-dark",style:{maxWidth:"500px"},children:[Object(n.jsx)("h2",{children:"\u0412\u0445\u043e\u0434"}),Object(n.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"username",children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c:"}),Object(n.jsx)("input",{name:"username",type:"text",className:"form-control bg-secondary border-secondary text-light",id:"username",value:this.state.username,onChange:this.handleChange})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"pwd",children:"\u041f\u0430\u0440\u043e\u043b\u044c:"}),Object(n.jsx)("input",{name:"password",type:"password",className:"form-control bg-secondary border-secondary text-light",id:"pwd",value:this.state.password,onChange:this.handleChange})]}),Object(n.jsx)("button",{type:"submit",className:"btn btn-outline-primary",children:"\u0412\u043e\u0439\u0442\u0438"}),Object(n.jsxs)("div",{className:"pt-3",children:[Object(n.jsx)("span",{className:"pr-2 text-secondary",children:"\u0415\u0449\u0435 \u043d\u0435 \u0437\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"}),Object(n.jsx)(o.b,{className:"",to:"/user/registration/",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})]})]})]})})}}]),c}(a.Component),Ue=function(e){Object(Ae.a)(c,e);var t=Object(Re.a)(c);function c(e){var n;return Object(x.a)(this,c),(n=t.call(this,e)).state={username:"",password:"",email:"",errors:{username:null,email:null,password:null}},n.handleChange=n.handleChange.bind(Object(Ee.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(Ee.a)(n)),n}return Object(p.a)(c,[{key:"handleChange",value:function(e){this.setState(Object(ze.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(){var e=Object(m.a)(u.a.mark((function e(t){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,f.post("/user/create/",{username:this.state.username,email:this.state.email,password:this.state.password});case 4:return c=e.sent,e.abrupt("return",c);case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0.stack),this.setState({errors:e.t0.response.data});case 12:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(n.jsx)("div",{className:"bg-color-dark-gray text-secondary content-height",children:Object(n.jsxs)("div",{className:"container card p-3 mt-5 bg-dark",style:{maxWidth:"500px"},children:[Object(n.jsx)("h2",{children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(n.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"username",children:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:"}),Object(n.jsx)("input",{name:"username",type:"text",className:"form-control bg-secondary border-secondary text-light",id:"username",value:this.state.username,onChange:this.handleChange}),this.state.errors.username?Object(n.jsx)("span",{className:"text-danger",children:this.state.errors.username}):null]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"mail",children:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430:"}),Object(n.jsx)("input",{name:"email",type:"email",className:"form-control bg-secondary border-secondary text-light",id:"mail",value:this.state.email,onChange:this.handleChange}),this.state.errors.email?Object(n.jsx)("span",{className:"text-danger",children:this.state.errors.email}):null]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"pwd",children:"\u041f\u0430\u0440\u043e\u043b\u044c:"}),Object(n.jsx)("input",{name:"password",type:"password",className:"form-control bg-secondary border-secondary text-light",id:"pwd",value:this.state.password,onChange:this.handleChange}),this.state.errors.password?Object(n.jsx)("span",{className:"text-danger",children:this.state.errors.password}):null]}),Object(n.jsx)("button",{type:"submit",className:"btn btn-outline-primary",children:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c"}),Object(n.jsxs)("div",{className:"pt-3",children:[Object(n.jsx)("span",{className:"pr-2 text-secondary",children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"}),Object(n.jsx)(o.b,{className:"",to:"/user/login/",children:"\u0412\u0445\u043e\u0434"})]})]})]})})}}]),c}(a.Component);function Pe(e){return Object(n.jsx)(s.a.Fragment,{children:Object(n.jsx)("div",{className:"bg-color-dark-gray text-secondary content-height",children:Object(n.jsxs)("div",{className:"container card bg-dark shadow-sm my-4 pt-4",children:[Object(n.jsx)("h2",{children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),Object(n.jsx)("div",{className:"row my-3",children:Object(n.jsx)("div",{className:"col-lg-6",children:Object(n.jsx)("table",{className:"table text-light tadle-dark ",children:Object(n.jsxs)("tbody",{children:[Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:"border-secondary",children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c:"}),Object(n.jsx)("td",{className:"border-secondary",children:Object(n.jsx)("b",{children:e.userInfo.username})})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:"border-secondary",children:"\u0418\u043c\u044f:"}),Object(n.jsx)("td",{className:"border-secondary",children:Object(n.jsx)("b",{children:e.userInfo.first_name})})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:"border-secondary",children:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f:"}),Object(n.jsx)("td",{className:"border-secondary",children:Object(n.jsx)("b",{children:e.userInfo.last_name})})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:"border-secondary",children:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430:"}),Object(n.jsx)("td",{className:"border-secondary",children:Object(n.jsx)("b",{children:e.userInfo.email})})]})]})})})})]})})})}var Je=function(e){Object(Ae.a)(c,e);var t=Object(Re.a)(c);function c(e){var n;return Object(x.a)(this,c),(n=t.call(this,e)).handleLogout=n.handleLogout.bind(Object(Ee.a)(n)),n}return Object(p.a)(c,[{key:"handleLogout",value:function(){var e=this;v.logout((function(){e.props.history.push("/")}))}},{key:"render",value:function(){return Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(o.b,{className:"nav-link",to:"",onClick:this.handleLogout,children:"\u0412\u044b\u0439\u0442\u0438"})})}}]),c}(a.Component),Me=Object(d.h)(Je);function He(e){var t=e.authed,c=e.userInfo;return Object(n.jsxs)("nav",{className:"navbar navbar-expand-sm bg-dark navbar-dark bg-color-indigo header-height p-0 m-0",children:[Object(n.jsx)(o.b,{className:"navbar-brand header-height py-2 pl-3 pr-0 m-0",to:"/",children:"WebArm"}),Object(n.jsx)("button",{className:"navbar-toggler header-height border-0 m-0",style:{outline:"none",boxShadow:"none"},type:"button","data-toggle":"collapse","data-target":"#collapsibleNavbar",children:Object(n.jsx)("span",{className:"navbar-toggler-icon"})}),Object(n.jsxs)("div",{className:"collapse navbar-collapse bg-color-indigo",id:"collapsibleNavbar",style:{zIndex:"1"},children:[Object(n.jsx)("div",{className:"d-md-none border-top border-secondary"}),Object(n.jsx)("ul",{className:"navbar-nav px-3",children:t?Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(o.b,{className:"nav-link",to:"/company/overview",children:"\u041f\u0440\u0435\u0434\u043f\u0440\u0438\u044f\u0442\u0438\u0435"})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(o.b,{className:"nav-link",to:"/company/facilities",children:"\u041e\u0431\u044c\u0435\u043a\u0442\u044b"})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(o.b,{className:"nav-link",to:"/company/profile",children:"\u041a\u0430\u0431\u0438\u043d\u0435\u0442"})})]}):null}),Object(n.jsx)("ul",{className:"navbar-nav ml-auto px-3",children:t?Object(n.jsxs)(s.a.Fragment,{children:[c?Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(o.b,{className:"nav-link",to:"/user/profile",children:c.username})}),Object(n.jsx)("li",{className:"nav-item border-right border-secondary my-1 d-none d-sm-inline",children:" "})]}):null,Object(n.jsx)(Me,{})]}):Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(o.b,{className:"nav-link",to:"/user/login",children:"\u0412\u043e\u0439\u0442\u0438"})})})]})]})}var Ve=function(e){return Object(n.jsx)(s.a.Fragment,{children:Object(n.jsx)("div",{className:"bg-color-dark-gray text-light content-height",children:Object(n.jsxs)("div",{className:"container card mt-5 p-3 w-100",style:{background:"rgba(0,0,0,0.8)"},children:[Object(n.jsx)("div",{className:"text-center pt-4",children:Object(n.jsxs)("h3",{children:["\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c \u043d\u0430 ",Object(n.jsx)("b",{children:"BFCloud"})]})}),Object(n.jsx)("br",{}),Object(n.jsx)("div",{className:"text-center",children:Object(n.jsxs)("h5",{children:["\u0414\u043b\u044f \u043d\u0430\u0447\u0430\u043b\u0430 \u0440\u0430\u0431\u043e\u0442\u044b",Object(n.jsx)(o.b,{className:"px-2",to:"/user/login/",children:"\u0412\u043e\u0439\u0434\u0438\u0442\u0435"}),"\u0438\u043b\u0438",Object(n.jsx)(o.b,{className:"px-2",to:"/user/registration/",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0439\u0442\u0435\u0441\u044c"})]})}),Object(n.jsxs)("div",{className:"card-columns py-5",children:[Object(n.jsx)("div",{className:"card border-secondary",style:{background:"none"},children:Object(n.jsx)("div",{className:"card-body text-center",children:Object(n.jsx)("h6",{children:"\u0423\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0439 \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433\u0430 \u0438 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u043c\u044b\u0448\u043b\u0435\u043d\u043d\u044b\u043c\u0438 \u0438 IoT \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430\u043c\u0438"})})}),Object(n.jsx)("div",{className:"card border-secondary",style:{background:"none"},children:Object(n.jsx)("div",{className:"card-body text-center",children:Object(n.jsx)("h6",{children:"\u041a\u043e\u043d\u0442\u0440\u043e\u043b\u044c \u0430\u0432\u0430\u0440\u0438\u0439\u043d\u044b\u0445 \u0441\u043e\u0431\u044b\u0442\u0438\u0439 \u0438 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0435 \u043e \u0441\u043e\u0431\u044b\u0442\u0438\u044f\u0445 \u043d\u0430 \u043e\u0431\u044a\u0435\u043a\u0442\u0435 "})})}),Object(n.jsx)("div",{className:"card border-secondary",style:{background:"none"},children:Object(n.jsx)("div",{className:"card-body text-center",children:Object(n.jsx)("h6",{children:"\u041f\u0440\u043e\u0441\u0442\u043e\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043e\u043f\u0440\u043e\u0441\u0430 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432"})})}),Object(n.jsx)("div",{className:"card border-secondary",style:{background:"none"},children:Object(n.jsx)("div",{className:"card-body text-center",children:Object(n.jsx)("h6",{children:"\u041e\u0442\u043a\u0440\u044b\u0442\u044b\u0439 API \u0434\u043b\u044f \u0438\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u0438 \u0441 \u0441\u0442\u043e\u0440\u043e\u043d\u043d\u0438\u043c \u041f\u041e \u0438 IoT \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430\u043c\u0438"})})}),Object(n.jsx)("div",{className:"card border-secondary",style:{background:"none"},children:Object(n.jsx)("div",{className:"card-body text-center",children:Object(n.jsx)("h6",{children:"\u0415\u0434\u0438\u043d\u044b\u0439 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 \u0434\u043b\u044f \u041f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0445 \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440\u043e\u0432 \u0438 \u041c\u043e\u0431\u0438\u043b\u044c\u043d\u044b\u0445 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432 "})})}),Object(n.jsx)("div",{className:"card border-secondary",style:{background:"none"},children:Object(n.jsx)("div",{className:"card-body text-center",children:Object(n.jsxs)("h6",{children:[" \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u043e\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0434\u0435\u043c\u043e-\u0432\u0435\u0440\u0441\u0438\u0435\u0439 \u0441\u0435\u0440\u0432\u0438\u0441\u0430",Object(n.jsx)("a",{className:"px-2",href:"#",onClick:function(){v.login("admin","admin",(function(){e.history.push("/company/overview/")}))},children:"\u0414\u0435\u043c\u043e-\u0432\u0435\u0440\u0441\u0438\u044f: \u0411\u0423\u041c\u041f-14"})]})})})]})]})})})};function qe(){var e=Object(a.useState)(!0),t=Object(i.a)(e,2),c=t[0],r=t[1],l=Object(a.useState)(!0),j=Object(i.a)(l,2),b=j[0],h=j[1],u=Object(a.useState)(!1),m=Object(i.a)(u,2),x=m[0],p=m[1],O=Object(a.useState)({}),g=Object(i.a)(O,2),f=g[0],w=g[1],k=Object(y.b)();return Object(a.useEffect)((function(){v.checkAuthentication((function(){r(!1)})),v.onLogin=function(){p(!0)},v.onLogout=function(){p(!1)},v.onUserInfoReaded=function(e){w(e),h(!1)}}),[]),c||b?null:Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsx)("button",{className:"full-screen-button fas fa-expand ",onClick:k.enter}),Object(n.jsx)(y.a,{handle:k,children:Object(n.jsxs)(o.a,{children:[Object(n.jsx)(d.b,{exact:!0,path:"/",component:function(){return Object(n.jsx)("video",{autoplay:"autoplay",muted:!0,loop:"loop",id:"myVideo",children:Object(n.jsx)("source",{src:"Earth13426.mp4",type:"video/mp4"})})}}),Object(n.jsx)(He,{authed:x,userInfo:f}),Object(n.jsxs)(d.d,{children:[Object(n.jsx)(d.b,{exact:!0,path:"/",component:Ve}),Object(n.jsx)(d.b,{exact:!0,path:"/user/login",component:Be}),Object(n.jsx)(d.b,{exact:!0,path:"/user/registration",component:Ue}),Object(n.jsx)(N,{exact:!0,path:"/user/profile",component:function(){return Object(n.jsx)(Pe,{userInfo:f})}}),Object(n.jsx)(N,{path:"/company",component:De}),Object(n.jsx)(N,{path:"/device/:id",component:ve}),Object(n.jsx)(d.b,{component:ge})]})]})})]})}var Ge=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,128)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;c(e),n(e),a(e),s(e),r(e)}))};l.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(qe,{})}),document.getElementById("root")),Ge()},76:function(e,t,c){},77:function(e,t,c){}},[[126,1,2]]]);
//# sourceMappingURL=main.3243cc06.chunk.js.map